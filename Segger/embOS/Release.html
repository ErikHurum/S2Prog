<html>
<head>
<title>Release notes</title>
</head>

<style>
  H2, H3, H4 { color: blue }
  H1, H2, H3, H4, H5 { font-family: Arial, Helvetica, sans-serif;}
  PRE {  color: black;  margin-left: 2%; }
  BODY { color: black;  margin-left: 2%; font-family: Verdana, Arial, Helvetica, sans-serif; font-size=75%}
  table{ color: black;  font-family: Verdana; font-size=100%}
  .maintext {
	  font-size: 10px;
	  color: #000000;
	  margin-left: 20px;
	  margin-right: 20px;
  }
  h1.newsbox {
	  color: #FFFFFF;
	  font-weight: bold;
	  font-size: 13px;
	  padding-left: 10px;
	  background: #526194 no-repeat right;
	  border: thin solid #000000;
	  margin-right: 5px;
	  margin-left: 5px;
  }
  .heading2 {
	  color: #336699;
	  font-weight: bold;
	  font-size: 12px;
	  padding-left: 25px;
  }
</style>

<body bgcolor="#FFFFFF">

<h3>Release notes for embOS Version 3.60d for ARM7/9 and IAR compiler V4.42A</h3>
<!--  Modifiable information starts here ----------------------------------------->
      <ol class="maintext">
        <li><A HREF="#toolchain">Tool chain used for build</A> </li>
        <li><A HREF="#features">New features</A> </li>
        <li><A HREF="#improvements">Improvements</A> </li>
        <li><A HREF="#pcorr">Program corrections</A> </li>
        <li><A HREF="#problems">Known problems/limitations</A> </li>
        <li><A HREF="#history">Release history</A> </li>
        <li><A HREF="#misc">Miscellaneous</A> </li>
      </ol>
      <!-------------------------------------------------------------------------->
      <!-- TOOL CHAIN (Compiler) Information                                    -->
      <!-------------------------------------------------------------------------->
      <h1 class="newsbox"><a name="toolchain"></a>Tool chain used for build</h1>
      <p class="maintext">The following tools have been used:</p>
      <pre class="maintext">
Compiler:  IAR ICCARM  V4.42A
Assembler: IAR AARM    V4.42A
Librarian: IAR XAR     V1.03L
Workbench: IAR IARIDE  V4.7A
</pre>
      <!-------------------------------------------------------------------------->
      <!-- NEW FEATURES                                                         -->
      <!-------------------------------------------------------------------------->
      <h1 class="newsbox"><a name="features"></a>New features</h1>
      <h2 class="heading2">Version 3.60d</h2>
      <ol class="maintext">
        <li>BSP for TOSHIBA TMPA910 added.<br>
          embOS for ARM now comes with a start project for the new TPSHIBA TMPA910 ARM9 derivate.<br>
          The start project is prepared to run on the TOPAS910 eval board.
        </li>
      </ol>
      <h2 class="heading2">Version 3.60a1</h2>
      <ol class="maintext">
        <li>MMU and cache handling functions added<br>
          embOS for ARM now comes with functions to initialize the MMU and cache of ARM9 and ARM720 CPUs.<br>
          Functions to invalidate and clean the cache are provided also.
        </li>
      </ol>
      <h2 class="heading2">Version 3.60a</h2>
      <ol class="maintext">
        <li>New embOS sources V3.60a used<br>
          The new of embOS version 3.60a are described in the embOS generic manual and release notes.
        </li>
      </ol>
      <h2 class="heading2">Version 3.52a</h2>
      <ol class="maintext">
        <li>New library mode XR allows extremely compact applications<br>
          The new XR libraries may be used to build extremely compact applications to save space in RAM and ROM and speed up context switching time.<br>
          The XR embOS libraries are compiled with round robin scheduling disabled and task names disabled, which results in smaller data structures, smaller code size and faster context switching time.
        </li>
        <li>Sample projects now sorted into manufacturer specific folders<br>
          All sample projects and workspaces are now sorted into manufacturer and CPU specific subfolders.
        </li>
        <li>NXP LPC23xx CPU support<br>
          Start project and board support package for NXP LPC23xx CPUs added.
        </li>
        <li>NXP LPC3180 CPU support<br>
          Start project and board support package for NXP LPC3180 CPUs added.
        </li>
        <li>ST STR750 CPU support<br>
          Start project and board support package for ST STR750 CPUs added.<br>
          The start project is prepared to run on the ST STR750-EK eval board.
        </li>
        <li>Task switch time can be measured by application<br>
          embOS now comes with sample applications which allow accurate measurement of task switch time in a running application.<br>
        </li>
        <li>MMU and cache handling added for ARM926 CPUs<br>
          embOS now comes with a module to support MMU and caches for ARM 926CPUs.<br>
          The sample project for ATMEL AT91SAM9261 CPU uses this module.<br>
        </li>
        <li>Libraries for non interworking mode delivered with embOS<br>
          embOS now comes with libraries for ARM and thumb mode which were compiled with non interwork option.<br>
          These libraries may be used in projects without interworking and generate smaller faster code.<br>
          Previous versions of embOS were limited to use interworking option.
        </li>
        <li>Libraries for ARM9E and other ARM derivates with core 5 architecture delivered with embOS<br>
          embOS now comes with libraries for ARM 5 architecture.<br>
          Previous versions of embOS came with libraries for core 4 architecture only, which could be run on core 5 as well, but might have been less efficient.
        </li>
        <li>OS_INIT_SYS_LOCKS() implemented<br>
          May be used to call initialization code for thread safe system libraries when using IAR compiler V4.41A or newer.
        </li>
      </ol>
      <h2 class="heading2">Version 3.32d</h2>
      <ol class="maintext">
        <li>OS_Q_GetPtrTimed() implemented<br>
          New queue retrieval function which waits for a message with specified timeout.
        </li>
      </ol>
      <h2 class="heading2">Version 3.32c</h2>
      <ol class="maintext">
        <li>OS_EVENT_WaitTimed() implemented<br>
          New event object function to wait for an event with a timeout limit.
        </li>
      </ol>
      <h2 class="heading2">Version 3.32b</h2>
      <ol class="maintext">
        <li>Task context modified for debug builds<br>
          The number of task activations is now part of the task context in debug builds.<br>
          The number of activations are therefore displayed in the task list window of embOS plugin, when an embOS debug library is used.<br>
          Previous versions of embOS showed this information in profiling builds only.
        </li>
        <li>TI TMS470R1B1M supported<br>
          embOS now comes with a sample project for TI TMS470R1B1M CPU which runs on IAR TMS470R1B1M eval board.<br>
          The project is prepared for debugging with CSpy and J-Link in FLASH or RAM, or using CSpy simulator.
        </li>
      </ol>
      <h2 class="heading2">Version 3.32a2</h2>
      <ol class="maintext">
        <li>ATMEL AT91SAM9260 supported<br>
          embOS now comes with a sample project for ATMEL AT91SAM9260 CPU which runs on AT91SAM9260-EK eval board.<br>
          The project is prepared for debugging with CSpy and J-Link in SDRAM, or using CSpy simulator.
        </li>
      </ol>
      <h2 class="heading2">Version 3.32a</h2>
      <ol class="maintext">
        <li>A parameter may be passed to a task function<br>
          Using the new embOS functions OS_CREATETASK_EX() or OS_CreateTasEx() allows to pass a void pointer as parameter to a task.
        </li>
        <li>ATMEL AT91SAM9261 supported<br>
          embOS now comes with a sample project for ATMEL AT91SAM9261 CPUs which runs on AT91SAM9261-EK eval board.<br>
          The project is prepared for debugging with CSpy and J-Link in RAM, or using CSpy simulator.
        </li>
      </ol>
      <h2 class="heading2">Version 3.32</h2>
      <ol class="maintext">
        <li>Event objects introduced<br>
          Event objects are standalone objects which are not assigned to a specific task.<br>
          Event objects may be used to synchronize one or multiple task to a specific event.<br>
          Events can be triggered from a task, a timer, or an interrupt handler.
        </li>
        <li>embOS stack check modified<br>
          The internal stack check of embOS, used in stack check or debug builds, was modified to avoid some problems with IARs stack check plugin for CSPy.<br>
          Now embOS uses the same character for stack check as the stck check plugin from IAR.<br>
          This ensures, IARs stack check plugin will show correct level of CSTACK and IRQ_STACK usage.<br>
        </li>
        <li>embOS IAR kernel awareness plugin updated<br>
          Modified stack check version of embOS required a modified embOS plugin for IAR CSpy.<br>
          The new Plugin, version 1.00e, can handle both versions of embOS stack check methods, the previous version, and the new one, which uses a different stack check character.<br>
          The previous embOS Plugin now does not show correct values for task stack usage.<br>
          To replace the older plugin, please follow the instructions in the embOS plugin documentation. 
        </li>
      </ol>
      <h2 class="heading2">Version 3.30d1</h2>
      <ol class="maintext">
        <li>Analog Devices ADuC702x series supported<br>
          embOS now comes with a sample project for Analog Devices ADuC702x series CPUs which runs on ADuC702x eval boards.<br>
          The project is prepared for debugging with CSpy and J-Link in RAM and FLASH, or using CSpy simulator.
        </li>
        <li>OKI ML69620x series supported<br>
          embOS now comes with a sample project for OKI ML69Q6203 series CPU which runs on ML69Q6203 eval board.<br>
          The project is prepared for debugging with CSpy and J-Link in RAM, or using CSpy simulator.
        </li>
      </ol>
      <h2 class="heading2">Version 3.30a</h2>
      <ol class="maintext">
        <li>ATMEL AT91SAM7A3 supported<br>
          embOS now comes with a sample project for ATMEL AT91SAM7A3 series CPUs which runs on AT91SAM7A3-EK eval board.<br>
          The project is prepared for debugging with J-Link in RAM and ROM.
        </li>
        <li>ATMEL AT91SAM7X supported<br>
          embOS now comes with a sample project for ATMEL AT91SAM7X256 series CPUs which runs on AT91SAM7X-EK eval board.<br>
          The project is prepared for debugging with J-Link in RAM and ROM.
        </li>
        <li>embOS internal time handling modified to allow long delays<br>
          For 8- and 16-bit CPUs the maximum range for delays and timer periods is limited to 32767 embOS timer ticks, because time comparison ist done by integer calculation.<br>
          By recompiling sources with datatype OS_TIME defined as signed long, longer delays and timer periods up to 2147483647 ticks can be realized.<br>
          The embOS libraries of object versions for 8- and 16-bit CPUs are still delivered with the limitation to 32767 timer ticks.
        </li>
      </ol>
      <h2 class="heading2">Version 3.28q</h2>
      <ol class="maintext">
        <li>ATMEL AT91RM9200 series supported<br>
          embOS now comes with a sample project for ATMEL AT91RM9200 series CPUs which runs on AT91RM9200-EK evalboard.<br>
          The project is prepared for debugging with J-Link in RAM and ROM.
        </li>
      </ol>
      <h2 class="heading2">Version 3.28p</h2>
      <ol class="maintext">
        <li>New error handling for version without round robin scheduling<br>
          In debug versions of embOS, OS_Error() is called with error code OS_ERR_TASK_PRIORITY, if a task is created with a priority which is already assigned to an other task.<br>
          OS_Error() is also called with the same errorcode, if a task priority is assigned by call of OS_SetPriority() and the new priority is already assigned to an other task.<br>
          Round robin switching can be disabled by recompiling sources with OS_RR_SUPPORTED defined as 0.
        </li>
      </ol>
      <h2 class="heading2">Version 3.28n</h2>
      <ol class="maintext">
        <li>ATMEL AT91SAM7S256 series supported<br>
          embOS now comes with a sample project for ATMEL AT91SAM7S256 series CPUs which runs on AT91SAM7S-EK evalboard.<br>
          The project is prepared for debugging with J-Link.
        </li>
      </ol>
      <h2 class="heading2">Version 3.28m3</h2>
      <ol class="maintext">
        <li>ST STR91x series supported<br>
          embOS now comes with a sample project for STR91x series CPUs which runs on MB910 evalboard.<br>
          The project is prepared for debugging with J-Link or CSpy simulator.
        </li>
      </ol>
      <h2 class="heading2">Version 3.28m2</h2>
      <ol class="maintext">
        <li>OKI ML67Q4050/ML67Q4060 series supported<br>
          embOS now comes with a sample project for OKI ML67Q4050/ML67Q4060 which runs on AME-51-AS evalboard.<br>
          The project is prepared for debugging with J-Link or CSpy simulator.
        </li>
      </ol>
      <h2 class="heading2">Version 3.28l</h2>
      <ol class="maintext">
        <li>OS_SignalCSemaMax()<br>
          New counting semaphore handling function which specifies a maximum count value.<br>
          This allows counting semaphores used as binary semaphores.
        </li>
        <li>Libraries for "Full" library configuration.<br>
          embOS now comes with libraries for "Full" library configuration option. Libraries for "Normal" library configuration are also still delivered with embOS.
        </li>
      </ol>
      <h2 class="heading2">Version 3.28k</h2>
      <ol class="maintext">
        <li>Thread safe system libray support added.<br>
          To enable thread safe usage of heapmanagement in C++ applications, as well as file operations and usage of normal heapmangement functions, support of generation and usage of thread safe IAR system libraries was added to embOS.
        </li>
        <li>embOS awareness Plugin for IAR CSpy<br>
          A new plugin for IAR CSPy which shows information about tasks, system variables, mailboxes, timers and semaphores is delivered with embOS.
        </li>
      </ol>
      <h2 class="heading2">Version 3.28i</h2>
      <ol class="maintext">
        <li>OS_DeleteRSema()<br>
          New resource semaphore handling function allows to delete resource semaphores during runtime.<br>
        </li>
        <li>Board support packages for Sharp CPUs<br>
          Ready to go start projects for LogicPD card engines with Sharp CPUs are now delivered with embOS.<br>
          Support for LH79520 added<br>
          Support for LH79524 added<br>
          Support for LH7A400 added<br>
          Support for LH7A40a added<br>
        </li>
      </ol>
      <h2 class="heading2">Version 3.28h</h2>
      <ol class="maintext">
        <li>Additional error checks in debug builds of embOS<br>
          OS_CreateRSema() now generates an error, when the addressed resource semaphore was already created before.<br>
          OS_CreateCSema() now generates an error, when the addressed counting semaphore was already created before.<br>
          OS_CreateMB() now generates an error, when the mailbox was already created before.<br>
          OS_CreateTimer() now generates an error, when the software timer was already created before.<br>
          OS_MEMF_Create() now generates an error, when the addressed fixed size memory pool was already created before.
        </li>
        <li>Simulation macros for CSpy simulator modified<br>
          The sample interrupt simulation macros for CSpy simulator were updated to new syntax used in latest IAR CSpy version 4.30.<br>
          In configurations which are setup for CSpy simulator, these new macros are selected per default.<br>
          When using IAR compiler and CSpy version 4.20A, the CSpy simulation macros named "*_V420A.mac" have to be used to enable interrupt simulation for embOS.
        </li>
      </ol>
      <h2 class="heading2">Version 3.28g</h2>
      <ol class="maintext">
        <li>OS_GetSuspendCnt()<br>
          New info function to examine suspension state and count of a task.
        </li>
      </ol>
      <h2 class="heading2">Version 3.26</h2>
      <ol class="maintext">
        <li>OS_Terminate() modified<br>
          Tasks may be terminated anytime, regardless of task state.<br>
          All resources claimed by the terminated task are automatically released.
        </li>
      </ol>
      <h2 class="heading2">Version 3.24</h2>
      <ol class="maintext">
        <li>STMircorelectronics STR71x CPU support<br>
          Start project and board support package for ST STR71x CPUs added.
        </li>
        <li>Philips LPC2xxx CPU support<br>
          start project and board support package for Philips LPC2x CPUs added.
        </li>
        <li>Vectored interrupt controller support<br>
          Additional functions added to install interrupt handlers for ARM CPUs with vectored interrupt controller.
        </li>
      </ol>
      <h2 class="heading2">Version 3.22a</h2>
      <ol class="maintext">
        <li>OS_PutMailFront() / OS_PutMailFront1()<br>
          New mailbox functions to enable LIFO behavior of mailboxes.
        </li>
        <li>OS_PutMailFrontCond() / OS_PutMailFrontCond1()<br>
          New conditional mailbox functions to enable LIFO behavior of mailboxes.
        </li>
      </ol>
      <h2 class="heading2">Version 3.20</h2>
      <ol class="maintext">
        <li>OS_Suspend() / OS_Resume() implemented
        <br>
        New functions to suspend and resume tasks unconditionally.</li>
        <li>Fixed size memory blocks implemeted
        <br>
        New functions to allocate fixed size memory blocks from embOS.</li>
        <li>Dynamic memory allocation supported by embOS
        <br>
        Thread safe dynamic memory allocation functions implemented.</li>
      </ol>
      <h2 class="heading2">Version 3.10q</h2>
      <ol class="maintext">
        <li>New IAR Workbench version 3.40
        <br>
        New IAR Embedded Workbench and compiler version supported.</li>
      </ol>
      <h2 class="heading2">Version 3.10n</h2>
      <ol class="maintext">
        <li>Interworking
        <br>
        Because IAR workbench default mode is interworking now, we also have changed 
        compiler options for embOS libraries to interworking mode.</li>
      </ol>
      <h2 class="heading2">Version 3.10k</h2>
      <ol class="maintext">
        <li>OS_GetMailTimed()
        <br>
        New mailbox retreiving function with timeout.</li>
      </ol>
      <h2 class="heading2">Version 3.10d</h2>
      <ol class="maintext">
        <li>OS_GetpCurrentTimer()
        <br>
        New info routine. May be used in timer callback routines to examine which 
        timer expired.</li>
        <li>OS_GetpCurrentTask()
        <br>
        New info routine. May be used to examine current running task.</li>
      </ol>
      <h2 class="heading2">Version 3.10</h2>
      <ol class="maintext">
        <li>Data format for communication with embOSView modified
        <br>
        For terminal I/O in embOSView, the data farmat was changed. Therefore 
        embOSView V3.10 or later is required.</li>
        <li>OS_WaitSingleEvent()
        <br>
        Unmasked events remain unchanged when function returns.</li>
        <li>OS_WaitSingleEventTimed()
        <br>
        Unmasked events remain unchanged when function returns. Timeout for waiting 
        can be specified.</li>
      </ol>
      <h2 class="heading2">Version 3.08a</h2>
      <ol class="maintext">
        <li>Message Queue functionality enhanced
        <br>
        OS_Q_GetPtrCond() function enables conditional request of data from Queue 
        without task suspension.<br>
        OS_Q_GetMessageCnt() functions delivers number of messages in the queue.</li>
      </ol>
      <h2 class="heading2">Version 3.08</h2>
      <ol class="maintext">
        <li>Message Queues
        <br>
        Message queues enable intertask communication with messages of various 
        size.</li> 
      </ol>
      <h2 class="heading2">Version 3.06f</h2>
      <ol class="maintext">
        <li>OS_Use now returns a value
        <br>
        When using a resource semaphore with a call of OS_Use(), the actual usage 
        counter of the requested semaphore is returned as integer value. This 
        may be helpful for some applications and is a lot more efficient than 
        calling OS_Use() and then check the usage counter by calling OS_GetSemaValue().</li> 
      </ol>
      <h2 class="heading2">Version 3.06d1</h2>
      <ol class="maintext">
        All features of generic 3.06d kernel supported. </P> 
      </ol>
      <h2 class="heading2">Version 3.06</h2>
      <ol class="maintext">
        All features of generic 3.06 kernel supported. </P> 
      </ol>
      <!-------------------------------------------------------------------------->
      <!-- Improvements                                                         -->
      <!-------------------------------------------------------------------------->
      <h1 class="newsbox"><a name="improvements"></a>Improvements</h1>
      <h2 class="heading2">Version 3.52e</h2>
      <ol class="maintext">
        <li>BSP for ATMEL AT91SAM9260 optimized<br>
          The sample start project for AT91SAM9260 now initializes the MMU and caches to speed up the CPU.
        </li>
      </ol>
      <h2 class="heading2">Version 3.52a</h2>
      <ol class="maintext">
        <li>Scheduler optimized<br>
          The embOS scheduler was optimized to reduce task switching time and interrupt latencies.<br>
        </li>
        <li>OS_Yield() now writes an entry into the trace buffer<br>
          When using the debug library with trace capabilities, OS_Yield() writes an entry into the trace buffer which shows the function call and the calling task.<br>
          embOSView version 3.40d is required to show this entry.
        </li>
        <li>Queue management improved.<br>
          For some CPUs, the buffer start address for Queues has to be aligned.
          Now embOS automatically corrects the alignment, if required.
        </li>
        <li>Counting semaphores improved.<br>
          The counters of counting semaphores are now integer values.<br>
          Error handling is also improved. When a counting semaphore overflows, the embOS error handler OS_Error() is called in debug builds.
        </li>
        <li>Task switch time improved.<br>
          Scheduling optimized to improve task switch time.
        </li> 
        <li>Task switch time improved for task events.<br>
          Task event handling modified to improve task switch time for tasks waiting on events. 
        </li> 
        <li>Interrupt latency improved.<br>
          During task switch, the time period when interrupts are disabled is reduced.
        </li> 
        <li>embOS timer tick handler improved.<br>
          The standard timer tick handler run faster now. The embOS internal time variable is incremented by 1 on every timer tick.<br>
          When different increments are required, the new timer tick handler OS_HandleTick_Ex(), OS_TickHandler_Ex() or OS_HandleTickDI_Ex() have to be used by application.<br>
          Different inctrements may be configured by a call of OS_CONFIG().
        </li> 
        <li>Initialization for STR91x optimized.<br>
          The initialization for FLASH access and internal data RAM access is modified to allow faster access of data and program memory.<br>
          The Flash prefetch queue is used, the wait states for internal RAM access are set to 0.
        </li> 
        <li>Task switch to OS_Idle() modified.<br>
          The call of OS_Idle() from OS_ChangeTask can be overwritten (inhibited) by defining the macro OS_IDLE() which is norammly defined as OS_Idle().<br>
          This allows task switching via an exception for specific CPU/compiler versions.
        </li> 
        <li>Pointer comparison improved for fixed size memory pools (OS_MEMF module).<br>
          Some compiler produced wrong pointer comparison code in far memory model.<br>
          For specific CPU/compiler versions, the new OS_POINTER_TO_VALUE() function was inroduced to deliver correct results in pointer comparison.
        </li> 
      </ol>
      <h2 class="heading2">Version 3.32d</h2>
      <ol class="maintext">
        <li>Startup code and clock initialization for AT91SAM9261 modified.<br>
          The start project for embOS can now be run from external memory.
          Previous version did not initialize processor clock correctly if the application was loaded from external memory by ATMEL bootloader.
        </li> 
        <li>Startup code and clock initialization for AT91SAM9260 modified.<br>
          The start project for embOS can now be run from external memory.
          Previous version did not initialize processor clock correctly if the application was loaded from external memory by ATMEL bootloader.
        </li> 
      </ol>
      <h2 class="heading2">Version 3.28n</h2>
      <ol class="maintext">
        <li>embOS round-robin scheduling may be disabled.<br>
          Round-robin scheduling may be disabled by recompiling sources with OS_RR_SUPPORTED defined as 0.<br>
          This will save some bytes of RAM and ROM and may make sense for small CPUs.
        </li> 
      </ol>
      <h2 class="heading2">Version 3.28g</h2>
      <ol class="maintext">
        <li>embOS scheduling simplified<br>
          Task activation and deactivation on "waitable objects" as mailboxes, semaphores, events, fixed size memory blocks now all use the same scheduling method.<br>
          This modification saves ROM and RAM and makes scheduler easier to understand and to maintain.<br>
          Applications which accessed internal data structures of waitable objects directly have to be modified.
        </li> 
      </ol>
      <h2 class="heading2">Version 3.24</h2>
      <ol class="maintext">
        <li>Stack check performance increased<br>
        Stack check now runs much faster on 32- and 16-bit target CPUs.
        </li> 
      </ol>
      <h2 class="heading2">Version 3.10q</h2>
      <ol class="maintext">
        OS_CreateTask now initializes profiling variables. (Required if TCB is 
        used multiple) 
      </ol>
      <h2 class="heading2">Version 3.06f</h2>
      <ol class="maintext">
        None. 
      </ol>
      <h2 class="heading2">Version 3.06d1</h2>
      <ol class="maintext">
        Performance improved. 
      </ol>
      <h2 class="heading2">Version 3.06</h2>
      <ol class="maintext">
        First version. None. 
      </ol>
      <!-------------------------------------------------------------------------->
      <!-- PROGRAM CORRECTIONS                                                  -->
      <!-------------------------------------------------------------------------->
      <h1 class="newsbox"><a name="pcorr"></a>Program corrections</h1>
      <h2 class="heading2">Version 3.60a</h2>
      <ol class="maintext">
        <li>MMU initialization for ARM 926 corrected.<br>
          The MMU enable function called from __low_level_init() performed a cache flush which might have caused writing invalid data onto the stack which then caused a system crash.<br>
          The problem existed in all previous versions of embOS for ARM and is fixed with version 3.60a.
        </li>
      </ol>
      <h2 class="heading2">Version 3.52d</h2>
      <ol class="maintext">
        <li>Task switch corrected in ARM core 5 libraries<br>
          The task switch for ARM mode libraries and core type 5 did not work, the system crashed.<br>
          All libraries named os5tpa* were affected.<br>
          The libraries for thumb mode and all core type 4 worked as expected.<br>
          The problem existed in version 3.52a of embOS for ARM and IAR only and is fixed with version 3.52d.
        </li>
      </ol>
      <h2 class="heading2">Version 3.52a</h2>
      <ol class="maintext">
        <li>OS_Suspend() corrected<br>
          When using the debug library with trace capabilities, a call of OS_Suspend() wrote a wrong trace code into the trace buffer.<br>
          Instead of writing the code for task suspension, the code for task termination was written.<br>
          The function itself worked correctly, only the data written into the trace buffer was wrong.<br>
          The problem existed in all previous embOS versions and is fixed with version 3.40d.
        </li>
        <li>RAM Target for AT91M40xxx corrected.<br>
          The RAM target linker file was not correct for the EB40a board.
        </li>
        <li>OS_Unuse() corrected<br>
          OS_Unuse() must not be called from a task that does not claim the resource semaphore.<br>
          According to the documentation, the debug build of embOS should generate a call to OS_Error() if this fault happens.<br>
          All previous versions of embOS did not call OS_Error().
          Now, OS_Error() will be called in that situation with error code 156: OS_ERR_RESOURCE_OWNER().
        </li>
      </ol>
      <h2 class="heading2">Version 3.32l</h2>
      <ol class="maintext">
        <li>OS_EVENT_Delete() corrected<br>
          OS_EVENT_Delete() did not work correctly. OS_LeaveRegion() was called inside the function without calling OS_EnterRegion() bfore.<br>
          In debug builds of embOS, the error handler OS_Error() was called with error 151 (OS_ERR_LEAVEREGION_BEFORE_ENTERREGION).<br>
          In release builds the system was blocked because the underflow of region count inhibts all further task switches, or system crashes, because incrementing the region count the next time allows task switches instead of blocking them.
          The problem existed in all previous versions and is fixed with version 3.32l.
        </li>
      </ol>
      <h2 class="heading2">Version 3.32k</h2>
      <ol class="maintext">
        <li>Handler function _OS_OnTx() for serial communication to embOSView corrected.<br>
          The transmission handler for communication with embOSView might have sent incorrect data to embOSView, because internal control state was updated after sending the data.<br>
          The problem occured on a new embOS port for a specific CPU only and is fixed with version 3.32k.<br>
        </li>
      </ol>
      <h2 class="heading2">Version 3.32h</h2>
      <ol class="maintext">
        <li>OS_Error() was required in release build when resource semaphores were used.<br>
          When using release build libraries and resource semaphores, the embOS error handler OS_Error() was required and the file OS_Error.c had to be compiled and linked in a project.<br>
          The problem existed since version 3.28i of embOS and is fixed with version 3.32h.
        </li>
      </ol>
      <h2 class="heading2">Version 3.32e</h2>
      <ol class="maintext">
        <li>OS_GetMessageCnt() corrected.<br>
          The type of the retun value of OS_GetMessageCnt() was an unsigned integer in release builds, but an integer in debubg builds.<br>
          This was corrected to return an unsigned integer in all builds.<br>
          The problem existed in all previous versions of embOS end is fixed with version 3.32e.
        </li>
      </ol>
      <h2 class="heading2">Version 3.32a1</h2>
      <ol class="maintext">
        <li>Problem with "Full" library configuration fixed.<br>
          The libraries for "Full" library configuration of previous version can not be used in a project with "Full" library configuration, because they were compiled with settings for normal library configuration.<br>
          This problem is fixed with version 3.32a1 of embOS for ARM IAR.<br>
          embOS libraries for "Full" library configuration are not needed anymore. The normal libraries can be used in both configurations.
        </li>
        <li>FIQ problem fixed<br>
          Previous versions of embOS ARM IAR sometimes disabled FIQ which then resulted in interrupt latency for FIQs.<br>
          This bug is fixed with version 3.32a1 which newer disables FIQ.<br>
          FIQ now is enabled during OS_Start() and during execution of embOS internal functions.
        </li>
      </ol>
      <h2 class="heading2">Version 3.32a</h2>
      <ol class="maintext">
        <li>LPC2xxx support corrected.<br>
          The OS_GetTimeCycles() function, used for high resolution time measurement and profiling, contained a bug which resulted in wrong timing information when a timer interrupt was pending.
          This bug existed in LPC2xxx specific implementation of all previous embOS versions and is fixed with version 3.32a.
        </li>
        <li>embOSView corrected.<br>
          embOSView sometimes showed wrong task state "Terminated" for tasks which were not terminated.<br>
          This bug existed in all previous versions of emBOSView and is fixed with version 3.32a.
        </li>
      </ol>
      <h2 class="heading2">Version 3.30d</h2>
      <ol class="maintext">
        <li>OS_MEMF_Create() corrected.<br>
          Alignment check of buffers for fixed size memory blocks did not work correctly in debug libraries of embOS.<br>
          OS_Error() was called during OS_MEMF_Create(), even though the memory pool buffers start address was correctly aligned.<br>
          This problem existed since embOS version 3.28m in all debug build libraries and is fixed with version 3.30d.
        </li>
        <li>SAM7_RAM.mac corrected.<br>
          This macro file for SAM7S CPUs contained a hardware reset command which was executed during initialization after RAM remapping.<br>
          Execution of a hardware reset after remapping and program download results in wrong memory layout of the target CPU and debugging fails.<br>
          Previous debug tools did not perform the hardware reset, therefore this bug was not noticed before.
        </li>
      </ol>
      <h2 class="heading2">Version 3.30b</h2>
      <ol class="maintext">
        <li>OS_Suspend() corrected.<br>
          OS_Suspend() did not work correctly, when an activated task with higher priority than the running task was suspended.<br>
          When the task with highest priority was suspended during system initialization before embOS was started,
          embOS crashed during the call of OS_Start(),
          or called the embOS error handler OS_Error() with error code OS_ERR_INV_TASK (128).<br>
          The same crash occured, when the application was running in a critical region and a task with higher priority was activated,
          but not started because of the critical region, and was then suspended by a call of OS_Suspend().<br>
          This problem existed in all previous embOS versions and is fixed with version 3.30b.
        </li>
      </ol>
      <h2 class="heading2">Version 3.28q</h2>
      <ol class="maintext">
        <li>Problem with suspended tasks which were on delay fixed.<br>
          If a task which was on delay was suspended, the delay timer for that task was not handled.<br>
          This might have resulted in additional longer delay when the task was resumed later.<br>
          This problem existed in all previous embOS versions and is fixed with version 3.28q.
        </li>
      </ol>
      <h2 class="heading2">Version 3.28p</h2>
      <ol class="maintext">
        <li>OS_Suspend() corrected.<br>
          OS_Suspend() did not work correctly, when the current task was suspended from within an interrupt handler, or from a critical region.<br>
          The application crashed, or called the embOS error handler OS_Error() with error code OS_ERR_INV_TASK (128).<br>
          As OS_Suspend() automatically enters a critical region in debug-trace builds, OS_Suspend() also failed, when it was called to suspend the current task in debug-trace builds of embOS.<br>
          This problem existed in all previous embOS versions and is fixed with version 3.28p.
        </li>
      </ol>
      <ol class="maintext">
        <li>Alignment problems fixed for fixed size memory blocks<br>
          Some CPUs, mainly the 32bit RISC types, require aligned buffer start addresses for fixed size memory pools.<br>
          The debug version of embOS now checks alignment of buffer start address and data blocks in the buffer.
          If data blocks and buffer start address is not aligned, an error is generated and embOS error handler is called during creation of a fixed size memory pool.<br>
          This problem existed in all previous embOS versions and is fixed with version 3.28m.
        </li>
      </ol>
      <h2 class="heading2">Version 3.28l</h2>
      <ol class="maintext">
        <li>OS_MEMF_FreeBlock() added<br>
          The function OS_MEMF_FreeBlock() was not included in embOS libraries, but was documented in embOS users manual and was also declared in RTOS.h.<br>
          This problem existed in all previous embOS versions and is fixed with version 3.28l.
        </li>
      </ol>
      <h2 class="heading2">Version 3.28k</h2>
      <ol class="maintext">
        <li>OS_MEMF_IsInPool() corrected<br>
          OS_MEMF_IsInPool() failed, if a pointer was checked which pointed to the first address after the memory pool.
          This pointer was reported as belonging to the pool.<br>
          This problem existed in all previous embOS versions and is fixed with 
          version 3.28g.
        </li>
      </ol>  
      <h2 class="heading2">Version 3.28g</h2>
      <ol class="maintext">
        <li>OS_WakeTask() for trace build corrected<br>
          OS_WakeTask() in trace build disabled task switches.<br>
          This problem existed since version 3.24 and is fixed with 
          version 3.28g.
        </li> 
        <li>OS_GetMailTimed() / mailbox handling corrected<br>
          During call of OS_GetMailTimed, interrupts were re-enabled too early. If a mail was just put into a mailbox and the timeout occured at the same time, a mailbox internal control variables which managed waiting tasks was set to a wrong value.<br>
          This resulted in wrong mailbox handling and caused task waiting for mail kept suspended, even though, mail was available. 
          This problem existed in all previous versions of embOS and is fixed with version 3.28g.
        </li>
      </ol>
      <h2 class="heading2">Version 3.26a</h2>
      <ol class="maintext">
        <li>OS_MEMF_Release() corrected<br>
          OS_MEMF_Release() might have failed according to absolute address of memory block.<br>
          The problem occured because address calculation was done with 16bit interger value.<br>
          Calculation was modified to use 32bit values to fix the problem.
        </li>
      </ol>  
      <h2 class="heading2">Version 3.20c</h2>
      <ol class="maintext">
        <li>OS_GetMailTimed() corrected<br>
          OS_GetMailTimed() did not retrieve a mail after 256 calls, the waiting 
          task remained suspended. Corrected with version 3.20c of embOS.<br>
          This problem exists in all previous embOS versions and is fixed with 
          version 3.20c. </li>
      </ol>
      <h2 class="heading2">Version 3.10r</h2>
      <ol class="maintext">
        <li>OS_TASK structure definition modified
        <br>
        Previous definition of OS_Task structure may cause linker warnings [w6] 
        and [w35] even though everything was correct.<br>
        The problem was caused by unions defined inside a structure.<br>
        OS_TASK definition was modified to avoid those linker warnings.</li> 
      </ol>
      <h2 class="heading2">Version 3.10q</h2>
      <ol class="maintext">
        <li>OS_GetMail
        <br>
        OS_GetMail functions corrected (interrupts disabled before call of _GetMail).</li> 
        <br>
        <li>OS_Terminate problem with RR
        <br>
        OS_Terminate problem with RR tasks corrected. TimerTick could set RR/PP 
        pending between UNMARKTASK and OS_Switch. OS_Switch will then call OS_DoRR, 
        which could append OS_pCurrentTask (the one you want to terminate if e.g. 
        OS_Terminate(NULL)). </li>
      </ol>
      <h2 class="heading2">Version 3.10n</h2>
      <ol class="maintext">
        <li>Sample interrupt handler
        <br>
        For embOS it is not legal to call OS_EnterInterrupt again after final 
        call of OS_LeaveInterrupt has been made. In the sample OS_irq_handler 
        shipped with embOS, there was a possible call of OS_EnterInterrupt after 
        OS_LeaveInterrupt. The sample OS_irq_handler implementation has been corrected.</li>
      </ol>
      <h2 class="heading2">Version 3.06h</h2>
      <ol class="maintext">
        <li>OS_Unuse error code corrected
        <br>
        When calling OS_Unuse() more often than OS_Use(), the debug version generated 
        an OS_ERR_TASKLIST_CORRUPT error instead of OS_ERR_UNUSE_BEFORE_USE.<br>
        This problem exists in all previous embOS versions and is fixed with version 
        3.06h. </li>
      </ol>
      <h2 class="heading2">Version 3.06f</h2>
      <ol class="maintext">
        <li>Round Robing Task Problem corrected
        <br>
        In very specific situation it was possible that a round robin task got 
        100%<br>
        of CPU time for round robin tasks instead of sharing that time with other<br>
        round robin tasks.</li> 
      </ol>
      <h2 class="heading2">Version 3.06d1</h2>
      <ol class="maintext">
        None. 
      </ol>
      <h2 class="heading2">Version 3.06</h2>
      <ol class="maintext">
        None. 
      </ol>
      <!-------------------------------------------------------------------------->
      <!-- KNOWN PROBLEMS                                                       -->
      <!-------------------------------------------------------------------------->
      <h1 class="newsbox"><a name="problems"></a>Known problems/limitations</h1>
      <h2 class="heading2">Version 3.50b</h2>
      <ol class="maintext">
        None.
      </ol>
      </ol>
      <!-------------------------------------------------------------------------->
      <!-- Release history                                                      -->
      <!-------------------------------------------------------------------------->
      <h1 class="newsbox"><a name="history"></a>Release history</h1>
      <table class="maintext">
        <tr> 
          <td width=20%>Version</td>
          <td width=30%>Release date</td>
          <td>Short explanation</td>
        </tr>
        <tr> 
          <td>V3.60d</td>
          <td>09. Jun 2008</td>
          <td>
            New embOS sources 3.60d<br>
            BSP for TMPA910 added.<br>
          </td>
        </tr>
        <tr> 
          <td>V3.60a1</td>
          <td>11. Mar 2008</td>
          <td>
            New embOS sources 3.60a<br>
            MMU handling for 926 corrected.<br>
            MMU and cache handling added.
          </td>
        </tr>
        <tr> 
          <td>V3.52e</td>
          <td>27. Nov 2007</td>
          <td>
            BSP for AT9260 optimized
          </td>
        </tr>
        <tr> 
          <td>V3.52d</td>
          <td>31. Oct 2007</td>
          <td>
            Corrected version
          </td>
        </tr>
        <tr> 
          <td>V3.52a</td>
          <td>03. Sep 2007</td>
          <td>
            New embOS sources 3.52a<br>
            Start projects now located in manufacturer specific subfolders. 
          </td>
        </tr>
        <tr>
          <td>V3.32e</td>
          <td>07. Nov 2006</td>
          <td>
            OS_GetMessageCnt() corrected.
          </td>
        </tr>
        <tr> 
          <td>V3.32d</td>
          <td>05. Nov 2006</td>
          <td>
            OS_Q_GetPtrTimed() added.
          </td>
        </tr>
        <tr> 
          <td>V3.32c</td>
          <td>22. Sep 2006</td>
          <td>
            OS_EVENT_WaitTimed() added.
          </td>
        </tr>
        <tr> 
          <td>V3.32b</td>
          <td>18. Sep 2006</td>
          <td>
            TI TMS470 supported.<br>
            Enhanced debug information.
          </td>
        </tr>
        <tr> 
          <td>V3.32a2</td>
          <td>22. Aug 2006</td>
          <td>
            AT91SAM9260 supported.
          </td>
        </tr>
        <tr> 
          <td>V3.32a1</td>
          <td>11. Aug 2006</td>
          <td>"Full" library configuration bug fixed<br>
            FIQ bug fixed.
          </td>
        </tr>
        <tr> 
          <td>V3.32a</td>
          <td>04. Aug 2006</td>
          <td>Extended task implemented.<br>
            AT91SAM9261 supported.
          </td>
        </tr>
        <tr> 
          <td>V3.32</td>
          <td>18. Jul 2006</td>
          <td>Event objects implemented</td>
        </tr>
        <tr> 
          <td>V3.30d1</td>
          <td>13. Jul 2006</td>
          <td>ADuC702x CPUs supported<br>
              OKI 69ML6203 series supported</td>
        </tr>
        <tr> 
          <td>V3.30d</td>
          <td>20. Jun 2006</td>
          <td>OS_MEMF_Create() corrected</td>
        </tr>
        <tr> 
          <td>V3.30b</td>
          <td>18. May 2006</td>
          <td>New sources version 3.30b, OS_Suspend() corrected</td>
        </tr>
        <tr> 
          <td>V3.30a</td>
          <td>11. Apr 2006</td>
          <td>AT91SAM7A3 / AT91SAM7X series supported</td>
        </tr>
        <tr> 
          <td>V3.28q</td>
          <td>27. Feb 2006</td>
          <td>AT91RM9200 series supported</td>
        </tr>
        <tr> 
          <td>V3.28p</td>
          <td>16. Feb 2006</td>
          <td>New error handling for version without round robin scheduling</td>
        </tr>
        <tr> 
          <td>V3.28n</td>
          <td>05. Feb 2006</td>
          <td>AT91SAM7S256 series supported.</td>
        </tr>
        <tr> 
          <td>V3.28m3</td>
          <td>28. Dec 2005</td>
          <td>ST STR91x series supported.</td>
        </tr>
        <tr> 
          <td>V3.28m2</td>
          <td>15. Dec 2005</td>
          <td>OKI ML67Q4050/ML67Q4060 series supported.</td>
        </tr>
        <tr> 
          <td>V3.28m</td>
          <td>29. Nov 2005</td>
          <td>"Full" library configuration support added.</td>
        </tr>
        <tr> 
          <td>V3.28k</td>
          <td>27. Oct 2005</td>
          <td>Thread safe system library support added. New corrected embOS sources V3.28k</td>
        </tr>
        <tr> 
          <td>V3.28i</td>
          <td>14. Oct 2005</td>
          <td>New embOS sources 3.28i with new function OS_DeleteRSema(), update to new IAR compiler 4.30A</td>
        </tr>
        <tr> 
          <td>V3.28h</td>
          <td>29. Aug 2005</td>
          <td>New embOS sources 3.28h, Enhanced error checks</td>
        </tr>
        <tr> 
          <td>V3.28g</td>
          <td>23. Aug 2005</td>
          <td>New embOS sources 3.28g, Upgrade to compiler V4.20A</td>
        </tr>
        <tr> 
          <td>V3.24</td>
          <td>25. Nov 2004</td>
          <td>New embOS sources 3.24, Upgrade to compiler V4.11A</td>
        </tr>
        <tr> 
          <td>V3.20f</td>
          <td>27. Apr 2004</td>
          <td>Upgrade to new IAR compiler/workbench 4.10A</td>
        </tr>
        <tr> 
          <td>V3.20d</td>
          <td>22. Jan 2004</td>
          <td>New embOS sources V3.20, OS_GetMailTimed corrected</td>
        </tr>
        <tr> 
          <td>V3.10q</td>
          <td>29. Aug 2003</td>
          <td>New IAR compiler V3.40A</td>
        </tr>
        <tr> 
          <td>V3.10n</td>
          <td>05. Mar 2003</td>
          <td>New IAR compiler V3.30A</td>
        </tr>
        <tr> 
          <td>V3.10k</td>
          <td>13. Jan 2003</td>
          <td>Upgrade to new generic source V3.10k and new IAR compiler V3.21</td>
        </tr>
        <tr> 
          <td>V3.06f</td>
          <td>24. Oct 2001</td>
          <td>Upgrade to new generic source V3.06f</td>
        </tr>
        <tr> 
          <td>V3.06d1</td>
          <td>30. Aug 2001</td>
          <td>Cleanup, performance improved</td>
        </tr>
        <tr> 
          <td>V3.06</td>
          <td>23. Jul 2001</td>
          <td>First version with release history</td>
        </tr>
      </table>
      <!-------------------------------------------------------------------------->
      <!-- MISCELLANEOUS                                                        -->
      <!-------------------------------------------------------------------------->
      <h1 class="newsbox"><a name="misc"></a>Miscellaneous</h1>
      <p class="maintext">This document was first released with version 3.06 of 
        the software.<br>
        Software released earlier is documented internally. This information is 
        available at request.
      </p>
<!--  Modifiable information ends here   ----------------------------------------->
<hr>
<p class="maintext">
Copyright 2001-2008 SEGGER Microcontroller GmbH & Co. KG. All rights reserved.<br>
For more information, please visit our website <a href ="http://www.segger.com/">www.segger.com</a> or contact us at <a href ="mailto:info@segger.com">info@segger.com</a><br>
</p>
</body>
</html>
