###############################################################################
#
# IAR C/C++ Compiler V7.30.5.1680 for Microchip AVR       29/Jan/2024  12:21:17
# Copyright 1996-2022 IAR Systems AB.
# Mobile license - IAR Embedded Workbench for Microchip AVR 8.10
#
#    Source file  =  
#        C:\Users\ESY\OneDrive -
#        Scanjet\Documents\GitHub\S2Prog\IO\AN-ZBHART\Src\hart_gpio.c
#    Command line =  
#        -f C:\Users\ESY\AppData\Local\Temp\EW5082.tmp ("C:\Users\ESY\OneDrive
#        - Scanjet\Documents\GitHub\S2Prog\IO\AN-ZBHART\Src\hart_gpio.c"
#        --cpu=m1280 -ms -o "C:\Users\ESY\OneDrive -
#        Scanjet\Documents\GitHub\S2Prog\IO\AN-ZBHART\Debug\Obj" -D
#        OS_LIBMODE_D -D OS_UART=-1 -lCN "C:\Users\ESY\OneDrive -
#        Scanjet\Documents\GitHub\S2Prog\IO\AN-ZBHART\Debug\List" -y
#        --initializers_in_flash --debug -DENABLE_BIT_DEFINITIONS -e -I
#        "C:\Users\ESY\OneDrive -
#        Scanjet\Documents\GitHub\S2Prog\IO\AN-ZBHART\INC\\" -I
#        ..\..\..\Shared\Inc\\ --eeprom_size 4096 --clib -Ohs)
#    Locale       =  English_USA.1252
#    List file    =  
#        C:\Users\ESY\OneDrive -
#        Scanjet\Documents\GitHub\S2Prog\IO\AN-ZBHART\Debug\List\hart_gpio.lst
#    Object file  =  
#        C:\Users\ESY\OneDrive -
#        Scanjet\Documents\GitHub\S2Prog\IO\AN-ZBHART\Debug\Obj\hart_gpio.r90
#
###############################################################################

C:\Users\ESY\OneDrive - Scanjet\Documents\GitHub\S2Prog\IO\AN-ZBHART\Src\hart_gpio.c
      1          #include <stdio.h>
      2          #include "iom1280.h"

   \                                 In  segment ABSOLUTE, at 0x10b
   \   union <unnamed> volatile __ext_io _A_PORTL
   \                     _A_PORTL:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x10a
   \   union <unnamed> volatile __ext_io _A_DDRL
   \                     _A_DDRL:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x108
   \   union <unnamed> volatile __ext_io _A_PORTK
   \                     _A_PORTK:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x107
   \   union <unnamed> volatile __ext_io _A_DDRK
   \                     _A_DDRK:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x105
   \   union <unnamed> volatile __ext_io _A_PORTJ
   \                     _A_PORTJ:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x104
   \   union <unnamed> volatile __ext_io _A_DDRJ
   \                     _A_DDRJ:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x102
   \   union <unnamed> volatile __ext_io _A_PORTH
   \                     _A_PORTH:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x101
   \   union <unnamed> volatile __ext_io _A_DDRH
   \                     _A_DDRH:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x34
   \   union <unnamed> volatile __io _A_PORTG
   \                     _A_PORTG:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x33
   \   union <unnamed> volatile __io _A_DDRG
   \                     _A_DDRG:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x31
   \   union <unnamed> volatile __io _A_PORTF
   \                     _A_PORTF:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x30
   \   union <unnamed> volatile __io _A_DDRF
   \                     _A_DDRF:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x2e
   \   union <unnamed> volatile __io _A_PORTE
   \                     _A_PORTE:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x2d
   \   union <unnamed> volatile __io _A_DDRE
   \                     _A_DDRE:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x2b
   \   union <unnamed> volatile __io _A_PORTD
   \                     _A_PORTD:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x2a
   \   union <unnamed> volatile __io _A_DDRD
   \                     _A_DDRD:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x28
   \   union <unnamed> volatile __io _A_PORTC
   \                     _A_PORTC:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x27
   \   union <unnamed> volatile __io _A_DDRC
   \                     _A_DDRC:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x22
   \   union <unnamed> volatile __io _A_PORTA
   \                     _A_PORTA:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x21
   \   union <unnamed> volatile __io _A_DDRA
   \                     _A_DDRA:
   \   00000000                      DS8 1
      3          #include "RTOS.h"
      4          #include "constants.h"
      5          
      6          #include "hart_gpio.h"
      7          
      8          ////////////////////////////////////////////////////////////////////////////////
      9          //
     10          // Channel Power Control
     11          //
     12          ////////////////////////////////////////////////////////////////////////////////
     13          /*
     14           * power control for each channel
     15           *
     16           * CHP0     : PA0
     17           * CHP1     : PA1
     18           * CHP2     : PA2
     19           * CHP3     : PA3
     20           * CHP4     : PA4
     21           * CHP5     : PA5
     22           * CHP6     : PA6
     23           * CHP7     : PA7
     24           * CHP8     : PJ4
     25           * CHP9     : PJ5
     26           * CHP10    : PJ6
     27           * CHP11    : PJ7
     28           *
     29           * HIGH     : Power On
     30           * LOW      : Power Off
     31           *
     32           */

   \                                 In  segment CODE, align 2, keep-with-next
     33          static void
     34          hart_gpio_power_gpio_init(void) {
   \                     hart_gpio_power_gpio_init:
     35              My_SetBit(DDRA, 0xff);         // PA0-PA7 as output
   \   00000000   9100....           LDS     R16, (OS_Global + 1)
   \   00000004   7F00               ANDI    R16, 0xF0
   \   00000006   F021               BREQ    ??hart_gpio_power_gpio_init_0
   \   00000008   E909               LDI     R16, 153
   \   0000000A   E010               LDI     R17, 0
   \   0000000C   ........           CALL    OS_Error
   \                     ??hart_gpio_power_gpio_init_0:
   \   00000010   94F8               cli
   \   00000012   9100....           LDS     R16, (OS_Global + 1)
   \   00000016   9503               INC     R16
   \   00000018   9300....           STS     (OS_Global + 1), R16
   \   0000001C   B101               IN      R16, 0x01
   \   0000001E   EF0F               LDI     R16, 255
   \   00000020   B901               OUT     0x01, R16
   \   00000022   9100....           LDS     R16, (OS_Global + 1)
   \   00000026   7F00               ANDI    R16, 0xF0
   \   00000028   F021               BREQ    ??hart_gpio_power_gpio_init_1
   \   0000002A   E909               LDI     R16, 153
   \   0000002C   E010               LDI     R17, 0
   \   0000002E   ........           CALL    OS_Error
   \                     ??hart_gpio_power_gpio_init_1:
   \   00000032   9100....           LDS     R16, (OS_Global + 1)
   \   00000036   950A               DEC     R16
   \   00000038   9300....           STS     (OS_Global + 1), R16
   \   0000003C   F409               BRNE    ??hart_gpio_power_gpio_init_2
   \   0000003E   9478               sei
     36              My_SetBit(DDRJ, 0xf0);         // PJ4-PJ7 as output
   \                     ??hart_gpio_power_gpio_init_2:
   \   00000040   7F00               ANDI    R16, 0xF0
   \   00000042   F021               BREQ    ??hart_gpio_power_gpio_init_3
   \   00000044   E909               LDI     R16, 153
   \   00000046   E010               LDI     R17, 0
   \   00000048   ........           CALL    OS_Error
   \                     ??hart_gpio_power_gpio_init_3:
   \   0000004C   94F8               cli
   \   0000004E   9100....           LDS     R16, (OS_Global + 1)
   \   00000052   9503               INC     R16
   \   00000054   9300....           STS     (OS_Global + 1), R16
   \   00000058   9100....           LDS     R16, _A_DDRJ
   \   0000005C   6F00               ORI     R16, 0xF0
   \   0000005E   9300....           STS     _A_DDRJ, R16
   \   00000062   9100....           LDS     R16, (OS_Global + 1)
   \   00000066   7F00               ANDI    R16, 0xF0
   \   00000068   F021               BREQ    ??hart_gpio_power_gpio_init_4
   \   0000006A   E909               LDI     R16, 153
   \   0000006C   E010               LDI     R17, 0
   \   0000006E   ........           CALL    OS_Error
   \                     ??hart_gpio_power_gpio_init_4:
   \   00000072   9100....           LDS     R16, (OS_Global + 1)
   \   00000076   950A               DEC     R16
   \   00000078   9300....           STS     (OS_Global + 1), R16
   \   0000007C   F409               BRNE    ??hart_gpio_power_gpio_init_5
   \   0000007E   9478               sei
     37          
     38              //
     39              // power off everything just to make sure
     40              //
     41              My_ClrBit(PORTA, 0xff);        // PA0-PA7 LOW
   \                     ??hart_gpio_power_gpio_init_5:
   \   00000080   7F00               ANDI    R16, 0xF0
   \   00000082   F021               BREQ    ??hart_gpio_power_gpio_init_6
   \   00000084   E909               LDI     R16, 153
   \   00000086   E010               LDI     R17, 0
   \   00000088   ........           CALL    OS_Error
   \                     ??hart_gpio_power_gpio_init_6:
   \   0000008C   94F8               cli
   \   0000008E   9100....           LDS     R16, (OS_Global + 1)
   \   00000092   9503               INC     R16
   \   00000094   9300....           STS     (OS_Global + 1), R16
   \   00000098   B102               IN      R16, 0x02
   \   0000009A   E000               LDI     R16, 0
   \   0000009C   B902               OUT     0x02, R16
   \   0000009E   9100....           LDS     R16, (OS_Global + 1)
   \   000000A2   7F00               ANDI    R16, 0xF0
   \   000000A4   F021               BREQ    ??hart_gpio_power_gpio_init_7
   \   000000A6   E909               LDI     R16, 153
   \   000000A8   E010               LDI     R17, 0
   \   000000AA   ........           CALL    OS_Error
   \                     ??hart_gpio_power_gpio_init_7:
   \   000000AE   9100....           LDS     R16, (OS_Global + 1)
   \   000000B2   950A               DEC     R16
   \   000000B4   9300....           STS     (OS_Global + 1), R16
   \   000000B8   F409               BRNE    ??hart_gpio_power_gpio_init_8
   \   000000BA   9478               sei
     42              My_ClrBit(PORTJ, 0xf0);        // PJ4-PJ7 LOW
   \                     ??hart_gpio_power_gpio_init_8:
   \   000000BC   7F00               ANDI    R16, 0xF0
   \   000000BE   F021               BREQ    ??hart_gpio_power_gpio_init_9
   \   000000C0   E909               LDI     R16, 153
   \   000000C2   E010               LDI     R17, 0
   \   000000C4   ........           CALL    OS_Error
   \                     ??hart_gpio_power_gpio_init_9:
   \   000000C8   94F8               cli
   \   000000CA   9100....           LDS     R16, (OS_Global + 1)
   \   000000CE   9503               INC     R16
   \   000000D0   9300....           STS     (OS_Global + 1), R16
   \   000000D4   9100....           LDS     R16, _A_PORTJ
   \   000000D8   700F               ANDI    R16, 0x0F
   \   000000DA   9300....           STS     _A_PORTJ, R16
   \   000000DE   9100....           LDS     R16, (OS_Global + 1)
   \   000000E2   7F00               ANDI    R16, 0xF0
   \   000000E4   F021               BREQ    ??hart_gpio_power_gpio_init_10
   \   000000E6   E909               LDI     R16, 153
   \   000000E8   E010               LDI     R17, 0
   \   000000EA   ........           CALL    OS_Error
   \                     ??hart_gpio_power_gpio_init_10:
   \   000000EE   9100....           LDS     R16, (OS_Global + 1)
   \   000000F2   950A               DEC     R16
   \   000000F4   9300....           STS     (OS_Global + 1), R16
   \   000000F8   F409               BRNE    ??hart_gpio_power_gpio_init_11
   \   000000FA   9478               sei
     43          }
   \                     ??hart_gpio_power_gpio_init_11:
   \   000000FC   9508               RET
   \   000000FE                      REQUIRE _A_DDRA
   \   000000FE                      REQUIRE _A_DDRJ
   \   000000FE                      REQUIRE _A_PORTA
   \   000000FE                      REQUIRE _A_PORTJ
     44          

   \                                 In  segment CODE, align 2, keep-with-next
     45          void
     46          hart_gpio_power_on(hart_channel_t chnl) {
   \                     hart_gpio_power_on:
   \   00000000   938A               ST      -Y, R24
   \   00000002   2F80               MOV     R24, R16
     47              switch ( chnl ) {
   \   00000004   5008               SUBI    R16, 8
   \   00000006   F018               BRCS    ??hart_gpio_power_on_0
   \   00000008   5004               SUBI    R16, 4
   \   0000000A   F0E0               BRCS    ??hart_gpio_power_on_1
   \   0000000C   C043               RJMP    ??hart_gpio_power_on_2
     48              case hart_channel_0:
     49              case hart_channel_1:
     50              case hart_channel_2:
     51              case hart_channel_3:
     52              case hart_channel_4:
     53              case hart_channel_5:
     54              case hart_channel_6:
     55              case hart_channel_7:
     56                  My_SetBit(PORTA, __BIT_MASK(chnl));
   \                     ??hart_gpio_power_on_0:
   \   0000000E   9100....           LDS     R16, (OS_Global + 1)
   \   00000012   7F00               ANDI    R16, 0xF0
   \   00000014   F021               BREQ    ??hart_gpio_power_on_3
   \   00000016   E909               LDI     R16, 153
   \   00000018   E010               LDI     R17, 0
   \   0000001A   ........           CALL    OS_Error
   \                     ??hart_gpio_power_on_3:
   \   0000001E   94F8               cli
   \   00000020   9100....           LDS     R16, (OS_Global + 1)
   \   00000024   9503               INC     R16
   \   00000026   9300....           STS     (OS_Global + 1), R16
   \   0000002A   E001               LDI     R16, 1
   \   0000002C   E010               LDI     R17, 0
   \   0000002E   2F48               MOV     R20, R24
   \   00000030   ........           CALL    ?S_SHL_L02
   \   00000034   B112               IN      R17, 0x02
   \   00000036   2B10               OR      R17, R16
   \   00000038   B912               OUT     0x02, R17
   \   0000003A   9100....           LDS     R16, (OS_Global + 1)
   \   0000003E   7F00               ANDI    R16, 0xF0
   \   00000040   F4F1               BRNE    ??hart_gpio_power_on_4
   \   00000042   C021               RJMP    ??hart_gpio_power_on_5
     57                  break;
     58          
     59              case hart_channel_8:
     60              case hart_channel_9:
     61              case hart_channel_10:
     62              case hart_channel_11:
     63                  My_SetBit(PORTJ, __BIT_MASK(chnl - hart_channel_8 + 4));
   \                     ??hart_gpio_power_on_1:
   \   00000044   9100....           LDS     R16, (OS_Global + 1)
   \   00000048   7F00               ANDI    R16, 0xF0
   \   0000004A   F021               BREQ    ??hart_gpio_power_on_6
   \   0000004C   E909               LDI     R16, 153
   \   0000004E   E010               LDI     R17, 0
   \   00000050   ........           CALL    OS_Error
   \                     ??hart_gpio_power_on_6:
   \   00000054   94F8               cli
   \   00000056   9100....           LDS     R16, (OS_Global + 1)
   \   0000005A   9503               INC     R16
   \   0000005C   9300....           STS     (OS_Global + 1), R16
   \   00000060   5084               SUBI    R24, 4
   \   00000062   E001               LDI     R16, 1
   \   00000064   E010               LDI     R17, 0
   \   00000066   2F48               MOV     R20, R24
   \   00000068   ........           CALL    ?S_SHL_L02
   \   0000006C   9110....           LDS     R17, _A_PORTJ
   \   00000070   2B10               OR      R17, R16
   \   00000072   9310....           STS     _A_PORTJ, R17
   \   00000076   9100....           LDS     R16, (OS_Global + 1)
   \   0000007A   7F00               ANDI    R16, 0xF0
   \   0000007C   F021               BREQ    ??hart_gpio_power_on_5
   \                     ??hart_gpio_power_on_4:
   \   0000007E   E909               LDI     R16, 153
   \   00000080   E010               LDI     R17, 0
   \   00000082   ........           CALL    OS_Error
   \                     ??hart_gpio_power_on_5:
   \   00000086   9100....           LDS     R16, (OS_Global + 1)
   \   0000008A   950A               DEC     R16
   \   0000008C   9300....           STS     (OS_Global + 1), R16
   \   00000090   F409               BRNE    ??hart_gpio_power_on_2
   \   00000092   9478               sei
     64                  break;
     65              }
     66          }
   \                     ??hart_gpio_power_on_2:
   \   00000094   9189               LD      R24, Y+
   \   00000096   9508               RET
   \   00000098                      REQUIRE _A_PORTA
   \   00000098                      REQUIRE _A_PORTJ
     67          

   \                                 In  segment CODE, align 2, keep-with-next
     68          void
     69          hart_gpio_power_off(hart_channel_t chnl) {
   \                     hart_gpio_power_off:
   \   00000000   938A               ST      -Y, R24
   \   00000002   2F80               MOV     R24, R16
     70              switch ( chnl ) {
   \   00000004   5008               SUBI    R16, 8
   \   00000006   F018               BRCS    ??hart_gpio_power_off_0
   \   00000008   5004               SUBI    R16, 4
   \   0000000A   F0E8               BRCS    ??hart_gpio_power_off_1
   \   0000000C   C045               RJMP    ??hart_gpio_power_off_2
     71              case hart_channel_0:
     72              case hart_channel_1:
     73              case hart_channel_2:
     74              case hart_channel_3:
     75              case hart_channel_4:
     76              case hart_channel_5:
     77              case hart_channel_6:
     78              case hart_channel_7:
     79                  My_ClrBit(PORTA, __BIT_MASK(chnl));
   \                     ??hart_gpio_power_off_0:
   \   0000000E   9100....           LDS     R16, (OS_Global + 1)
   \   00000012   7F00               ANDI    R16, 0xF0
   \   00000014   F021               BREQ    ??hart_gpio_power_off_3
   \   00000016   E909               LDI     R16, 153
   \   00000018   E010               LDI     R17, 0
   \   0000001A   ........           CALL    OS_Error
   \                     ??hart_gpio_power_off_3:
   \   0000001E   94F8               cli
   \   00000020   9100....           LDS     R16, (OS_Global + 1)
   \   00000024   9503               INC     R16
   \   00000026   9300....           STS     (OS_Global + 1), R16
   \   0000002A   E001               LDI     R16, 1
   \   0000002C   E010               LDI     R17, 0
   \   0000002E   2F48               MOV     R20, R24
   \   00000030   ........           CALL    ?S_SHL_L02
   \   00000034   9500               COM     R16
   \   00000036   B112               IN      R17, 0x02
   \   00000038   2310               AND     R17, R16
   \   0000003A   B912               OUT     0x02, R17
   \   0000003C   9100....           LDS     R16, (OS_Global + 1)
   \   00000040   7F00               ANDI    R16, 0xF0
   \   00000042   F4F9               BRNE    ??hart_gpio_power_off_4
   \   00000044   C022               RJMP    ??hart_gpio_power_off_5
     80                  break;
     81          
     82              case hart_channel_8:
     83              case hart_channel_9:
     84              case hart_channel_10:
     85              case hart_channel_11:
     86                  My_ClrBit(PORTJ, __BIT_MASK((chnl - hart_channel_8 + 4)));
   \                     ??hart_gpio_power_off_1:
   \   00000046   9100....           LDS     R16, (OS_Global + 1)
   \   0000004A   7F00               ANDI    R16, 0xF0
   \   0000004C   F021               BREQ    ??hart_gpio_power_off_6
   \   0000004E   E909               LDI     R16, 153
   \   00000050   E010               LDI     R17, 0
   \   00000052   ........           CALL    OS_Error
   \                     ??hart_gpio_power_off_6:
   \   00000056   94F8               cli
   \   00000058   9100....           LDS     R16, (OS_Global + 1)
   \   0000005C   9503               INC     R16
   \   0000005E   9300....           STS     (OS_Global + 1), R16
   \   00000062   5084               SUBI    R24, 4
   \   00000064   E001               LDI     R16, 1
   \   00000066   E010               LDI     R17, 0
   \   00000068   2F48               MOV     R20, R24
   \   0000006A   ........           CALL    ?S_SHL_L02
   \   0000006E   9500               COM     R16
   \   00000070   9110....           LDS     R17, _A_PORTJ
   \   00000074   2310               AND     R17, R16
   \   00000076   9310....           STS     _A_PORTJ, R17
   \   0000007A   9100....           LDS     R16, (OS_Global + 1)
   \   0000007E   7F00               ANDI    R16, 0xF0
   \   00000080   F021               BREQ    ??hart_gpio_power_off_5
   \                     ??hart_gpio_power_off_4:
   \   00000082   E909               LDI     R16, 153
   \   00000084   E010               LDI     R17, 0
   \   00000086   ........           CALL    OS_Error
   \                     ??hart_gpio_power_off_5:
   \   0000008A   9100....           LDS     R16, (OS_Global + 1)
   \   0000008E   950A               DEC     R16
   \   00000090   9300....           STS     (OS_Global + 1), R16
   \   00000094   F409               BRNE    ??hart_gpio_power_off_2
   \   00000096   9478               sei
     87                  break;
     88              }
     89          }
   \                     ??hart_gpio_power_off_2:
   \   00000098   9189               LD      R24, Y+
   \   0000009A   9508               RET
   \   0000009C                      REQUIRE _A_PORTA
   \   0000009C                      REQUIRE _A_PORTJ
     90          
     91          
     92          ////////////////////////////////////////////////////////////////////////////////
     93          //
     94          // Modem MUX control
     95          //
     96          ////////////////////////////////////////////////////////////////////////////////
     97          /*
     98           *    MUX0
     99           * ENABLE     : PD5
    100           * ADR0       : PK0
    101           * ADR1       : PK1
    102           *
    103           *    MUX1
    104           * ENABLE     : PH3
    105           * ADR0       : PK4
    106           * ADR1       : PK5
    107           *
    108           *    MUX2
    109           * ENABLE     : PJ3
    110           * ADR0       : PC0
    111           * ADR1       : PC1
    112           *
    113           */

   \                                 In  segment CODE, align 2, keep-with-next
    114          static void
    115          hart_gpio_mux_gpio_init(void) {
   \                     hart_gpio_mux_gpio_init:
    116              //
    117              // MUX0
    118              //
    119              My_SetBit(DDRD, __BIT_MASK(5));    // ENABLE : PD5 as output
   \   00000000   9100....           LDS     R16, (OS_Global + 1)
   \   00000004   7F00               ANDI    R16, 0xF0
   \   00000006   F021               BREQ    ??hart_gpio_mux_gpio_init_0
   \   00000008   E909               LDI     R16, 153
   \   0000000A   E010               LDI     R17, 0
   \   0000000C   ........           CALL    OS_Error
   \                     ??hart_gpio_mux_gpio_init_0:
   \   00000010   94F8               cli
   \   00000012   9100....           LDS     R16, (OS_Global + 1)
   \   00000016   9503               INC     R16
   \   00000018   9300....           STS     (OS_Global + 1), R16
   \   0000001C   9A55               SBI     0x0A, 0x05
   \   0000001E   9100....           LDS     R16, (OS_Global + 1)
   \   00000022   7F00               ANDI    R16, 0xF0
   \   00000024   F021               BREQ    ??hart_gpio_mux_gpio_init_1
   \   00000026   E909               LDI     R16, 153
   \   00000028   E010               LDI     R17, 0
   \   0000002A   ........           CALL    OS_Error
   \                     ??hart_gpio_mux_gpio_init_1:
   \   0000002E   9100....           LDS     R16, (OS_Global + 1)
   \   00000032   950A               DEC     R16
   \   00000034   9300....           STS     (OS_Global + 1), R16
   \   00000038   F409               BRNE    ??hart_gpio_mux_gpio_init_2
   \   0000003A   9478               sei
    120              My_SetBit(DDRK, __BIT_MASK(0));    // ADDR0  : PK0 as output
   \                     ??hart_gpio_mux_gpio_init_2:
   \   0000003C   7F00               ANDI    R16, 0xF0
   \   0000003E   F021               BREQ    ??hart_gpio_mux_gpio_init_3
   \   00000040   E909               LDI     R16, 153
   \   00000042   E010               LDI     R17, 0
   \   00000044   ........           CALL    OS_Error
   \                     ??hart_gpio_mux_gpio_init_3:
   \   00000048   94F8               cli
   \   0000004A   9100....           LDS     R16, (OS_Global + 1)
   \   0000004E   9503               INC     R16
   \   00000050   9300....           STS     (OS_Global + 1), R16
   \   00000054   91000107           LDS     R16, 263
   \   00000058   6001               ORI     R16, 0x01
   \   0000005A   93000107           STS     263, R16
   \   0000005E   9100....           LDS     R16, (OS_Global + 1)
   \   00000062   7F00               ANDI    R16, 0xF0
   \   00000064   F021               BREQ    ??hart_gpio_mux_gpio_init_4
   \   00000066   E909               LDI     R16, 153
   \   00000068   E010               LDI     R17, 0
   \   0000006A   ........           CALL    OS_Error
   \                     ??hart_gpio_mux_gpio_init_4:
   \   0000006E   9100....           LDS     R16, (OS_Global + 1)
   \   00000072   950A               DEC     R16
   \   00000074   9300....           STS     (OS_Global + 1), R16
   \   00000078   F409               BRNE    ??hart_gpio_mux_gpio_init_5
   \   0000007A   9478               sei
    121              My_SetBit(DDRK, __BIT_MASK(1));    // ADDR1  : PK1 as output
   \                     ??hart_gpio_mux_gpio_init_5:
   \   0000007C   7F00               ANDI    R16, 0xF0
   \   0000007E   F021               BREQ    ??hart_gpio_mux_gpio_init_6
   \   00000080   E909               LDI     R16, 153
   \   00000082   E010               LDI     R17, 0
   \   00000084   ........           CALL    OS_Error
   \                     ??hart_gpio_mux_gpio_init_6:
   \   00000088   94F8               cli
   \   0000008A   9100....           LDS     R16, (OS_Global + 1)
   \   0000008E   9503               INC     R16
   \   00000090   9300....           STS     (OS_Global + 1), R16
   \   00000094   91000107           LDS     R16, 263
   \   00000098   6002               ORI     R16, 0x02
   \   0000009A   93000107           STS     263, R16
   \   0000009E   9100....           LDS     R16, (OS_Global + 1)
   \   000000A2   7F00               ANDI    R16, 0xF0
   \   000000A4   F021               BREQ    ??hart_gpio_mux_gpio_init_7
   \   000000A6   E909               LDI     R16, 153
   \   000000A8   E010               LDI     R17, 0
   \   000000AA   ........           CALL    OS_Error
   \                     ??hart_gpio_mux_gpio_init_7:
   \   000000AE   9100....           LDS     R16, (OS_Global + 1)
   \   000000B2   950A               DEC     R16
   \   000000B4   9300....           STS     (OS_Global + 1), R16
   \   000000B8   F409               BRNE    ??hart_gpio_mux_gpio_init_8
   \   000000BA   9478               sei
    122          
    123              //
    124              // MUX1
    125              //
    126              My_SetBit(DDRH, __BIT_MASK(3));    // ENABLE : PH3 as output
   \                     ??hart_gpio_mux_gpio_init_8:
   \   000000BC   7F00               ANDI    R16, 0xF0
   \   000000BE   F021               BREQ    ??hart_gpio_mux_gpio_init_9
   \   000000C0   E909               LDI     R16, 153
   \   000000C2   E010               LDI     R17, 0
   \   000000C4   ........           CALL    OS_Error
   \                     ??hart_gpio_mux_gpio_init_9:
   \   000000C8   94F8               cli
   \   000000CA   9100....           LDS     R16, (OS_Global + 1)
   \   000000CE   9503               INC     R16
   \   000000D0   9300....           STS     (OS_Global + 1), R16
   \   000000D4   91000101           LDS     R16, 257
   \   000000D8   6008               ORI     R16, 0x08
   \   000000DA   93000101           STS     257, R16
   \   000000DE   9100....           LDS     R16, (OS_Global + 1)
   \   000000E2   7F00               ANDI    R16, 0xF0
   \   000000E4   F021               BREQ    ??hart_gpio_mux_gpio_init_10
   \   000000E6   E909               LDI     R16, 153
   \   000000E8   E010               LDI     R17, 0
   \   000000EA   ........           CALL    OS_Error
   \                     ??hart_gpio_mux_gpio_init_10:
   \   000000EE   9100....           LDS     R16, (OS_Global + 1)
   \   000000F2   950A               DEC     R16
   \   000000F4   9300....           STS     (OS_Global + 1), R16
   \   000000F8   F409               BRNE    ??hart_gpio_mux_gpio_init_11
   \   000000FA   9478               sei
    127              My_SetBit(DDRK, __BIT_MASK(4));    // ADDR0  : PK4 as output
   \                     ??hart_gpio_mux_gpio_init_11:
   \   000000FC   7F00               ANDI    R16, 0xF0
   \   000000FE   F021               BREQ    ??hart_gpio_mux_gpio_init_12
   \   00000100   E909               LDI     R16, 153
   \   00000102   E010               LDI     R17, 0
   \   00000104   ........           CALL    OS_Error
   \                     ??hart_gpio_mux_gpio_init_12:
   \   00000108   94F8               cli
   \   0000010A   9100....           LDS     R16, (OS_Global + 1)
   \   0000010E   9503               INC     R16
   \   00000110   9300....           STS     (OS_Global + 1), R16
   \   00000114   91000107           LDS     R16, 263
   \   00000118   6100               ORI     R16, 0x10
   \   0000011A   93000107           STS     263, R16
   \   0000011E   9100....           LDS     R16, (OS_Global + 1)
   \   00000122   7F00               ANDI    R16, 0xF0
   \   00000124   F021               BREQ    ??hart_gpio_mux_gpio_init_13
   \   00000126   E909               LDI     R16, 153
   \   00000128   E010               LDI     R17, 0
   \   0000012A   ........           CALL    OS_Error
   \                     ??hart_gpio_mux_gpio_init_13:
   \   0000012E   9100....           LDS     R16, (OS_Global + 1)
   \   00000132   950A               DEC     R16
   \   00000134   9300....           STS     (OS_Global + 1), R16
   \   00000138   F409               BRNE    ??hart_gpio_mux_gpio_init_14
   \   0000013A   9478               sei
    128              My_SetBit(DDRK, __BIT_MASK(5));    // ADDR1  : PK5 as output
   \                     ??hart_gpio_mux_gpio_init_14:
   \   0000013C   7F00               ANDI    R16, 0xF0
   \   0000013E   F021               BREQ    ??hart_gpio_mux_gpio_init_15
   \   00000140   E909               LDI     R16, 153
   \   00000142   E010               LDI     R17, 0
   \   00000144   ........           CALL    OS_Error
   \                     ??hart_gpio_mux_gpio_init_15:
   \   00000148   94F8               cli
   \   0000014A   9100....           LDS     R16, (OS_Global + 1)
   \   0000014E   9503               INC     R16
   \   00000150   9300....           STS     (OS_Global + 1), R16
   \   00000154   91000107           LDS     R16, 263
   \   00000158   6200               ORI     R16, 0x20
   \   0000015A   93000107           STS     263, R16
   \   0000015E   9100....           LDS     R16, (OS_Global + 1)
   \   00000162   7F00               ANDI    R16, 0xF0
   \   00000164   F021               BREQ    ??hart_gpio_mux_gpio_init_16
   \   00000166   E909               LDI     R16, 153
   \   00000168   E010               LDI     R17, 0
   \   0000016A   ........           CALL    OS_Error
   \                     ??hart_gpio_mux_gpio_init_16:
   \   0000016E   9100....           LDS     R16, (OS_Global + 1)
   \   00000172   950A               DEC     R16
   \   00000174   9300....           STS     (OS_Global + 1), R16
   \   00000178   F409               BRNE    ??hart_gpio_mux_gpio_init_17
   \   0000017A   9478               sei
    129          
    130              //
    131              // MUX2
    132              //
    133              My_SetBit(DDRJ, __BIT_MASK(3));    // ENABLE : PJ3 as output
   \                     ??hart_gpio_mux_gpio_init_17:
   \   0000017C   7F00               ANDI    R16, 0xF0
   \   0000017E   F021               BREQ    ??hart_gpio_mux_gpio_init_18
   \   00000180   E909               LDI     R16, 153
   \   00000182   E010               LDI     R17, 0
   \   00000184   ........           CALL    OS_Error
   \                     ??hart_gpio_mux_gpio_init_18:
   \   00000188   94F8               cli
   \   0000018A   9100....           LDS     R16, (OS_Global + 1)
   \   0000018E   9503               INC     R16
   \   00000190   9300....           STS     (OS_Global + 1), R16
   \   00000194   91000104           LDS     R16, 260
   \   00000198   6008               ORI     R16, 0x08
   \   0000019A   93000104           STS     260, R16
   \   0000019E   9100....           LDS     R16, (OS_Global + 1)
   \   000001A2   7F00               ANDI    R16, 0xF0
   \   000001A4   F021               BREQ    ??hart_gpio_mux_gpio_init_19
   \   000001A6   E909               LDI     R16, 153
   \   000001A8   E010               LDI     R17, 0
   \   000001AA   ........           CALL    OS_Error
   \                     ??hart_gpio_mux_gpio_init_19:
   \   000001AE   9100....           LDS     R16, (OS_Global + 1)
   \   000001B2   950A               DEC     R16
   \   000001B4   9300....           STS     (OS_Global + 1), R16
   \   000001B8   F409               BRNE    ??hart_gpio_mux_gpio_init_20
   \   000001BA   9478               sei
    134              My_SetBit(DDRC, __BIT_MASK(0));    // ADDR0  : PC0 as output
   \                     ??hart_gpio_mux_gpio_init_20:
   \   000001BC   7F00               ANDI    R16, 0xF0
   \   000001BE   F021               BREQ    ??hart_gpio_mux_gpio_init_21
   \   000001C0   E909               LDI     R16, 153
   \   000001C2   E010               LDI     R17, 0
   \   000001C4   ........           CALL    OS_Error
   \                     ??hart_gpio_mux_gpio_init_21:
   \   000001C8   94F8               cli
   \   000001CA   9100....           LDS     R16, (OS_Global + 1)
   \   000001CE   9503               INC     R16
   \   000001D0   9300....           STS     (OS_Global + 1), R16
   \   000001D4   9A38               SBI     0x07, 0x00
   \   000001D6   9100....           LDS     R16, (OS_Global + 1)
   \   000001DA   7F00               ANDI    R16, 0xF0
   \   000001DC   F021               BREQ    ??hart_gpio_mux_gpio_init_22
   \   000001DE   E909               LDI     R16, 153
   \   000001E0   E010               LDI     R17, 0
   \   000001E2   ........           CALL    OS_Error
   \                     ??hart_gpio_mux_gpio_init_22:
   \   000001E6   9100....           LDS     R16, (OS_Global + 1)
   \   000001EA   950A               DEC     R16
   \   000001EC   9300....           STS     (OS_Global + 1), R16
   \   000001F0   F409               BRNE    ??hart_gpio_mux_gpio_init_23
   \   000001F2   9478               sei
    135              My_SetBit(DDRC, __BIT_MASK(1));    // ADDR1  : PC1 as output
   \                     ??hart_gpio_mux_gpio_init_23:
   \   000001F4   7F00               ANDI    R16, 0xF0
   \   000001F6   F021               BREQ    ??hart_gpio_mux_gpio_init_24
   \   000001F8   E909               LDI     R16, 153
   \   000001FA   E010               LDI     R17, 0
   \   000001FC   ........           CALL    OS_Error
   \                     ??hart_gpio_mux_gpio_init_24:
   \   00000200   94F8               cli
   \   00000202   9100....           LDS     R16, (OS_Global + 1)
   \   00000206   9503               INC     R16
   \   00000208   9300....           STS     (OS_Global + 1), R16
   \   0000020C   9A39               SBI     0x07, 0x01
   \   0000020E   9100....           LDS     R16, (OS_Global + 1)
   \   00000212   7F00               ANDI    R16, 0xF0
   \   00000214   F021               BREQ    ??hart_gpio_mux_gpio_init_25
   \   00000216   E909               LDI     R16, 153
   \   00000218   E010               LDI     R17, 0
   \   0000021A   ........           CALL    OS_Error
   \                     ??hart_gpio_mux_gpio_init_25:
   \   0000021E   9100....           LDS     R16, (OS_Global + 1)
   \   00000222   950A               DEC     R16
   \   00000224   9300....           STS     (OS_Global + 1), R16
   \   00000228   F409               BRNE    ??hart_gpio_mux_gpio_init_26
   \   0000022A   9478               sei
    136          }
   \                     ??hart_gpio_mux_gpio_init_26:
   \   0000022C   9508               RET
   \   0000022E                      REQUIRE _A_DDRD
   \   0000022E                      REQUIRE _A_DDRK
   \   0000022E                      REQUIRE _A_DDRH
   \   0000022E                      REQUIRE _A_DDRJ
   \   0000022E                      REQUIRE _A_DDRC
    137          

   \                                 In  segment CODE, align 2, keep-with-next
    138          void
    139          hart_gpio_mux_enable(hart_mux_t mux) {
   \                     hart_gpio_mux_enable:
    140              switch ( mux ) {
   \   00000000   2300               TST     R16
   \   00000002   F029               BREQ    ??hart_gpio_mux_enable_0
   \   00000004   950A               DEC     R16
   \   00000006   F099               BREQ    ??hart_gpio_mux_enable_1
   \   00000008   950A               DEC     R16
   \   0000000A   F149               BREQ    ??hart_gpio_mux_enable_2
   \   0000000C   9508               RET
    141              case hart_mux_0:
    142                  My_SetBit(PORTD, __BIT_MASK(5));     // PD5
   \                     ??hart_gpio_mux_enable_0:
   \   0000000E   9100....           LDS     R16, (OS_Global + 1)
   \   00000012   7F00               ANDI    R16, 0xF0
   \   00000014   F021               BREQ    ??hart_gpio_mux_enable_3
   \   00000016   E909               LDI     R16, 153
   \   00000018   E010               LDI     R17, 0
   \   0000001A   ........           CALL    OS_Error
   \                     ??hart_gpio_mux_enable_3:
   \   0000001E   94F8               cli
   \   00000020   9100....           LDS     R16, (OS_Global + 1)
   \   00000024   9503               INC     R16
   \   00000026   9300....           STS     (OS_Global + 1), R16
   \   0000002A   9A5D               SBI     0x0B, 0x05
   \   0000002C   C013               RJMP    ??hart_gpio_mux_enable_4
    143                  break;
    144          
    145              case hart_mux_1:
    146                  My_SetBit(PORTH, __BIT_MASK(3));     // PH3
   \                     ??hart_gpio_mux_enable_1:
   \   0000002E   9100....           LDS     R16, (OS_Global + 1)
   \   00000032   7F00               ANDI    R16, 0xF0
   \   00000034   F021               BREQ    ??hart_gpio_mux_enable_5
   \   00000036   E909               LDI     R16, 153
   \   00000038   E010               LDI     R17, 0
   \   0000003A   ........           CALL    OS_Error
   \                     ??hart_gpio_mux_enable_5:
   \   0000003E   94F8               cli
   \   00000040   9100....           LDS     R16, (OS_Global + 1)
   \   00000044   9503               INC     R16
   \   00000046   9300....           STS     (OS_Global + 1), R16
   \   0000004A   91000102           LDS     R16, 258
   \   0000004E   6008               ORI     R16, 0x08
   \   00000050   93000102           STS     258, R16
   \                     ??hart_gpio_mux_enable_4:
   \   00000054   9100....           LDS     R16, (OS_Global + 1)
   \   00000058   7F00               ANDI    R16, 0xF0
   \   0000005A   F4C1               BRNE    ??hart_gpio_mux_enable_6
   \   0000005C   C01B               RJMP    ??hart_gpio_mux_enable_7
    147                  break;
    148          
    149              case hart_mux_2:
    150                  My_SetBit(PORTJ, __BIT_MASK(3));     // PJ3
   \                     ??hart_gpio_mux_enable_2:
   \   0000005E   9100....           LDS     R16, (OS_Global + 1)
   \   00000062   7F00               ANDI    R16, 0xF0
   \   00000064   F021               BREQ    ??hart_gpio_mux_enable_8
   \   00000066   E909               LDI     R16, 153
   \   00000068   E010               LDI     R17, 0
   \   0000006A   ........           CALL    OS_Error
   \                     ??hart_gpio_mux_enable_8:
   \   0000006E   94F8               cli
   \   00000070   9100....           LDS     R16, (OS_Global + 1)
   \   00000074   9503               INC     R16
   \   00000076   9300....           STS     (OS_Global + 1), R16
   \   0000007A   91000105           LDS     R16, 261
   \   0000007E   6008               ORI     R16, 0x08
   \   00000080   93000105           STS     261, R16
   \   00000084   9100....           LDS     R16, (OS_Global + 1)
   \   00000088   7F00               ANDI    R16, 0xF0
   \   0000008A   F021               BREQ    ??hart_gpio_mux_enable_7
   \                     ??hart_gpio_mux_enable_6:
   \   0000008C   E909               LDI     R16, 153
   \   0000008E   E010               LDI     R17, 0
   \   00000090   ........           CALL    OS_Error
   \                     ??hart_gpio_mux_enable_7:
   \   00000094   9100....           LDS     R16, (OS_Global + 1)
   \   00000098   950A               DEC     R16
   \   0000009A   9300....           STS     (OS_Global + 1), R16
   \   0000009E   F409               BRNE    ??hart_gpio_mux_enable_9
   \   000000A0   9478               sei
    151                  break;
    152              }
    153          }
   \                     ??hart_gpio_mux_enable_9:
   \   000000A2   9508               RET
   \   000000A4                      REQUIRE _A_PORTD
   \   000000A4                      REQUIRE _A_PORTH
   \   000000A4                      REQUIRE _A_PORTJ
    154          

   \                                 In  segment CODE, align 2, keep-with-next
    155          void
    156          hart_gpio_mux_disable(hart_mux_t mux) {
   \                     hart_gpio_mux_disable:
    157              switch ( mux ) {
   \   00000000   2300               TST     R16
   \   00000002   F029               BREQ    ??hart_gpio_mux_disable_0
   \   00000004   950A               DEC     R16
   \   00000006   F099               BREQ    ??hart_gpio_mux_disable_1
   \   00000008   950A               DEC     R16
   \   0000000A   F149               BREQ    ??hart_gpio_mux_disable_2
   \   0000000C   9508               RET
    158              case hart_mux_0:
    159                  My_ClrBit(PORTD, __BIT_MASK(5));     // PD5
   \                     ??hart_gpio_mux_disable_0:
   \   0000000E   9100....           LDS     R16, (OS_Global + 1)
   \   00000012   7F00               ANDI    R16, 0xF0
   \   00000014   F021               BREQ    ??hart_gpio_mux_disable_3
   \   00000016   E909               LDI     R16, 153
   \   00000018   E010               LDI     R17, 0
   \   0000001A   ........           CALL    OS_Error
   \                     ??hart_gpio_mux_disable_3:
   \   0000001E   94F8               cli
   \   00000020   9100....           LDS     R16, (OS_Global + 1)
   \   00000024   9503               INC     R16
   \   00000026   9300....           STS     (OS_Global + 1), R16
   \   0000002A   985D               CBI     0x0B, 0x05
   \   0000002C   C013               RJMP    ??hart_gpio_mux_disable_4
    160                  break;
    161          
    162              case hart_mux_1:
    163                  My_ClrBit(PORTH, __BIT_MASK(3));     // PH3
   \                     ??hart_gpio_mux_disable_1:
   \   0000002E   9100....           LDS     R16, (OS_Global + 1)
   \   00000032   7F00               ANDI    R16, 0xF0
   \   00000034   F021               BREQ    ??hart_gpio_mux_disable_5
   \   00000036   E909               LDI     R16, 153
   \   00000038   E010               LDI     R17, 0
   \   0000003A   ........           CALL    OS_Error
   \                     ??hart_gpio_mux_disable_5:
   \   0000003E   94F8               cli
   \   00000040   9100....           LDS     R16, (OS_Global + 1)
   \   00000044   9503               INC     R16
   \   00000046   9300....           STS     (OS_Global + 1), R16
   \   0000004A   91000102           LDS     R16, 258
   \   0000004E   7F07               ANDI    R16, 0xF7
   \   00000050   93000102           STS     258, R16
   \                     ??hart_gpio_mux_disable_4:
   \   00000054   9100....           LDS     R16, (OS_Global + 1)
   \   00000058   7F00               ANDI    R16, 0xF0
   \   0000005A   F4C1               BRNE    ??hart_gpio_mux_disable_6
   \   0000005C   C01B               RJMP    ??hart_gpio_mux_disable_7
    164                  break;
    165          
    166              case hart_mux_2:
    167                  My_ClrBit(PORTJ, __BIT_MASK(3));     // PJ3
   \                     ??hart_gpio_mux_disable_2:
   \   0000005E   9100....           LDS     R16, (OS_Global + 1)
   \   00000062   7F00               ANDI    R16, 0xF0
   \   00000064   F021               BREQ    ??hart_gpio_mux_disable_8
   \   00000066   E909               LDI     R16, 153
   \   00000068   E010               LDI     R17, 0
   \   0000006A   ........           CALL    OS_Error
   \                     ??hart_gpio_mux_disable_8:
   \   0000006E   94F8               cli
   \   00000070   9100....           LDS     R16, (OS_Global + 1)
   \   00000074   9503               INC     R16
   \   00000076   9300....           STS     (OS_Global + 1), R16
   \   0000007A   91000105           LDS     R16, 261
   \   0000007E   7F07               ANDI    R16, 0xF7
   \   00000080   93000105           STS     261, R16
   \   00000084   9100....           LDS     R16, (OS_Global + 1)
   \   00000088   7F00               ANDI    R16, 0xF0
   \   0000008A   F021               BREQ    ??hart_gpio_mux_disable_7
   \                     ??hart_gpio_mux_disable_6:
   \   0000008C   E909               LDI     R16, 153
   \   0000008E   E010               LDI     R17, 0
   \   00000090   ........           CALL    OS_Error
   \                     ??hart_gpio_mux_disable_7:
   \   00000094   9100....           LDS     R16, (OS_Global + 1)
   \   00000098   950A               DEC     R16
   \   0000009A   9300....           STS     (OS_Global + 1), R16
   \   0000009E   F409               BRNE    ??hart_gpio_mux_disable_9
   \   000000A0   9478               sei
    168                  break;
    169              }
    170          }
   \                     ??hart_gpio_mux_disable_9:
   \   000000A2   9508               RET
   \   000000A4                      REQUIRE _A_PORTD
   \   000000A4                      REQUIRE _A_PORTH
   \   000000A4                      REQUIRE _A_PORTJ
    171          
    172          /*
    173           * NOTE: XXX
    174           *
    175           * if you think disabling/enabling mux is not necessary during 
    176           * channel change, just remove it. I don't care.
    177           */

   \                                 In  segment CODE, align 2, keep-with-next
    178          void
    179          hart_gpio_channel_select(hart_channel_t chnl) {
   \                     hart_gpio_channel_select:
   \   00000000   938A               ST      -Y, R24
   \   00000002   2F80               MOV     R24, R16
    180              switch ( chnl ) {
   \   00000004   300C               CPI     R16, 12
   \   00000006   F008               BRCS    $+2+2
   \   00000008   C05D               RJMP    ??hart_gpio_channel_select_0
   \   0000000A   ....               LDI     R31, (`?<Jumptable for hart_gpio_channel_select>_0`) >> 16
   \   0000000C   BFFB               OUT     0x3B, R31
   \   0000000E   E0F2               LDI     R31, 2
   \   00000010   9F0F               MUL     R16, R31
   \   00000012   01F0               MOVW    R31:R30, R1:R0
   \   00000014   ....               SUBI    R30, LOW((-(`?<Jumptable for hart_gpio_channel_select>_0`) & 0xFFFF))
   \   00000016   ....               SBCI    R31, (-(`?<Jumptable for hart_gpio_channel_select>_0`) & 0xFFFF) >> 8
   \   00000018   9007               ELPM    R0, Z+
   \   0000001A   9016               ELPM    R1, Z
   \   0000001C   01F0               MOVW    R31:R30, R1:R0
   \   0000001E   9409               IJMP
    181              case hart_channel_0:
    182              case hart_channel_1:
    183              case hart_channel_2:
    184              case hart_channel_3:
    185                  {
    186                      uint8_t chnl_mask = (uint8_t)(chnl - hart_channel_0);
    187                      OS_IncDI();
   \                     ??hart_gpio_channel_select_1:
   \   00000020   9100....           LDS     R16, (OS_Global + 1)
   \   00000024   7F00               ANDI    R16, 0xF0
   \   00000026   F021               BREQ    ??hart_gpio_channel_select_2
   \   00000028   E909               LDI     R16, 153
   \   0000002A   E010               LDI     R17, 0
   \   0000002C   ........           CALL    OS_Error
   \                     ??hart_gpio_channel_select_2:
   \   00000030   94F8               cli
   \   00000032   9100....           LDS     R16, (OS_Global + 1)
   \   00000036   9503               INC     R16
   \   00000038   9300....           STS     (OS_Global + 1), R16
    188                      uint8_t tmpPort =  PORTK;
    189                      tmpPort &= ~(__BIT_MASK(0) | __BIT_MASK(1));
    190                      tmpPort |= chnl_mask << 0;
    191                      PORTK = tmpPort;
   \   0000003C   9100....           LDS     R16, _A_PORTK
   \   00000040   7F0C               ANDI    R16, 0xFC
   \   00000042   C015               RJMP    ??hart_gpio_channel_select_3
    192                      OS_DecRI();
    193          
    194                      //My_ClrBit(PORTK, 3/* (__BIT_MASK(0) | __BIT_MASK(1))*/);     // clear first
    195                      //My_SetBit(PORTK, chnl_mask/*(chnl_mask << 0)*/);
    196                  }
    197                  break;
    198          
    199              case hart_channel_4:
    200              case hart_channel_5:
    201              case hart_channel_6:
    202              case hart_channel_7:
    203                  {
    204                      uint8_t chnl_mask = (uint8_t)(chnl - hart_channel_4);
   \                     ??hart_gpio_channel_select_4:
   \   00000044   5004               SUBI    R16, 4
   \   00000046   2F80               MOV     R24, R16
    205                      OS_IncDI();
   \   00000048   9100....           LDS     R16, (OS_Global + 1)
   \   0000004C   7F00               ANDI    R16, 0xF0
   \   0000004E   F021               BREQ    ??hart_gpio_channel_select_5
   \   00000050   E909               LDI     R16, 153
   \   00000052   E010               LDI     R17, 0
   \   00000054   ........           CALL    OS_Error
   \                     ??hart_gpio_channel_select_5:
   \   00000058   94F8               cli
   \   0000005A   9100....           LDS     R16, (OS_Global + 1)
   \   0000005E   9503               INC     R16
   \   00000060   9300....           STS     (OS_Global + 1), R16
    206                      uint8_t tmpPort =  PORTK;
    207                      tmpPort &= ~(__BIT_MASK(4) | __BIT_MASK(5));
    208                      tmpPort |= chnl_mask << 4;
    209                      PORTK = tmpPort;
   \   00000064   9100....           LDS     R16, _A_PORTK
   \   00000068   7C0F               ANDI    R16, 0xCF
   \   0000006A   9582               SWAP    R24
   \   0000006C   7F80               ANDI    R24, 0xF0
   \                     ??hart_gpio_channel_select_3:
   \   0000006E   2B08               OR      R16, R24
   \   00000070   9300....           STS     _A_PORTK, R16
    210                      OS_DecRI();
   \   00000074   9100....           LDS     R16, (OS_Global + 1)
   \   00000078   7F00               ANDI    R16, 0xF0
   \   0000007A   F4C9               BRNE    ??hart_gpio_channel_select_6
   \   0000007C   C01C               RJMP    ??hart_gpio_channel_select_7
    211          
    212                      //My_ClrBit(PORTK, (__BIT_MASK(4) | __BIT_MASK(5)));     // clear first
    213                      //My_SetBit(PORTK, (chnl_mask << 4));                    // PK4/PK5
    214          
    215                  }
    216                  break;
    217          
    218              case hart_channel_8:
    219              case hart_channel_9:
    220              case hart_channel_10:
    221              case hart_channel_11:
    222                  {
    223                      uint8_t chnl_mask = (uint8_t)(chnl - hart_channel_8);
   \                     ??hart_gpio_channel_select_8:
   \   0000007E   5008               SUBI    R16, 8
   \   00000080   2F80               MOV     R24, R16
    224                      OS_IncDI();
   \   00000082   9100....           LDS     R16, (OS_Global + 1)
   \   00000086   7F00               ANDI    R16, 0xF0
   \   00000088   F021               BREQ    ??hart_gpio_channel_select_9
   \   0000008A   E909               LDI     R16, 153
   \   0000008C   E010               LDI     R17, 0
   \   0000008E   ........           CALL    OS_Error
   \                     ??hart_gpio_channel_select_9:
   \   00000092   94F8               cli
   \   00000094   9100....           LDS     R16, (OS_Global + 1)
   \   00000098   9503               INC     R16
   \   0000009A   9300....           STS     (OS_Global + 1), R16
    225                      uint8_t tmpPort =  PORTC;
    226                      tmpPort &= ~(__BIT_MASK(0) | __BIT_MASK(1));
    227                      tmpPort |= chnl_mask << 0;
    228                      PORTC = tmpPort;
   \   0000009E   B108               IN      R16, 0x08
   \   000000A0   7F0C               ANDI    R16, 0xFC
   \   000000A2   2B08               OR      R16, R24
   \   000000A4   B908               OUT     0x08, R16
    229                      OS_DecRI();
   \   000000A6   9100....           LDS     R16, (OS_Global + 1)
   \   000000AA   7F00               ANDI    R16, 0xF0
   \   000000AC   F021               BREQ    ??hart_gpio_channel_select_7
   \                     ??hart_gpio_channel_select_6:
   \   000000AE   E909               LDI     R16, 153
   \   000000B0   E010               LDI     R17, 0
   \   000000B2   ........           CALL    OS_Error
   \                     ??hart_gpio_channel_select_7:
   \   000000B6   9100....           LDS     R16, (OS_Global + 1)
   \   000000BA   950A               DEC     R16
   \   000000BC   9300....           STS     (OS_Global + 1), R16
   \   000000C0   F409               BRNE    ??hart_gpio_channel_select_0
   \   000000C2   9478               sei
    230          
    231                      //My_ClrBit(PORTC, (__BIT_MASK(0) | __BIT_MASK(1)));     // clear first
    232                      //My_SetBit(PORTC, (chnl_mask << 0));                    // PC0/PC1
    233                  }
    234                  break;
    235              }
    236          }
   \                     ??hart_gpio_channel_select_0:
   \   000000C4   9189               LD      R24, Y+
   \   000000C6   9508               RET
   \   000000C8                      REQUIRE _A_PORTK
   \   000000C8                      REQUIRE _A_PORTC
    237          
    238          
    239          
    240          /*
    241           * NOTE: XXX
    242           *
    243           * Enable all mux for HART
    244           *
    245           */

   \                                 In  segment CODE, align 2, keep-with-next
    246          void hart_gpio_enable_all_mux(void) {
   \                     hart_gpio_enable_all_mux:
    247          
    248              hart_gpio_mux_enable(hart_mux_0);
   \   00000000   E000               LDI     R16, 0
   \   00000002   ....               RCALL   hart_gpio_mux_enable
    249              hart_gpio_mux_enable(hart_mux_1);
   \   00000004   E001               LDI     R16, 1
   \   00000006   ....               RCALL   hart_gpio_mux_enable
    250              hart_gpio_mux_enable(hart_mux_2);
   \   00000008   E002               LDI     R16, 2
   \   0000000A   ....               RJMP    hart_gpio_mux_enable
    251          }
    252          
    253          ////////////////////////////////////////////////////////////////////////////////
    254          //
    255          // ADC & ADC MUX
    256          //
    257          ////////////////////////////////////////////////////////////////////////////////
    258          /*
    259           *
    260           * ADC MUX
    261           * ADR0       : PF0
    262           * ADR1       : PF1
    263           * ADR2       : PF2
    264           * ADR3       : PF3
    265           *
    266           * ADC SPI
    267           *
    268           * SCLK       : PL0
    269           * MISO       : PL1
    270           * MOSI       : PL2
    271           * CS         : N/A. always selected
    272           * /RESET     : PL3
    273           * /DRDY      : PD0, PD0 is mapped to EINT0 when set up as input
    274           *
    275           */

   \                                 In  segment CODE, align 2, keep-with-next
    276          static void
    277          hart_gpio_adc_gpio_init(void) {
   \                     hart_gpio_adc_gpio_init:
    278              My_SetBit(DDRF,  0x0f);              // PF0-PF3 as output
   \   00000000   9100....           LDS     R16, (OS_Global + 1)
   \   00000004   7F00               ANDI    R16, 0xF0
   \   00000006   F021               BREQ    ??hart_gpio_adc_gpio_init_0
   \   00000008   E909               LDI     R16, 153
   \   0000000A   E010               LDI     R17, 0
   \   0000000C   ........           CALL    OS_Error
   \                     ??hart_gpio_adc_gpio_init_0:
   \   00000010   94F8               cli
   \   00000012   9100....           LDS     R16, (OS_Global + 1)
   \   00000016   9503               INC     R16
   \   00000018   9300....           STS     (OS_Global + 1), R16
   \   0000001C   B300               IN      R16, 0x10
   \   0000001E   600F               ORI     R16, 0x0F
   \   00000020   BB00               OUT     0x10, R16
   \   00000022   9100....           LDS     R16, (OS_Global + 1)
   \   00000026   7F00               ANDI    R16, 0xF0
   \   00000028   F021               BREQ    ??hart_gpio_adc_gpio_init_1
   \   0000002A   E909               LDI     R16, 153
   \   0000002C   E010               LDI     R17, 0
   \   0000002E   ........           CALL    OS_Error
   \                     ??hart_gpio_adc_gpio_init_1:
   \   00000032   9100....           LDS     R16, (OS_Global + 1)
   \   00000036   950A               DEC     R16
   \   00000038   9300....           STS     (OS_Global + 1), R16
   \   0000003C   F409               BRNE    ??hart_gpio_adc_gpio_init_2
   \   0000003E   9478               sei
    279              // Port F data direction, used for ADC
    280              My_SetBit(DDRL,  AD7715_SCLK);       // SCLK   : PL0 as output
   \                     ??hart_gpio_adc_gpio_init_2:
   \   00000040   7F00               ANDI    R16, 0xF0
   \   00000042   F021               BREQ    ??hart_gpio_adc_gpio_init_3
   \   00000044   E909               LDI     R16, 153
   \   00000046   E010               LDI     R17, 0
   \   00000048   ........           CALL    OS_Error
   \                     ??hart_gpio_adc_gpio_init_3:
   \   0000004C   94F8               cli
   \   0000004E   9100....           LDS     R16, (OS_Global + 1)
   \   00000052   9503               INC     R16
   \   00000054   9300....           STS     (OS_Global + 1), R16
   \   00000058   9100010A           LDS     R16, 266
   \   0000005C   6001               ORI     R16, 0x01
   \   0000005E   9300010A           STS     266, R16
   \   00000062   9100....           LDS     R16, (OS_Global + 1)
   \   00000066   7F00               ANDI    R16, 0xF0
   \   00000068   F021               BREQ    ??hart_gpio_adc_gpio_init_4
   \   0000006A   E909               LDI     R16, 153
   \   0000006C   E010               LDI     R17, 0
   \   0000006E   ........           CALL    OS_Error
   \                     ??hart_gpio_adc_gpio_init_4:
   \   00000072   9100....           LDS     R16, (OS_Global + 1)
   \   00000076   950A               DEC     R16
   \   00000078   9300....           STS     (OS_Global + 1), R16
   \   0000007C   F409               BRNE    ??hart_gpio_adc_gpio_init_5
   \   0000007E   9478               sei
    281              My_ClrBit(DDRL,  AD7715_MISO);       // MISO   : PL1 as input
   \                     ??hart_gpio_adc_gpio_init_5:
   \   00000080   7F00               ANDI    R16, 0xF0
   \   00000082   F021               BREQ    ??hart_gpio_adc_gpio_init_6
   \   00000084   E909               LDI     R16, 153
   \   00000086   E010               LDI     R17, 0
   \   00000088   ........           CALL    OS_Error
   \                     ??hart_gpio_adc_gpio_init_6:
   \   0000008C   94F8               cli
   \   0000008E   9100....           LDS     R16, (OS_Global + 1)
   \   00000092   9503               INC     R16
   \   00000094   9300....           STS     (OS_Global + 1), R16
   \   00000098   9100010A           LDS     R16, 266
   \   0000009C   7F0D               ANDI    R16, 0xFD
   \   0000009E   9300010A           STS     266, R16
   \   000000A2   9100....           LDS     R16, (OS_Global + 1)
   \   000000A6   7F00               ANDI    R16, 0xF0
   \   000000A8   F021               BREQ    ??hart_gpio_adc_gpio_init_7
   \   000000AA   E909               LDI     R16, 153
   \   000000AC   E010               LDI     R17, 0
   \   000000AE   ........           CALL    OS_Error
   \                     ??hart_gpio_adc_gpio_init_7:
   \   000000B2   9100....           LDS     R16, (OS_Global + 1)
   \   000000B6   950A               DEC     R16
   \   000000B8   9300....           STS     (OS_Global + 1), R16
   \   000000BC   F409               BRNE    ??hart_gpio_adc_gpio_init_8
   \   000000BE   9478               sei
    282              My_SetBit(DDRL,  AD7715_MOSI);       // MOSI   : PL2 as output
   \                     ??hart_gpio_adc_gpio_init_8:
   \   000000C0   7F00               ANDI    R16, 0xF0
   \   000000C2   F021               BREQ    ??hart_gpio_adc_gpio_init_9
   \   000000C4   E909               LDI     R16, 153
   \   000000C6   E010               LDI     R17, 0
   \   000000C8   ........           CALL    OS_Error
   \                     ??hart_gpio_adc_gpio_init_9:
   \   000000CC   94F8               cli
   \   000000CE   9100....           LDS     R16, (OS_Global + 1)
   \   000000D2   9503               INC     R16
   \   000000D4   9300....           STS     (OS_Global + 1), R16
   \   000000D8   9100010A           LDS     R16, 266
   \   000000DC   6004               ORI     R16, 0x04
   \   000000DE   9300010A           STS     266, R16
   \   000000E2   9100....           LDS     R16, (OS_Global + 1)
   \   000000E6   7F00               ANDI    R16, 0xF0
   \   000000E8   F021               BREQ    ??hart_gpio_adc_gpio_init_10
   \   000000EA   E909               LDI     R16, 153
   \   000000EC   E010               LDI     R17, 0
   \   000000EE   ........           CALL    OS_Error
   \                     ??hart_gpio_adc_gpio_init_10:
   \   000000F2   9100....           LDS     R16, (OS_Global + 1)
   \   000000F6   950A               DEC     R16
   \   000000F8   9300....           STS     (OS_Global + 1), R16
   \   000000FC   F409               BRNE    ??hart_gpio_adc_gpio_init_11
   \   000000FE   9478               sei
    283              My_SetBit(DDRL,  __BIT_MASK(3));     // /RESET : PL3 as output
   \                     ??hart_gpio_adc_gpio_init_11:
   \   00000100   7F00               ANDI    R16, 0xF0
   \   00000102   F021               BREQ    ??hart_gpio_adc_gpio_init_12
   \   00000104   E909               LDI     R16, 153
   \   00000106   E010               LDI     R17, 0
   \   00000108   ........           CALL    OS_Error
   \                     ??hart_gpio_adc_gpio_init_12:
   \   0000010C   94F8               cli
   \   0000010E   9100....           LDS     R16, (OS_Global + 1)
   \   00000112   9503               INC     R16
   \   00000114   9300....           STS     (OS_Global + 1), R16
   \   00000118   9100010A           LDS     R16, 266
   \   0000011C   6008               ORI     R16, 0x08
   \   0000011E   9300010A           STS     266, R16
   \   00000122   9100....           LDS     R16, (OS_Global + 1)
   \   00000126   7F00               ANDI    R16, 0xF0
   \   00000128   F021               BREQ    ??hart_gpio_adc_gpio_init_13
   \   0000012A   E909               LDI     R16, 153
   \   0000012C   E010               LDI     R17, 0
   \   0000012E   ........           CALL    OS_Error
   \                     ??hart_gpio_adc_gpio_init_13:
   \   00000132   9100....           LDS     R16, (OS_Global + 1)
   \   00000136   950A               DEC     R16
   \   00000138   9300....           STS     (OS_Global + 1), R16
   \   0000013C   F409               BRNE    ??hart_gpio_adc_gpio_init_14
   \   0000013E   9478               sei
    284              My_ClrBit(DDRD,  __BIT_MASK(0));     // /DRDY  : PD0 as input
   \                     ??hart_gpio_adc_gpio_init_14:
   \   00000140   7F00               ANDI    R16, 0xF0
   \   00000142   F021               BREQ    ??hart_gpio_adc_gpio_init_15
   \   00000144   E909               LDI     R16, 153
   \   00000146   E010               LDI     R17, 0
   \   00000148   ........           CALL    OS_Error
   \                     ??hart_gpio_adc_gpio_init_15:
   \   0000014C   94F8               cli
   \   0000014E   9100....           LDS     R16, (OS_Global + 1)
   \   00000152   9503               INC     R16
   \   00000154   9300....           STS     (OS_Global + 1), R16
   \   00000158   9850               CBI     0x0A, 0x00
   \   0000015A   9100....           LDS     R16, (OS_Global + 1)
   \   0000015E   7F00               ANDI    R16, 0xF0
   \   00000160   F021               BREQ    ??hart_gpio_adc_gpio_init_16
   \   00000162   E909               LDI     R16, 153
   \   00000164   E010               LDI     R17, 0
   \   00000166   ........           CALL    OS_Error
   \                     ??hart_gpio_adc_gpio_init_16:
   \   0000016A   9100....           LDS     R16, (OS_Global + 1)
   \   0000016E   950A               DEC     R16
   \   00000170   9300....           STS     (OS_Global + 1), R16
   \   00000174   F409               BRNE    ??hart_gpio_adc_gpio_init_17
   \   00000176   9478               sei
    285          
    286              //
    287              // setup clock high
    288              //
    289              My_SetBit(AD7715_PORT, AD7715_SCLK);
   \                     ??hart_gpio_adc_gpio_init_17:
   \   00000178   7F00               ANDI    R16, 0xF0
   \   0000017A   F021               BREQ    ??hart_gpio_adc_gpio_init_18
   \   0000017C   E909               LDI     R16, 153
   \   0000017E   E010               LDI     R17, 0
   \   00000180   ........           CALL    OS_Error
   \                     ??hart_gpio_adc_gpio_init_18:
   \   00000184   94F8               cli
   \   00000186   9100....           LDS     R16, (OS_Global + 1)
   \   0000018A   9503               INC     R16
   \   0000018C   9300....           STS     (OS_Global + 1), R16
   \   00000190   9100010B           LDS     R16, 267
   \   00000194   6001               ORI     R16, 0x01
   \   00000196   9300010B           STS     267, R16
   \   0000019A   9100....           LDS     R16, (OS_Global + 1)
   \   0000019E   7F00               ANDI    R16, 0xF0
   \   000001A0   F021               BREQ    ??hart_gpio_adc_gpio_init_19
   \   000001A2   E909               LDI     R16, 153
   \   000001A4   E010               LDI     R17, 0
   \   000001A6   ........           CALL    OS_Error
   \                     ??hart_gpio_adc_gpio_init_19:
   \   000001AA   9100....           LDS     R16, (OS_Global + 1)
   \   000001AE   950A               DEC     R16
   \   000001B0   9300....           STS     (OS_Global + 1), R16
   \   000001B4   F409               BRNE    ??hart_gpio_adc_gpio_init_20
   \   000001B6   9478               sei
    290          
    291              //
    292              // put ADC in reset state
    293              //
    294              hart_gpio_adc_reset(0);
   \                     ??hart_gpio_adc_gpio_init_20:
   \   000001B8   E000               LDI     R16, 0
   \   000001BA   ....               RJMP    hart_gpio_adc_reset
   \   000001BC                      REQUIRE _A_DDRF
   \   000001BC                      REQUIRE _A_DDRL
   \   000001BC                      REQUIRE _A_DDRD
   \   000001BC                      REQUIRE _A_PORTL
    295          }
    296          

   \                                 In  segment CODE, align 2, keep-with-next
    297          void hart_gpio_adc_channel_select(hart_channel_t chnl) {
   \                     hart_gpio_adc_channel_select:
    298              uint8_t   mask    = (uint8_t)(chnl - hart_channel_0);
    299              // No protection needed as exclusive use
    300              //OS_EnterRegion();
    301              //OS_IncDI();
    302              uint8_t tmpReg = PORTF;
    303              tmpReg &= ~0x0f;         // clear
    304              tmpReg |=  mask;         // set
    305              PORTF = tmpReg;
   \   00000000   B311               IN      R17, 0x11
   \   00000002   7F10               ANDI    R17, 0xF0
   \   00000004   2B10               OR      R17, R16
   \   00000006   BB11               OUT     0x11, R17
    306              //OS_LeaveRegion();
    307              //OS_DecRI();
    308          }
   \   00000008   9508               RET
   \   0000000A                      REQUIRE _A_PORTF
    309          

   \                                 In  segment CODE, align 2, keep-with-next
    310          void hart_gpio_adc_reset(uint8_t hi) {
   \                     hart_gpio_adc_reset:
    311              if ( hi ) {
   \   00000000   9110....           LDS     R17, (OS_Global + 1)
   \   00000004   7F10               ANDI    R17, 0xF0
   \   00000006   2300               TST     R16
   \   00000008   F0B1               BREQ    ??hart_gpio_adc_reset_0
    312                  My_SetBit(AD7715_PORT, __BIT_MASK(3));
   \   0000000A   2311               TST     R17
   \   0000000C   F021               BREQ    ??hart_gpio_adc_reset_1
   \   0000000E   E909               LDI     R16, 153
   \   00000010   E010               LDI     R17, 0
   \   00000012   ........           CALL    OS_Error
   \                     ??hart_gpio_adc_reset_1:
   \   00000016   94F8               cli
   \   00000018   9100....           LDS     R16, (OS_Global + 1)
   \   0000001C   9503               INC     R16
   \   0000001E   9300....           STS     (OS_Global + 1), R16
   \   00000022   9100010B           LDS     R16, 267
   \   00000026   6008               ORI     R16, 0x08
   \   00000028   9300010B           STS     267, R16
   \   0000002C   9100....           LDS     R16, (OS_Global + 1)
   \   00000030   7F00               ANDI    R16, 0xF0
   \   00000032   F4B1               BRNE    ??hart_gpio_adc_reset_2
   \   00000034   C019               RJMP    ??hart_gpio_adc_reset_3
    313              } else {
    314                  My_ClrBit(AD7715_PORT, __BIT_MASK(3));
   \                     ??hart_gpio_adc_reset_0:
   \   00000036   2311               TST     R17
   \   00000038   F021               BREQ    ??hart_gpio_adc_reset_4
   \   0000003A   E909               LDI     R16, 153
   \   0000003C   E010               LDI     R17, 0
   \   0000003E   ........           CALL    OS_Error
   \                     ??hart_gpio_adc_reset_4:
   \   00000042   94F8               cli
   \   00000044   9100....           LDS     R16, (OS_Global + 1)
   \   00000048   9503               INC     R16
   \   0000004A   9300....           STS     (OS_Global + 1), R16
   \   0000004E   9100010B           LDS     R16, 267
   \   00000052   7F07               ANDI    R16, 0xF7
   \   00000054   9300010B           STS     267, R16
   \   00000058   9100....           LDS     R16, (OS_Global + 1)
   \   0000005C   7F00               ANDI    R16, 0xF0
   \   0000005E   F021               BREQ    ??hart_gpio_adc_reset_3
   \                     ??hart_gpio_adc_reset_2:
   \   00000060   E909               LDI     R16, 153
   \   00000062   E010               LDI     R17, 0
   \   00000064   ........           CALL    OS_Error
   \                     ??hart_gpio_adc_reset_3:
   \   00000068   9100....           LDS     R16, (OS_Global + 1)
   \   0000006C   950A               DEC     R16
   \   0000006E   9300....           STS     (OS_Global + 1), R16
   \   00000072   F409               BRNE    ??hart_gpio_adc_reset_5
   \   00000074   9478               sei
    315              }
    316          }
   \                     ??hart_gpio_adc_reset_5:
   \   00000076   9508               RET
   \   00000078                      REQUIRE _A_PORTL
    317          
    318          ////////////////////////////////////////////////////////////////////////////////
    319          //
    320          // HART Modem Control
    321          //
    322          ////////////////////////////////////////////////////////////////////////////////
    323          /*
    324           *
    325           * MODEM0 /RTS : PD4
    326           * MODEM1 /RTS : PH2
    327           * MODEM2 /RTS : PJ2
    328           *
    329           */

   \                                 In  segment CODE, align 2, keep-with-next
    330          static void hart_gpio_modem_gpio_init(void) {
   \                     hart_gpio_modem_gpio_init:
    331              My_SetBit(DDRD,  __BIT_MASK(4));     // MODEM0 /RTS: PD4 as output
   \   00000000   9100....           LDS     R16, (OS_Global + 1)
   \   00000004   7F00               ANDI    R16, 0xF0
   \   00000006   F021               BREQ    ??hart_gpio_modem_gpio_init_0
   \   00000008   E909               LDI     R16, 153
   \   0000000A   E010               LDI     R17, 0
   \   0000000C   ........           CALL    OS_Error
   \                     ??hart_gpio_modem_gpio_init_0:
   \   00000010   94F8               cli
   \   00000012   9100....           LDS     R16, (OS_Global + 1)
   \   00000016   9503               INC     R16
   \   00000018   9300....           STS     (OS_Global + 1), R16
   \   0000001C   9A54               SBI     0x0A, 0x04
   \   0000001E   9100....           LDS     R16, (OS_Global + 1)
   \   00000022   7F00               ANDI    R16, 0xF0
   \   00000024   F021               BREQ    ??hart_gpio_modem_gpio_init_1
   \   00000026   E909               LDI     R16, 153
   \   00000028   E010               LDI     R17, 0
   \   0000002A   ........           CALL    OS_Error
   \                     ??hart_gpio_modem_gpio_init_1:
   \   0000002E   9100....           LDS     R16, (OS_Global + 1)
   \   00000032   950A               DEC     R16
   \   00000034   9300....           STS     (OS_Global + 1), R16
   \   00000038   F409               BRNE    ??hart_gpio_modem_gpio_init_2
   \   0000003A   9478               sei
    332              My_SetBit(DDRH,  __BIT_MASK(2));     // MODEM1 /RTS: PH2 as output
   \                     ??hart_gpio_modem_gpio_init_2:
   \   0000003C   7F00               ANDI    R16, 0xF0
   \   0000003E   F021               BREQ    ??hart_gpio_modem_gpio_init_3
   \   00000040   E909               LDI     R16, 153
   \   00000042   E010               LDI     R17, 0
   \   00000044   ........           CALL    OS_Error
   \                     ??hart_gpio_modem_gpio_init_3:
   \   00000048   94F8               cli
   \   0000004A   9100....           LDS     R16, (OS_Global + 1)
   \   0000004E   9503               INC     R16
   \   00000050   9300....           STS     (OS_Global + 1), R16
   \   00000054   91000101           LDS     R16, 257
   \   00000058   6004               ORI     R16, 0x04
   \   0000005A   93000101           STS     257, R16
   \   0000005E   9100....           LDS     R16, (OS_Global + 1)
   \   00000062   7F00               ANDI    R16, 0xF0
   \   00000064   F021               BREQ    ??hart_gpio_modem_gpio_init_4
   \   00000066   E909               LDI     R16, 153
   \   00000068   E010               LDI     R17, 0
   \   0000006A   ........           CALL    OS_Error
   \                     ??hart_gpio_modem_gpio_init_4:
   \   0000006E   9100....           LDS     R16, (OS_Global + 1)
   \   00000072   950A               DEC     R16
   \   00000074   9300....           STS     (OS_Global + 1), R16
   \   00000078   F409               BRNE    ??hart_gpio_modem_gpio_init_5
   \   0000007A   9478               sei
    333              My_SetBit(DDRJ,  __BIT_MASK(2));     // MODEM2 /RTS: PJ2 as output
   \                     ??hart_gpio_modem_gpio_init_5:
   \   0000007C   7F00               ANDI    R16, 0xF0
   \   0000007E   F021               BREQ    ??hart_gpio_modem_gpio_init_6
   \   00000080   E909               LDI     R16, 153
   \   00000082   E010               LDI     R17, 0
   \   00000084   ........           CALL    OS_Error
   \                     ??hart_gpio_modem_gpio_init_6:
   \   00000088   94F8               cli
   \   0000008A   9100....           LDS     R16, (OS_Global + 1)
   \   0000008E   9503               INC     R16
   \   00000090   9300....           STS     (OS_Global + 1), R16
   \   00000094   91000104           LDS     R16, 260
   \   00000098   6004               ORI     R16, 0x04
   \   0000009A   93000104           STS     260, R16
   \   0000009E   9100....           LDS     R16, (OS_Global + 1)
   \   000000A2   7F00               ANDI    R16, 0xF0
   \   000000A4   F021               BREQ    ??hart_gpio_modem_gpio_init_7
   \   000000A6   E909               LDI     R16, 153
   \   000000A8   E010               LDI     R17, 0
   \   000000AA   ........           CALL    OS_Error
   \                     ??hart_gpio_modem_gpio_init_7:
   \   000000AE   9100....           LDS     R16, (OS_Global + 1)
   \   000000B2   950A               DEC     R16
   \   000000B4   9300....           STS     (OS_Global + 1), R16
   \   000000B8   F409               BRNE    ??hart_gpio_modem_gpio_init_8
   \   000000BA   9478               sei
    334          
    335              hart_gpio_hart_carrier_off(hart_modem_0);
   \                     ??hart_gpio_modem_gpio_init_8:
   \   000000BC   E000               LDI     R16, 0
   \   000000BE   ....               RCALL   hart_gpio_hart_carrier_off
    336              hart_gpio_hart_carrier_off(hart_modem_1);
   \   000000C0   E001               LDI     R16, 1
   \   000000C2   ....               RCALL   hart_gpio_hart_carrier_off
    337              hart_gpio_hart_carrier_off(hart_modem_2);
   \   000000C4   E002               LDI     R16, 2
   \   000000C6   ....               RJMP    hart_gpio_hart_carrier_off
   \   000000C8                      REQUIRE _A_DDRD
   \   000000C8                      REQUIRE _A_DDRH
   \   000000C8                      REQUIRE _A_DDRJ
    338          }
    339          

   \                                 In  segment CODE, align 2, keep-with-next
    340          void hart_gpio_hart_carrier_off(hart_modem_t modem) {
   \                     hart_gpio_hart_carrier_off:
   \   00000000   938A               ST      -Y, R24
   \   00000002   2F80               MOV     R24, R16
    341              OS_IncDI();
   \   00000004   9100....           LDS     R16, (OS_Global + 1)
   \   00000008   7F00               ANDI    R16, 0xF0
   \   0000000A   F021               BREQ    ??hart_gpio_hart_carrier_off_0
   \   0000000C   E909               LDI     R16, 153
   \   0000000E   E010               LDI     R17, 0
   \   00000010   ........           CALL    OS_Error
   \                     ??hart_gpio_hart_carrier_off_0:
   \   00000014   94F8               cli
   \   00000016   9100....           LDS     R16, (OS_Global + 1)
   \   0000001A   9503               INC     R16
   \   0000001C   9300....           STS     (OS_Global + 1), R16
    342              hart_gpio_hart_carrier_off_irq(modem);
   \   00000020   2388               TST     R24
   \   00000022   F081               BREQ    ??hart_gpio_hart_carrier_off_1
   \   00000024   958A               DEC     R24
   \   00000026   F041               BREQ    ??hart_gpio_hart_carrier_off_2
   \   00000028   958A               DEC     R24
   \   0000002A   F469               BRNE    ??hart_gpio_hart_carrier_off_3
   \   0000002C   91000105           LDS     R16, 261
   \   00000030   6004               ORI     R16, 0x04
   \   00000032   93000105           STS     261, R16
   \   00000036   C007               RJMP    ??hart_gpio_hart_carrier_off_3
   \                     ??hart_gpio_hart_carrier_off_2:
   \   00000038   91000102           LDS     R16, 258
   \   0000003C   6004               ORI     R16, 0x04
   \   0000003E   93000102           STS     258, R16
   \   00000042   C001               RJMP    ??hart_gpio_hart_carrier_off_3
   \                     ??hart_gpio_hart_carrier_off_1:
   \   00000044   9A5C               SBI     0x0B, 0x04
    343              OS_DecRI();
   \                     ??hart_gpio_hart_carrier_off_3:
   \   00000046   9100....           LDS     R16, (OS_Global + 1)
   \   0000004A   7F00               ANDI    R16, 0xF0
   \   0000004C   F021               BREQ    ??hart_gpio_hart_carrier_off_4
   \   0000004E   E909               LDI     R16, 153
   \   00000050   E010               LDI     R17, 0
   \   00000052   ........           CALL    OS_Error
   \                     ??hart_gpio_hart_carrier_off_4:
   \   00000056   9100....           LDS     R16, (OS_Global + 1)
   \   0000005A   950A               DEC     R16
   \   0000005C   9300....           STS     (OS_Global + 1), R16
   \   00000060   F409               BRNE    ??hart_gpio_hart_carrier_off_5
   \   00000062   9478               sei
    344          }
   \                     ??hart_gpio_hart_carrier_off_5:
   \   00000064   9189               LD      R24, Y+
   \   00000066   9508               RET
   \   00000068                      REQUIRE _A_PORTD
   \   00000068                      REQUIRE _A_PORTH
   \   00000068                      REQUIRE _A_PORTJ
    345          

   \                                 In  segment CODE, align 2, keep-with-next
    346          void hart_gpio_hart_carrier_off_irq(hart_modem_t modem) {
   \                     hart_gpio_hart_carrier_off_irq:
    347              switch ( modem ) {
   \   00000000   2300               TST     R16
   \   00000002   F029               BREQ    ??hart_gpio_hart_carrier_off_irq_0
   \   00000004   950A               DEC     R16
   \   00000006   F029               BREQ    ??hart_gpio_hart_carrier_off_irq_1
   \   00000008   950A               DEC     R16
   \   0000000A   F049               BREQ    ??hart_gpio_hart_carrier_off_irq_2
   \   0000000C   9508               RET
    348              case hart_modem_0:
    349                  {
    350                      uint8_t tmpReg = PORTD;
    351                      tmpReg |= __BIT_MASK(4);
    352                      PORTD = tmpReg;
   \                     ??hart_gpio_hart_carrier_off_irq_0:
   \   0000000E   9A5C               SBI     0x0B, 0x04
    353                  }
    354                  break;
   \   00000010   9508               RET
    355          
    356              case hart_modem_1:
    357                  {
    358                      uint8_t tmpReg = PORTH;
    359                      tmpReg |= __BIT_MASK(2);
    360                      PORTH = tmpReg;
   \                     ??hart_gpio_hart_carrier_off_irq_1:
   \   00000012   91000102           LDS     R16, 258
   \   00000016   6004               ORI     R16, 0x04
   \   00000018   93000102           STS     258, R16
    361                  }
    362                  break;
   \   0000001C   9508               RET
    363          
    364              case hart_modem_2:
    365                  {
    366                      uint8_t tmpReg = PORTJ;
    367                      tmpReg |= __BIT_MASK(2);
    368                      PORTJ = tmpReg;
   \                     ??hart_gpio_hart_carrier_off_irq_2:
   \   0000001E   91000105           LDS     R16, 261
   \   00000022   6004               ORI     R16, 0x04
   \   00000024   93000105           STS     261, R16
    369                  }
    370                  break;
    371              }
    372          }
   \   00000028   9508               RET
   \   0000002A                      REQUIRE _A_PORTD
   \   0000002A                      REQUIRE _A_PORTH
   \   0000002A                      REQUIRE _A_PORTJ
    373          

   \                                 In  segment CODE, align 2, keep-with-next
    374          void hart_gpio_hart_carrier_on(hart_modem_t modem) {
   \                     hart_gpio_hart_carrier_on:
   \   00000000   938A               ST      -Y, R24
   \   00000002   2F80               MOV     R24, R16
    375              OS_IncDI();
   \   00000004   9100....           LDS     R16, (OS_Global + 1)
   \   00000008   7F00               ANDI    R16, 0xF0
   \   0000000A   F021               BREQ    ??hart_gpio_hart_carrier_on_0
   \   0000000C   E909               LDI     R16, 153
   \   0000000E   E010               LDI     R17, 0
   \   00000010   ........           CALL    OS_Error
   \                     ??hart_gpio_hart_carrier_on_0:
   \   00000014   94F8               cli
   \   00000016   9100....           LDS     R16, (OS_Global + 1)
   \   0000001A   9503               INC     R16
   \   0000001C   9300....           STS     (OS_Global + 1), R16
    376              hart_gpio_hart_carrier_on_irq(modem);
   \   00000020   2388               TST     R24
   \   00000022   F081               BREQ    ??hart_gpio_hart_carrier_on_1
   \   00000024   958A               DEC     R24
   \   00000026   F041               BREQ    ??hart_gpio_hart_carrier_on_2
   \   00000028   958A               DEC     R24
   \   0000002A   F471               BRNE    ??hart_gpio_hart_carrier_on_3
   \   0000002C   91000105           LDS     R16, 261
   \   00000030   7F0B               ANDI    R16, 0xFB
   \   00000032   93000105           STS     261, R16
   \   00000036   C008               RJMP    ??hart_gpio_hart_carrier_on_3
   \                     ??hart_gpio_hart_carrier_on_2:
   \   00000038   91000102           LDS     R16, 258
   \   0000003C   7F0B               ANDI    R16, 0xFB
   \   0000003E   93000102           STS     258, R16
   \   00000042   C002               RJMP    ??hart_gpio_hart_carrier_on_3
   \                     ??hart_gpio_hart_carrier_on_1:
   \   00000044   985C               CBI     0x0B, 0x04
   \   00000046   985C               CBI     0x0B, 0x04
    377              OS_DecRI();
   \                     ??hart_gpio_hart_carrier_on_3:
   \   00000048   9100....           LDS     R16, (OS_Global + 1)
   \   0000004C   7F00               ANDI    R16, 0xF0
   \   0000004E   F021               BREQ    ??hart_gpio_hart_carrier_on_4
   \   00000050   E909               LDI     R16, 153
   \   00000052   E010               LDI     R17, 0
   \   00000054   ........           CALL    OS_Error
   \                     ??hart_gpio_hart_carrier_on_4:
   \   00000058   9100....           LDS     R16, (OS_Global + 1)
   \   0000005C   950A               DEC     R16
   \   0000005E   9300....           STS     (OS_Global + 1), R16
   \   00000062   F409               BRNE    ??hart_gpio_hart_carrier_on_5
   \   00000064   9478               sei
    378          }
   \                     ??hart_gpio_hart_carrier_on_5:
   \   00000066   9189               LD      R24, Y+
   \   00000068   9508               RET
   \   0000006A                      REQUIRE _A_PORTD
   \   0000006A                      REQUIRE _A_PORTH
   \   0000006A                      REQUIRE _A_PORTJ
    379          

   \                                 In  segment CODE, align 2, keep-with-next
    380          void hart_gpio_hart_carrier_on_irq(hart_modem_t modem) {
   \                     hart_gpio_hart_carrier_on_irq:
    381              switch ( modem ) {
   \   00000000   2300               TST     R16
   \   00000002   F029               BREQ    ??hart_gpio_hart_carrier_on_irq_0
   \   00000004   950A               DEC     R16
   \   00000006   F031               BREQ    ??hart_gpio_hart_carrier_on_irq_1
   \   00000008   950A               DEC     R16
   \   0000000A   F051               BREQ    ??hart_gpio_hart_carrier_on_irq_2
   \   0000000C   9508               RET
    382              case hart_modem_0:
    383                  {
    384                      uint8_t tmpReg = PORTD;
    385                      tmpReg &= ~__BIT_MASK(4);
    386                      PORTD = tmpReg;
   \                     ??hart_gpio_hart_carrier_on_irq_0:
   \   0000000E   985C               CBI     0x0B, 0x04
    387                  }
    388                  PORTD &= ~__BIT_MASK(4);
   \   00000010   985C               CBI     0x0B, 0x04
    389                  break;
   \   00000012   9508               RET
    390              case hart_modem_1:
    391                  {
    392                      uint8_t tmpReg = PORTH;
    393                      tmpReg &= ~__BIT_MASK(2);
    394                      PORTH = tmpReg;
   \                     ??hart_gpio_hart_carrier_on_irq_1:
   \   00000014   91000102           LDS     R16, 258
   \   00000018   7F0B               ANDI    R16, 0xFB
   \   0000001A   93000102           STS     258, R16
    395                  }
    396                  break;
   \   0000001E   9508               RET
    397              case hart_modem_2:
    398                  {
    399                      uint8_t tmpReg = PORTJ;
    400                      tmpReg &= ~__BIT_MASK(2);
    401                      PORTJ = tmpReg;
   \                     ??hart_gpio_hart_carrier_on_irq_2:
   \   00000020   91000105           LDS     R16, 261
   \   00000024   7F0B               ANDI    R16, 0xFB
   \   00000026   93000105           STS     261, R16
    402                  }
    403                  break;
    404              }
    405          }
   \   0000002A   9508               RET
   \   0000002C                      REQUIRE _A_PORTD
   \   0000002C                      REQUIRE _A_PORTH
   \   0000002C                      REQUIRE _A_PORTJ
    406          
    407          ////////////////////////////////////////////////////////////////////////////////
    408          //
    409          // Misc
    410          //
    411          ////////////////////////////////////////////////////////////////////////////////
    412          /*
    413           *
    414           * Debug LED: PG5
    415           * 
    416           * Address Rotary Switch 0 : PE4
    417           * Address Rotary Switch 1 : PE5
    418           * Address Rotary Switch 2 : PE6
    419           * Address Rotary Switch 3 : PE7 
    420           *
    421           * My485UART0 RS485 RX/TX Control : PE2
    422           *
    423           * ADC CLOCK, OSC, 1 MHz : PE3
    424           */

   \                                 In  segment CODE, align 2, keep-with-next
    425          static void hart_gpio_misc_gpio_init(void) {
   \                     hart_gpio_misc_gpio_init:
    426          
    427              My_SetBit(DDRG, __BIT_MASK(5));        // Debug LED: PG5 as output
   \   00000000   9100....           LDS     R16, (OS_Global + 1)
   \   00000004   7F00               ANDI    R16, 0xF0
   \   00000006   F021               BREQ    ??hart_gpio_misc_gpio_init_0
   \   00000008   E909               LDI     R16, 153
   \   0000000A   E010               LDI     R17, 0
   \   0000000C   ........           CALL    OS_Error
   \                     ??hart_gpio_misc_gpio_init_0:
   \   00000010   94F8               cli
   \   00000012   9100....           LDS     R16, (OS_Global + 1)
   \   00000016   9503               INC     R16
   \   00000018   9300....           STS     (OS_Global + 1), R16
   \   0000001C   9A9D               SBI     0x13, 0x05
   \   0000001E   9100....           LDS     R16, (OS_Global + 1)
   \   00000022   7F00               ANDI    R16, 0xF0
   \   00000024   F021               BREQ    ??hart_gpio_misc_gpio_init_1
   \   00000026   E909               LDI     R16, 153
   \   00000028   E010               LDI     R17, 0
   \   0000002A   ........           CALL    OS_Error
   \                     ??hart_gpio_misc_gpio_init_1:
   \   0000002E   9100....           LDS     R16, (OS_Global + 1)
   \   00000032   950A               DEC     R16
   \   00000034   9300....           STS     (OS_Global + 1), R16
   \   00000038   F409               BRNE    ??hart_gpio_misc_gpio_init_2
   \   0000003A   9478               sei
    428          
    429          
    430              My_ClrBit(DDRE, (0xf0));               // PE4-PE7 as input
   \                     ??hart_gpio_misc_gpio_init_2:
   \   0000003C   7F00               ANDI    R16, 0xF0
   \   0000003E   F021               BREQ    ??hart_gpio_misc_gpio_init_3
   \   00000040   E909               LDI     R16, 153
   \   00000042   E010               LDI     R17, 0
   \   00000044   ........           CALL    OS_Error
   \                     ??hart_gpio_misc_gpio_init_3:
   \   00000048   94F8               cli
   \   0000004A   9100....           LDS     R16, (OS_Global + 1)
   \   0000004E   9503               INC     R16
   \   00000050   9300....           STS     (OS_Global + 1), R16
   \   00000054   B10D               IN      R16, 0x0D
   \   00000056   700F               ANDI    R16, 0x0F
   \   00000058   B90D               OUT     0x0D, R16
   \   0000005A   9100....           LDS     R16, (OS_Global + 1)
   \   0000005E   7F00               ANDI    R16, 0xF0
   \   00000060   F021               BREQ    ??hart_gpio_misc_gpio_init_4
   \   00000062   E909               LDI     R16, 153
   \   00000064   E010               LDI     R17, 0
   \   00000066   ........           CALL    OS_Error
   \                     ??hart_gpio_misc_gpio_init_4:
   \   0000006A   9100....           LDS     R16, (OS_Global + 1)
   \   0000006E   950A               DEC     R16
   \   00000070   9300....           STS     (OS_Global + 1), R16
   \   00000074   F409               BRNE    ??hart_gpio_misc_gpio_init_5
   \   00000076   9478               sei
    431          
    432              My_SetBit(DDRE,  __BIT_MASK(2));       // PE2 : My485UART0 RS485 RX/TX Control
   \                     ??hart_gpio_misc_gpio_init_5:
   \   00000078   7F00               ANDI    R16, 0xF0
   \   0000007A   F021               BREQ    ??hart_gpio_misc_gpio_init_6
   \   0000007C   E909               LDI     R16, 153
   \   0000007E   E010               LDI     R17, 0
   \   00000080   ........           CALL    OS_Error
   \                     ??hart_gpio_misc_gpio_init_6:
   \   00000084   94F8               cli
   \   00000086   9100....           LDS     R16, (OS_Global + 1)
   \   0000008A   9503               INC     R16
   \   0000008C   9300....           STS     (OS_Global + 1), R16
   \   00000090   9A6A               SBI     0x0D, 0x02
   \   00000092   9100....           LDS     R16, (OS_Global + 1)
   \   00000096   7F00               ANDI    R16, 0xF0
   \   00000098   F021               BREQ    ??hart_gpio_misc_gpio_init_7
   \   0000009A   E909               LDI     R16, 153
   \   0000009C   E010               LDI     R17, 0
   \   0000009E   ........           CALL    OS_Error
   \                     ??hart_gpio_misc_gpio_init_7:
   \   000000A2   9100....           LDS     R16, (OS_Global + 1)
   \   000000A6   950A               DEC     R16
   \   000000A8   9300....           STS     (OS_Global + 1), R16
   \   000000AC   F409               BRNE    ??hart_gpio_misc_gpio_init_8
   \   000000AE   9478               sei
    433              My_ClrBit(PORTE, __BIT_MASK(2));
   \                     ??hart_gpio_misc_gpio_init_8:
   \   000000B0   7F00               ANDI    R16, 0xF0
   \   000000B2   F021               BREQ    ??hart_gpio_misc_gpio_init_9
   \   000000B4   E909               LDI     R16, 153
   \   000000B6   E010               LDI     R17, 0
   \   000000B8   ........           CALL    OS_Error
   \                     ??hart_gpio_misc_gpio_init_9:
   \   000000BC   94F8               cli
   \   000000BE   9100....           LDS     R16, (OS_Global + 1)
   \   000000C2   9503               INC     R16
   \   000000C4   9300....           STS     (OS_Global + 1), R16
   \   000000C8   9872               CBI     0x0E, 0x02
   \   000000CA   9100....           LDS     R16, (OS_Global + 1)
   \   000000CE   7F00               ANDI    R16, 0xF0
   \   000000D0   F021               BREQ    ??hart_gpio_misc_gpio_init_10
   \   000000D2   E909               LDI     R16, 153
   \   000000D4   E010               LDI     R17, 0
   \   000000D6   ........           CALL    OS_Error
   \                     ??hart_gpio_misc_gpio_init_10:
   \   000000DA   9100....           LDS     R16, (OS_Global + 1)
   \   000000DE   950A               DEC     R16
   \   000000E0   9300....           STS     (OS_Global + 1), R16
   \   000000E4   F409               BRNE    ??hart_gpio_misc_gpio_init_11
   \   000000E6   9478               sei
    434          
    435              My_SetBit(DDRE, __BIT_MASK(3));        // PE3 : 1 MHz ADC Clock
   \                     ??hart_gpio_misc_gpio_init_11:
   \   000000E8   7F00               ANDI    R16, 0xF0
   \   000000EA   F021               BREQ    ??hart_gpio_misc_gpio_init_12
   \   000000EC   E909               LDI     R16, 153
   \   000000EE   E010               LDI     R17, 0
   \   000000F0   ........           CALL    OS_Error
   \                     ??hart_gpio_misc_gpio_init_12:
   \   000000F4   94F8               cli
   \   000000F6   9100....           LDS     R16, (OS_Global + 1)
   \   000000FA   9503               INC     R16
   \   000000FC   9300....           STS     (OS_Global + 1), R16
   \   00000100   9A6B               SBI     0x0D, 0x03
   \   00000102   9100....           LDS     R16, (OS_Global + 1)
   \   00000106   7F00               ANDI    R16, 0xF0
   \   00000108   F021               BREQ    ??hart_gpio_misc_gpio_init_13
   \   0000010A   E909               LDI     R16, 153
   \   0000010C   E010               LDI     R17, 0
   \   0000010E   ........           CALL    OS_Error
   \                     ??hart_gpio_misc_gpio_init_13:
   \   00000112   9100....           LDS     R16, (OS_Global + 1)
   \   00000116   950A               DEC     R16
   \   00000118   9300....           STS     (OS_Global + 1), R16
   \   0000011C   F409               BRNE    ??hart_gpio_misc_gpio_init_14
   \   0000011E   9478               sei
    436          }
   \                     ??hart_gpio_misc_gpio_init_14:
   \   00000120   9508               RET
   \   00000122                      REQUIRE _A_DDRG
   \   00000122                      REQUIRE _A_DDRE
   \   00000122                      REQUIRE _A_PORTE
    437          

   \                                 In  segment CODE, align 2, keep-with-next
    438          void hart_gpio_debug_led(uint8_t on) {
   \                     hart_gpio_debug_led:
    439              // No protection needed as exclusive use
    440              //OS_EnterRegion();
    441              //OS_IncDI();
    442              if ( on ) {
   \   00000000   2300               TST     R16
   \   00000002   F011               BREQ    ??hart_gpio_debug_led_0
    443                  PORTG &= ~__BIT_MASK(5);
   \   00000004   98A5               CBI     0x14, 0x05
   \   00000006   9508               RET
    444              } else {
    445                  PORTG |=  __BIT_MASK(5);
   \                     ??hart_gpio_debug_led_0:
   \   00000008   9AA5               SBI     0x14, 0x05
    446              }
    447              //OS_LeaveRegion();
    448              //OS_DecRI();
    449          }
   \   0000000A   9508               RET
   \   0000000C                      REQUIRE _A_PORTG
    450          
    451          ////////////////////////////////////////////////////////////////////////////////
    452          //
    453          // GPIO init
    454          //
    455          ////////////////////////////////////////////////////////////////////////////////

   \                                 In  segment CODE, align 2, keep-with-next
    456          void
    457          hart_gpio_init(void) {
   \                     hart_gpio_init:
    458              hart_gpio_power_gpio_init();
   \   00000000   ....               RCALL   hart_gpio_power_gpio_init
    459              hart_gpio_mux_gpio_init();
   \   00000002   ....               RCALL   hart_gpio_mux_gpio_init
    460              hart_gpio_adc_gpio_init();
   \   00000004   ....               RCALL   hart_gpio_adc_gpio_init
    461              hart_gpio_modem_gpio_init();
   \   00000006   ....               RCALL   hart_gpio_modem_gpio_init
    462              hart_gpio_misc_gpio_init();
   \   00000008   ....               RJMP    hart_gpio_misc_gpio_init
    463          }

   \                                 In  segment SWITCH, align 2, keep-with-next
   \                     `?<Jumptable for hart_gpio_channel_select>_0`:
   \   00000000   ....               DW      (??hart_gpio_channel_select_1) /2
   \   00000002   ....               DW      (??hart_gpio_channel_select_1) /2
   \   00000004   ....               DW      (??hart_gpio_channel_select_1) /2
   \   00000006   ....               DW      (??hart_gpio_channel_select_1) /2
   \   00000008   ....               DW      (??hart_gpio_channel_select_4) /2
   \   0000000A   ....               DW      (??hart_gpio_channel_select_4) /2
   \   0000000C   ....               DW      (??hart_gpio_channel_select_4) /2
   \   0000000E   ....               DW      (??hart_gpio_channel_select_4) /2
   \   00000010   ....               DW      (??hart_gpio_channel_select_8) /2
   \   00000012   ....               DW      (??hart_gpio_channel_select_8) /2
   \   00000014   ....               DW      (??hart_gpio_channel_select_8) /2
   \   00000016   ....               DW      (??hart_gpio_channel_select_8) /2

   Maximum stack usage in bytes:

   CSTACK RSTACK Function
   ------ ------ --------
      0      2   hart_gpio_adc_channel_select
      0      2   hart_gpio_adc_gpio_init
        0      2   -> OS_Error
        0      2   -> hart_gpio_adc_reset
      0      2   hart_gpio_adc_reset
        0      2   -> OS_Error
      1      2   hart_gpio_channel_select
        1      2   -> OS_Error
      0      2   hart_gpio_debug_led
      0      2   hart_gpio_enable_all_mux
        0      2   -> hart_gpio_mux_enable
      1      2   hart_gpio_hart_carrier_off
        1      2   -> OS_Error
      0      2   hart_gpio_hart_carrier_off_irq
      1      2   hart_gpio_hart_carrier_on
        1      2   -> OS_Error
      0      2   hart_gpio_hart_carrier_on_irq
      0      2   hart_gpio_init
        0      2   -> hart_gpio_adc_gpio_init
        0      2   -> hart_gpio_misc_gpio_init
        0      2   -> hart_gpio_modem_gpio_init
        0      2   -> hart_gpio_mux_gpio_init
        0      2   -> hart_gpio_power_gpio_init
      0      2   hart_gpio_misc_gpio_init
        0      2   -> OS_Error
      0      2   hart_gpio_modem_gpio_init
        0      2   -> OS_Error
        0      2   -> hart_gpio_hart_carrier_off
      0      2   hart_gpio_mux_disable
        0      2   -> OS_Error
      0      2   hart_gpio_mux_enable
        0      2   -> OS_Error
      0      2   hart_gpio_mux_gpio_init
        0      2   -> OS_Error
      0      2   hart_gpio_power_gpio_init
        0      2   -> OS_Error
      1      2   hart_gpio_power_off
        1      2   -> OS_Error
        1      2 ?S_SHL_L02
      1      2   hart_gpio_power_on
        1      2   -> OS_Error
        1      2 ?S_SHL_L02


   Segment part sizes:

   Bytes  Function/Label
   -----  --------------
      24  ?<Jumptable for hart_gpio_channel_select>_0
       1  _A_DDRA
       1  _A_DDRC
       1  _A_DDRD
       1  _A_DDRE
       1  _A_DDRF
       1  _A_DDRG
       1  _A_DDRH
       1  _A_DDRJ
       1  _A_DDRK
       1  _A_DDRL
       1  _A_PORTA
       1  _A_PORTC
       1  _A_PORTD
       1  _A_PORTE
       1  _A_PORTF
       1  _A_PORTG
       1  _A_PORTH
       1  _A_PORTJ
       1  _A_PORTK
       1  _A_PORTL
      10  hart_gpio_adc_channel_select
     444  hart_gpio_adc_gpio_init
     120  hart_gpio_adc_reset
     200  hart_gpio_channel_select
      12  hart_gpio_debug_led
      12  hart_gpio_enable_all_mux
     104  hart_gpio_hart_carrier_off
      42  hart_gpio_hart_carrier_off_irq
     106  hart_gpio_hart_carrier_on
      44  hart_gpio_hart_carrier_on_irq
      10  hart_gpio_init
     290  hart_gpio_misc_gpio_init
     200  hart_gpio_modem_gpio_init
     164  hart_gpio_mux_disable
     164  hart_gpio_mux_enable
     558  hart_gpio_mux_gpio_init
     254  hart_gpio_power_gpio_init
     156  hart_gpio_power_off
     152  hart_gpio_power_on

 
    20 bytes in segment ABSOLUTE
 3 042 bytes in segment CODE
    24 bytes in segment SWITCH
 
 3 066 bytes of CODE memory
     0 bytes of DATA memory (+ 20 bytes shared)

Errors: none
Warnings: none
