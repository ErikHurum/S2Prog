###############################################################################
#
# IAR C/C++ Compiler V7.30.4.1668 for Microchip AVR       10/Aug/2021  11:27:14
# Copyright 1996-2021 IAR Systems AB.
# Mobile license - IAR Embedded Workbench for Microchip AVR 7.30
#
#    Source file  =  D:\S2Prog\IO\New ANSGCNV\Src\UsartPro.c
#    Command line =  
#        -f C:\Users\ESY\AppData\Local\Temp\EW95A4.tmp ("D:\S2Prog\IO\New
#        ANSGCNV\Src\UsartPro.c" --cpu=m128a -ms -o "D:\S2Prog\IO\New
#        ANSGCNV\Debug\Obj" -D OS_LIBMODE_R -D OS_UART=-1 -lCN
#        "D:\S2Prog\IO\New ANSGCNV\Debug\List" -y --initializers_in_flash
#        --no_cse --no_inline --no_code_motion --no_cross_call --no_clustering
#        --no_tbaa --debug -DENABLE_BIT_DEFINITIONS -e -I "D:\S2Prog\IO\New
#        ANSGCNV\INC\\" -I "D:\S2Prog\IO\New ANSGCNV\..\..\SHARED\INC\\"
#        --eeprom_size 4096 --clib -On)
#    Locale       =  Norwegian Bokmål_NOR.1252
#    List file    =  D:\S2Prog\IO\New ANSGCNV\Debug\List\UsartPro.lst
#    Object file  =  D:\S2Prog\IO\New ANSGCNV\Debug\Obj\UsartPro.r90
#
###############################################################################

D:\S2Prog\IO\New ANSGCNV\Src\UsartPro.c
      1          /****************************************************************************************
      2          / Com protocol for USART0 
      3          /
      4          ***************************************************************************************/
      5          
      6          #include "iom128a.h"

   \                                 In  segment ABSOLUTE, at 0x9a
   \   union <unnamed> volatile __io _A_UCSR1B
   \                     _A_UCSR1B:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x41
   \   union <unnamed> volatile __io _A_WDTCR
   \                     _A_WDTCR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x3e
   \   union <unnamed> volatile __io _A_EEAR
   \                     _A_EEAR:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0x3d
   \   union <unnamed> volatile __io _A_EEDR
   \                     _A_EEDR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x3c
   \   union <unnamed> volatile __io _A_EECR
   \                     _A_EECR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x2a
   \   union <unnamed> volatile __io _A_UCSR0B
   \                     _A_UCSR0B:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x23
   \   union <unnamed> volatile __io _A_PORTE
   \                     _A_PORTE:
   \   00000000                      DS8 1
      7          #include "stdio.h"
      8          #include "math.h"
      9          #include "string.h"
     10          #include "externals.h"
     11          #include "version.h"
     12          
     13          /*************************************************************************
     14          *   (This is a timer calback)
     15          *  Timout timer USART 0
     16          *
     17          *************************************************************************/

   \                                 In  segment CODE, align 2, keep-with-next
     18          void TimoutUSART0(void) {
   \                     TimoutUSART0:
     19          
     20              UCSR0B &= ~(__BIT_MASK( UDRIE0)) ;            // transmission end, disable int.
   \   00000000   9855               CBI     0x0A, 0x05
     21              ClrBit(PORTE, 0x04) ;                              // TXE0 off
   \   00000002   94F8               cli
   \   00000004   9100....           LDS     R16, (OS_Global + 1)
   \   00000008   9503               INC     R16
   \   0000000A   9300....           STS     (OS_Global + 1), R16
   \   0000000E   981A               CBI     0x03, 0x02
   \   00000010   9100....           LDS     R16, (OS_Global + 1)
   \   00000014   950A               DEC     R16
   \   00000016   9300....           STS     (OS_Global + 1), R16
   \   0000001A   9100....           LDS     R16, (OS_Global + 1)
   \   0000001E   2300               TST     R16
   \   00000020   F409               BRNE    ??TimoutUSART0_0
   \   00000022   9478               sei
     22              OS_StopTimer(&TimerUSART0);                    // and stop timer
   \                     ??TimoutUSART0_0:
   \   00000024   ....               LDI     R16, LOW(TimerUSART0)
   \   00000026   ....               LDI     R17, (TimerUSART0) >> 8
   \   00000028   ........           CALL    OS_StopTimer
     23              GoToSyncUART(0) ;                                    // go to sync modus for recive
   \   0000002C   E000               LDI     R16, 0
   \   0000002E   ....               RCALL   GoToSyncUART
     24          }
   \   00000030   9508               RET
   \   00000032                      REQUIRE _A_UCSR0B
   \   00000032                      REQUIRE _A_PORTE
     25          
     26          /*************************************************************************
     27          *   (This is a timer calback)
     28          *  Timer USART 0 on before TX
     29          *
     30          *************************************************************************/

   \                                 In  segment CODE, align 2, keep-with-next
     31          void TimoutUSART0On(void) {
   \                     TimoutUSART0On:
     32          
     33              UCSR0B |= __BIT_MASK( UDRIE0) ;                     // start sending by enableing interrupt
   \   00000000   9A55               SBI     0x0A, 0x05
     34              OS_StopTimer(&TimerUSART0On);                    // and stop timer
   \   00000002   ....               LDI     R16, LOW(TimerUSART0On)
   \   00000004   ....               LDI     R17, (TimerUSART0On) >> 8
   \   00000006   ........           CALL    OS_StopTimer
     35          }
   \   0000000A   9508               RET
   \   0000000C                      REQUIRE _A_UCSR0B
     36          
     37          /*************************************************************************
     38          *   (This is a timer calback)
     39          *  Timout timer USART 1
     40          *
     41          *************************************************************************/

   \                                 In  segment CODE, align 2, keep-with-next
     42          void TimoutUSART1(void) {
   \                     TimoutUSART1:
     43          
     44              UCSR1B &= ~(__BIT_MASK( UDRIE1)) ;            // transmission end, disable int.
   \   00000000   9100009A           LDS     R16, 154
   \   00000004   7D0F               ANDI    R16, 0xDF
   \   00000006   9300009A           STS     154, R16
     45              ClrBit(PORTE, 0x08) ;                              // TXE1 off
   \   0000000A   94F8               cli
   \   0000000C   9100....           LDS     R16, (OS_Global + 1)
   \   00000010   9503               INC     R16
   \   00000012   9300....           STS     (OS_Global + 1), R16
   \   00000016   981B               CBI     0x03, 0x03
   \   00000018   9100....           LDS     R16, (OS_Global + 1)
   \   0000001C   950A               DEC     R16
   \   0000001E   9300....           STS     (OS_Global + 1), R16
   \   00000022   9100....           LDS     R16, (OS_Global + 1)
   \   00000026   2300               TST     R16
   \   00000028   F409               BRNE    ??TimoutUSART1_0
   \   0000002A   9478               sei
     46              OS_StopTimer(&TimerUSART1);                    // and stop timer
   \                     ??TimoutUSART1_0:
   \   0000002C   ....               LDI     R16, LOW(TimerUSART1)
   \   0000002E   ....               LDI     R17, (TimerUSART1) >> 8
   \   00000030   ........           CALL    OS_StopTimer
     47              GoToSyncUART(1) ;                                    // go to sync modus for recive
   \   00000034   E001               LDI     R16, 1
   \   00000036   ....               RCALL   GoToSyncUART
     48          }
   \   00000038   9508               RET
   \   0000003A                      REQUIRE _A_UCSR1B
   \   0000003A                      REQUIRE _A_PORTE
     49          
     50          
     51          /*************************************************************************
     52          *   (This is a timer calback)
     53          *  Timer USART 1 on before TX
     54          *
     55          *************************************************************************/

   \                                 In  segment CODE, align 2, keep-with-next
     56          void TimoutUSART1On(void) {
   \                     TimoutUSART1On:
     57          
     58              UCSR1B |= __BIT_MASK( UDRIE1) ;                     // start sending by enableing interrupt
   \   00000000   9100009A           LDS     R16, 154
   \   00000004   6200               ORI     R16, 0x20
   \   00000006   9300009A           STS     154, R16
     59              OS_StopTimer(&TimerUSART1On);                    // and stop timer
   \   0000000A   ....               LDI     R16, LOW(TimerUSART1On)
   \   0000000C   ....               LDI     R17, (TimerUSART1On) >> 8
   \   0000000E   ........           CALL    OS_StopTimer
     60          }
   \   00000012   9508               RET
   \   00000014                      REQUIRE _A_UCSR1B
     61          
     62          
     63          /*************************************************************************
     64          *   (This is a task)
     65          *  Usart0 handler
     66          *
     67          *************************************************************************/

   \                                 In  segment CODE, align 2, keep-with-next
     68          void Usart0Handler(void) {
   \                     Usart0Handler:
   \   00000000   938A               ST      -Y, R24
     69              char stat;
     70          
     71              while (1) {
     72                  stat = OS_WaitEventTimed(1,500);
   \                     ??Usart0Handler_0:
   \   00000002   EF24               LDI     R18, 244
   \   00000004   E031               LDI     R19, 1
   \   00000006   E001               LDI     R16, 1
   \   00000008   ........           CALL    OS_WaitEventTimed
   \   0000000C   2F80               MOV     R24, R16
     73                  if (stat) {
   \   0000000E   2388               TST     R24
   \   00000010   F3C1               BREQ    ??Usart0Handler_0
     74                      OS_Use(&UARTSEND);
   \   00000012   ....               LDI     R16, LOW(UARTSEND)
   \   00000014   ....               LDI     R17, (UARTSEND) >> 8
   \   00000016   ........           CALL    OS_Use
     75                      UsartCheckPackage(0) ; 
   \   0000001A   E000               LDI     R16, 0
   \   0000001C   ....               RCALL   UsartCheckPackage
     76                      OS_Unuse(&UARTSEND);
   \   0000001E   ....               LDI     R16, LOW(UARTSEND)
   \   00000020   ....               LDI     R17, (UARTSEND) >> 8
   \   00000022   ........           CALL    OS_Unuse
   \   00000026   CFED               RJMP    ??Usart0Handler_0
     77                  }
     78              }
     79          }
     80          
     81          /*************************************************************************
     82          *   (This is a task)
     83          *  Usart1 handler
     84          *
     85          *************************************************************************/

   \                                 In  segment CODE, align 2, keep-with-next
     86          void Usart1Handler(void) {
   \                     Usart1Handler:
   \   00000000   938A               ST      -Y, R24
     87              char stat;
     88          
     89              while (1) {
     90                  stat = OS_WaitEventTimed(1,500);
   \                     ??Usart1Handler_0:
   \   00000002   EF24               LDI     R18, 244
   \   00000004   E031               LDI     R19, 1
   \   00000006   E001               LDI     R16, 1
   \   00000008   ........           CALL    OS_WaitEventTimed
   \   0000000C   2F80               MOV     R24, R16
     91                  if (stat) {
   \   0000000E   2388               TST     R24
   \   00000010   F3C1               BREQ    ??Usart1Handler_0
     92                      OS_Use(&UARTSEND);
   \   00000012   ....               LDI     R16, LOW(UARTSEND)
   \   00000014   ....               LDI     R17, (UARTSEND) >> 8
   \   00000016   ........           CALL    OS_Use
     93                      UsartCheckPackage(1) ; 
   \   0000001A   E001               LDI     R16, 1
   \   0000001C   ....               RCALL   UsartCheckPackage
     94                      OS_Unuse(&UARTSEND);
   \   0000001E   ....               LDI     R16, LOW(UARTSEND)
   \   00000020   ....               LDI     R17, (UARTSEND) >> 8
   \   00000022   ........           CALL    OS_Unuse
   \   00000026   CFED               RJMP    ??Usart1Handler_0
     95                  }
     96              }
     97          }
     98          
     99          /*************************************************************************
    100          *
    101          *  Check the incoming packages
    102          *
    103          *************************************************************************/

   \                                 In  segment CODE, align 2, keep-with-next
    104          void UsartCheckPackage(char ch) {
   \                     UsartCheckPackage:
   \   00000000   ........           CALL    ?PROLOGUE4_L09
   \   00000004   2FA0               MOV     R26, R16
    105          
    106              unsigned short pointer;
    107              char    retval ;
    108          
    109              UART[ch].RxSendReply = false ;                              // flag for answering set to fault
   \   00000006   2F0A               MOV     R16, R26
   \   00000008   E010               LDI     R17, 0
   \   0000000A   E14A               LDI     R20, 26
   \   0000000C   E050               LDI     R21, 0
   \   0000000E   ........           CALL    ?S_EC_MUL_L02
   \   00000012   01F8               MOVW    R31:R30, R17:R16
   \   00000014   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000016   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000018   E000               LDI     R16, 0
   \   0000001A   8F01               STD     Z+25, R16
    110              UART[ch].TxFirst = 11 ;                                     // Start pos for first TX command
   \   0000001C   2F0A               MOV     R16, R26
   \   0000001E   E010               LDI     R17, 0
   \   00000020   E14A               LDI     R20, 26
   \   00000022   E050               LDI     R21, 0
   \   00000024   ........           CALL    ?S_EC_MUL_L02
   \   00000028   01F8               MOVW    R31:R30, R17:R16
   \   0000002A   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000002C   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000002E   E00B               LDI     R16, 11
   \   00000030   E010               LDI     R17, 0
   \   00000032   8302               STD     Z+2, R16
   \   00000034   8313               STD     Z+3, R17
    111              pointer = 7 ;
   \   00000036   E087               LDI     R24, 7
   \   00000038   E090               LDI     R25, 0
    112              do {
    113                  retval = CheckActionUart(ch, pointer);
   \                     ??UsartCheckPackage_0:
   \   0000003A   019C               MOVW    R19:R18, R25:R24
   \   0000003C   2F0A               MOV     R16, R26
   \   0000003E   ....               RCALL   CheckActionUart
   \   00000040   2FB0               MOV     R27, R16
    114                  pointer = pointer + UART[ch].pRxBuffer[pointer+2] 
    115                            + (UART[ch].pRxBuffer[pointer+3]*256) + 4;      // Point to a command cmd hb/lb
   \   00000042   2F0A               MOV     R16, R26
   \   00000044   E010               LDI     R17, 0
   \   00000046   E14A               LDI     R20, 26
   \   00000048   E050               LDI     R21, 0
   \   0000004A   ........           CALL    ?S_EC_MUL_L02
   \   0000004E   01F8               MOVW    R31:R30, R17:R16
   \   00000050   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000052   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000054   8502               LDD     R16, Z+10
   \   00000056   8513               LDD     R17, Z+11
   \   00000058   0F08               ADD     R16, R24
   \   0000005A   1F19               ADC     R17, R25
   \   0000005C   01F8               MOVW    R31:R30, R17:R16
   \   0000005E   8122               LDD     R18, Z+2
   \   00000060   E030               LDI     R19, 0
   \   00000062   2F0A               MOV     R16, R26
   \   00000064   E010               LDI     R17, 0
   \   00000066   E14A               LDI     R20, 26
   \   00000068   E050               LDI     R21, 0
   \   0000006A   ........           CALL    ?S_EC_MUL_L02
   \   0000006E   01F8               MOVW    R31:R30, R17:R16
   \   00000070   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000072   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000074   8502               LDD     R16, Z+10
   \   00000076   8513               LDD     R17, Z+11
   \   00000078   0F08               ADD     R16, R24
   \   0000007A   1F19               ADC     R17, R25
   \   0000007C   01F8               MOVW    R31:R30, R17:R16
   \   0000007E   8103               LDD     R16, Z+3
   \   00000080   E010               LDI     R17, 0
   \   00000082   2F10               MOV     R17, R16
   \   00000084   E000               LDI     R16, 0
   \   00000086   0F20               ADD     R18, R16
   \   00000088   1F31               ADC     R19, R17
   \   0000008A   5F2C               SUBI    R18, 252
   \   0000008C   4F3F               SBCI    R19, 255
   \   0000008E   0F82               ADD     R24, R18
   \   00000090   1F93               ADC     R25, R19
    116              } while (retval && (pointer < (UART[ch].RxPacklen - 4 )));
   \   00000092   23BB               TST     R27
   \   00000094   F081               BREQ    ??UsartCheckPackage_1
   \   00000096   2F0A               MOV     R16, R26
   \   00000098   E010               LDI     R17, 0
   \   0000009A   E14A               LDI     R20, 26
   \   0000009C   E050               LDI     R21, 0
   \   0000009E   ........           CALL    ?S_EC_MUL_L02
   \   000000A2   01F8               MOVW    R31:R30, R17:R16
   \   000000A4   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000000A6   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000000A8   8906               LDD     R16, Z+22
   \   000000AA   8917               LDD     R17, Z+23
   \   000000AC   5004               SUBI    R16, 4
   \   000000AE   4010               SBCI    R17, 0
   \   000000B0   1780               CP      R24, R16
   \   000000B2   0791               CPC     R25, R17
   \   000000B4   F210               BRCS    ??UsartCheckPackage_0
    117              if (UART[ch].RxSendReply) {                                   //send answer?
   \                     ??UsartCheckPackage_1:
   \   000000B6   2F0A               MOV     R16, R26
   \   000000B8   E010               LDI     R17, 0
   \   000000BA   E14A               LDI     R20, 26
   \   000000BC   E050               LDI     R21, 0
   \   000000BE   ........           CALL    ?S_EC_MUL_L02
   \   000000C2   01F8               MOVW    R31:R30, R17:R16
   \   000000C4   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000000C6   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000000C8   8D01               LDD     R16, Z+25
   \   000000CA   2300               TST     R16
   \   000000CC   F021               BREQ    ??UsartCheckPackage_2
    118                  Uart_BuildTail(ch);                                       // yes, build tail (and header) and start sending
   \   000000CE   2F0A               MOV     R16, R26
   \   000000D0   ........           CALL    Uart_BuildTail
   \   000000D4   C003               RJMP    ??UsartCheckPackage_3
    119              } else {
    120                  GoToSyncUART(ch) ;                                        // go to sync modus here if not reply
   \                     ??UsartCheckPackage_2:
   \   000000D6   2F0A               MOV     R16, R26
   \   000000D8   ........           CALL    GoToSyncUART
    121              }
    122          }
   \                     ??UsartCheckPackage_3:
   \   000000DC   E0E4               LDI     R30, 4
   \   000000DE   ........           JMP     ?EPILOGUE_B4_L09
    123          
    124          
    125          /*************************************************************************
    126          *
    127          *  Check action on received data
    128          *
    129          *************************************************************************/

   \                                 In  segment CODE, align 2, keep-with-next
    130          char CheckActionUart(char ch, unsigned short pointer) {
   \                     CheckActionUart:
   \   00000000   ........           CALL    ?PROLOGUE6_L09
   \   00000004                      REQUIRE ?Register_R4_is_cg_reg
   \   00000004                      REQUIRE ?Register_R5_is_cg_reg
   \   00000004   2FA0               MOV     R26, R16
   \   00000006   01C9               MOVW    R25:R24, R19:R18
    131          
    132              unsigned short   command;
    133              char    retval = true;
   \   00000008   E0B1               LDI     R27, 1
    134           
    135              command = UART[ch].pRxBuffer[pointer] | (UART[ch].pRxBuffer[pointer+1] << 8);
   \   0000000A   2F0A               MOV     R16, R26
   \   0000000C   E010               LDI     R17, 0
   \   0000000E   E14A               LDI     R20, 26
   \   00000010   E050               LDI     R21, 0
   \   00000012   ........           CALL    ?S_EC_MUL_L02
   \   00000016   01F8               MOVW    R31:R30, R17:R16
   \   00000018   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000001A   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000001C   8502               LDD     R16, Z+10
   \   0000001E   8513               LDD     R17, Z+11
   \   00000020   0F08               ADD     R16, R24
   \   00000022   1F19               ADC     R17, R25
   \   00000024   01F8               MOVW    R31:R30, R17:R16
   \   00000026   8120               LD      R18, Z
   \   00000028   2F0A               MOV     R16, R26
   \   0000002A   E010               LDI     R17, 0
   \   0000002C   E14A               LDI     R20, 26
   \   0000002E   E050               LDI     R21, 0
   \   00000030   ........           CALL    ?S_EC_MUL_L02
   \   00000034   01F8               MOVW    R31:R30, R17:R16
   \   00000036   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000038   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000003A   8502               LDD     R16, Z+10
   \   0000003C   8513               LDD     R17, Z+11
   \   0000003E   0F08               ADD     R16, R24
   \   00000040   1F19               ADC     R17, R25
   \   00000042   01F8               MOVW    R31:R30, R17:R16
   \   00000044   8131               LDD     R19, Z+1
   \   00000046   0129               MOVW    R5:R4, R19:R18
    136              switch (command) {                                  // check action 
   \   00000048   0182               MOVW    R17:R16, R5:R4
   \   0000004A   ....               LDI     R30, LOW(`?<Jumptable for CheckActionUart>_0`)
   \   0000004C   ....               LDI     R31, (`?<Jumptable for CheckActionUart>_0`) >> 16
   \   0000004E   BFFB               OUT     0x3B, R31
   \   00000050   ....               LDI     R31, HIGH(`?<Jumptable for CheckActionUart>_0`)
   \   00000052   ........           JMP     ?SV_SWITCH_L06
    137              case CMD_REQ_STATUS :                           // Regusest status for target
    138                  BuildStatusData(ch) ;                         // make package
   \                     ??CheckActionUart_0:
   \   00000056   2F0A               MOV     R16, R26
   \   00000058   ....               RCALL   BuildStatusData
    139                  break;
   \   0000005A   C06D               RJMP    ??CheckActionUart_1
    140          
    141              case CMD_GET_STACKSTATUS :                        // Request stck status
    142                  BuildStackStatus(ch, pointer+4) ;                     // receive package	
   \                     ??CheckActionUart_2:
   \   0000005C   019C               MOVW    R19:R18, R25:R24
   \   0000005E   5F2C               SUBI    R18, 252
   \   00000060   4F3F               SBCI    R19, 255
   \   00000062   2F0A               MOV     R16, R26
   \   00000064   ....               RCALL   BuildStackStatus
    143                  break ;
   \   00000066   C067               RJMP    ??CheckActionUart_1
    144          
    145              case CMD_EEPROM_RESET :                        // Reset EEPROM??
    146                  GetResetEEPROM(ch, pointer+4) ;                     // receive package	
   \                     ??CheckActionUart_3:
   \   00000068   019C               MOVW    R19:R18, R25:R24
   \   0000006A   5F2C               SUBI    R18, 252
   \   0000006C   4F3F               SBCI    R19, 255
   \   0000006E   2F0A               MOV     R16, R26
   \   00000070   ....               RCALL   GetResetEEPROM
    147                  break ;
   \   00000072   C061               RJMP    ??CheckActionUart_1
    148          
    149              case CMD_GOTO_BOOTLOADER :                        // Goto bootlaoder??
    150                  GetGotoBootloader(ch, pointer+4) ;                     // receive package	
   \                     ??CheckActionUart_4:
   \   00000074   019C               MOVW    R19:R18, R25:R24
   \   00000076   5F2C               SUBI    R18, 252
   \   00000078   4F3F               SBCI    R19, 255
   \   0000007A   2F0A               MOV     R16, R26
   \   0000007C   ....               RCALL   GetGotoBootloader
    151                  break ;
   \   0000007E   C05B               RJMP    ??CheckActionUart_1
    152          
    153              case CMD_SND_EEPROM_DATA :                              // Receive EEPROM data
    154                  GetEEPROMData(ch, pointer+4) ;                     // receive package	
   \                     ??CheckActionUart_5:
   \   00000080   019C               MOVW    R19:R18, R25:R24
   \   00000082   5F2C               SUBI    R18, 252
   \   00000084   4F3F               SBCI    R19, 255
   \   00000086   2F0A               MOV     R16, R26
   \   00000088   ....               RCALL   GetEEPROMData
    155                  break ;
   \   0000008A   C055               RJMP    ??CheckActionUart_1
    156          
    157              case CMD_REQ_EEPROM_DATA :                              // Request to send EEPROM data
    158                  BuildEEPROMData(ch, pointer+4) ;                     // receive package	
   \                     ??CheckActionUart_6:
   \   0000008C   019C               MOVW    R19:R18, R25:R24
   \   0000008E   5F2C               SUBI    R18, 252
   \   00000090   4F3F               SBCI    R19, 255
   \   00000092   2F0A               MOV     R16, R26
   \   00000094   ....               RCALL   BuildEEPROMData
    159                  break ;
   \   00000096   C04F               RJMP    ??CheckActionUart_1
    160          
    161              case CMD_REQ_INT_DATA :                              // Request external data
    162                  BuildADInt(ch, pointer+4) ;                     // receive package	
   \                     ??CheckActionUart_7:
   \   00000098   019C               MOVW    R19:R18, R25:R24
   \   0000009A   5F2C               SUBI    R18, 252
   \   0000009C   4F3F               SBCI    R19, 255
   \   0000009E   2F0A               MOV     R16, R26
   \   000000A0   ........           CALL    BuildADInt
    163                  break ;
   \   000000A4   C048               RJMP    ??CheckActionUart_1
    164          
    165              case CMD_SND_RS4_SETUP :                              // Receive sertup of AN-RS485
    166                  break ;
    167              case CMD_REQ_RS4_SETUP :                              // Request for sertup of AN-RS485
    168                  if (UnitID == AN_ZB485) {
   \                     ??CheckActionUart_8:
   \   000000A6   9100....           LDS     R16, UnitID
   \   000000AA   2300               TST     R16
   \   000000AC   F431               BRNE    ??CheckActionUart_9
    169                      BuildRS4Setup(ch, pointer+4) ;                     // receive package	
   \   000000AE   019C               MOVW    R19:R18, R25:R24
   \   000000B0   5F2C               SUBI    R18, 252
   \   000000B2   4F3F               SBCI    R19, 255
   \   000000B4   2F0A               MOV     R16, R26
   \   000000B6   ........           CALL    BuildRS4Setup
    170                  }
    171                  break ;
   \                     ??CheckActionUart_9:
   \   000000BA   C03D               RJMP    ??CheckActionUart_1
    172                  
    173              case CMD_SND_RS4_ADBUF :                              // Request external AD data
    174                  break;
    175                  
    176              case CMD_REQ_RS4_DATA :                              // Request external AD eeprom data
    177                  break;
    178              case CMD_SND_ANA_SETUP :                              // Receive sertup of AN-RSANA
    179                  if (UnitID == AN_ZBANA) {
   \                     ??CheckActionUart_10:
   \   000000BC   9100....           LDS     R16, UnitID
   \   000000C0   3001               CPI     R16, 1
   \   000000C2   F5C9               BRNE    ??CheckActionUart_1
    180                      GetANASetup(ch, pointer+4) ;                     // receive package	
   \   000000C4   019C               MOVW    R19:R18, R25:R24
   \   000000C6   5F2C               SUBI    R18, 252
   \   000000C8   4F3F               SBCI    R19, 255
   \   000000CA   2F0A               MOV     R16, R26
   \   000000CC   ........           CALL    GetANASetup
    181                  }
    182                  break ;
   \   000000D0   C032               RJMP    ??CheckActionUart_1
    183          
    184              case CMD_REQ_ANA_SETUP :                              // Request for sertup of AN-RSANA
    185                  if (UnitID == AN_ZBANA) {
   \                     ??CheckActionUart_11:
   \   000000D2   9100....           LDS     R16, UnitID
   \   000000D6   3001               CPI     R16, 1
   \   000000D8   F571               BRNE    ??CheckActionUart_1
    186                      BuildANASetup(ch, pointer+4) ;                     // receive package	
   \   000000DA   019C               MOVW    R19:R18, R25:R24
   \   000000DC   5F2C               SUBI    R18, 252
   \   000000DE   4F3F               SBCI    R19, 255
   \   000000E0   2F0A               MOV     R16, R26
   \   000000E2   ........           CALL    BuildANASetup
    187                  }
    188                  break ;
   \   000000E6   C027               RJMP    ??CheckActionUart_1
    189          
    190              case CMD_SND_ANA_FILTER :                              // Receive filter of AN-RSANA
    191                  if (UnitID == AN_ZBANA) {
   \                     ??CheckActionUart_12:
   \   000000E8   9100....           LDS     R16, UnitID
   \   000000EC   3001               CPI     R16, 1
   \   000000EE   F519               BRNE    ??CheckActionUart_1
    192                      GetANAFilter(ch, pointer+4) ;                     // receive package	
   \   000000F0   019C               MOVW    R19:R18, R25:R24
   \   000000F2   5F2C               SUBI    R18, 252
   \   000000F4   4F3F               SBCI    R19, 255
   \   000000F6   2F0A               MOV     R16, R26
   \   000000F8   ........           CALL    GetANAFilter
    193                  }
    194                  break ;
   \   000000FC   C01C               RJMP    ??CheckActionUart_1
    195          
    196              case CMD_REQ_ANA_FILTER :                              // Request filter of AN-RSANA
    197                  if (UnitID == AN_ZBANA) {
   \                     ??CheckActionUart_13:
   \   000000FE   9100....           LDS     R16, UnitID
   \   00000102   3001               CPI     R16, 1
   \   00000104   F4C1               BRNE    ??CheckActionUart_1
    198                      BuildANAFilter(ch, pointer+4) ;                     // receive package	
   \   00000106   019C               MOVW    R19:R18, R25:R24
   \   00000108   5F2C               SUBI    R18, 252
   \   0000010A   4F3F               SBCI    R19, 255
   \   0000010C   2F0A               MOV     R16, R26
   \   0000010E   ........           CALL    BuildANAFilter
    199                  }
    200                  break ;
   \   00000112   C011               RJMP    ??CheckActionUart_1
    201          
    202              case CMD_REQ_ANA_DATA :                              // Request ANA data(4-20ma)
    203                  if (UnitID == AN_ZBANA) {
   \                     ??CheckActionUart_14:
   \   00000114   9100....           LDS     R16, UnitID
   \   00000118   3001               CPI     R16, 1
   \   0000011A   F469               BRNE    ??CheckActionUart_1
    204                      BuildMDataANA(ch, pointer+4) ;                     // receive 
   \   0000011C   019C               MOVW    R19:R18, R25:R24
   \   0000011E   5F2C               SUBI    R18, 252
   \   00000120   4F3F               SBCI    R19, 255
   \   00000122   2F0A               MOV     R16, R26
   \   00000124   ........           CALL    BuildMDataANA
    205                  }
    206                  break ;
   \   00000128   C006               RJMP    ??CheckActionUart_1
    207          
    208              default:
    209                  if (command < MAX_ECMD) {                   // handle end commands
   \                     ??CheckActionUart_15:
   \   0000012A   E604               LDI     R16, 100
   \   0000012C   1640               CP      R4, R16
   \   0000012E   E000               LDI     R16, 0
   \   00000130   0650               CPC     R5, R16
   \   00000132   F408               BRCC    ??CheckActionUart_1
    210                      retval = false ;
   \   00000134   E0B0               LDI     R27, 0
    211                  }
    212                  break;
    213          
    214              }
    215              return retval;
   \                     ??CheckActionUart_1:
   \   00000136   2F0B               MOV     R16, R27
   \   00000138   E0E6               LDI     R30, 6
   \   0000013A   ........           JMP     ?EPILOGUE_B6_L09
    216          }
    217          
    218          /*************************************************************************
    219          *
    220          * Build send packet header
    221          *
    222          *************************************************************************/

   \                                 In  segment CODE, align 2, keep-with-next
    223          void Uart_BuildHeader(char ch) {
   \                     Uart_BuildHeader:
   \   00000000   938A               ST      -Y, R24
   \   00000002   2F80               MOV     R24, R16
    224          
    225              UART[ch].RxFirst = 0;                                // Reset pointers
   \   00000004   2F08               MOV     R16, R24
   \   00000006   E010               LDI     R17, 0
   \   00000008   E14A               LDI     R20, 26
   \   0000000A   E050               LDI     R21, 0
   \   0000000C   ........           CALL    ?S_EC_MUL_L02
   \   00000010   01F8               MOVW    R31:R30, R17:R16
   \   00000012   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000014   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000016   E000               LDI     R16, 0
   \   00000018   8704               STD     Z+12, R16
   \   0000001A   E000               LDI     R16, 0
   \   0000001C   8705               STD     Z+13, R16
    226              UART[ch].RxLast  = 0;
   \   0000001E   2F08               MOV     R16, R24
   \   00000020   E010               LDI     R17, 0
   \   00000022   E14A               LDI     R20, 26
   \   00000024   E050               LDI     R21, 0
   \   00000026   ........           CALL    ?S_EC_MUL_L02
   \   0000002A   01F8               MOVW    R31:R30, R17:R16
   \   0000002C   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000002E   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000030   E000               LDI     R16, 0
   \   00000032   8706               STD     Z+14, R16
   \   00000034   E000               LDI     R16, 0
   \   00000036   8707               STD     Z+15, R16
    227              UART[ch].TxLast  = 0;
   \   00000038   2F08               MOV     R16, R24
   \   0000003A   E010               LDI     R17, 0
   \   0000003C   E14A               LDI     R20, 26
   \   0000003E   E050               LDI     R21, 0
   \   00000040   ........           CALL    ?S_EC_MUL_L02
   \   00000044   01F8               MOVW    R31:R30, R17:R16
   \   00000046   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000048   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000004A   E000               LDI     R16, 0
   \   0000004C   8304               STD     Z+4, R16
   \   0000004E   E000               LDI     R16, 0
   \   00000050   8305               STD     Z+5, R16
    228          
    229              UART[ch].pTxBuffer[0] = ANPRO10_SYN ;                        /* Sync */
   \   00000052   2F08               MOV     R16, R24
   \   00000054   E010               LDI     R17, 0
   \   00000056   E14A               LDI     R20, 26
   \   00000058   E050               LDI     R21, 0
   \   0000005A   ........           CALL    ?S_EC_MUL_L02
   \   0000005E   01F8               MOVW    R31:R30, R17:R16
   \   00000060   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000062   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000064   8100               LD      R16, Z
   \   00000066   8111               LDD     R17, Z+1
   \   00000068   01F8               MOVW    R31:R30, R17:R16
   \   0000006A   E106               LDI     R16, 22
   \   0000006C   8300               ST      Z, R16
    230              UART[ch].pTxBuffer[1] = ANPRO10_SYN ;                        /* Sync */
   \   0000006E   2F08               MOV     R16, R24
   \   00000070   E010               LDI     R17, 0
   \   00000072   E14A               LDI     R20, 26
   \   00000074   E050               LDI     R21, 0
   \   00000076   ........           CALL    ?S_EC_MUL_L02
   \   0000007A   01F8               MOVW    R31:R30, R17:R16
   \   0000007C   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000007E   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000080   8100               LD      R16, Z
   \   00000082   8111               LDD     R17, Z+1
   \   00000084   01F8               MOVW    R31:R30, R17:R16
   \   00000086   E106               LDI     R16, 22
   \   00000088   8301               STD     Z+1, R16
    231              UART[ch].pTxBuffer[2] = ANPRO10_SYN ;                        /* Sync */
   \   0000008A   2F08               MOV     R16, R24
   \   0000008C   E010               LDI     R17, 0
   \   0000008E   E14A               LDI     R20, 26
   \   00000090   E050               LDI     R21, 0
   \   00000092   ........           CALL    ?S_EC_MUL_L02
   \   00000096   01F8               MOVW    R31:R30, R17:R16
   \   00000098   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000009A   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000009C   8100               LD      R16, Z
   \   0000009E   8111               LDD     R17, Z+1
   \   000000A0   01F8               MOVW    R31:R30, R17:R16
   \   000000A2   E106               LDI     R16, 22
   \   000000A4   8302               STD     Z+2, R16
    232              UART[ch].pTxBuffer[3] = ANPRO10_SOH ;                        /* Start of header */
   \   000000A6   2F08               MOV     R16, R24
   \   000000A8   E010               LDI     R17, 0
   \   000000AA   E14A               LDI     R20, 26
   \   000000AC   E050               LDI     R21, 0
   \   000000AE   ........           CALL    ?S_EC_MUL_L02
   \   000000B2   01F8               MOVW    R31:R30, R17:R16
   \   000000B4   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000000B6   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000000B8   8100               LD      R16, Z
   \   000000BA   8111               LDD     R17, Z+1
   \   000000BC   01F8               MOVW    R31:R30, R17:R16
   \   000000BE   E001               LDI     R16, 1
   \   000000C0   8303               STD     Z+3, R16
    233              UART[ch].pTxBuffer[4] = UART[ch].pRxBuffer[2] ;      /* RXID */
   \   000000C2   2F08               MOV     R16, R24
   \   000000C4   E010               LDI     R17, 0
   \   000000C6   E14A               LDI     R20, 26
   \   000000C8   E050               LDI     R21, 0
   \   000000CA   ........           CALL    ?S_EC_MUL_L02
   \   000000CE   01F8               MOVW    R31:R30, R17:R16
   \   000000D0   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000000D2   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000000D4   8502               LDD     R16, Z+10
   \   000000D6   8513               LDD     R17, Z+11
   \   000000D8   01F8               MOVW    R31:R30, R17:R16
   \   000000DA   8122               LDD     R18, Z+2
   \   000000DC   2F08               MOV     R16, R24
   \   000000DE   E010               LDI     R17, 0
   \   000000E0   E14A               LDI     R20, 26
   \   000000E2   E050               LDI     R21, 0
   \   000000E4   ........           CALL    ?S_EC_MUL_L02
   \   000000E8   01F8               MOVW    R31:R30, R17:R16
   \   000000EA   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000000EC   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000000EE   8100               LD      R16, Z
   \   000000F0   8111               LDD     R17, Z+1
   \   000000F2   01F8               MOVW    R31:R30, R17:R16
   \   000000F4   8324               STD     Z+4, R18
    234              UART[ch].pTxBuffer[5] = UART[ch].pRxBuffer[3] ;      /* Rx address */
   \   000000F6   2F08               MOV     R16, R24
   \   000000F8   E010               LDI     R17, 0
   \   000000FA   E14A               LDI     R20, 26
   \   000000FC   E050               LDI     R21, 0
   \   000000FE   ........           CALL    ?S_EC_MUL_L02
   \   00000102   01F8               MOVW    R31:R30, R17:R16
   \   00000104   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000106   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000108   8502               LDD     R16, Z+10
   \   0000010A   8513               LDD     R17, Z+11
   \   0000010C   01F8               MOVW    R31:R30, R17:R16
   \   0000010E   8123               LDD     R18, Z+3
   \   00000110   2F08               MOV     R16, R24
   \   00000112   E010               LDI     R17, 0
   \   00000114   E14A               LDI     R20, 26
   \   00000116   E050               LDI     R21, 0
   \   00000118   ........           CALL    ?S_EC_MUL_L02
   \   0000011C   01F8               MOVW    R31:R30, R17:R16
   \   0000011E   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000120   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000122   8100               LD      R16, Z
   \   00000124   8111               LDD     R17, Z+1
   \   00000126   01F8               MOVW    R31:R30, R17:R16
   \   00000128   8325               STD     Z+5, R18
    235              UART[ch].pTxBuffer[6] = 0x10 + UnitID ;              /* Unit ID */
   \   0000012A   9120....           LDS     R18, UnitID
   \   0000012E   5F20               SUBI    R18, 240
   \   00000130   2F08               MOV     R16, R24
   \   00000132   E010               LDI     R17, 0
   \   00000134   E14A               LDI     R20, 26
   \   00000136   E050               LDI     R21, 0
   \   00000138   ........           CALL    ?S_EC_MUL_L02
   \   0000013C   01F8               MOVW    R31:R30, R17:R16
   \   0000013E   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000140   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000142   8100               LD      R16, Z
   \   00000144   8111               LDD     R17, Z+1
   \   00000146   01F8               MOVW    R31:R30, R17:R16
   \   00000148   8326               STD     Z+6, R18
    236              UART[ch].pTxBuffer[7] = MyAddress();                 /* Tx address */
   \   0000014A   ........           CALL    MyAddress
   \   0000014E   2F20               MOV     R18, R16
   \   00000150   2F08               MOV     R16, R24
   \   00000152   E010               LDI     R17, 0
   \   00000154   E14A               LDI     R20, 26
   \   00000156   E050               LDI     R21, 0
   \   00000158   ........           CALL    ?S_EC_MUL_L02
   \   0000015C   01F8               MOVW    R31:R30, R17:R16
   \   0000015E   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000160   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000162   8100               LD      R16, Z
   \   00000164   8111               LDD     R17, Z+1
   \   00000166   01F8               MOVW    R31:R30, R17:R16
   \   00000168   8327               STD     Z+7, R18
    237              UART[ch].pTxBuffer[8] = 0 ;                          /* packlen HB, don't know yet */
   \   0000016A   2F08               MOV     R16, R24
   \   0000016C   E010               LDI     R17, 0
   \   0000016E   E14A               LDI     R20, 26
   \   00000170   E050               LDI     R21, 0
   \   00000172   ........           CALL    ?S_EC_MUL_L02
   \   00000176   01F8               MOVW    R31:R30, R17:R16
   \   00000178   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000017A   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000017C   8100               LD      R16, Z
   \   0000017E   8111               LDD     R17, Z+1
   \   00000180   01F8               MOVW    R31:R30, R17:R16
   \   00000182   E000               LDI     R16, 0
   \   00000184   8700               STD     Z+8, R16
    238              UART[ch].pTxBuffer[9] = 0 ;                          /* packlen LB, don't know yet */
   \   00000186   2F08               MOV     R16, R24
   \   00000188   E010               LDI     R17, 0
   \   0000018A   E14A               LDI     R20, 26
   \   0000018C   E050               LDI     R21, 0
   \   0000018E   ........           CALL    ?S_EC_MUL_L02
   \   00000192   01F8               MOVW    R31:R30, R17:R16
   \   00000194   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000196   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000198   8100               LD      R16, Z
   \   0000019A   8111               LDD     R17, Z+1
   \   0000019C   01F8               MOVW    R31:R30, R17:R16
   \   0000019E   E000               LDI     R16, 0
   \   000001A0   8701               STD     Z+9, R16
    239              UART[ch].pTxBuffer[10] = 0 ;                         /* Header checksum, don't know yet */
   \   000001A2   2F08               MOV     R16, R24
   \   000001A4   E010               LDI     R17, 0
   \   000001A6   E14A               LDI     R20, 26
   \   000001A8   E050               LDI     R21, 0
   \   000001AA   ........           CALL    ?S_EC_MUL_L02
   \   000001AE   01F8               MOVW    R31:R30, R17:R16
   \   000001B0   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000001B2   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000001B4   8100               LD      R16, Z
   \   000001B6   8111               LDD     R17, Z+1
   \   000001B8   01F8               MOVW    R31:R30, R17:R16
   \   000001BA   E000               LDI     R16, 0
   \   000001BC   8702               STD     Z+10, R16
    240          }
   \   000001BE   9189               LD      R24, Y+
   \   000001C0   9508               RET
    241          
    242          /*************************************************************************
    243          *
    244          * Build  packet tail
    245          *
    246          *************************************************************************/

   \                                 In  segment CODE, align 2, keep-with-next
    247          void Uart_BuildTail(char ch) {
   \                     Uart_BuildTail:
   \   00000000   ........           CALL    ?PROLOGUE4_L09
   \   00000004   2F80               MOV     R24, R16
    248          
    249              Uart_BuildHeader(ch);                                    // fist build the header
   \   00000006   2F08               MOV     R16, R24
   \   00000008   ....               RCALL   Uart_BuildHeader
    250          
    251              UART[ch].pTxBuffer[UART[ch].TxFirst++] = ECMD_NMDWOACK & 0xff ;  // End command lb
   \   0000000A   2F08               MOV     R16, R24
   \   0000000C   E010               LDI     R17, 0
   \   0000000E   E14A               LDI     R20, 26
   \   00000010   E050               LDI     R21, 0
   \   00000012   ........           CALL    ?S_EC_MUL_L02
   \   00000016   01F8               MOVW    R31:R30, R17:R16
   \   00000018   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000001A   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000001C   8120               LD      R18, Z
   \   0000001E   8131               LDD     R19, Z+1
   \   00000020   2F08               MOV     R16, R24
   \   00000022   E010               LDI     R17, 0
   \   00000024   E14A               LDI     R20, 26
   \   00000026   E050               LDI     R21, 0
   \   00000028   ........           CALL    ?S_EC_MUL_L02
   \   0000002C   01F8               MOVW    R31:R30, R17:R16
   \   0000002E   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000030   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000032   8102               LDD     R16, Z+2
   \   00000034   8113               LDD     R17, Z+3
   \   00000036   0F20               ADD     R18, R16
   \   00000038   1F31               ADC     R19, R17
   \   0000003A   01F9               MOVW    R31:R30, R19:R18
   \   0000003C   E000               LDI     R16, 0
   \   0000003E   8300               ST      Z, R16
   \   00000040   2F08               MOV     R16, R24
   \   00000042   E010               LDI     R17, 0
   \   00000044   E14A               LDI     R20, 26
   \   00000046   E050               LDI     R21, 0
   \   00000048   ........           CALL    ?S_EC_MUL_L02
   \   0000004C   01F8               MOVW    R31:R30, R17:R16
   \   0000004E   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000050   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000052   8102               LDD     R16, Z+2
   \   00000054   8113               LDD     R17, Z+3
   \   00000056   5F0F               SUBI    R16, 255
   \   00000058   4F1F               SBCI    R17, 255
   \   0000005A   8302               STD     Z+2, R16
   \   0000005C   8313               STD     Z+3, R17
    252              UART[ch].pTxBuffer[UART[ch].TxFirst++] = ECMD_NMDWOACK >> 8 ;    // End command hb 
   \   0000005E   2F08               MOV     R16, R24
   \   00000060   E010               LDI     R17, 0
   \   00000062   E14A               LDI     R20, 26
   \   00000064   E050               LDI     R21, 0
   \   00000066   ........           CALL    ?S_EC_MUL_L02
   \   0000006A   01F8               MOVW    R31:R30, R17:R16
   \   0000006C   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000006E   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000070   8120               LD      R18, Z
   \   00000072   8131               LDD     R19, Z+1
   \   00000074   2F08               MOV     R16, R24
   \   00000076   E010               LDI     R17, 0
   \   00000078   E14A               LDI     R20, 26
   \   0000007A   E050               LDI     R21, 0
   \   0000007C   ........           CALL    ?S_EC_MUL_L02
   \   00000080   01F8               MOVW    R31:R30, R17:R16
   \   00000082   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000084   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000086   8102               LDD     R16, Z+2
   \   00000088   8113               LDD     R17, Z+3
   \   0000008A   0F20               ADD     R18, R16
   \   0000008C   1F31               ADC     R19, R17
   \   0000008E   01F9               MOVW    R31:R30, R19:R18
   \   00000090   E000               LDI     R16, 0
   \   00000092   8300               ST      Z, R16
   \   00000094   2F08               MOV     R16, R24
   \   00000096   E010               LDI     R17, 0
   \   00000098   E14A               LDI     R20, 26
   \   0000009A   E050               LDI     R21, 0
   \   0000009C   ........           CALL    ?S_EC_MUL_L02
   \   000000A0   01F8               MOVW    R31:R30, R17:R16
   \   000000A2   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000000A4   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000000A6   8102               LDD     R16, Z+2
   \   000000A8   8113               LDD     R17, Z+3
   \   000000AA   5F0F               SUBI    R16, 255
   \   000000AC   4F1F               SBCI    R17, 255
   \   000000AE   8302               STD     Z+2, R16
   \   000000B0   8313               STD     Z+3, R17
    253              UART[ch].pTxBuffer[UART[ch].TxFirst++] = 0x00 ;                  // End data 
   \   000000B2   2F08               MOV     R16, R24
   \   000000B4   E010               LDI     R17, 0
   \   000000B6   E14A               LDI     R20, 26
   \   000000B8   E050               LDI     R21, 0
   \   000000BA   ........           CALL    ?S_EC_MUL_L02
   \   000000BE   01F8               MOVW    R31:R30, R17:R16
   \   000000C0   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000000C2   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000000C4   8120               LD      R18, Z
   \   000000C6   8131               LDD     R19, Z+1
   \   000000C8   2F08               MOV     R16, R24
   \   000000CA   E010               LDI     R17, 0
   \   000000CC   E14A               LDI     R20, 26
   \   000000CE   E050               LDI     R21, 0
   \   000000D0   ........           CALL    ?S_EC_MUL_L02
   \   000000D4   01F8               MOVW    R31:R30, R17:R16
   \   000000D6   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000000D8   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000000DA   8102               LDD     R16, Z+2
   \   000000DC   8113               LDD     R17, Z+3
   \   000000DE   0F20               ADD     R18, R16
   \   000000E0   1F31               ADC     R19, R17
   \   000000E2   01F9               MOVW    R31:R30, R19:R18
   \   000000E4   E000               LDI     R16, 0
   \   000000E6   8300               ST      Z, R16
   \   000000E8   2F08               MOV     R16, R24
   \   000000EA   E010               LDI     R17, 0
   \   000000EC   E14A               LDI     R20, 26
   \   000000EE   E050               LDI     R21, 0
   \   000000F0   ........           CALL    ?S_EC_MUL_L02
   \   000000F4   01F8               MOVW    R31:R30, R17:R16
   \   000000F6   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000000F8   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000000FA   8102               LDD     R16, Z+2
   \   000000FC   8113               LDD     R17, Z+3
   \   000000FE   5F0F               SUBI    R16, 255
   \   00000100   4F1F               SBCI    R17, 255
   \   00000102   8302               STD     Z+2, R16
   \   00000104   8313               STD     Z+3, R17
    254          
    255              UART[ch].pTxBuffer[UART[ch].TxFirst++] = UART[ch].TxSeqCnt++ ;   // Sequence counter 
   \   00000106   2F08               MOV     R16, R24
   \   00000108   E010               LDI     R17, 0
   \   0000010A   E14A               LDI     R20, 26
   \   0000010C   E050               LDI     R21, 0
   \   0000010E   ........           CALL    ?S_EC_MUL_L02
   \   00000112   01F8               MOVW    R31:R30, R17:R16
   \   00000114   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000116   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000118   8561               LDD     R22, Z+9
   \   0000011A   2F26               MOV     R18, R22
   \   0000011C   9523               INC     R18
   \   0000011E   2F08               MOV     R16, R24
   \   00000120   E010               LDI     R17, 0
   \   00000122   E14A               LDI     R20, 26
   \   00000124   E050               LDI     R21, 0
   \   00000126   ........           CALL    ?S_EC_MUL_L02
   \   0000012A   01F8               MOVW    R31:R30, R17:R16
   \   0000012C   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000012E   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000130   8721               STD     Z+9, R18
   \   00000132   2F08               MOV     R16, R24
   \   00000134   E010               LDI     R17, 0
   \   00000136   E14A               LDI     R20, 26
   \   00000138   E050               LDI     R21, 0
   \   0000013A   ........           CALL    ?S_EC_MUL_L02
   \   0000013E   01F8               MOVW    R31:R30, R17:R16
   \   00000140   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000142   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000144   8120               LD      R18, Z
   \   00000146   8131               LDD     R19, Z+1
   \   00000148   2F08               MOV     R16, R24
   \   0000014A   E010               LDI     R17, 0
   \   0000014C   E14A               LDI     R20, 26
   \   0000014E   E050               LDI     R21, 0
   \   00000150   ........           CALL    ?S_EC_MUL_L02
   \   00000154   01F8               MOVW    R31:R30, R17:R16
   \   00000156   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000158   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000015A   8102               LDD     R16, Z+2
   \   0000015C   8113               LDD     R17, Z+3
   \   0000015E   0F20               ADD     R18, R16
   \   00000160   1F31               ADC     R19, R17
   \   00000162   01F9               MOVW    R31:R30, R19:R18
   \   00000164   8360               ST      Z, R22
   \   00000166   2F08               MOV     R16, R24
   \   00000168   E010               LDI     R17, 0
   \   0000016A   E14A               LDI     R20, 26
   \   0000016C   E050               LDI     R21, 0
   \   0000016E   ........           CALL    ?S_EC_MUL_L02
   \   00000172   01F8               MOVW    R31:R30, R17:R16
   \   00000174   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000176   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000178   8102               LDD     R16, Z+2
   \   0000017A   8113               LDD     R17, Z+3
   \   0000017C   5F0F               SUBI    R16, 255
   \   0000017E   4F1F               SBCI    R17, 255
   \   00000180   8302               STD     Z+2, R16
   \   00000182   8313               STD     Z+3, R17
    256          
    257              UART[ch].pTxBuffer[8] = UART[ch].TxFirst -2;                    // correct length because stx's
   \   00000184   2F08               MOV     R16, R24
   \   00000186   E010               LDI     R17, 0
   \   00000188   E14A               LDI     R20, 26
   \   0000018A   E050               LDI     R21, 0
   \   0000018C   ........           CALL    ?S_EC_MUL_L02
   \   00000190   01F8               MOVW    R31:R30, R17:R16
   \   00000192   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000194   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000196   8122               LDD     R18, Z+2
   \   00000198   8133               LDD     R19, Z+3
   \   0000019A   5022               SUBI    R18, 2
   \   0000019C   2F08               MOV     R16, R24
   \   0000019E   E010               LDI     R17, 0
   \   000001A0   E14A               LDI     R20, 26
   \   000001A2   E050               LDI     R21, 0
   \   000001A4   ........           CALL    ?S_EC_MUL_L02
   \   000001A8   01F8               MOVW    R31:R30, R17:R16
   \   000001AA   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000001AC   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000001AE   8100               LD      R16, Z
   \   000001B0   8111               LDD     R17, Z+1
   \   000001B2   01F8               MOVW    R31:R30, R17:R16
   \   000001B4   8720               STD     Z+8, R18
    258              UART[ch].pTxBuffer[9] = (UART[ch].TxFirst-2) >> 8 ;             // packet len high 
   \   000001B6   2F08               MOV     R16, R24
   \   000001B8   E010               LDI     R17, 0
   \   000001BA   E14A               LDI     R20, 26
   \   000001BC   E050               LDI     R21, 0
   \   000001BE   ........           CALL    ?S_EC_MUL_L02
   \   000001C2   01F8               MOVW    R31:R30, R17:R16
   \   000001C4   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000001C6   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000001C8   81A2               LDD     R26, Z+2
   \   000001CA   81B3               LDD     R27, Z+3
   \   000001CC   9712               SBIW    R27:R26, 2
   \   000001CE   2FAB               MOV     R26, R27
   \   000001D0   E0B0               LDI     R27, 0
   \   000001D2   2F08               MOV     R16, R24
   \   000001D4   E010               LDI     R17, 0
   \   000001D6   E14A               LDI     R20, 26
   \   000001D8   E050               LDI     R21, 0
   \   000001DA   ........           CALL    ?S_EC_MUL_L02
   \   000001DE   01F8               MOVW    R31:R30, R17:R16
   \   000001E0   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000001E2   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000001E4   8100               LD      R16, Z
   \   000001E6   8111               LDD     R17, Z+1
   \   000001E8   01F8               MOVW    R31:R30, R17:R16
   \   000001EA   87A1               STD     Z+9, R26
    259          
    260              UART[ch].pTxBuffer[10] = CalcDSTxChecksum(ch, 10) ;         // Get header checksum 
   \   000001EC   E02A               LDI     R18, 10
   \   000001EE   E030               LDI     R19, 0
   \   000001F0   2F08               MOV     R16, R24
   \   000001F2   ....               RCALL   CalcDSTxChecksum
   \   000001F4   2F20               MOV     R18, R16
   \   000001F6   2F08               MOV     R16, R24
   \   000001F8   E010               LDI     R17, 0
   \   000001FA   E14A               LDI     R20, 26
   \   000001FC   E050               LDI     R21, 0
   \   000001FE   ........           CALL    ?S_EC_MUL_L02
   \   00000202   01F8               MOVW    R31:R30, R17:R16
   \   00000204   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000206   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000208   8100               LD      R16, Z
   \   0000020A   8111               LDD     R17, Z+1
   \   0000020C   01F8               MOVW    R31:R30, R17:R16
   \   0000020E   8722               STD     Z+10, R18
    261          
    262              UART[ch].pTxBuffer[UART[ch].TxFirst] = CalcDSTxChecksum(ch, UART[ch].TxFirst) ; // Get checksum 
   \   00000210   2F08               MOV     R16, R24
   \   00000212   E010               LDI     R17, 0
   \   00000214   E14A               LDI     R20, 26
   \   00000216   E050               LDI     R21, 0
   \   00000218   ........           CALL    ?S_EC_MUL_L02
   \   0000021C   01F8               MOVW    R31:R30, R17:R16
   \   0000021E   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000220   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000222   8122               LDD     R18, Z+2
   \   00000224   8133               LDD     R19, Z+3
   \   00000226   2F08               MOV     R16, R24
   \   00000228   ....               RCALL   CalcDSTxChecksum
   \   0000022A   2F60               MOV     R22, R16
   \   0000022C   2F08               MOV     R16, R24
   \   0000022E   E010               LDI     R17, 0
   \   00000230   E14A               LDI     R20, 26
   \   00000232   E050               LDI     R21, 0
   \   00000234   ........           CALL    ?S_EC_MUL_L02
   \   00000238   01F8               MOVW    R31:R30, R17:R16
   \   0000023A   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000023C   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000023E   8120               LD      R18, Z
   \   00000240   8131               LDD     R19, Z+1
   \   00000242   2F08               MOV     R16, R24
   \   00000244   E010               LDI     R17, 0
   \   00000246   E14A               LDI     R20, 26
   \   00000248   E050               LDI     R21, 0
   \   0000024A   ........           CALL    ?S_EC_MUL_L02
   \   0000024E   01F8               MOVW    R31:R30, R17:R16
   \   00000250   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000252   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000254   8102               LDD     R16, Z+2
   \   00000256   8113               LDD     R17, Z+3
   \   00000258   0F20               ADD     R18, R16
   \   0000025A   1F31               ADC     R19, R17
   \   0000025C   01F9               MOVW    R31:R30, R19:R18
   \   0000025E   8360               ST      Z, R22
    263              UART[ch].TxFirst++ ;                                        // OBS!! must be inc here due to ANSI standard !!!!
   \   00000260   2F08               MOV     R16, R24
   \   00000262   E010               LDI     R17, 0
   \   00000264   E14A               LDI     R20, 26
   \   00000266   E050               LDI     R21, 0
   \   00000268   ........           CALL    ?S_EC_MUL_L02
   \   0000026C   01F8               MOVW    R31:R30, R17:R16
   \   0000026E   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000270   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000272   8102               LDD     R16, Z+2
   \   00000274   8113               LDD     R17, Z+3
   \   00000276   5F0F               SUBI    R16, 255
   \   00000278   4F1F               SBCI    R17, 255
   \   0000027A   8302               STD     Z+2, R16
   \   0000027C   8313               STD     Z+3, R17
    264                                                                          
    265              UART[ch].pTxBuffer[UART[ch].TxFirst++] = ANPRO10_EOT ;            // End of transmission 
   \   0000027E   2F08               MOV     R16, R24
   \   00000280   E010               LDI     R17, 0
   \   00000282   E14A               LDI     R20, 26
   \   00000284   E050               LDI     R21, 0
   \   00000286   ........           CALL    ?S_EC_MUL_L02
   \   0000028A   01F8               MOVW    R31:R30, R17:R16
   \   0000028C   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000028E   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000290   8120               LD      R18, Z
   \   00000292   8131               LDD     R19, Z+1
   \   00000294   2F08               MOV     R16, R24
   \   00000296   E010               LDI     R17, 0
   \   00000298   E14A               LDI     R20, 26
   \   0000029A   E050               LDI     R21, 0
   \   0000029C   ........           CALL    ?S_EC_MUL_L02
   \   000002A0   01F8               MOVW    R31:R30, R17:R16
   \   000002A2   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000002A4   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000002A6   8102               LDD     R16, Z+2
   \   000002A8   8113               LDD     R17, Z+3
   \   000002AA   0F20               ADD     R18, R16
   \   000002AC   1F31               ADC     R19, R17
   \   000002AE   01F9               MOVW    R31:R30, R19:R18
   \   000002B0   E004               LDI     R16, 4
   \   000002B2   8300               ST      Z, R16
   \   000002B4   2F08               MOV     R16, R24
   \   000002B6   E010               LDI     R17, 0
   \   000002B8   E14A               LDI     R20, 26
   \   000002BA   E050               LDI     R21, 0
   \   000002BC   ........           CALL    ?S_EC_MUL_L02
   \   000002C0   01F8               MOVW    R31:R30, R17:R16
   \   000002C2   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000002C4   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000002C6   8102               LDD     R16, Z+2
   \   000002C8   8113               LDD     R17, Z+3
   \   000002CA   5F0F               SUBI    R16, 255
   \   000002CC   4F1F               SBCI    R17, 255
   \   000002CE   8302               STD     Z+2, R16
   \   000002D0   8313               STD     Z+3, R17
    266              UART[ch].TxCount = UART[ch].TxFirst;                      //bytes to send 
   \   000002D2   2F08               MOV     R16, R24
   \   000002D4   E010               LDI     R17, 0
   \   000002D6   E14A               LDI     R20, 26
   \   000002D8   E050               LDI     R21, 0
   \   000002DA   ........           CALL    ?S_EC_MUL_L02
   \   000002DE   01F8               MOVW    R31:R30, R17:R16
   \   000002E0   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000002E2   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000002E4   8122               LDD     R18, Z+2
   \   000002E6   8133               LDD     R19, Z+3
   \   000002E8   2F08               MOV     R16, R24
   \   000002EA   E010               LDI     R17, 0
   \   000002EC   E14A               LDI     R20, 26
   \   000002EE   E050               LDI     R21, 0
   \   000002F0   ........           CALL    ?S_EC_MUL_L02
   \   000002F4   01F8               MOVW    R31:R30, R17:R16
   \   000002F6   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000002F8   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000002FA   8326               STD     Z+6, R18
   \   000002FC   8337               STD     Z+7, R19
    267              UART[ch].TxLast = 0;                                     // reset cunter
   \   000002FE   2F08               MOV     R16, R24
   \   00000300   E010               LDI     R17, 0
   \   00000302   E14A               LDI     R20, 26
   \   00000304   E050               LDI     R21, 0
   \   00000306   ........           CALL    ?S_EC_MUL_L02
   \   0000030A   01F8               MOVW    R31:R30, R17:R16
   \   0000030C   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000030E   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000310   E000               LDI     R16, 0
   \   00000312   8304               STD     Z+4, R16
   \   00000314   E000               LDI     R16, 0
   \   00000316   8305               STD     Z+5, R16
    268              if (ch == 0) {                                           // Turn on TXE for channel
   \   00000318   2388               TST     R24
   \   0000031A   F4D1               BRNE    ??Uart_BuildTail_0
    269                  OS_RetriggerTimer(&TimerUSART0);                     // and start timeout TX timer
   \   0000031C   ....               LDI     R16, LOW(TimerUSART0)
   \   0000031E   ....               LDI     R17, (TimerUSART0) >> 8
   \   00000320   ........           CALL    OS_RetriggerTimer
    270                  SetBitsOr(PORTE, 0x04) ;                                // TXE0 on
   \   00000324   94F8               cli
   \   00000326   9100....           LDS     R16, (OS_Global + 1)
   \   0000032A   9503               INC     R16
   \   0000032C   9300....           STS     (OS_Global + 1), R16
   \   00000330   9A1A               SBI     0x03, 0x02
   \   00000332   9100....           LDS     R16, (OS_Global + 1)
   \   00000336   950A               DEC     R16
   \   00000338   9300....           STS     (OS_Global + 1), R16
   \   0000033C   9100....           LDS     R16, (OS_Global + 1)
   \   00000340   2300               TST     R16
   \   00000342   F409               BRNE    ??Uart_BuildTail_1
   \   00000344   9478               sei
    271                  OS_RetriggerTimer(&TimerUSART0On);                   // and start timer for on before TX
   \                     ??Uart_BuildTail_1:
   \   00000346   ....               LDI     R16, LOW(TimerUSART0On)
   \   00000348   ....               LDI     R17, (TimerUSART0On) >> 8
   \   0000034A   ........           CALL    OS_RetriggerTimer
   \   0000034E   C01B               RJMP    ??Uart_BuildTail_2
    272              } else if (ch ==1) {
   \                     ??Uart_BuildTail_0:
   \   00000350   3081               CPI     R24, 1
   \   00000352   F4C9               BRNE    ??Uart_BuildTail_2
    273                  OS_RetriggerTimer(&TimerUSART1);                     // and start timeout TX timer
   \   00000354   ....               LDI     R16, LOW(TimerUSART1)
   \   00000356   ....               LDI     R17, (TimerUSART1) >> 8
   \   00000358   ........           CALL    OS_RetriggerTimer
    274                  SetBitsOr(PORTE, 0x08) ;                                // TXE1 on
   \   0000035C   94F8               cli
   \   0000035E   9100....           LDS     R16, (OS_Global + 1)
   \   00000362   9503               INC     R16
   \   00000364   9300....           STS     (OS_Global + 1), R16
   \   00000368   9A1B               SBI     0x03, 0x03
   \   0000036A   9100....           LDS     R16, (OS_Global + 1)
   \   0000036E   950A               DEC     R16
   \   00000370   9300....           STS     (OS_Global + 1), R16
   \   00000374   9100....           LDS     R16, (OS_Global + 1)
   \   00000378   2300               TST     R16
   \   0000037A   F409               BRNE    ??Uart_BuildTail_3
   \   0000037C   9478               sei
    275                  OS_RetriggerTimer(&TimerUSART1On);                   // and start timer for on before TX
   \                     ??Uart_BuildTail_3:
   \   0000037E   ....               LDI     R16, LOW(TimerUSART1On)
   \   00000380   ....               LDI     R17, (TimerUSART1On) >> 8
   \   00000382   ........           CALL    OS_RetriggerTimer
    276              }
    277          }
   \                     ??Uart_BuildTail_2:
   \   00000386   E0E4               LDI     R30, 4
   \   00000388   ........           JMP     ?EPILOGUE_B4_L09
   \   0000038C                      REQUIRE _A_PORTE
    278          
    279          /*************************************************************************
    280          *
    281          * Build datablock for card status
    282          *
    283          *************************************************************************/

   \                                 In  segment CODE, align 2, keep-with-next
    284          void BuildStatusData(char ch){
   \                     BuildStatusData:
   \   00000000   ........           CALL    ?PROLOGUE6_L09
   \   00000004                      REQUIRE ?Register_R4_is_cg_reg
   \   00000004                      REQUIRE ?Register_R5_is_cg_reg
   \   00000004   2FA0               MOV     R26, R16
    285          
    286              short ntna ;
    287              UART[ch].RxSendReply = true ;                               // flag for answering 
   \   00000006   2F0A               MOV     R16, R26
   \   00000008   E010               LDI     R17, 0
   \   0000000A   E14A               LDI     R20, 26
   \   0000000C   E050               LDI     R21, 0
   \   0000000E   ........           CALL    ?S_EC_MUL_L02
   \   00000012   01F8               MOVW    R31:R30, R17:R16
   \   00000014   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000016   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000018   E001               LDI     R16, 1
   \   0000001A   8F01               STD     Z+25, R16
    288          
    289              UART[ch].pTxBuffer[UART[ch].TxFirst++] = CMD_REP_STATUS & 0xff;     
   \   0000001C   2F0A               MOV     R16, R26
   \   0000001E   E010               LDI     R17, 0
   \   00000020   E14A               LDI     R20, 26
   \   00000022   E050               LDI     R21, 0
   \   00000024   ........           CALL    ?S_EC_MUL_L02
   \   00000028   01F8               MOVW    R31:R30, R17:R16
   \   0000002A   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000002C   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000002E   8120               LD      R18, Z
   \   00000030   8131               LDD     R19, Z+1
   \   00000032   2F0A               MOV     R16, R26
   \   00000034   E010               LDI     R17, 0
   \   00000036   E14A               LDI     R20, 26
   \   00000038   E050               LDI     R21, 0
   \   0000003A   ........           CALL    ?S_EC_MUL_L02
   \   0000003E   01F8               MOVW    R31:R30, R17:R16
   \   00000040   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000042   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000044   8102               LDD     R16, Z+2
   \   00000046   8113               LDD     R17, Z+3
   \   00000048   0F20               ADD     R18, R16
   \   0000004A   1F31               ADC     R19, R17
   \   0000004C   01F9               MOVW    R31:R30, R19:R18
   \   0000004E   EE09               LDI     R16, 233
   \   00000050   8300               ST      Z, R16
   \   00000052   2F0A               MOV     R16, R26
   \   00000054   E010               LDI     R17, 0
   \   00000056   E14A               LDI     R20, 26
   \   00000058   E050               LDI     R21, 0
   \   0000005A   ........           CALL    ?S_EC_MUL_L02
   \   0000005E   01F8               MOVW    R31:R30, R17:R16
   \   00000060   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000062   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000064   8102               LDD     R16, Z+2
   \   00000066   8113               LDD     R17, Z+3
   \   00000068   5F0F               SUBI    R16, 255
   \   0000006A   4F1F               SBCI    R17, 255
   \   0000006C   8302               STD     Z+2, R16
   \   0000006E   8313               STD     Z+3, R17
    290              UART[ch].pTxBuffer[UART[ch].TxFirst++] = CMD_REP_STATUS >> 8;     
   \   00000070   2F0A               MOV     R16, R26
   \   00000072   E010               LDI     R17, 0
   \   00000074   E14A               LDI     R20, 26
   \   00000076   E050               LDI     R21, 0
   \   00000078   ........           CALL    ?S_EC_MUL_L02
   \   0000007C   01F8               MOVW    R31:R30, R17:R16
   \   0000007E   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000080   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000082   8120               LD      R18, Z
   \   00000084   8131               LDD     R19, Z+1
   \   00000086   2F0A               MOV     R16, R26
   \   00000088   E010               LDI     R17, 0
   \   0000008A   E14A               LDI     R20, 26
   \   0000008C   E050               LDI     R21, 0
   \   0000008E   ........           CALL    ?S_EC_MUL_L02
   \   00000092   01F8               MOVW    R31:R30, R17:R16
   \   00000094   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000096   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000098   8102               LDD     R16, Z+2
   \   0000009A   8113               LDD     R17, Z+3
   \   0000009C   0F20               ADD     R18, R16
   \   0000009E   1F31               ADC     R19, R17
   \   000000A0   01F9               MOVW    R31:R30, R19:R18
   \   000000A2   E003               LDI     R16, 3
   \   000000A4   8300               ST      Z, R16
   \   000000A6   2F0A               MOV     R16, R26
   \   000000A8   E010               LDI     R17, 0
   \   000000AA   E14A               LDI     R20, 26
   \   000000AC   E050               LDI     R21, 0
   \   000000AE   ........           CALL    ?S_EC_MUL_L02
   \   000000B2   01F8               MOVW    R31:R30, R17:R16
   \   000000B4   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000000B6   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000000B8   8102               LDD     R16, Z+2
   \   000000BA   8113               LDD     R17, Z+3
   \   000000BC   5F0F               SUBI    R16, 255
   \   000000BE   4F1F               SBCI    R17, 255
   \   000000C0   8302               STD     Z+2, R16
   \   000000C2   8313               STD     Z+3, R17
    291              ntna = UART[ch].TxFirst ;                                    /* remember index */
   \   000000C4   2F0A               MOV     R16, R26
   \   000000C6   E010               LDI     R17, 0
   \   000000C8   E14A               LDI     R20, 26
   \   000000CA   E050               LDI     R21, 0
   \   000000CC   ........           CALL    ?S_EC_MUL_L02
   \   000000D0   01F8               MOVW    R31:R30, R17:R16
   \   000000D2   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000000D4   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000000D6   8102               LDD     R16, Z+2
   \   000000D8   8113               LDD     R17, Z+3
   \   000000DA   0128               MOVW    R5:R4, R17:R16
    292              UART[ch].TxFirst += 2 ;                                      // two byte length
   \   000000DC   2F0A               MOV     R16, R26
   \   000000DE   E010               LDI     R17, 0
   \   000000E0   E14A               LDI     R20, 26
   \   000000E2   E050               LDI     R21, 0
   \   000000E4   ........           CALL    ?S_EC_MUL_L02
   \   000000E8   01F8               MOVW    R31:R30, R17:R16
   \   000000EA   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000000EC   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000000EE   8102               LDD     R16, Z+2
   \   000000F0   8113               LDD     R17, Z+3
   \   000000F2   5F0E               SUBI    R16, 254
   \   000000F4   4F1F               SBCI    R17, 255
   \   000000F6   8302               STD     Z+2, R16
   \   000000F8   8313               STD     Z+3, R17
    293              UART[ch].pTxBuffer[UART[ch].TxFirst++] = ch ;               // channel
   \   000000FA   2F0A               MOV     R16, R26
   \   000000FC   E010               LDI     R17, 0
   \   000000FE   E14A               LDI     R20, 26
   \   00000100   E050               LDI     R21, 0
   \   00000102   ........           CALL    ?S_EC_MUL_L02
   \   00000106   01F8               MOVW    R31:R30, R17:R16
   \   00000108   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000010A   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000010C   8120               LD      R18, Z
   \   0000010E   8131               LDD     R19, Z+1
   \   00000110   2F0A               MOV     R16, R26
   \   00000112   E010               LDI     R17, 0
   \   00000114   E14A               LDI     R20, 26
   \   00000116   E050               LDI     R21, 0
   \   00000118   ........           CALL    ?S_EC_MUL_L02
   \   0000011C   01F8               MOVW    R31:R30, R17:R16
   \   0000011E   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000120   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000122   8102               LDD     R16, Z+2
   \   00000124   8113               LDD     R17, Z+3
   \   00000126   0F20               ADD     R18, R16
   \   00000128   1F31               ADC     R19, R17
   \   0000012A   01F9               MOVW    R31:R30, R19:R18
   \   0000012C   83A0               ST      Z, R26
   \   0000012E   2F0A               MOV     R16, R26
   \   00000130   E010               LDI     R17, 0
   \   00000132   E14A               LDI     R20, 26
   \   00000134   E050               LDI     R21, 0
   \   00000136   ........           CALL    ?S_EC_MUL_L02
   \   0000013A   01F8               MOVW    R31:R30, R17:R16
   \   0000013C   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000013E   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000140   8102               LDD     R16, Z+2
   \   00000142   8113               LDD     R17, Z+3
   \   00000144   5F0F               SUBI    R16, 255
   \   00000146   4F1F               SBCI    R17, 255
   \   00000148   8302               STD     Z+2, R16
   \   0000014A   8313               STD     Z+3, R17
    294              UART[ch].pTxBuffer[UART[ch].TxFirst++] = DEVICE_IO + UnitID ;   // Product ID
   \   0000014C   9160....           LDS     R22, UnitID
   \   00000150   5F60               SUBI    R22, 240
   \   00000152   2F0A               MOV     R16, R26
   \   00000154   E010               LDI     R17, 0
   \   00000156   E14A               LDI     R20, 26
   \   00000158   E050               LDI     R21, 0
   \   0000015A   ........           CALL    ?S_EC_MUL_L02
   \   0000015E   01F8               MOVW    R31:R30, R17:R16
   \   00000160   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000162   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000164   8120               LD      R18, Z
   \   00000166   8131               LDD     R19, Z+1
   \   00000168   2F0A               MOV     R16, R26
   \   0000016A   E010               LDI     R17, 0
   \   0000016C   E14A               LDI     R20, 26
   \   0000016E   E050               LDI     R21, 0
   \   00000170   ........           CALL    ?S_EC_MUL_L02
   \   00000174   01F8               MOVW    R31:R30, R17:R16
   \   00000176   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000178   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000017A   8102               LDD     R16, Z+2
   \   0000017C   8113               LDD     R17, Z+3
   \   0000017E   0F20               ADD     R18, R16
   \   00000180   1F31               ADC     R19, R17
   \   00000182   01F9               MOVW    R31:R30, R19:R18
   \   00000184   8360               ST      Z, R22
   \   00000186   2F0A               MOV     R16, R26
   \   00000188   E010               LDI     R17, 0
   \   0000018A   E14A               LDI     R20, 26
   \   0000018C   E050               LDI     R21, 0
   \   0000018E   ........           CALL    ?S_EC_MUL_L02
   \   00000192   01F8               MOVW    R31:R30, R17:R16
   \   00000194   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000196   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000198   8102               LDD     R16, Z+2
   \   0000019A   8113               LDD     R17, Z+3
   \   0000019C   5F0F               SUBI    R16, 255
   \   0000019E   4F1F               SBCI    R17, 255
   \   000001A0   8302               STD     Z+2, R16
   \   000001A2   8313               STD     Z+3, R17
    295              UART[ch].pTxBuffer[UART[ch].TxFirst++] = MyAddress();           // unit adddress
   \   000001A4   2F0A               MOV     R16, R26
   \   000001A6   E010               LDI     R17, 0
   \   000001A8   E14A               LDI     R20, 26
   \   000001AA   E050               LDI     R21, 0
   \   000001AC   ........           CALL    ?S_EC_MUL_L02
   \   000001B0   01F8               MOVW    R31:R30, R17:R16
   \   000001B2   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000001B4   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000001B6   8182               LDD     R24, Z+2
   \   000001B8   8193               LDD     R25, Z+3
   \   000001BA   019C               MOVW    R19:R18, R25:R24
   \   000001BC   5F2F               SUBI    R18, 255
   \   000001BE   4F3F               SBCI    R19, 255
   \   000001C0   2F0A               MOV     R16, R26
   \   000001C2   E010               LDI     R17, 0
   \   000001C4   E14A               LDI     R20, 26
   \   000001C6   E050               LDI     R21, 0
   \   000001C8   ........           CALL    ?S_EC_MUL_L02
   \   000001CC   01F8               MOVW    R31:R30, R17:R16
   \   000001CE   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000001D0   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000001D2   8322               STD     Z+2, R18
   \   000001D4   8333               STD     Z+3, R19
   \   000001D6   ........           CALL    MyAddress
   \   000001DA   2F20               MOV     R18, R16
   \   000001DC   2F0A               MOV     R16, R26
   \   000001DE   E010               LDI     R17, 0
   \   000001E0   E14A               LDI     R20, 26
   \   000001E2   E050               LDI     R21, 0
   \   000001E4   ........           CALL    ?S_EC_MUL_L02
   \   000001E8   01F8               MOVW    R31:R30, R17:R16
   \   000001EA   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000001EC   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000001EE   8100               LD      R16, Z
   \   000001F0   8111               LDD     R17, Z+1
   \   000001F2   0F08               ADD     R16, R24
   \   000001F4   1F19               ADC     R17, R25
   \   000001F6   01F8               MOVW    R31:R30, R17:R16
   \   000001F8   8320               ST      Z, R18
    296              UART[ch].pTxBuffer[UART[ch].TxFirst++] = PROG_VERSION ;       // software version */
   \   000001FA   2F0A               MOV     R16, R26
   \   000001FC   E010               LDI     R17, 0
   \   000001FE   E14A               LDI     R20, 26
   \   00000200   E050               LDI     R21, 0
   \   00000202   ........           CALL    ?S_EC_MUL_L02
   \   00000206   01F8               MOVW    R31:R30, R17:R16
   \   00000208   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000020A   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000020C   8120               LD      R18, Z
   \   0000020E   8131               LDD     R19, Z+1
   \   00000210   2F0A               MOV     R16, R26
   \   00000212   E010               LDI     R17, 0
   \   00000214   E14A               LDI     R20, 26
   \   00000216   E050               LDI     R21, 0
   \   00000218   ........           CALL    ?S_EC_MUL_L02
   \   0000021C   01F8               MOVW    R31:R30, R17:R16
   \   0000021E   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000220   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000222   8102               LDD     R16, Z+2
   \   00000224   8113               LDD     R17, Z+3
   \   00000226   0F20               ADD     R18, R16
   \   00000228   1F31               ADC     R19, R17
   \   0000022A   01F9               MOVW    R31:R30, R19:R18
   \   0000022C   E206               LDI     R16, 38
   \   0000022E   8300               ST      Z, R16
   \   00000230   2F0A               MOV     R16, R26
   \   00000232   E010               LDI     R17, 0
   \   00000234   E14A               LDI     R20, 26
   \   00000236   E050               LDI     R21, 0
   \   00000238   ........           CALL    ?S_EC_MUL_L02
   \   0000023C   01F8               MOVW    R31:R30, R17:R16
   \   0000023E   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000240   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000242   8102               LDD     R16, Z+2
   \   00000244   8113               LDD     R17, Z+3
   \   00000246   5F0F               SUBI    R16, 255
   \   00000248   4F1F               SBCI    R17, 255
   \   0000024A   8302               STD     Z+2, R16
   \   0000024C   8313               STD     Z+3, R17
    297              UART[ch].pTxBuffer[UART[ch].TxFirst++] = COMP_VERSION;        // cpmpability version
   \   0000024E   2F0A               MOV     R16, R26
   \   00000250   E010               LDI     R17, 0
   \   00000252   E14A               LDI     R20, 26
   \   00000254   E050               LDI     R21, 0
   \   00000256   ........           CALL    ?S_EC_MUL_L02
   \   0000025A   01F8               MOVW    R31:R30, R17:R16
   \   0000025C   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000025E   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000260   8120               LD      R18, Z
   \   00000262   8131               LDD     R19, Z+1
   \   00000264   2F0A               MOV     R16, R26
   \   00000266   E010               LDI     R17, 0
   \   00000268   E14A               LDI     R20, 26
   \   0000026A   E050               LDI     R21, 0
   \   0000026C   ........           CALL    ?S_EC_MUL_L02
   \   00000270   01F8               MOVW    R31:R30, R17:R16
   \   00000272   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000274   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000276   8102               LDD     R16, Z+2
   \   00000278   8113               LDD     R17, Z+3
   \   0000027A   0F20               ADD     R18, R16
   \   0000027C   1F31               ADC     R19, R17
   \   0000027E   01F9               MOVW    R31:R30, R19:R18
   \   00000280   E001               LDI     R16, 1
   \   00000282   8300               ST      Z, R16
   \   00000284   2F0A               MOV     R16, R26
   \   00000286   E010               LDI     R17, 0
   \   00000288   E14A               LDI     R20, 26
   \   0000028A   E050               LDI     R21, 0
   \   0000028C   ........           CALL    ?S_EC_MUL_L02
   \   00000290   01F8               MOVW    R31:R30, R17:R16
   \   00000292   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000294   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000296   8102               LDD     R16, Z+2
   \   00000298   8113               LDD     R17, Z+3
   \   0000029A   5F0F               SUBI    R16, 255
   \   0000029C   4F1F               SBCI    R17, 255
   \   0000029E   8302               STD     Z+2, R16
   \   000002A0   8313               STD     Z+3, R17
    298              UART[ch].pTxBuffer[UART[ch].TxFirst++] = STORE_VERSION;        // cpmpability version
   \   000002A2   2F0A               MOV     R16, R26
   \   000002A4   E010               LDI     R17, 0
   \   000002A6   E14A               LDI     R20, 26
   \   000002A8   E050               LDI     R21, 0
   \   000002AA   ........           CALL    ?S_EC_MUL_L02
   \   000002AE   01F8               MOVW    R31:R30, R17:R16
   \   000002B0   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000002B2   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000002B4   8120               LD      R18, Z
   \   000002B6   8131               LDD     R19, Z+1
   \   000002B8   2F0A               MOV     R16, R26
   \   000002BA   E010               LDI     R17, 0
   \   000002BC   E14A               LDI     R20, 26
   \   000002BE   E050               LDI     R21, 0
   \   000002C0   ........           CALL    ?S_EC_MUL_L02
   \   000002C4   01F8               MOVW    R31:R30, R17:R16
   \   000002C6   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000002C8   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000002CA   8102               LDD     R16, Z+2
   \   000002CC   8113               LDD     R17, Z+3
   \   000002CE   0F20               ADD     R18, R16
   \   000002D0   1F31               ADC     R19, R17
   \   000002D2   01F9               MOVW    R31:R30, R19:R18
   \   000002D4   E002               LDI     R16, 2
   \   000002D6   8300               ST      Z, R16
   \   000002D8   2F0A               MOV     R16, R26
   \   000002DA   E010               LDI     R17, 0
   \   000002DC   E14A               LDI     R20, 26
   \   000002DE   E050               LDI     R21, 0
   \   000002E0   ........           CALL    ?S_EC_MUL_L02
   \   000002E4   01F8               MOVW    R31:R30, R17:R16
   \   000002E6   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000002E8   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000002EA   8102               LDD     R16, Z+2
   \   000002EC   8113               LDD     R17, Z+3
   \   000002EE   5F0F               SUBI    R16, 255
   \   000002F0   4F1F               SBCI    R17, 255
   \   000002F2   8302               STD     Z+2, R16
   \   000002F4   8313               STD     Z+3, R17
    299              UART[ch].pTxBuffer[UART[ch].TxFirst++] = (RXSIZE_UART & 0xff);         // rx buffer size
   \   000002F6   2F0A               MOV     R16, R26
   \   000002F8   E010               LDI     R17, 0
   \   000002FA   E14A               LDI     R20, 26
   \   000002FC   E050               LDI     R21, 0
   \   000002FE   ........           CALL    ?S_EC_MUL_L02
   \   00000302   01F8               MOVW    R31:R30, R17:R16
   \   00000304   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000306   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000308   8120               LD      R18, Z
   \   0000030A   8131               LDD     R19, Z+1
   \   0000030C   2F0A               MOV     R16, R26
   \   0000030E   E010               LDI     R17, 0
   \   00000310   E14A               LDI     R20, 26
   \   00000312   E050               LDI     R21, 0
   \   00000314   ........           CALL    ?S_EC_MUL_L02
   \   00000318   01F8               MOVW    R31:R30, R17:R16
   \   0000031A   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000031C   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000031E   8102               LDD     R16, Z+2
   \   00000320   8113               LDD     R17, Z+3
   \   00000322   0F20               ADD     R18, R16
   \   00000324   1F31               ADC     R19, R17
   \   00000326   01F9               MOVW    R31:R30, R19:R18
   \   00000328   E906               LDI     R16, 150
   \   0000032A   8300               ST      Z, R16
   \   0000032C   2F0A               MOV     R16, R26
   \   0000032E   E010               LDI     R17, 0
   \   00000330   E14A               LDI     R20, 26
   \   00000332   E050               LDI     R21, 0
   \   00000334   ........           CALL    ?S_EC_MUL_L02
   \   00000338   01F8               MOVW    R31:R30, R17:R16
   \   0000033A   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000033C   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000033E   8102               LDD     R16, Z+2
   \   00000340   8113               LDD     R17, Z+3
   \   00000342   5F0F               SUBI    R16, 255
   \   00000344   4F1F               SBCI    R17, 255
   \   00000346   8302               STD     Z+2, R16
   \   00000348   8313               STD     Z+3, R17
    300              UART[ch].pTxBuffer[UART[ch].TxFirst++] = (( RXSIZE_UART >> 8) & 0xff); // rx buffer size
   \   0000034A   2F0A               MOV     R16, R26
   \   0000034C   E010               LDI     R17, 0
   \   0000034E   E14A               LDI     R20, 26
   \   00000350   E050               LDI     R21, 0
   \   00000352   ........           CALL    ?S_EC_MUL_L02
   \   00000356   01F8               MOVW    R31:R30, R17:R16
   \   00000358   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000035A   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000035C   8120               LD      R18, Z
   \   0000035E   8131               LDD     R19, Z+1
   \   00000360   2F0A               MOV     R16, R26
   \   00000362   E010               LDI     R17, 0
   \   00000364   E14A               LDI     R20, 26
   \   00000366   E050               LDI     R21, 0
   \   00000368   ........           CALL    ?S_EC_MUL_L02
   \   0000036C   01F8               MOVW    R31:R30, R17:R16
   \   0000036E   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000370   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000372   8102               LDD     R16, Z+2
   \   00000374   8113               LDD     R17, Z+3
   \   00000376   0F20               ADD     R18, R16
   \   00000378   1F31               ADC     R19, R17
   \   0000037A   01F9               MOVW    R31:R30, R19:R18
   \   0000037C   E000               LDI     R16, 0
   \   0000037E   8300               ST      Z, R16
   \   00000380   2F0A               MOV     R16, R26
   \   00000382   E010               LDI     R17, 0
   \   00000384   E14A               LDI     R20, 26
   \   00000386   E050               LDI     R21, 0
   \   00000388   ........           CALL    ?S_EC_MUL_L02
   \   0000038C   01F8               MOVW    R31:R30, R17:R16
   \   0000038E   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000390   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000392   8102               LDD     R16, Z+2
   \   00000394   8113               LDD     R17, Z+3
   \   00000396   5F0F               SUBI    R16, 255
   \   00000398   4F1F               SBCI    R17, 255
   \   0000039A   8302               STD     Z+2, R16
   \   0000039C   8313               STD     Z+3, R17
    301              UART[ch].pTxBuffer[UART[ch].TxFirst++] = (TXSIZE_UART & 0xff);         // tx buffer size
   \   0000039E   2F0A               MOV     R16, R26
   \   000003A0   E010               LDI     R17, 0
   \   000003A2   E14A               LDI     R20, 26
   \   000003A4   E050               LDI     R21, 0
   \   000003A6   ........           CALL    ?S_EC_MUL_L02
   \   000003AA   01F8               MOVW    R31:R30, R17:R16
   \   000003AC   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000003AE   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000003B0   8120               LD      R18, Z
   \   000003B2   8131               LDD     R19, Z+1
   \   000003B4   2F0A               MOV     R16, R26
   \   000003B6   E010               LDI     R17, 0
   \   000003B8   E14A               LDI     R20, 26
   \   000003BA   E050               LDI     R21, 0
   \   000003BC   ........           CALL    ?S_EC_MUL_L02
   \   000003C0   01F8               MOVW    R31:R30, R17:R16
   \   000003C2   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000003C4   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000003C6   8102               LDD     R16, Z+2
   \   000003C8   8113               LDD     R17, Z+3
   \   000003CA   0F20               ADD     R18, R16
   \   000003CC   1F31               ADC     R19, R17
   \   000003CE   01F9               MOVW    R31:R30, R19:R18
   \   000003D0   E103               LDI     R16, 19
   \   000003D2   8300               ST      Z, R16
   \   000003D4   2F0A               MOV     R16, R26
   \   000003D6   E010               LDI     R17, 0
   \   000003D8   E14A               LDI     R20, 26
   \   000003DA   E050               LDI     R21, 0
   \   000003DC   ........           CALL    ?S_EC_MUL_L02
   \   000003E0   01F8               MOVW    R31:R30, R17:R16
   \   000003E2   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000003E4   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000003E6   8102               LDD     R16, Z+2
   \   000003E8   8113               LDD     R17, Z+3
   \   000003EA   5F0F               SUBI    R16, 255
   \   000003EC   4F1F               SBCI    R17, 255
   \   000003EE   8302               STD     Z+2, R16
   \   000003F0   8313               STD     Z+3, R17
    302              UART[ch].pTxBuffer[UART[ch].TxFirst++] = ((TXSIZE_UART >> 8) & 0xff);  // tx buffer size
   \   000003F2   2F0A               MOV     R16, R26
   \   000003F4   E010               LDI     R17, 0
   \   000003F6   E14A               LDI     R20, 26
   \   000003F8   E050               LDI     R21, 0
   \   000003FA   ........           CALL    ?S_EC_MUL_L02
   \   000003FE   01F8               MOVW    R31:R30, R17:R16
   \   00000400   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000402   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000404   8120               LD      R18, Z
   \   00000406   8131               LDD     R19, Z+1
   \   00000408   2F0A               MOV     R16, R26
   \   0000040A   E010               LDI     R17, 0
   \   0000040C   E14A               LDI     R20, 26
   \   0000040E   E050               LDI     R21, 0
   \   00000410   ........           CALL    ?S_EC_MUL_L02
   \   00000414   01F8               MOVW    R31:R30, R17:R16
   \   00000416   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000418   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000041A   8102               LDD     R16, Z+2
   \   0000041C   8113               LDD     R17, Z+3
   \   0000041E   0F20               ADD     R18, R16
   \   00000420   1F31               ADC     R19, R17
   \   00000422   01F9               MOVW    R31:R30, R19:R18
   \   00000424   E001               LDI     R16, 1
   \   00000426   8300               ST      Z, R16
   \   00000428   2F0A               MOV     R16, R26
   \   0000042A   E010               LDI     R17, 0
   \   0000042C   E14A               LDI     R20, 26
   \   0000042E   E050               LDI     R21, 0
   \   00000430   ........           CALL    ?S_EC_MUL_L02
   \   00000434   01F8               MOVW    R31:R30, R17:R16
   \   00000436   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000438   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000043A   8102               LDD     R16, Z+2
   \   0000043C   8113               LDD     R17, Z+3
   \   0000043E   5F0F               SUBI    R16, 255
   \   00000440   4F1F               SBCI    R17, 255
   \   00000442   8302               STD     Z+2, R16
   \   00000444   8313               STD     Z+3, R17
    303              UART[ch].pTxBuffer[UART[ch].TxFirst++] = RestartStatus ;                  // restart flag
   \   00000446   9160....           LDS     R22, RestartStatus
   \   0000044A   2F0A               MOV     R16, R26
   \   0000044C   E010               LDI     R17, 0
   \   0000044E   E14A               LDI     R20, 26
   \   00000450   E050               LDI     R21, 0
   \   00000452   ........           CALL    ?S_EC_MUL_L02
   \   00000456   01F8               MOVW    R31:R30, R17:R16
   \   00000458   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000045A   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000045C   8120               LD      R18, Z
   \   0000045E   8131               LDD     R19, Z+1
   \   00000460   2F0A               MOV     R16, R26
   \   00000462   E010               LDI     R17, 0
   \   00000464   E14A               LDI     R20, 26
   \   00000466   E050               LDI     R21, 0
   \   00000468   ........           CALL    ?S_EC_MUL_L02
   \   0000046C   01F8               MOVW    R31:R30, R17:R16
   \   0000046E   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000470   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000472   8102               LDD     R16, Z+2
   \   00000474   8113               LDD     R17, Z+3
   \   00000476   0F20               ADD     R18, R16
   \   00000478   1F31               ADC     R19, R17
   \   0000047A   01F9               MOVW    R31:R30, R19:R18
   \   0000047C   8360               ST      Z, R22
   \   0000047E   2F0A               MOV     R16, R26
   \   00000480   E010               LDI     R17, 0
   \   00000482   E14A               LDI     R20, 26
   \   00000484   E050               LDI     R21, 0
   \   00000486   ........           CALL    ?S_EC_MUL_L02
   \   0000048A   01F8               MOVW    R31:R30, R17:R16
   \   0000048C   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000048E   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000490   8102               LDD     R16, Z+2
   \   00000492   8113               LDD     R17, Z+3
   \   00000494   5F0F               SUBI    R16, 255
   \   00000496   4F1F               SBCI    R17, 255
   \   00000498   8302               STD     Z+2, R16
   \   0000049A   8313               STD     Z+3, R17
    304              UART[ch].pTxBuffer[UART[ch].TxFirst++] = PROGTYPE_APP ;                // Application program
   \   0000049C   2F0A               MOV     R16, R26
   \   0000049E   E010               LDI     R17, 0
   \   000004A0   E14A               LDI     R20, 26
   \   000004A2   E050               LDI     R21, 0
   \   000004A4   ........           CALL    ?S_EC_MUL_L02
   \   000004A8   01F8               MOVW    R31:R30, R17:R16
   \   000004AA   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000004AC   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000004AE   8120               LD      R18, Z
   \   000004B0   8131               LDD     R19, Z+1
   \   000004B2   2F0A               MOV     R16, R26
   \   000004B4   E010               LDI     R17, 0
   \   000004B6   E14A               LDI     R20, 26
   \   000004B8   E050               LDI     R21, 0
   \   000004BA   ........           CALL    ?S_EC_MUL_L02
   \   000004BE   01F8               MOVW    R31:R30, R17:R16
   \   000004C0   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000004C2   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000004C4   8102               LDD     R16, Z+2
   \   000004C6   8113               LDD     R17, Z+3
   \   000004C8   0F20               ADD     R18, R16
   \   000004CA   1F31               ADC     R19, R17
   \   000004CC   01F9               MOVW    R31:R30, R19:R18
   \   000004CE   E001               LDI     R16, 1
   \   000004D0   8300               ST      Z, R16
   \   000004D2   2F0A               MOV     R16, R26
   \   000004D4   E010               LDI     R17, 0
   \   000004D6   E14A               LDI     R20, 26
   \   000004D8   E050               LDI     R21, 0
   \   000004DA   ........           CALL    ?S_EC_MUL_L02
   \   000004DE   01F8               MOVW    R31:R30, R17:R16
   \   000004E0   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000004E2   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000004E4   8102               LDD     R16, Z+2
   \   000004E6   8113               LDD     R17, Z+3
   \   000004E8   5F0F               SUBI    R16, 255
   \   000004EA   4F1F               SBCI    R17, 255
   \   000004EC   8302               STD     Z+2, R16
   \   000004EE   8313               STD     Z+3, R17
    305          
    306              UART[ch].pTxBuffer[ntna] = (UART[ch].TxFirst - ntna - 2)  & 0xff ;      // length of data block lb
   \   000004F0   2F0A               MOV     R16, R26
   \   000004F2   E010               LDI     R17, 0
   \   000004F4   E14A               LDI     R20, 26
   \   000004F6   E050               LDI     R21, 0
   \   000004F8   ........           CALL    ?S_EC_MUL_L02
   \   000004FC   01F8               MOVW    R31:R30, R17:R16
   \   000004FE   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000500   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000502   8122               LDD     R18, Z+2
   \   00000504   8133               LDD     R19, Z+3
   \   00000506   2D04               MOV     R16, R4
   \   00000508   1B20               SUB     R18, R16
   \   0000050A   5022               SUBI    R18, 2
   \   0000050C   2F0A               MOV     R16, R26
   \   0000050E   E010               LDI     R17, 0
   \   00000510   E14A               LDI     R20, 26
   \   00000512   E050               LDI     R21, 0
   \   00000514   ........           CALL    ?S_EC_MUL_L02
   \   00000518   01F8               MOVW    R31:R30, R17:R16
   \   0000051A   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000051C   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000051E   8100               LD      R16, Z
   \   00000520   8111               LDD     R17, Z+1
   \   00000522   0D04               ADD     R16, R4
   \   00000524   1D15               ADC     R17, R5
   \   00000526   01F8               MOVW    R31:R30, R17:R16
   \   00000528   8320               ST      Z, R18
    307              UART[ch].pTxBuffer[ntna+1] = ((UART[ch].TxFirst - ntna - 2) >> 8 ) & 0xff ; // length of data block hb
   \   0000052A   2F0A               MOV     R16, R26
   \   0000052C   E010               LDI     R17, 0
   \   0000052E   E14A               LDI     R20, 26
   \   00000530   E050               LDI     R21, 0
   \   00000532   ........           CALL    ?S_EC_MUL_L02
   \   00000536   01F8               MOVW    R31:R30, R17:R16
   \   00000538   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000053A   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000053C   8182               LDD     R24, Z+2
   \   0000053E   8193               LDD     R25, Z+3
   \   00000540   1984               SUB     R24, R4
   \   00000542   0995               SBC     R25, R5
   \   00000544   9702               SBIW    R25:R24, 2
   \   00000546   2F89               MOV     R24, R25
   \   00000548   E090               LDI     R25, 0
   \   0000054A   2F0A               MOV     R16, R26
   \   0000054C   E010               LDI     R17, 0
   \   0000054E   E14A               LDI     R20, 26
   \   00000550   E050               LDI     R21, 0
   \   00000552   ........           CALL    ?S_EC_MUL_L02
   \   00000556   01F8               MOVW    R31:R30, R17:R16
   \   00000558   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000055A   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000055C   8100               LD      R16, Z
   \   0000055E   8111               LDD     R17, Z+1
   \   00000560   0D04               ADD     R16, R4
   \   00000562   1D15               ADC     R17, R5
   \   00000564   01F8               MOVW    R31:R30, R17:R16
   \   00000566   8381               STD     Z+1, R24
    308          
    309              RestartStatus = 0 ;                                                       // set reset stat to 0 = read
   \   00000568   E000               LDI     R16, 0
   \   0000056A   9300....           STS     RestartStatus, R16
    310          }
   \   0000056E   E0E6               LDI     R30, 6
   \   00000570   ........           JMP     ?EPILOGUE_B6_L09
    311          
    312          /*************************************************************************
    313          *
    314          * Build EEPROM data package
    315          *
    316          *************************************************************************/

   \                                 In  segment CODE, align 2, keep-with-next
    317          void BuildEEPROMData(char ch, short pointer) {   
   \                     BuildEEPROMData:
   \   00000000   ........           CALL    ?PROLOGUE7_L09
   \   00000004                      REQUIRE ?Register_R4_is_cg_reg
   \   00000004                      REQUIRE ?Register_R5_is_cg_reg
   \   00000004                      REQUIRE ?Register_R6_is_cg_reg
   \   00000004   2F80               MOV     R24, R16
   \   00000006   01D9               MOVW    R27:R26, R19:R18
    318          
    319              short ntna ;
    320              char channel;
    321              UART[ch].RxSendReply = true ;                               // flag for answering 
   \   00000008   2F08               MOV     R16, R24
   \   0000000A   E010               LDI     R17, 0
   \   0000000C   E14A               LDI     R20, 26
   \   0000000E   E050               LDI     R21, 0
   \   00000010   ........           CALL    ?S_EC_MUL_L02
   \   00000014   01F8               MOVW    R31:R30, R17:R16
   \   00000016   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000018   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000001A   E001               LDI     R16, 1
   \   0000001C   8F01               STD     Z+25, R16
    322          
    323              UART[ch].pTxBuffer[UART[ch].TxFirst++] = CMD_REP_EEPROM_DATA & 0xff;     
   \   0000001E   2F08               MOV     R16, R24
   \   00000020   E010               LDI     R17, 0
   \   00000022   E14A               LDI     R20, 26
   \   00000024   E050               LDI     R21, 0
   \   00000026   ........           CALL    ?S_EC_MUL_L02
   \   0000002A   01F8               MOVW    R31:R30, R17:R16
   \   0000002C   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000002E   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000030   8120               LD      R18, Z
   \   00000032   8131               LDD     R19, Z+1
   \   00000034   2F08               MOV     R16, R24
   \   00000036   E010               LDI     R17, 0
   \   00000038   E14A               LDI     R20, 26
   \   0000003A   E050               LDI     R21, 0
   \   0000003C   ........           CALL    ?S_EC_MUL_L02
   \   00000040   01F8               MOVW    R31:R30, R17:R16
   \   00000042   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000044   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000046   8102               LDD     R16, Z+2
   \   00000048   8113               LDD     R17, Z+3
   \   0000004A   0F20               ADD     R18, R16
   \   0000004C   1F31               ADC     R19, R17
   \   0000004E   01F9               MOVW    R31:R30, R19:R18
   \   00000050   E309               LDI     R16, 57
   \   00000052   8300               ST      Z, R16
   \   00000054   2F08               MOV     R16, R24
   \   00000056   E010               LDI     R17, 0
   \   00000058   E14A               LDI     R20, 26
   \   0000005A   E050               LDI     R21, 0
   \   0000005C   ........           CALL    ?S_EC_MUL_L02
   \   00000060   01F8               MOVW    R31:R30, R17:R16
   \   00000062   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000064   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000066   8102               LDD     R16, Z+2
   \   00000068   8113               LDD     R17, Z+3
   \   0000006A   5F0F               SUBI    R16, 255
   \   0000006C   4F1F               SBCI    R17, 255
   \   0000006E   8302               STD     Z+2, R16
   \   00000070   8313               STD     Z+3, R17
    324              UART[ch].pTxBuffer[UART[ch].TxFirst++] = CMD_REP_EEPROM_DATA >> 8;     
   \   00000072   2F08               MOV     R16, R24
   \   00000074   E010               LDI     R17, 0
   \   00000076   E14A               LDI     R20, 26
   \   00000078   E050               LDI     R21, 0
   \   0000007A   ........           CALL    ?S_EC_MUL_L02
   \   0000007E   01F8               MOVW    R31:R30, R17:R16
   \   00000080   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000082   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000084   8120               LD      R18, Z
   \   00000086   8131               LDD     R19, Z+1
   \   00000088   2F08               MOV     R16, R24
   \   0000008A   E010               LDI     R17, 0
   \   0000008C   E14A               LDI     R20, 26
   \   0000008E   E050               LDI     R21, 0
   \   00000090   ........           CALL    ?S_EC_MUL_L02
   \   00000094   01F8               MOVW    R31:R30, R17:R16
   \   00000096   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000098   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000009A   8102               LDD     R16, Z+2
   \   0000009C   8113               LDD     R17, Z+3
   \   0000009E   0F20               ADD     R18, R16
   \   000000A0   1F31               ADC     R19, R17
   \   000000A2   01F9               MOVW    R31:R30, R19:R18
   \   000000A4   E004               LDI     R16, 4
   \   000000A6   8300               ST      Z, R16
   \   000000A8   2F08               MOV     R16, R24
   \   000000AA   E010               LDI     R17, 0
   \   000000AC   E14A               LDI     R20, 26
   \   000000AE   E050               LDI     R21, 0
   \   000000B0   ........           CALL    ?S_EC_MUL_L02
   \   000000B4   01F8               MOVW    R31:R30, R17:R16
   \   000000B6   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000000B8   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000000BA   8102               LDD     R16, Z+2
   \   000000BC   8113               LDD     R17, Z+3
   \   000000BE   5F0F               SUBI    R16, 255
   \   000000C0   4F1F               SBCI    R17, 255
   \   000000C2   8302               STD     Z+2, R16
   \   000000C4   8313               STD     Z+3, R17
    325              ntna = UART[ch].TxFirst ;                                    /* remember index */
   \   000000C6   2F08               MOV     R16, R24
   \   000000C8   E010               LDI     R17, 0
   \   000000CA   E14A               LDI     R20, 26
   \   000000CC   E050               LDI     R21, 0
   \   000000CE   ........           CALL    ?S_EC_MUL_L02
   \   000000D2   01F8               MOVW    R31:R30, R17:R16
   \   000000D4   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000000D6   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000000D8   8102               LDD     R16, Z+2
   \   000000DA   8113               LDD     R17, Z+3
   \   000000DC   0128               MOVW    R5:R4, R17:R16
    326              UART[ch].TxFirst += 2 ;                                      // two byte length
   \   000000DE   2F08               MOV     R16, R24
   \   000000E0   E010               LDI     R17, 0
   \   000000E2   E14A               LDI     R20, 26
   \   000000E4   E050               LDI     R21, 0
   \   000000E6   ........           CALL    ?S_EC_MUL_L02
   \   000000EA   01F8               MOVW    R31:R30, R17:R16
   \   000000EC   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000000EE   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000000F0   8102               LDD     R16, Z+2
   \   000000F2   8113               LDD     R17, Z+3
   \   000000F4   5F0E               SUBI    R16, 254
   \   000000F6   4F1F               SBCI    R17, 255
   \   000000F8   8302               STD     Z+2, R16
   \   000000FA   8313               STD     Z+3, R17
    327              
    328              channel = UART[ch].pRxBuffer[pointer];
   \   000000FC   2F08               MOV     R16, R24
   \   000000FE   E010               LDI     R17, 0
   \   00000100   E14A               LDI     R20, 26
   \   00000102   E050               LDI     R21, 0
   \   00000104   ........           CALL    ?S_EC_MUL_L02
   \   00000108   01F8               MOVW    R31:R30, R17:R16
   \   0000010A   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000010C   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000010E   8502               LDD     R16, Z+10
   \   00000110   8513               LDD     R17, Z+11
   \   00000112   0F0A               ADD     R16, R26
   \   00000114   1F1B               ADC     R17, R27
   \   00000116   01F8               MOVW    R31:R30, R17:R16
   \   00000118   8100               LD      R16, Z
   \   0000011A   2E60               MOV     R6, R16
    329              UART[ch].pTxBuffer[UART[ch].TxFirst++] = channel; //channel 
   \   0000011C   2F08               MOV     R16, R24
   \   0000011E   E010               LDI     R17, 0
   \   00000120   E14A               LDI     R20, 26
   \   00000122   E050               LDI     R21, 0
   \   00000124   ........           CALL    ?S_EC_MUL_L02
   \   00000128   01F8               MOVW    R31:R30, R17:R16
   \   0000012A   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000012C   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000012E   8120               LD      R18, Z
   \   00000130   8131               LDD     R19, Z+1
   \   00000132   2F08               MOV     R16, R24
   \   00000134   E010               LDI     R17, 0
   \   00000136   E14A               LDI     R20, 26
   \   00000138   E050               LDI     R21, 0
   \   0000013A   ........           CALL    ?S_EC_MUL_L02
   \   0000013E   01F8               MOVW    R31:R30, R17:R16
   \   00000140   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000142   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000144   8102               LDD     R16, Z+2
   \   00000146   8113               LDD     R17, Z+3
   \   00000148   0F20               ADD     R18, R16
   \   0000014A   1F31               ADC     R19, R17
   \   0000014C   01F9               MOVW    R31:R30, R19:R18
   \   0000014E   8260               ST      Z, R6
   \   00000150   2F08               MOV     R16, R24
   \   00000152   E010               LDI     R17, 0
   \   00000154   E14A               LDI     R20, 26
   \   00000156   E050               LDI     R21, 0
   \   00000158   ........           CALL    ?S_EC_MUL_L02
   \   0000015C   01F8               MOVW    R31:R30, R17:R16
   \   0000015E   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000160   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000162   8102               LDD     R16, Z+2
   \   00000164   8113               LDD     R17, Z+3
   \   00000166   5F0F               SUBI    R16, 255
   \   00000168   4F1F               SBCI    R17, 255
   \   0000016A   8302               STD     Z+2, R16
   \   0000016C   8313               STD     Z+3, R17
    330          
    331              ReadEEPROMBuffer( (channel * sizeof(float)* 2) , sizeof(float), (char*)&UART[ch].pTxBuffer[UART[ch].TxFirst] );
   \   0000016E   2F08               MOV     R16, R24
   \   00000170   E010               LDI     R17, 0
   \   00000172   E14A               LDI     R20, 26
   \   00000174   E050               LDI     R21, 0
   \   00000176   ........           CALL    ?S_EC_MUL_L02
   \   0000017A   01F8               MOVW    R31:R30, R17:R16
   \   0000017C   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000017E   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000180   8120               LD      R18, Z
   \   00000182   8131               LDD     R19, Z+1
   \   00000184   2F08               MOV     R16, R24
   \   00000186   E010               LDI     R17, 0
   \   00000188   E14A               LDI     R20, 26
   \   0000018A   E050               LDI     R21, 0
   \   0000018C   ........           CALL    ?S_EC_MUL_L02
   \   00000190   01F8               MOVW    R31:R30, R17:R16
   \   00000192   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000194   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000196   8102               LDD     R16, Z+2
   \   00000198   8113               LDD     R17, Z+3
   \   0000019A   0F20               ADD     R18, R16
   \   0000019C   1F31               ADC     R19, R17
   \   0000019E   01A9               MOVW    R21:R20, R19:R18
   \   000001A0   E024               LDI     R18, 4
   \   000001A2   01BA               MOVW    R23:R22, R21:R20
   \   000001A4   2D06               MOV     R16, R6
   \   000001A6   E010               LDI     R17, 0
   \   000001A8   E048               LDI     R20, 8
   \   000001AA   E050               LDI     R21, 0
   \   000001AC   ........           CALL    ?S_EC_MUL_L02
   \   000001B0   01AB               MOVW    R21:R20, R23:R22
   \   000001B2   ........           CALL    ReadEEPROMBuffer
    332              UART[ch].TxFirst += sizeof(float) ;
   \   000001B6   2F08               MOV     R16, R24
   \   000001B8   E010               LDI     R17, 0
   \   000001BA   E14A               LDI     R20, 26
   \   000001BC   E050               LDI     R21, 0
   \   000001BE   ........           CALL    ?S_EC_MUL_L02
   \   000001C2   01F8               MOVW    R31:R30, R17:R16
   \   000001C4   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000001C6   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000001C8   8102               LDD     R16, Z+2
   \   000001CA   8113               LDD     R17, Z+3
   \   000001CC   5F0C               SUBI    R16, 252
   \   000001CE   4F1F               SBCI    R17, 255
   \   000001D0   8302               STD     Z+2, R16
   \   000001D2   8313               STD     Z+3, R17
    333              ReadEEPROMBuffer( (channel * sizeof(float) * 2) + sizeof(float), sizeof(float), (char*)&UART[ch].pTxBuffer[UART[ch].TxFirst] );
   \   000001D4   2F08               MOV     R16, R24
   \   000001D6   E010               LDI     R17, 0
   \   000001D8   E14A               LDI     R20, 26
   \   000001DA   E050               LDI     R21, 0
   \   000001DC   ........           CALL    ?S_EC_MUL_L02
   \   000001E0   01F8               MOVW    R31:R30, R17:R16
   \   000001E2   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000001E4   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000001E6   8120               LD      R18, Z
   \   000001E8   8131               LDD     R19, Z+1
   \   000001EA   2F08               MOV     R16, R24
   \   000001EC   E010               LDI     R17, 0
   \   000001EE   E14A               LDI     R20, 26
   \   000001F0   E050               LDI     R21, 0
   \   000001F2   ........           CALL    ?S_EC_MUL_L02
   \   000001F6   01F8               MOVW    R31:R30, R17:R16
   \   000001F8   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000001FA   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000001FC   8102               LDD     R16, Z+2
   \   000001FE   8113               LDD     R17, Z+3
   \   00000200   0F20               ADD     R18, R16
   \   00000202   1F31               ADC     R19, R17
   \   00000204   01A9               MOVW    R21:R20, R19:R18
   \   00000206   E024               LDI     R18, 4
   \   00000208   01BA               MOVW    R23:R22, R21:R20
   \   0000020A   2D06               MOV     R16, R6
   \   0000020C   E010               LDI     R17, 0
   \   0000020E   E048               LDI     R20, 8
   \   00000210   E050               LDI     R21, 0
   \   00000212   ........           CALL    ?S_EC_MUL_L02
   \   00000216   5F0C               SUBI    R16, 252
   \   00000218   4F1F               SBCI    R17, 255
   \   0000021A   01AB               MOVW    R21:R20, R23:R22
   \   0000021C   ........           CALL    ReadEEPROMBuffer
    334              UART[ch].TxFirst += sizeof(float) ;
   \   00000220   2F08               MOV     R16, R24
   \   00000222   E010               LDI     R17, 0
   \   00000224   E14A               LDI     R20, 26
   \   00000226   E050               LDI     R21, 0
   \   00000228   ........           CALL    ?S_EC_MUL_L02
   \   0000022C   01F8               MOVW    R31:R30, R17:R16
   \   0000022E   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000230   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000232   8102               LDD     R16, Z+2
   \   00000234   8113               LDD     R17, Z+3
   \   00000236   5F0C               SUBI    R16, 252
   \   00000238   4F1F               SBCI    R17, 255
   \   0000023A   8302               STD     Z+2, R16
   \   0000023C   8313               STD     Z+3, R17
    335          
    336              UART[ch].pTxBuffer[ntna] = (UART[ch].TxFirst - ntna - 2)  & 0xff ;      // length of data block lb
   \   0000023E   2F08               MOV     R16, R24
   \   00000240   E010               LDI     R17, 0
   \   00000242   E14A               LDI     R20, 26
   \   00000244   E050               LDI     R21, 0
   \   00000246   ........           CALL    ?S_EC_MUL_L02
   \   0000024A   01F8               MOVW    R31:R30, R17:R16
   \   0000024C   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000024E   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000250   8122               LDD     R18, Z+2
   \   00000252   8133               LDD     R19, Z+3
   \   00000254   2D04               MOV     R16, R4
   \   00000256   1B20               SUB     R18, R16
   \   00000258   5022               SUBI    R18, 2
   \   0000025A   2F08               MOV     R16, R24
   \   0000025C   E010               LDI     R17, 0
   \   0000025E   E14A               LDI     R20, 26
   \   00000260   E050               LDI     R21, 0
   \   00000262   ........           CALL    ?S_EC_MUL_L02
   \   00000266   01F8               MOVW    R31:R30, R17:R16
   \   00000268   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000026A   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000026C   8100               LD      R16, Z
   \   0000026E   8111               LDD     R17, Z+1
   \   00000270   0D04               ADD     R16, R4
   \   00000272   1D15               ADC     R17, R5
   \   00000274   01F8               MOVW    R31:R30, R17:R16
   \   00000276   8320               ST      Z, R18
    337              UART[ch].pTxBuffer[ntna+1] = ((UART[ch].TxFirst - ntna - 2) >> 8 ) & 0xff ; // length of data block hb
   \   00000278   2F08               MOV     R16, R24
   \   0000027A   E010               LDI     R17, 0
   \   0000027C   E14A               LDI     R20, 26
   \   0000027E   E050               LDI     R21, 0
   \   00000280   ........           CALL    ?S_EC_MUL_L02
   \   00000284   01F8               MOVW    R31:R30, R17:R16
   \   00000286   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000288   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000028A   8102               LDD     R16, Z+2
   \   0000028C   8113               LDD     R17, Z+3
   \   0000028E   1904               SUB     R16, R4
   \   00000290   0915               SBC     R17, R5
   \   00000292   5002               SUBI    R16, 2
   \   00000294   4010               SBCI    R17, 0
   \   00000296   2F01               MOV     R16, R17
   \   00000298   E010               LDI     R17, 0
   \   0000029A   2F20               MOV     R18, R16
   \   0000029C   2F08               MOV     R16, R24
   \   0000029E   E010               LDI     R17, 0
   \   000002A0   E14A               LDI     R20, 26
   \   000002A2   E050               LDI     R21, 0
   \   000002A4   ........           CALL    ?S_EC_MUL_L02
   \   000002A8   01F8               MOVW    R31:R30, R17:R16
   \   000002AA   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000002AC   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000002AE   8100               LD      R16, Z
   \   000002B0   8111               LDD     R17, Z+1
   \   000002B2   0D04               ADD     R16, R4
   \   000002B4   1D15               ADC     R17, R5
   \   000002B6   01F8               MOVW    R31:R30, R17:R16
   \   000002B8   8321               STD     Z+1, R18
    338          }
   \   000002BA   E0E7               LDI     R30, 7
   \   000002BC   ........           JMP     ?EPILOGUE_B7_L09
    339          
    340          
    341          /*************************************************************************
    342          *
    343          * Build datablock for Internal AD
    344          *
    345          *************************************************************************/

   \                                 In  segment CODE, align 2, keep-with-next
    346          void BuildADInt(char ch, short pointer) {
   \                     BuildADInt:
   \   00000000   ........           CALL    ?PROLOGUE6_L09
   \   00000004                      REQUIRE ?Register_R4_is_cg_reg
   \   00000004                      REQUIRE ?Register_R5_is_cg_reg
   \   00000004   2F60               MOV     R22, R16
   \   00000006   0119               MOVW    R3:R2, R19:R18
    347          
    348              short ntna, i ;
    349              UART[ch].RxSendReply = true ;                               // flag for answering 
   \   00000008   2F06               MOV     R16, R22
   \   0000000A   E010               LDI     R17, 0
   \   0000000C   E14A               LDI     R20, 26
   \   0000000E   E050               LDI     R21, 0
   \   00000010   ........           CALL    ?S_EC_MUL_L02
   \   00000014   01D8               MOVW    R27:R26, R17:R16
   \   00000016   ....               SUBI    R26, LOW((-(UART + 25) & 0xFFFF))
   \   00000018   ....               SBCI    R27, HIGH((-(UART + 25) & 0xFFFF))
   \   0000001A   E001               LDI     R16, 1
   \   0000001C   930C               ST      X, R16
    350          
    351              UART[ch].pTxBuffer[UART[ch].TxFirst++] = CMD_REP_INT_DATA & 0xff;     
   \   0000001E   2F06               MOV     R16, R22
   \   00000020   E010               LDI     R17, 0
   \   00000022   E14A               LDI     R20, 26
   \   00000024   E050               LDI     R21, 0
   \   00000026   ........           CALL    ?S_EC_MUL_L02
   \   0000002A   01D8               MOVW    R27:R26, R17:R16
   \   0000002C   ....               SUBI    R26, LOW((-(UART) & 0xFFFF))
   \   0000002E   ....               SBCI    R27, (-(UART) & 0xFFFF) >> 8
   \   00000030   918D               LD      R24, X+
   \   00000032   919C               LD      R25, X
   \   00000034   9711               SBIW    R27:R26, 1
   \   00000036   2F06               MOV     R16, R22
   \   00000038   E010               LDI     R17, 0
   \   0000003A   E14A               LDI     R20, 26
   \   0000003C   E050               LDI     R21, 0
   \   0000003E   ........           CALL    ?S_EC_MUL_L02
   \   00000042   01D8               MOVW    R27:R26, R17:R16
   \   00000044   ....               SUBI    R26, LOW((-(UART + 2) & 0xFFFF))
   \   00000046   ....               SBCI    R27, HIGH((-(UART + 2) & 0xFFFF))
   \   00000048   910D               LD      R16, X+
   \   0000004A   911C               LD      R17, X
   \   0000004C   9711               SBIW    R27:R26, 1
   \   0000004E   0F80               ADD     R24, R16
   \   00000050   1F91               ADC     R25, R17
   \   00000052   01DC               MOVW    R27:R26, R25:R24
   \   00000054   E403               LDI     R16, 67
   \   00000056   930C               ST      X, R16
   \   00000058   2F06               MOV     R16, R22
   \   0000005A   E010               LDI     R17, 0
   \   0000005C   E14A               LDI     R20, 26
   \   0000005E   E050               LDI     R21, 0
   \   00000060   ........           CALL    ?S_EC_MUL_L02
   \   00000064   01D8               MOVW    R27:R26, R17:R16
   \   00000066   ....               SUBI    R26, LOW((-(UART + 2) & 0xFFFF))
   \   00000068   ....               SBCI    R27, HIGH((-(UART + 2) & 0xFFFF))
   \   0000006A   910D               LD      R16, X+
   \   0000006C   911C               LD      R17, X
   \   0000006E   5F0F               SUBI    R16, 255
   \   00000070   4F1F               SBCI    R17, 255
   \   00000072   931C               ST      X, R17
   \   00000074   930E               ST      -X, R16
    352              UART[ch].pTxBuffer[UART[ch].TxFirst++] = CMD_REP_INT_DATA >> 8;     
   \   00000076   2F06               MOV     R16, R22
   \   00000078   E010               LDI     R17, 0
   \   0000007A   E14A               LDI     R20, 26
   \   0000007C   E050               LDI     R21, 0
   \   0000007E   ........           CALL    ?S_EC_MUL_L02
   \   00000082   01D8               MOVW    R27:R26, R17:R16
   \   00000084   ....               SUBI    R26, LOW((-(UART) & 0xFFFF))
   \   00000086   ....               SBCI    R27, (-(UART) & 0xFFFF) >> 8
   \   00000088   918D               LD      R24, X+
   \   0000008A   919C               LD      R25, X
   \   0000008C   9711               SBIW    R27:R26, 1
   \   0000008E   2F06               MOV     R16, R22
   \   00000090   E010               LDI     R17, 0
   \   00000092   E14A               LDI     R20, 26
   \   00000094   E050               LDI     R21, 0
   \   00000096   ........           CALL    ?S_EC_MUL_L02
   \   0000009A   01D8               MOVW    R27:R26, R17:R16
   \   0000009C   ....               SUBI    R26, LOW((-(UART + 2) & 0xFFFF))
   \   0000009E   ....               SBCI    R27, HIGH((-(UART + 2) & 0xFFFF))
   \   000000A0   910D               LD      R16, X+
   \   000000A2   911C               LD      R17, X
   \   000000A4   9711               SBIW    R27:R26, 1
   \   000000A6   0F80               ADD     R24, R16
   \   000000A8   1F91               ADC     R25, R17
   \   000000AA   01DC               MOVW    R27:R26, R25:R24
   \   000000AC   E004               LDI     R16, 4
   \   000000AE   930C               ST      X, R16
   \   000000B0   2F06               MOV     R16, R22
   \   000000B2   E010               LDI     R17, 0
   \   000000B4   E14A               LDI     R20, 26
   \   000000B6   E050               LDI     R21, 0
   \   000000B8   ........           CALL    ?S_EC_MUL_L02
   \   000000BC   01D8               MOVW    R27:R26, R17:R16
   \   000000BE   ....               SUBI    R26, LOW((-(UART + 2) & 0xFFFF))
   \   000000C0   ....               SBCI    R27, HIGH((-(UART + 2) & 0xFFFF))
   \   000000C2   910D               LD      R16, X+
   \   000000C4   911C               LD      R17, X
   \   000000C6   5F0F               SUBI    R16, 255
   \   000000C8   4F1F               SBCI    R17, 255
   \   000000CA   931C               ST      X, R17
   \   000000CC   930E               ST      -X, R16
    353              ntna = UART[ch].TxFirst ;                                    /* remember index */
   \   000000CE   2F06               MOV     R16, R22
   \   000000D0   E010               LDI     R17, 0
   \   000000D2   E14A               LDI     R20, 26
   \   000000D4   E050               LDI     R21, 0
   \   000000D6   ........           CALL    ?S_EC_MUL_L02
   \   000000DA   01D8               MOVW    R27:R26, R17:R16
   \   000000DC   ....               SUBI    R26, LOW((-(UART + 2) & 0xFFFF))
   \   000000DE   ....               SBCI    R27, HIGH((-(UART + 2) & 0xFFFF))
   \   000000E0   910D               LD      R16, X+
   \   000000E2   911C               LD      R17, X
   \   000000E4   9711               SBIW    R27:R26, 1
   \   000000E6   0198               MOVW    R19:R18, R17:R16
    354              UART[ch].TxFirst += 2 ;                                      // two byte length
   \   000000E8   2F06               MOV     R16, R22
   \   000000EA   E010               LDI     R17, 0
   \   000000EC   E14A               LDI     R20, 26
   \   000000EE   E050               LDI     R21, 0
   \   000000F0   ........           CALL    ?S_EC_MUL_L02
   \   000000F4   01D8               MOVW    R27:R26, R17:R16
   \   000000F6   ....               SUBI    R26, LOW((-(UART + 2) & 0xFFFF))
   \   000000F8   ....               SBCI    R27, HIGH((-(UART + 2) & 0xFFFF))
   \   000000FA   910D               LD      R16, X+
   \   000000FC   911C               LD      R17, X
   \   000000FE   5F0E               SUBI    R16, 254
   \   00000100   4F1F               SBCI    R17, 255
   \   00000102   931C               ST      X, R17
   \   00000104   930E               ST      -X, R16
    355          
    356              for (i = 0; i<3; i++) {
   \   00000106   E0E0               LDI     R30, 0
   \   00000108   E0F0               LDI     R31, 0
   \                     ??BuildADInt_0:
   \   0000010A   30E3               CPI     R30, 3
   \   0000010C   E000               LDI     R16, 0
   \   0000010E   07F0               CPC     R31, R16
   \   00000110   F00C               BRLT    $+2+2
   \   00000112   C06D               RJMP    ??BuildADInt_1
    357                  UART[ch].pTxBuffer[UART[ch].TxFirst++] = ADInt.Result[i] ;
   \   00000114   018F               MOVW    R17:R16, R31:R30
   \   00000116   0F00               LSL     R16
   \   00000118   1F11               ROL     R17
   \   0000011A   01D8               MOVW    R27:R26, R17:R16
   \   0000011C   ....               SUBI    R26, LOW((-(ADInt) & 0xFFFF))
   \   0000011E   ....               SBCI    R27, (-(ADInt) & 0xFFFF) >> 8
   \   00000120   904D               LD      R4, X+
   \   00000122   905C               LD      R5, X
   \   00000124   9711               SBIW    R27:R26, 1
   \   00000126   2F06               MOV     R16, R22
   \   00000128   E010               LDI     R17, 0
   \   0000012A   E14A               LDI     R20, 26
   \   0000012C   E050               LDI     R21, 0
   \   0000012E   ........           CALL    ?S_EC_MUL_L02
   \   00000132   01D8               MOVW    R27:R26, R17:R16
   \   00000134   ....               SUBI    R26, LOW((-(UART) & 0xFFFF))
   \   00000136   ....               SBCI    R27, (-(UART) & 0xFFFF) >> 8
   \   00000138   918D               LD      R24, X+
   \   0000013A   919C               LD      R25, X
   \   0000013C   9711               SBIW    R27:R26, 1
   \   0000013E   2F06               MOV     R16, R22
   \   00000140   E010               LDI     R17, 0
   \   00000142   E14A               LDI     R20, 26
   \   00000144   E050               LDI     R21, 0
   \   00000146   ........           CALL    ?S_EC_MUL_L02
   \   0000014A   01D8               MOVW    R27:R26, R17:R16
   \   0000014C   ....               SUBI    R26, LOW((-(UART + 2) & 0xFFFF))
   \   0000014E   ....               SBCI    R27, HIGH((-(UART + 2) & 0xFFFF))
   \   00000150   910D               LD      R16, X+
   \   00000152   911C               LD      R17, X
   \   00000154   9711               SBIW    R27:R26, 1
   \   00000156   0F80               ADD     R24, R16
   \   00000158   1F91               ADC     R25, R17
   \   0000015A   01DC               MOVW    R27:R26, R25:R24
   \   0000015C   924C               ST      X, R4
   \   0000015E   2F06               MOV     R16, R22
   \   00000160   E010               LDI     R17, 0
   \   00000162   E14A               LDI     R20, 26
   \   00000164   E050               LDI     R21, 0
   \   00000166   ........           CALL    ?S_EC_MUL_L02
   \   0000016A   01D8               MOVW    R27:R26, R17:R16
   \   0000016C   ....               SUBI    R26, LOW((-(UART + 2) & 0xFFFF))
   \   0000016E   ....               SBCI    R27, HIGH((-(UART + 2) & 0xFFFF))
   \   00000170   910D               LD      R16, X+
   \   00000172   911C               LD      R17, X
   \   00000174   5F0F               SUBI    R16, 255
   \   00000176   4F1F               SBCI    R17, 255
   \   00000178   931C               ST      X, R17
   \   0000017A   930E               ST      -X, R16
    358                  UART[ch].pTxBuffer[UART[ch].TxFirst++] = ADInt.Result[i] >> 8 ;   // ADresult
   \   0000017C   018F               MOVW    R17:R16, R31:R30
   \   0000017E   0F00               LSL     R16
   \   00000180   1F11               ROL     R17
   \   00000182   01D8               MOVW    R27:R26, R17:R16
   \   00000184   ....               SUBI    R26, LOW((-(ADInt) & 0xFFFF))
   \   00000186   ....               SBCI    R27, (-(ADInt) & 0xFFFF) >> 8
   \   00000188   904D               LD      R4, X+
   \   0000018A   905C               LD      R5, X
   \   0000018C   9711               SBIW    R27:R26, 1
   \   0000018E   2C45               MOV     R4, R5
   \   00000190   0C55               LSL     R5
   \   00000192   0855               SBC     R5, R5
   \   00000194   2F06               MOV     R16, R22
   \   00000196   E010               LDI     R17, 0
   \   00000198   E14A               LDI     R20, 26
   \   0000019A   E050               LDI     R21, 0
   \   0000019C   ........           CALL    ?S_EC_MUL_L02
   \   000001A0   01D8               MOVW    R27:R26, R17:R16
   \   000001A2   ....               SUBI    R26, LOW((-(UART) & 0xFFFF))
   \   000001A4   ....               SBCI    R27, (-(UART) & 0xFFFF) >> 8
   \   000001A6   918D               LD      R24, X+
   \   000001A8   919C               LD      R25, X
   \   000001AA   9711               SBIW    R27:R26, 1
   \   000001AC   2F06               MOV     R16, R22
   \   000001AE   E010               LDI     R17, 0
   \   000001B0   E14A               LDI     R20, 26
   \   000001B2   E050               LDI     R21, 0
   \   000001B4   ........           CALL    ?S_EC_MUL_L02
   \   000001B8   01D8               MOVW    R27:R26, R17:R16
   \   000001BA   ....               SUBI    R26, LOW((-(UART + 2) & 0xFFFF))
   \   000001BC   ....               SBCI    R27, HIGH((-(UART + 2) & 0xFFFF))
   \   000001BE   910D               LD      R16, X+
   \   000001C0   911C               LD      R17, X
   \   000001C2   9711               SBIW    R27:R26, 1
   \   000001C4   0F80               ADD     R24, R16
   \   000001C6   1F91               ADC     R25, R17
   \   000001C8   01DC               MOVW    R27:R26, R25:R24
   \   000001CA   924C               ST      X, R4
   \   000001CC   2F06               MOV     R16, R22
   \   000001CE   E010               LDI     R17, 0
   \   000001D0   E14A               LDI     R20, 26
   \   000001D2   E050               LDI     R21, 0
   \   000001D4   ........           CALL    ?S_EC_MUL_L02
   \   000001D8   01D8               MOVW    R27:R26, R17:R16
   \   000001DA   ....               SUBI    R26, LOW((-(UART + 2) & 0xFFFF))
   \   000001DC   ....               SBCI    R27, HIGH((-(UART + 2) & 0xFFFF))
   \   000001DE   910D               LD      R16, X+
   \   000001E0   911C               LD      R17, X
   \   000001E2   5F0F               SUBI    R16, 255
   \   000001E4   4F1F               SBCI    R17, 255
   \   000001E6   931C               ST      X, R17
   \   000001E8   930E               ST      -X, R16
    359              }
   \   000001EA   9631               ADIW    R31:R30, 1
   \   000001EC   CF8E               RJMP    ??BuildADInt_0
    360          
    361              UART[ch].pTxBuffer[ntna] = (UART[ch].TxFirst - ntna - 2)  & 0xff ;      // length of data block lb
   \                     ??BuildADInt_1:
   \   000001EE   2F06               MOV     R16, R22
   \   000001F0   E010               LDI     R17, 0
   \   000001F2   E14A               LDI     R20, 26
   \   000001F4   E050               LDI     R21, 0
   \   000001F6   ........           CALL    ?S_EC_MUL_L02
   \   000001FA   01D8               MOVW    R27:R26, R17:R16
   \   000001FC   ....               SUBI    R26, LOW((-(UART + 2) & 0xFFFF))
   \   000001FE   ....               SBCI    R27, HIGH((-(UART + 2) & 0xFFFF))
   \   00000200   918D               LD      R24, X+
   \   00000202   919C               LD      R25, X
   \   00000204   9711               SBIW    R27:R26, 1
   \   00000206   2F02               MOV     R16, R18
   \   00000208   1B80               SUB     R24, R16
   \   0000020A   5082               SUBI    R24, 2
   \   0000020C   2F06               MOV     R16, R22
   \   0000020E   E010               LDI     R17, 0
   \   00000210   E14A               LDI     R20, 26
   \   00000212   E050               LDI     R21, 0
   \   00000214   ........           CALL    ?S_EC_MUL_L02
   \   00000218   01D8               MOVW    R27:R26, R17:R16
   \   0000021A   ....               SUBI    R26, LOW((-(UART) & 0xFFFF))
   \   0000021C   ....               SBCI    R27, (-(UART) & 0xFFFF) >> 8
   \   0000021E   910D               LD      R16, X+
   \   00000220   911C               LD      R17, X
   \   00000222   9711               SBIW    R27:R26, 1
   \   00000224   0F02               ADD     R16, R18
   \   00000226   1F13               ADC     R17, R19
   \   00000228   01D8               MOVW    R27:R26, R17:R16
   \   0000022A   938C               ST      X, R24
    362              UART[ch].pTxBuffer[ntna+1] = ((UART[ch].TxFirst - ntna - 2) >> 8 ) & 0xff ; // length of data block hb
   \   0000022C   2F06               MOV     R16, R22
   \   0000022E   E010               LDI     R17, 0
   \   00000230   E14A               LDI     R20, 26
   \   00000232   E050               LDI     R21, 0
   \   00000234   ........           CALL    ?S_EC_MUL_L02
   \   00000238   01D8               MOVW    R27:R26, R17:R16
   \   0000023A   ....               SUBI    R26, LOW((-(UART + 2) & 0xFFFF))
   \   0000023C   ....               SBCI    R27, HIGH((-(UART + 2) & 0xFFFF))
   \   0000023E   918D               LD      R24, X+
   \   00000240   919C               LD      R25, X
   \   00000242   9711               SBIW    R27:R26, 1
   \   00000244   1B82               SUB     R24, R18
   \   00000246   0B93               SBC     R25, R19
   \   00000248   9702               SBIW    R25:R24, 2
   \   0000024A   2F89               MOV     R24, R25
   \   0000024C   E090               LDI     R25, 0
   \   0000024E   2F06               MOV     R16, R22
   \   00000250   E010               LDI     R17, 0
   \   00000252   E14A               LDI     R20, 26
   \   00000254   E050               LDI     R21, 0
   \   00000256   ........           CALL    ?S_EC_MUL_L02
   \   0000025A   01D8               MOVW    R27:R26, R17:R16
   \   0000025C   ....               SUBI    R26, LOW((-(UART) & 0xFFFF))
   \   0000025E   ....               SBCI    R27, (-(UART) & 0xFFFF) >> 8
   \   00000260   910D               LD      R16, X+
   \   00000262   911C               LD      R17, X
   \   00000264   9711               SBIW    R27:R26, 1
   \   00000266   0F02               ADD     R16, R18
   \   00000268   1F13               ADC     R17, R19
   \   0000026A   01D8               MOVW    R27:R26, R17:R16
   \   0000026C   9611               ADIW    R27:R26, 1
   \   0000026E   938C               ST      X, R24
   \   00000270   9711               SBIW    R27:R26, 1
    363          
    364          }
   \   00000272   E0E6               LDI     R30, 6
   \   00000274   ........           JMP     ?EPILOGUE_B6_L09
    365          
    366          
    367          /*************************************************************************
    368          *
    369          * Build datablock for eeprom on ADcard
    370          *
    371          *************************************************************************/

   \                                 In  segment CODE, align 2, keep-with-next
    372          void BuildADEpromdata(char ch, char portch) {
   \                     BuildADEpromdata:
   \   00000000   ........           CALL    ?PROLOGUE4_L09
   \   00000004   2F20               MOV     R18, R16
   \   00000006   2E21               MOV     R2, R17
    373          
    374              UART[ch].RxSendReply = true ;                               // flag for answering 
   \   00000008   2F02               MOV     R16, R18
   \   0000000A   E010               LDI     R17, 0
   \   0000000C   E14A               LDI     R20, 26
   \   0000000E   E050               LDI     R21, 0
   \   00000010   ........           CALL    ?S_EC_MUL_L02
   \   00000014   01F8               MOVW    R31:R30, R17:R16
   \   00000016   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000018   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000001A   E001               LDI     R16, 1
   \   0000001C   8F01               STD     Z+25, R16
    375          
    376              UART[ch].pTxBuffer[UART[ch].TxFirst++] = CMD_REP_RS4_ADBUF & 0xff;     
   \   0000001E   2F02               MOV     R16, R18
   \   00000020   E010               LDI     R17, 0
   \   00000022   E14A               LDI     R20, 26
   \   00000024   E050               LDI     R21, 0
   \   00000026   ........           CALL    ?S_EC_MUL_L02
   \   0000002A   01F8               MOVW    R31:R30, R17:R16
   \   0000002C   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000002E   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000030   8160               LD      R22, Z
   \   00000032   8171               LDD     R23, Z+1
   \   00000034   2F02               MOV     R16, R18
   \   00000036   E010               LDI     R17, 0
   \   00000038   E14A               LDI     R20, 26
   \   0000003A   E050               LDI     R21, 0
   \   0000003C   ........           CALL    ?S_EC_MUL_L02
   \   00000040   01F8               MOVW    R31:R30, R17:R16
   \   00000042   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000044   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000046   8102               LDD     R16, Z+2
   \   00000048   8113               LDD     R17, Z+3
   \   0000004A   0F60               ADD     R22, R16
   \   0000004C   1F71               ADC     R23, R17
   \   0000004E   01FB               MOVW    R31:R30, R23:R22
   \   00000050   E809               LDI     R16, 137
   \   00000052   8300               ST      Z, R16
   \   00000054   2F02               MOV     R16, R18
   \   00000056   E010               LDI     R17, 0
   \   00000058   E14A               LDI     R20, 26
   \   0000005A   E050               LDI     R21, 0
   \   0000005C   ........           CALL    ?S_EC_MUL_L02
   \   00000060   01F8               MOVW    R31:R30, R17:R16
   \   00000062   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000064   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000066   8102               LDD     R16, Z+2
   \   00000068   8113               LDD     R17, Z+3
   \   0000006A   5F0F               SUBI    R16, 255
   \   0000006C   4F1F               SBCI    R17, 255
   \   0000006E   8302               STD     Z+2, R16
   \   00000070   8313               STD     Z+3, R17
    377              UART[ch].pTxBuffer[UART[ch].TxFirst++] = CMD_REP_RS4_ADBUF >> 8;     
   \   00000072   2F02               MOV     R16, R18
   \   00000074   E010               LDI     R17, 0
   \   00000076   E14A               LDI     R20, 26
   \   00000078   E050               LDI     R21, 0
   \   0000007A   ........           CALL    ?S_EC_MUL_L02
   \   0000007E   01F8               MOVW    R31:R30, R17:R16
   \   00000080   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000082   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000084   8160               LD      R22, Z
   \   00000086   8171               LDD     R23, Z+1
   \   00000088   2F02               MOV     R16, R18
   \   0000008A   E010               LDI     R17, 0
   \   0000008C   E14A               LDI     R20, 26
   \   0000008E   E050               LDI     R21, 0
   \   00000090   ........           CALL    ?S_EC_MUL_L02
   \   00000094   01F8               MOVW    R31:R30, R17:R16
   \   00000096   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000098   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000009A   8102               LDD     R16, Z+2
   \   0000009C   8113               LDD     R17, Z+3
   \   0000009E   0F60               ADD     R22, R16
   \   000000A0   1F71               ADC     R23, R17
   \   000000A2   01FB               MOVW    R31:R30, R23:R22
   \   000000A4   E004               LDI     R16, 4
   \   000000A6   8300               ST      Z, R16
   \   000000A8   2F02               MOV     R16, R18
   \   000000AA   E010               LDI     R17, 0
   \   000000AC   E14A               LDI     R20, 26
   \   000000AE   E050               LDI     R21, 0
   \   000000B0   ........           CALL    ?S_EC_MUL_L02
   \   000000B4   01F8               MOVW    R31:R30, R17:R16
   \   000000B6   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000000B8   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000000BA   8102               LDD     R16, Z+2
   \   000000BC   8113               LDD     R17, Z+3
   \   000000BE   5F0F               SUBI    R16, 255
   \   000000C0   4F1F               SBCI    R17, 255
   \   000000C2   8302               STD     Z+2, R16
   \   000000C4   8313               STD     Z+3, R17
    378              short ntna = UART[ch].TxFirst ;                                    // remember index
   \   000000C6   2F02               MOV     R16, R18
   \   000000C8   E010               LDI     R17, 0
   \   000000CA   E14A               LDI     R20, 26
   \   000000CC   E050               LDI     R21, 0
   \   000000CE   ........           CALL    ?S_EC_MUL_L02
   \   000000D2   01F8               MOVW    R31:R30, R17:R16
   \   000000D4   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000000D6   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000000D8   8162               LDD     R22, Z+2
   \   000000DA   8173               LDD     R23, Z+3
    379              UART[ch].TxFirst += 2 ;                                      // two byte length
   \   000000DC   2F02               MOV     R16, R18
   \   000000DE   E010               LDI     R17, 0
   \   000000E0   E14A               LDI     R20, 26
   \   000000E2   E050               LDI     R21, 0
   \   000000E4   ........           CALL    ?S_EC_MUL_L02
   \   000000E8   01F8               MOVW    R31:R30, R17:R16
   \   000000EA   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000000EC   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000000EE   8102               LDD     R16, Z+2
   \   000000F0   8113               LDD     R17, Z+3
   \   000000F2   5F0E               SUBI    R16, 254
   \   000000F4   4F1F               SBCI    R17, 255
   \   000000F6   8302               STD     Z+2, R16
   \   000000F8   8313               STD     Z+3, R17
    380          
    381              for (short i = 0; i < 44; i++) {
   \   000000FA   E080               LDI     R24, 0
   \   000000FC   E090               LDI     R25, 0
   \                     ??BuildADEpromdata_0:
   \   000000FE   328C               CPI     R24, 44
   \   00000100   E000               LDI     R16, 0
   \   00000102   0790               CPC     R25, R16
   \   00000104   F5C4               BRGE    ??BuildADEpromdata_1
    382                  UART[ch].pTxBuffer[UART[ch].TxFirst++] = TData.RS4.FromTargetBuffer[portch][i] ;
   \   00000106   ....               LDI     R30, LOW((TData + 1428))
   \   00000108   ....               LDI     R31, HIGH((TData + 1428))
   \   0000010A   0FE8               ADD     R30, R24
   \   0000010C   1FF9               ADC     R31, R25
   \   0000010E   2D02               MOV     R16, R2
   \   00000110   E010               LDI     R17, 0
   \   00000112   E342               LDI     R20, 50
   \   00000114   E050               LDI     R21, 0
   \   00000116   ........           CALL    ?S_EC_MUL_L02
   \   0000011A   0FE0               ADD     R30, R16
   \   0000011C   1FF1               ADC     R31, R17
   \   0000011E   8130               LD      R19, Z
   \   00000120   2F02               MOV     R16, R18
   \   00000122   E010               LDI     R17, 0
   \   00000124   E14A               LDI     R20, 26
   \   00000126   E050               LDI     R21, 0
   \   00000128   ........           CALL    ?S_EC_MUL_L02
   \   0000012C   01F8               MOVW    R31:R30, R17:R16
   \   0000012E   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000130   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000132   81A0               LD      R26, Z
   \   00000134   81B1               LDD     R27, Z+1
   \   00000136   2F02               MOV     R16, R18
   \   00000138   E010               LDI     R17, 0
   \   0000013A   E14A               LDI     R20, 26
   \   0000013C   E050               LDI     R21, 0
   \   0000013E   ........           CALL    ?S_EC_MUL_L02
   \   00000142   01F8               MOVW    R31:R30, R17:R16
   \   00000144   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000146   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000148   8102               LDD     R16, Z+2
   \   0000014A   8113               LDD     R17, Z+3
   \   0000014C   0FA0               ADD     R26, R16
   \   0000014E   1FB1               ADC     R27, R17
   \   00000150   01FD               MOVW    R31:R30, R27:R26
   \   00000152   8330               ST      Z, R19
   \   00000154   2F02               MOV     R16, R18
   \   00000156   E010               LDI     R17, 0
   \   00000158   E14A               LDI     R20, 26
   \   0000015A   E050               LDI     R21, 0
   \   0000015C   ........           CALL    ?S_EC_MUL_L02
   \   00000160   01F8               MOVW    R31:R30, R17:R16
   \   00000162   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000164   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000166   8102               LDD     R16, Z+2
   \   00000168   8113               LDD     R17, Z+3
   \   0000016A   5F0F               SUBI    R16, 255
   \   0000016C   4F1F               SBCI    R17, 255
   \   0000016E   8302               STD     Z+2, R16
   \   00000170   8313               STD     Z+3, R17
    383              }
   \   00000172   9601               ADIW    R25:R24, 1
   \   00000174   CFC4               RJMP    ??BuildADEpromdata_0
    384              UART[ch].pTxBuffer[ntna] = (UART[ch].TxFirst - ntna - 2) & 0xff;      // length of data block lb
   \                     ??BuildADEpromdata_1:
   \   00000176   2F02               MOV     R16, R18
   \   00000178   E010               LDI     R17, 0
   \   0000017A   E14A               LDI     R20, 26
   \   0000017C   E050               LDI     R21, 0
   \   0000017E   ........           CALL    ?S_EC_MUL_L02
   \   00000182   01F8               MOVW    R31:R30, R17:R16
   \   00000184   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000186   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000188   8182               LDD     R24, Z+2
   \   0000018A   8193               LDD     R25, Z+3
   \   0000018C   2F06               MOV     R16, R22
   \   0000018E   1B80               SUB     R24, R16
   \   00000190   5082               SUBI    R24, 2
   \   00000192   2F02               MOV     R16, R18
   \   00000194   E010               LDI     R17, 0
   \   00000196   E14A               LDI     R20, 26
   \   00000198   E050               LDI     R21, 0
   \   0000019A   ........           CALL    ?S_EC_MUL_L02
   \   0000019E   01F8               MOVW    R31:R30, R17:R16
   \   000001A0   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000001A2   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000001A4   8100               LD      R16, Z
   \   000001A6   8111               LDD     R17, Z+1
   \   000001A8   0F06               ADD     R16, R22
   \   000001AA   1F17               ADC     R17, R23
   \   000001AC   01F8               MOVW    R31:R30, R17:R16
   \   000001AE   8380               ST      Z, R24
    385              UART[ch].pTxBuffer[ntna + 1] = ((UART[ch].TxFirst - ntna - 2) >> 8) & 0xff; // length of data block hb
   \   000001B0   2F02               MOV     R16, R18
   \   000001B2   E010               LDI     R17, 0
   \   000001B4   E14A               LDI     R20, 26
   \   000001B6   E050               LDI     R21, 0
   \   000001B8   ........           CALL    ?S_EC_MUL_L02
   \   000001BC   01F8               MOVW    R31:R30, R17:R16
   \   000001BE   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000001C0   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000001C2   8182               LDD     R24, Z+2
   \   000001C4   8193               LDD     R25, Z+3
   \   000001C6   1B86               SUB     R24, R22
   \   000001C8   0B97               SBC     R25, R23
   \   000001CA   9702               SBIW    R25:R24, 2
   \   000001CC   2F89               MOV     R24, R25
   \   000001CE   E090               LDI     R25, 0
   \   000001D0   2F02               MOV     R16, R18
   \   000001D2   E010               LDI     R17, 0
   \   000001D4   E14A               LDI     R20, 26
   \   000001D6   E050               LDI     R21, 0
   \   000001D8   ........           CALL    ?S_EC_MUL_L02
   \   000001DC   01F8               MOVW    R31:R30, R17:R16
   \   000001DE   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000001E0   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000001E2   8100               LD      R16, Z
   \   000001E4   8111               LDD     R17, Z+1
   \   000001E6   0F06               ADD     R16, R22
   \   000001E8   1F17               ADC     R17, R23
   \   000001EA   01F8               MOVW    R31:R30, R17:R16
   \   000001EC   8381               STD     Z+1, R24
    386          
    387          }
   \   000001EE   E0E4               LDI     R30, 4
   \   000001F0   ........           JMP     ?EPILOGUE_B4_L09
    388          
    389          
    390          
    391          /*************************************************************************
    392          *
    393          * Build setup data package for AN-ZBANA
    394          *
    395          *************************************************************************/

   \                                 In  segment CODE, align 2, keep-with-next
    396          void BuildANASetup(char ch, short pointer) {   
   \                     BuildANASetup:
   \   00000000   ........           CALL    ?PROLOGUE4_L09
   \   00000004   2F60               MOV     R22, R16
   \   00000006   0119               MOVW    R3:R2, R19:R18
    397          
    398              short ntna ;
    399              UART[ch].RxSendReply = true ;                               // flag for answering 
   \   00000008   2F06               MOV     R16, R22
   \   0000000A   E010               LDI     R17, 0
   \   0000000C   E14A               LDI     R20, 26
   \   0000000E   E050               LDI     R21, 0
   \   00000010   ........           CALL    ?S_EC_MUL_L02
   \   00000014   01F8               MOVW    R31:R30, R17:R16
   \   00000016   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000018   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000001A   E001               LDI     R16, 1
   \   0000001C   8F01               STD     Z+25, R16
    400          
    401              UART[ch].pTxBuffer[UART[ch].TxFirst++] = CMD_REP_ANA_SETUP & 0xff;     
   \   0000001E   2F06               MOV     R16, R22
   \   00000020   E010               LDI     R17, 0
   \   00000022   E14A               LDI     R20, 26
   \   00000024   E050               LDI     R21, 0
   \   00000026   ........           CALL    ?S_EC_MUL_L02
   \   0000002A   01F8               MOVW    R31:R30, R17:R16
   \   0000002C   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000002E   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000030   8180               LD      R24, Z
   \   00000032   8191               LDD     R25, Z+1
   \   00000034   2F06               MOV     R16, R22
   \   00000036   E010               LDI     R17, 0
   \   00000038   E14A               LDI     R20, 26
   \   0000003A   E050               LDI     R21, 0
   \   0000003C   ........           CALL    ?S_EC_MUL_L02
   \   00000040   01F8               MOVW    R31:R30, R17:R16
   \   00000042   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000044   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000046   8102               LDD     R16, Z+2
   \   00000048   8113               LDD     R17, Z+3
   \   0000004A   0F80               ADD     R24, R16
   \   0000004C   1F91               ADC     R25, R17
   \   0000004E   01FC               MOVW    R31:R30, R25:R24
   \   00000050   EB0B               LDI     R16, 187
   \   00000052   8300               ST      Z, R16
   \   00000054   2F06               MOV     R16, R22
   \   00000056   E010               LDI     R17, 0
   \   00000058   E14A               LDI     R20, 26
   \   0000005A   E050               LDI     R21, 0
   \   0000005C   ........           CALL    ?S_EC_MUL_L02
   \   00000060   01F8               MOVW    R31:R30, R17:R16
   \   00000062   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000064   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000066   8102               LDD     R16, Z+2
   \   00000068   8113               LDD     R17, Z+3
   \   0000006A   5F0F               SUBI    R16, 255
   \   0000006C   4F1F               SBCI    R17, 255
   \   0000006E   8302               STD     Z+2, R16
   \   00000070   8313               STD     Z+3, R17
    402              UART[ch].pTxBuffer[UART[ch].TxFirst++] = CMD_REP_ANA_SETUP >> 8;     
   \   00000072   2F06               MOV     R16, R22
   \   00000074   E010               LDI     R17, 0
   \   00000076   E14A               LDI     R20, 26
   \   00000078   E050               LDI     R21, 0
   \   0000007A   ........           CALL    ?S_EC_MUL_L02
   \   0000007E   01F8               MOVW    R31:R30, R17:R16
   \   00000080   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000082   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000084   8180               LD      R24, Z
   \   00000086   8191               LDD     R25, Z+1
   \   00000088   2F06               MOV     R16, R22
   \   0000008A   E010               LDI     R17, 0
   \   0000008C   E14A               LDI     R20, 26
   \   0000008E   E050               LDI     R21, 0
   \   00000090   ........           CALL    ?S_EC_MUL_L02
   \   00000094   01F8               MOVW    R31:R30, R17:R16
   \   00000096   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000098   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000009A   8102               LDD     R16, Z+2
   \   0000009C   8113               LDD     R17, Z+3
   \   0000009E   0F80               ADD     R24, R16
   \   000000A0   1F91               ADC     R25, R17
   \   000000A2   01FC               MOVW    R31:R30, R25:R24
   \   000000A4   E004               LDI     R16, 4
   \   000000A6   8300               ST      Z, R16
   \   000000A8   2F06               MOV     R16, R22
   \   000000AA   E010               LDI     R17, 0
   \   000000AC   E14A               LDI     R20, 26
   \   000000AE   E050               LDI     R21, 0
   \   000000B0   ........           CALL    ?S_EC_MUL_L02
   \   000000B4   01F8               MOVW    R31:R30, R17:R16
   \   000000B6   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000000B8   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000000BA   8102               LDD     R16, Z+2
   \   000000BC   8113               LDD     R17, Z+3
   \   000000BE   5F0F               SUBI    R16, 255
   \   000000C0   4F1F               SBCI    R17, 255
   \   000000C2   8302               STD     Z+2, R16
   \   000000C4   8313               STD     Z+3, R17
    403              ntna = UART[ch].TxFirst ;                                    /* remember index */
   \   000000C6   2F06               MOV     R16, R22
   \   000000C8   E010               LDI     R17, 0
   \   000000CA   E14A               LDI     R20, 26
   \   000000CC   E050               LDI     R21, 0
   \   000000CE   ........           CALL    ?S_EC_MUL_L02
   \   000000D2   01F8               MOVW    R31:R30, R17:R16
   \   000000D4   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000000D6   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000000D8   8102               LDD     R16, Z+2
   \   000000DA   8113               LDD     R17, Z+3
   \   000000DC   0198               MOVW    R19:R18, R17:R16
    404              UART[ch].TxFirst += 2 ;                                      // two byte length
   \   000000DE   2F06               MOV     R16, R22
   \   000000E0   E010               LDI     R17, 0
   \   000000E2   E14A               LDI     R20, 26
   \   000000E4   E050               LDI     R21, 0
   \   000000E6   ........           CALL    ?S_EC_MUL_L02
   \   000000EA   01F8               MOVW    R31:R30, R17:R16
   \   000000EC   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000000EE   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000000F0   8102               LDD     R16, Z+2
   \   000000F2   8113               LDD     R17, Z+3
   \   000000F4   5F0E               SUBI    R16, 254
   \   000000F6   4F1F               SBCI    R17, 255
   \   000000F8   8302               STD     Z+2, R16
   \   000000FA   8313               STD     Z+3, R17
    405          
    406              UART[ch].pTxBuffer[UART[ch].TxFirst++] = TData.Ana.PortUsed & 0xff;
   \   000000FC   ....               LDI     R30, LOW(TData)
   \   000000FE   ....               LDI     R31, (TData) >> 8
   \   00000100   81A0               LD      R26, Z
   \   00000102   81B1               LDD     R27, Z+1
   \   00000104   2F06               MOV     R16, R22
   \   00000106   E010               LDI     R17, 0
   \   00000108   E14A               LDI     R20, 26
   \   0000010A   E050               LDI     R21, 0
   \   0000010C   ........           CALL    ?S_EC_MUL_L02
   \   00000110   01F8               MOVW    R31:R30, R17:R16
   \   00000112   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000114   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000116   8180               LD      R24, Z
   \   00000118   8191               LDD     R25, Z+1
   \   0000011A   2F06               MOV     R16, R22
   \   0000011C   E010               LDI     R17, 0
   \   0000011E   E14A               LDI     R20, 26
   \   00000120   E050               LDI     R21, 0
   \   00000122   ........           CALL    ?S_EC_MUL_L02
   \   00000126   01F8               MOVW    R31:R30, R17:R16
   \   00000128   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000012A   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000012C   8102               LDD     R16, Z+2
   \   0000012E   8113               LDD     R17, Z+3
   \   00000130   0F80               ADD     R24, R16
   \   00000132   1F91               ADC     R25, R17
   \   00000134   01FC               MOVW    R31:R30, R25:R24
   \   00000136   83A0               ST      Z, R26
   \   00000138   2F06               MOV     R16, R22
   \   0000013A   E010               LDI     R17, 0
   \   0000013C   E14A               LDI     R20, 26
   \   0000013E   E050               LDI     R21, 0
   \   00000140   ........           CALL    ?S_EC_MUL_L02
   \   00000144   01F8               MOVW    R31:R30, R17:R16
   \   00000146   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000148   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000014A   8102               LDD     R16, Z+2
   \   0000014C   8113               LDD     R17, Z+3
   \   0000014E   5F0F               SUBI    R16, 255
   \   00000150   4F1F               SBCI    R17, 255
   \   00000152   8302               STD     Z+2, R16
   \   00000154   8313               STD     Z+3, R17
    407              UART[ch].pTxBuffer[UART[ch].TxFirst++] = (TData.Ana.PortUsed >> 8) & 0xff;
   \   00000156   ....               LDI     R30, LOW(TData)
   \   00000158   ....               LDI     R31, (TData) >> 8
   \   0000015A   81A0               LD      R26, Z
   \   0000015C   81B1               LDD     R27, Z+1
   \   0000015E   2FAB               MOV     R26, R27
   \   00000160   E0B0               LDI     R27, 0
   \   00000162   2F06               MOV     R16, R22
   \   00000164   E010               LDI     R17, 0
   \   00000166   E14A               LDI     R20, 26
   \   00000168   E050               LDI     R21, 0
   \   0000016A   ........           CALL    ?S_EC_MUL_L02
   \   0000016E   01F8               MOVW    R31:R30, R17:R16
   \   00000170   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000172   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000174   8180               LD      R24, Z
   \   00000176   8191               LDD     R25, Z+1
   \   00000178   2F06               MOV     R16, R22
   \   0000017A   E010               LDI     R17, 0
   \   0000017C   E14A               LDI     R20, 26
   \   0000017E   E050               LDI     R21, 0
   \   00000180   ........           CALL    ?S_EC_MUL_L02
   \   00000184   01F8               MOVW    R31:R30, R17:R16
   \   00000186   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000188   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000018A   8102               LDD     R16, Z+2
   \   0000018C   8113               LDD     R17, Z+3
   \   0000018E   0F80               ADD     R24, R16
   \   00000190   1F91               ADC     R25, R17
   \   00000192   01FC               MOVW    R31:R30, R25:R24
   \   00000194   83A0               ST      Z, R26
   \   00000196   2F06               MOV     R16, R22
   \   00000198   E010               LDI     R17, 0
   \   0000019A   E14A               LDI     R20, 26
   \   0000019C   E050               LDI     R21, 0
   \   0000019E   ........           CALL    ?S_EC_MUL_L02
   \   000001A2   01F8               MOVW    R31:R30, R17:R16
   \   000001A4   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000001A6   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000001A8   8102               LDD     R16, Z+2
   \   000001AA   8113               LDD     R17, Z+3
   \   000001AC   5F0F               SUBI    R16, 255
   \   000001AE   4F1F               SBCI    R17, 255
   \   000001B0   8302               STD     Z+2, R16
   \   000001B2   8313               STD     Z+3, R17
    408          
    409              UART[ch].pTxBuffer[ntna] = (UART[ch].TxFirst - ntna - 2)  & 0xff ;      // length of data block lb
   \   000001B4   2F06               MOV     R16, R22
   \   000001B6   E010               LDI     R17, 0
   \   000001B8   E14A               LDI     R20, 26
   \   000001BA   E050               LDI     R21, 0
   \   000001BC   ........           CALL    ?S_EC_MUL_L02
   \   000001C0   01F8               MOVW    R31:R30, R17:R16
   \   000001C2   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000001C4   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000001C6   8182               LDD     R24, Z+2
   \   000001C8   8193               LDD     R25, Z+3
   \   000001CA   2F02               MOV     R16, R18
   \   000001CC   1B80               SUB     R24, R16
   \   000001CE   5082               SUBI    R24, 2
   \   000001D0   2F06               MOV     R16, R22
   \   000001D2   E010               LDI     R17, 0
   \   000001D4   E14A               LDI     R20, 26
   \   000001D6   E050               LDI     R21, 0
   \   000001D8   ........           CALL    ?S_EC_MUL_L02
   \   000001DC   01F8               MOVW    R31:R30, R17:R16
   \   000001DE   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000001E0   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000001E2   8100               LD      R16, Z
   \   000001E4   8111               LDD     R17, Z+1
   \   000001E6   0F02               ADD     R16, R18
   \   000001E8   1F13               ADC     R17, R19
   \   000001EA   01F8               MOVW    R31:R30, R17:R16
   \   000001EC   8380               ST      Z, R24
    410              UART[ch].pTxBuffer[ntna+1] = ((UART[ch].TxFirst - ntna - 2) >> 8 ) & 0xff ; // length of data block hb
   \   000001EE   2F06               MOV     R16, R22
   \   000001F0   E010               LDI     R17, 0
   \   000001F2   E14A               LDI     R20, 26
   \   000001F4   E050               LDI     R21, 0
   \   000001F6   ........           CALL    ?S_EC_MUL_L02
   \   000001FA   01F8               MOVW    R31:R30, R17:R16
   \   000001FC   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000001FE   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000200   8182               LDD     R24, Z+2
   \   00000202   8193               LDD     R25, Z+3
   \   00000204   1B82               SUB     R24, R18
   \   00000206   0B93               SBC     R25, R19
   \   00000208   9702               SBIW    R25:R24, 2
   \   0000020A   2F89               MOV     R24, R25
   \   0000020C   E090               LDI     R25, 0
   \   0000020E   2F06               MOV     R16, R22
   \   00000210   E010               LDI     R17, 0
   \   00000212   E14A               LDI     R20, 26
   \   00000214   E050               LDI     R21, 0
   \   00000216   ........           CALL    ?S_EC_MUL_L02
   \   0000021A   01F8               MOVW    R31:R30, R17:R16
   \   0000021C   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000021E   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000220   8100               LD      R16, Z
   \   00000222   8111               LDD     R17, Z+1
   \   00000224   0F02               ADD     R16, R18
   \   00000226   1F13               ADC     R17, R19
   \   00000228   01F8               MOVW    R31:R30, R17:R16
   \   0000022A   8381               STD     Z+1, R24
    411          }
   \   0000022C   E0E4               LDI     R30, 4
   \   0000022E   ........           JMP     ?EPILOGUE_B4_L09
    412          
    413          /*************************************************************************
    414          *
    415          * Build filter data package for AN-ZBANA
    416          *
    417          *************************************************************************/

   \                                 In  segment CODE, align 2, keep-with-next
    418          void BuildANAFilter(char ch, short pointer) {   
   \                     BuildANAFilter:
   \   00000000   ........           CALL    ?PROLOGUE4_L09
   \   00000004   2F60               MOV     R22, R16
   \   00000006   01C9               MOVW    R25:R24, R19:R18
    419          
    420              char port;
    421              short ntna ;
    422              UART[ch].RxSendReply = true ;                               // flag for answering 
   \   00000008   2F06               MOV     R16, R22
   \   0000000A   E010               LDI     R17, 0
   \   0000000C   E14A               LDI     R20, 26
   \   0000000E   E050               LDI     R21, 0
   \   00000010   ........           CALL    ?S_EC_MUL_L02
   \   00000014   01F8               MOVW    R31:R30, R17:R16
   \   00000016   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000018   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000001A   E001               LDI     R16, 1
   \   0000001C   8F01               STD     Z+25, R16
    423          
    424              UART[ch].pTxBuffer[UART[ch].TxFirst++] = CMD_REP_ANA_FILTER & 0xff;     
   \   0000001E   2F06               MOV     R16, R22
   \   00000020   E010               LDI     R17, 0
   \   00000022   E14A               LDI     R20, 26
   \   00000024   E050               LDI     R21, 0
   \   00000026   ........           CALL    ?S_EC_MUL_L02
   \   0000002A   01F8               MOVW    R31:R30, R17:R16
   \   0000002C   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000002E   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000030   81A0               LD      R26, Z
   \   00000032   81B1               LDD     R27, Z+1
   \   00000034   2F06               MOV     R16, R22
   \   00000036   E010               LDI     R17, 0
   \   00000038   E14A               LDI     R20, 26
   \   0000003A   E050               LDI     R21, 0
   \   0000003C   ........           CALL    ?S_EC_MUL_L02
   \   00000040   01F8               MOVW    R31:R30, R17:R16
   \   00000042   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000044   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000046   8102               LDD     R16, Z+2
   \   00000048   8113               LDD     R17, Z+3
   \   0000004A   0FA0               ADD     R26, R16
   \   0000004C   1FB1               ADC     R27, R17
   \   0000004E   01FD               MOVW    R31:R30, R27:R26
   \   00000050   EC0F               LDI     R16, 207
   \   00000052   8300               ST      Z, R16
   \   00000054   2F06               MOV     R16, R22
   \   00000056   E010               LDI     R17, 0
   \   00000058   E14A               LDI     R20, 26
   \   0000005A   E050               LDI     R21, 0
   \   0000005C   ........           CALL    ?S_EC_MUL_L02
   \   00000060   01F8               MOVW    R31:R30, R17:R16
   \   00000062   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000064   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000066   8102               LDD     R16, Z+2
   \   00000068   8113               LDD     R17, Z+3
   \   0000006A   5F0F               SUBI    R16, 255
   \   0000006C   4F1F               SBCI    R17, 255
   \   0000006E   8302               STD     Z+2, R16
   \   00000070   8313               STD     Z+3, R17
    425              UART[ch].pTxBuffer[UART[ch].TxFirst++] = CMD_REP_ANA_FILTER >> 8;     
   \   00000072   2F06               MOV     R16, R22
   \   00000074   E010               LDI     R17, 0
   \   00000076   E14A               LDI     R20, 26
   \   00000078   E050               LDI     R21, 0
   \   0000007A   ........           CALL    ?S_EC_MUL_L02
   \   0000007E   01F8               MOVW    R31:R30, R17:R16
   \   00000080   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000082   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000084   81A0               LD      R26, Z
   \   00000086   81B1               LDD     R27, Z+1
   \   00000088   2F06               MOV     R16, R22
   \   0000008A   E010               LDI     R17, 0
   \   0000008C   E14A               LDI     R20, 26
   \   0000008E   E050               LDI     R21, 0
   \   00000090   ........           CALL    ?S_EC_MUL_L02
   \   00000094   01F8               MOVW    R31:R30, R17:R16
   \   00000096   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000098   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000009A   8102               LDD     R16, Z+2
   \   0000009C   8113               LDD     R17, Z+3
   \   0000009E   0FA0               ADD     R26, R16
   \   000000A0   1FB1               ADC     R27, R17
   \   000000A2   01FD               MOVW    R31:R30, R27:R26
   \   000000A4   E004               LDI     R16, 4
   \   000000A6   8300               ST      Z, R16
   \   000000A8   2F06               MOV     R16, R22
   \   000000AA   E010               LDI     R17, 0
   \   000000AC   E14A               LDI     R20, 26
   \   000000AE   E050               LDI     R21, 0
   \   000000B0   ........           CALL    ?S_EC_MUL_L02
   \   000000B4   01F8               MOVW    R31:R30, R17:R16
   \   000000B6   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000000B8   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000000BA   8102               LDD     R16, Z+2
   \   000000BC   8113               LDD     R17, Z+3
   \   000000BE   5F0F               SUBI    R16, 255
   \   000000C0   4F1F               SBCI    R17, 255
   \   000000C2   8302               STD     Z+2, R16
   \   000000C4   8313               STD     Z+3, R17
    426              ntna = UART[ch].TxFirst ;                                    /* remember index */
   \   000000C6   2F06               MOV     R16, R22
   \   000000C8   E010               LDI     R17, 0
   \   000000CA   E14A               LDI     R20, 26
   \   000000CC   E050               LDI     R21, 0
   \   000000CE   ........           CALL    ?S_EC_MUL_L02
   \   000000D2   01F8               MOVW    R31:R30, R17:R16
   \   000000D4   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000000D6   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000000D8   8102               LDD     R16, Z+2
   \   000000DA   8113               LDD     R17, Z+3
   \   000000DC   0118               MOVW    R3:R2, R17:R16
    427              UART[ch].TxFirst += 2 ;                                      // two byte length
   \   000000DE   2F06               MOV     R16, R22
   \   000000E0   E010               LDI     R17, 0
   \   000000E2   E14A               LDI     R20, 26
   \   000000E4   E050               LDI     R21, 0
   \   000000E6   ........           CALL    ?S_EC_MUL_L02
   \   000000EA   01F8               MOVW    R31:R30, R17:R16
   \   000000EC   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000000EE   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000000F0   8102               LDD     R16, Z+2
   \   000000F2   8113               LDD     R17, Z+3
   \   000000F4   5F0E               SUBI    R16, 254
   \   000000F6   4F1F               SBCI    R17, 255
   \   000000F8   8302               STD     Z+2, R16
   \   000000FA   8313               STD     Z+3, R17
    428          
    429              for (port = 0; port < 12; port++) {
   \   000000FC   E020               LDI     R18, 0
   \                     ??BuildANAFilter_0:
   \   000000FE   302C               CPI     R18, 12
   \   00000100   F580               BRCC    ??BuildANAFilter_1
    430                  UART[ch].pTxBuffer[UART[ch].TxFirst++] = TData.Ana.Filter[port];
   \   00000102   E030               LDI     R19, 0
   \   00000104   01F9               MOVW    R31:R30, R19:R18
   \   00000106   ....               SUBI    R30, LOW((-(TData) & 0xFFFF))
   \   00000108   ....               SBCI    R31, (-(TData) & 0xFFFF) >> 8
   \   0000010A   8132               LDD     R19, Z+2
   \   0000010C   2F06               MOV     R16, R22
   \   0000010E   E010               LDI     R17, 0
   \   00000110   E14A               LDI     R20, 26
   \   00000112   E050               LDI     R21, 0
   \   00000114   ........           CALL    ?S_EC_MUL_L02
   \   00000118   01F8               MOVW    R31:R30, R17:R16
   \   0000011A   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000011C   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000011E   81A0               LD      R26, Z
   \   00000120   81B1               LDD     R27, Z+1
   \   00000122   2F06               MOV     R16, R22
   \   00000124   E010               LDI     R17, 0
   \   00000126   E14A               LDI     R20, 26
   \   00000128   E050               LDI     R21, 0
   \   0000012A   ........           CALL    ?S_EC_MUL_L02
   \   0000012E   01F8               MOVW    R31:R30, R17:R16
   \   00000130   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000132   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000134   8102               LDD     R16, Z+2
   \   00000136   8113               LDD     R17, Z+3
   \   00000138   0FA0               ADD     R26, R16
   \   0000013A   1FB1               ADC     R27, R17
   \   0000013C   01FD               MOVW    R31:R30, R27:R26
   \   0000013E   8330               ST      Z, R19
   \   00000140   2F06               MOV     R16, R22
   \   00000142   E010               LDI     R17, 0
   \   00000144   E14A               LDI     R20, 26
   \   00000146   E050               LDI     R21, 0
   \   00000148   ........           CALL    ?S_EC_MUL_L02
   \   0000014C   01F8               MOVW    R31:R30, R17:R16
   \   0000014E   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000150   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000152   8102               LDD     R16, Z+2
   \   00000154   8113               LDD     R17, Z+3
   \   00000156   5F0F               SUBI    R16, 255
   \   00000158   4F1F               SBCI    R17, 255
   \   0000015A   8302               STD     Z+2, R16
   \   0000015C   8313               STD     Z+3, R17
    431              }
   \   0000015E   9523               INC     R18
   \   00000160   CFCE               RJMP    ??BuildANAFilter_0
    432          
    433              UART[ch].pTxBuffer[ntna] = (UART[ch].TxFirst - ntna - 2)  & 0xff ;      // length of data block lb
   \                     ??BuildANAFilter_1:
   \   00000162   2F06               MOV     R16, R22
   \   00000164   E010               LDI     R17, 0
   \   00000166   E14A               LDI     R20, 26
   \   00000168   E050               LDI     R21, 0
   \   0000016A   ........           CALL    ?S_EC_MUL_L02
   \   0000016E   01F8               MOVW    R31:R30, R17:R16
   \   00000170   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000172   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000174   81A2               LDD     R26, Z+2
   \   00000176   81B3               LDD     R27, Z+3
   \   00000178   2D02               MOV     R16, R2
   \   0000017A   1BA0               SUB     R26, R16
   \   0000017C   50A2               SUBI    R26, 2
   \   0000017E   2F06               MOV     R16, R22
   \   00000180   E010               LDI     R17, 0
   \   00000182   E14A               LDI     R20, 26
   \   00000184   E050               LDI     R21, 0
   \   00000186   ........           CALL    ?S_EC_MUL_L02
   \   0000018A   01F8               MOVW    R31:R30, R17:R16
   \   0000018C   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000018E   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000190   8100               LD      R16, Z
   \   00000192   8111               LDD     R17, Z+1
   \   00000194   0D02               ADD     R16, R2
   \   00000196   1D13               ADC     R17, R3
   \   00000198   01F8               MOVW    R31:R30, R17:R16
   \   0000019A   83A0               ST      Z, R26
    434              UART[ch].pTxBuffer[ntna+1] = ((UART[ch].TxFirst - ntna - 2) >> 8 ) & 0xff ; // length of data block hb
   \   0000019C   2F06               MOV     R16, R22
   \   0000019E   E010               LDI     R17, 0
   \   000001A0   E14A               LDI     R20, 26
   \   000001A2   E050               LDI     R21, 0
   \   000001A4   ........           CALL    ?S_EC_MUL_L02
   \   000001A8   01F8               MOVW    R31:R30, R17:R16
   \   000001AA   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000001AC   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000001AE   81A2               LDD     R26, Z+2
   \   000001B0   81B3               LDD     R27, Z+3
   \   000001B2   19A2               SUB     R26, R2
   \   000001B4   09B3               SBC     R27, R3
   \   000001B6   9712               SBIW    R27:R26, 2
   \   000001B8   2FAB               MOV     R26, R27
   \   000001BA   E0B0               LDI     R27, 0
   \   000001BC   2F06               MOV     R16, R22
   \   000001BE   E010               LDI     R17, 0
   \   000001C0   E14A               LDI     R20, 26
   \   000001C2   E050               LDI     R21, 0
   \   000001C4   ........           CALL    ?S_EC_MUL_L02
   \   000001C8   01F8               MOVW    R31:R30, R17:R16
   \   000001CA   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000001CC   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000001CE   8100               LD      R16, Z
   \   000001D0   8111               LDD     R17, Z+1
   \   000001D2   0D02               ADD     R16, R2
   \   000001D4   1D13               ADC     R17, R3
   \   000001D6   01F8               MOVW    R31:R30, R17:R16
   \   000001D8   83A1               STD     Z+1, R26
    435          }
   \   000001DA   E0E4               LDI     R30, 4
   \   000001DC   ........           JMP     ?EPILOGUE_B4_L09
    436          
    437          /*************************************************************************
    438          *
    439          * Build datablock for External AD (ANA)
    440          *
    441          *************************************************************************/

   \                                 In  segment CODE, align 2, keep-with-next
    442          void BuildMDataANA(char ch, short pointer) {
   \                     BuildMDataANA:
   \   00000000   ........           CALL    ?PROLOGUE8_L09
   \   00000004                      REQUIRE ?Register_R4_is_cg_reg
   \   00000004                      REQUIRE ?Register_R5_is_cg_reg
   \   00000004                      REQUIRE ?Register_R6_is_cg_reg
   \   00000004                      REQUIRE ?Register_R7_is_cg_reg
   \   00000004   2F60               MOV     R22, R16
   \   00000006   0129               MOVW    R5:R4, R19:R18
    443          
    444              short ntna, i ;
    445              UART[ch].RxSendReply = true ;                               // flag for answering 
   \   00000008   2F06               MOV     R16, R22
   \   0000000A   E010               LDI     R17, 0
   \   0000000C   E14A               LDI     R20, 26
   \   0000000E   E050               LDI     R21, 0
   \   00000010   ........           CALL    ?S_EC_MUL_L02
   \   00000014   01F8               MOVW    R31:R30, R17:R16
   \   00000016   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000018   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000001A   E001               LDI     R16, 1
   \   0000001C   8F01               STD     Z+25, R16
    446          
    447              UART[ch].pTxBuffer[UART[ch].TxFirst++] = CMD_REP_ANA_MDATA & 0xff;     
   \   0000001E   2F06               MOV     R16, R22
   \   00000020   E010               LDI     R17, 0
   \   00000022   E14A               LDI     R20, 26
   \   00000024   E050               LDI     R21, 0
   \   00000026   ........           CALL    ?S_EC_MUL_L02
   \   0000002A   01F8               MOVW    R31:R30, R17:R16
   \   0000002C   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000002E   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000030   8180               LD      R24, Z
   \   00000032   8191               LDD     R25, Z+1
   \   00000034   2F06               MOV     R16, R22
   \   00000036   E010               LDI     R17, 0
   \   00000038   E14A               LDI     R20, 26
   \   0000003A   E050               LDI     R21, 0
   \   0000003C   ........           CALL    ?S_EC_MUL_L02
   \   00000040   01F8               MOVW    R31:R30, R17:R16
   \   00000042   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000044   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000046   8102               LDD     R16, Z+2
   \   00000048   8113               LDD     R17, Z+3
   \   0000004A   0F80               ADD     R24, R16
   \   0000004C   1F91               ADC     R25, R17
   \   0000004E   01FC               MOVW    R31:R30, R25:R24
   \   00000050   ED09               LDI     R16, 217
   \   00000052   8300               ST      Z, R16
   \   00000054   2F06               MOV     R16, R22
   \   00000056   E010               LDI     R17, 0
   \   00000058   E14A               LDI     R20, 26
   \   0000005A   E050               LDI     R21, 0
   \   0000005C   ........           CALL    ?S_EC_MUL_L02
   \   00000060   01F8               MOVW    R31:R30, R17:R16
   \   00000062   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000064   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000066   8102               LDD     R16, Z+2
   \   00000068   8113               LDD     R17, Z+3
   \   0000006A   5F0F               SUBI    R16, 255
   \   0000006C   4F1F               SBCI    R17, 255
   \   0000006E   8302               STD     Z+2, R16
   \   00000070   8313               STD     Z+3, R17
    448              UART[ch].pTxBuffer[UART[ch].TxFirst++] = CMD_REP_ANA_MDATA >> 8;     
   \   00000072   2F06               MOV     R16, R22
   \   00000074   E010               LDI     R17, 0
   \   00000076   E14A               LDI     R20, 26
   \   00000078   E050               LDI     R21, 0
   \   0000007A   ........           CALL    ?S_EC_MUL_L02
   \   0000007E   01F8               MOVW    R31:R30, R17:R16
   \   00000080   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000082   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000084   8180               LD      R24, Z
   \   00000086   8191               LDD     R25, Z+1
   \   00000088   2F06               MOV     R16, R22
   \   0000008A   E010               LDI     R17, 0
   \   0000008C   E14A               LDI     R20, 26
   \   0000008E   E050               LDI     R21, 0
   \   00000090   ........           CALL    ?S_EC_MUL_L02
   \   00000094   01F8               MOVW    R31:R30, R17:R16
   \   00000096   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000098   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000009A   8102               LDD     R16, Z+2
   \   0000009C   8113               LDD     R17, Z+3
   \   0000009E   0F80               ADD     R24, R16
   \   000000A0   1F91               ADC     R25, R17
   \   000000A2   01FC               MOVW    R31:R30, R25:R24
   \   000000A4   E004               LDI     R16, 4
   \   000000A6   8300               ST      Z, R16
   \   000000A8   2F06               MOV     R16, R22
   \   000000AA   E010               LDI     R17, 0
   \   000000AC   E14A               LDI     R20, 26
   \   000000AE   E050               LDI     R21, 0
   \   000000B0   ........           CALL    ?S_EC_MUL_L02
   \   000000B4   01F8               MOVW    R31:R30, R17:R16
   \   000000B6   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000000B8   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000000BA   8102               LDD     R16, Z+2
   \   000000BC   8113               LDD     R17, Z+3
   \   000000BE   5F0F               SUBI    R16, 255
   \   000000C0   4F1F               SBCI    R17, 255
   \   000000C2   8302               STD     Z+2, R16
   \   000000C4   8313               STD     Z+3, R17
    449              ntna = UART[ch].TxFirst ;                                    /* remember index */
   \   000000C6   2F06               MOV     R16, R22
   \   000000C8   E010               LDI     R17, 0
   \   000000CA   E14A               LDI     R20, 26
   \   000000CC   E050               LDI     R21, 0
   \   000000CE   ........           CALL    ?S_EC_MUL_L02
   \   000000D2   01F8               MOVW    R31:R30, R17:R16
   \   000000D4   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000000D6   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000000D8   8102               LDD     R16, Z+2
   \   000000DA   8113               LDD     R17, Z+3
   \   000000DC   0118               MOVW    R3:R2, R17:R16
    450              UART[ch].TxFirst += 2 ;                                      // two byte length
   \   000000DE   2F06               MOV     R16, R22
   \   000000E0   E010               LDI     R17, 0
   \   000000E2   E14A               LDI     R20, 26
   \   000000E4   E050               LDI     R21, 0
   \   000000E6   ........           CALL    ?S_EC_MUL_L02
   \   000000EA   01F8               MOVW    R31:R30, R17:R16
   \   000000EC   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000000EE   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000000F0   8102               LDD     R16, Z+2
   \   000000F2   8113               LDD     R17, Z+3
   \   000000F4   5F0E               SUBI    R16, 254
   \   000000F6   4F1F               SBCI    R17, 255
   \   000000F8   8302               STD     Z+2, R16
   \   000000FA   8313               STD     Z+3, R17
    451          
    452              UART[ch].pTxBuffer[UART[ch].TxFirst++] = (RestartStatus << 4) ;    // Add restart status
   \   000000FC   9170....           LDS     R23, RestartStatus
   \   00000100   9572               SWAP    R23
   \   00000102   7F70               ANDI    R23, 0xF0
   \   00000104   2F06               MOV     R16, R22
   \   00000106   E010               LDI     R17, 0
   \   00000108   E14A               LDI     R20, 26
   \   0000010A   E050               LDI     R21, 0
   \   0000010C   ........           CALL    ?S_EC_MUL_L02
   \   00000110   01F8               MOVW    R31:R30, R17:R16
   \   00000112   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000114   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000116   8180               LD      R24, Z
   \   00000118   8191               LDD     R25, Z+1
   \   0000011A   2F06               MOV     R16, R22
   \   0000011C   E010               LDI     R17, 0
   \   0000011E   E14A               LDI     R20, 26
   \   00000120   E050               LDI     R21, 0
   \   00000122   ........           CALL    ?S_EC_MUL_L02
   \   00000126   01F8               MOVW    R31:R30, R17:R16
   \   00000128   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000012A   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000012C   8102               LDD     R16, Z+2
   \   0000012E   8113               LDD     R17, Z+3
   \   00000130   0F80               ADD     R24, R16
   \   00000132   1F91               ADC     R25, R17
   \   00000134   01FC               MOVW    R31:R30, R25:R24
   \   00000136   8370               ST      Z, R23
   \   00000138   2F06               MOV     R16, R22
   \   0000013A   E010               LDI     R17, 0
   \   0000013C   E14A               LDI     R20, 26
   \   0000013E   E050               LDI     R21, 0
   \   00000140   ........           CALL    ?S_EC_MUL_L02
   \   00000144   01F8               MOVW    R31:R30, R17:R16
   \   00000146   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000148   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000014A   8102               LDD     R16, Z+2
   \   0000014C   8113               LDD     R17, Z+3
   \   0000014E   5F0F               SUBI    R16, 255
   \   00000150   4F1F               SBCI    R17, 255
   \   00000152   8302               STD     Z+2, R16
   \   00000154   8313               STD     Z+3, R17
    453              for (i = 0; i<12; i++) {
   \   00000156   E020               LDI     R18, 0
   \   00000158   E030               LDI     R19, 0
   \                     ??BuildMDataANA_0:
   \   0000015A   302C               CPI     R18, 12
   \   0000015C   E000               LDI     R16, 0
   \   0000015E   0730               CPC     R19, R16
   \   00000160   F00C               BRLT    $+2+2
   \   00000162   C068               RJMP    ??BuildMDataANA_1
    454                  UART[ch].pTxBuffer[UART[ch].TxFirst++] = TData.Ana.Status[i] ;
   \   00000164   01F9               MOVW    R31:R30, R19:R18
   \   00000166   ....               SUBI    R30, LOW((-(TData) & 0xFFFF))
   \   00000168   ....               SBCI    R31, (-(TData) & 0xFFFF) >> 8
   \   0000016A   8970               LDD     R23, Z+16
   \   0000016C   2F06               MOV     R16, R22
   \   0000016E   E010               LDI     R17, 0
   \   00000170   E14A               LDI     R20, 26
   \   00000172   E050               LDI     R21, 0
   \   00000174   ........           CALL    ?S_EC_MUL_L02
   \   00000178   01F8               MOVW    R31:R30, R17:R16
   \   0000017A   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000017C   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000017E   8180               LD      R24, Z
   \   00000180   8191               LDD     R25, Z+1
   \   00000182   2F06               MOV     R16, R22
   \   00000184   E010               LDI     R17, 0
   \   00000186   E14A               LDI     R20, 26
   \   00000188   E050               LDI     R21, 0
   \   0000018A   ........           CALL    ?S_EC_MUL_L02
   \   0000018E   01F8               MOVW    R31:R30, R17:R16
   \   00000190   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000192   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000194   8102               LDD     R16, Z+2
   \   00000196   8113               LDD     R17, Z+3
   \   00000198   0F80               ADD     R24, R16
   \   0000019A   1F91               ADC     R25, R17
   \   0000019C   01FC               MOVW    R31:R30, R25:R24
   \   0000019E   8370               ST      Z, R23
   \   000001A0   2F06               MOV     R16, R22
   \   000001A2   E010               LDI     R17, 0
   \   000001A4   E14A               LDI     R20, 26
   \   000001A6   E050               LDI     R21, 0
   \   000001A8   ........           CALL    ?S_EC_MUL_L02
   \   000001AC   01F8               MOVW    R31:R30, R17:R16
   \   000001AE   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000001B0   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000001B2   8102               LDD     R16, Z+2
   \   000001B4   8113               LDD     R17, Z+3
   \   000001B6   5F0F               SUBI    R16, 255
   \   000001B8   4F1F               SBCI    R17, 255
   \   000001BA   8302               STD     Z+2, R16
   \   000001BC   8313               STD     Z+3, R17
    455                  *((float*)&UART[ch].pTxBuffer[UART[ch].TxFirst]) = *((float*)&TData.Ana.Result[i]) ;   // ADresult
   \   000001BE   0189               MOVW    R17:R16, R19:R18
   \   000001C0   0F00               LSL     R16
   \   000001C2   1F11               ROL     R17
   \   000001C4   0F00               LSL     R16
   \   000001C6   1F11               ROL     R17
   \   000001C8   01F8               MOVW    R31:R30, R17:R16
   \   000001CA   ....               SUBI    R30, LOW((-(TData + 86) & 0xFFFF))
   \   000001CC   ....               SBCI    R31, HIGH((-(TData + 86) & 0xFFFF))
   \   000001CE   8180               LD      R24, Z
   \   000001D0   8191               LDD     R25, Z+1
   \   000001D2   81A2               LDD     R26, Z+2
   \   000001D4   81B3               LDD     R27, Z+3
   \   000001D6   2F06               MOV     R16, R22
   \   000001D8   E010               LDI     R17, 0
   \   000001DA   E14A               LDI     R20, 26
   \   000001DC   E050               LDI     R21, 0
   \   000001DE   ........           CALL    ?S_EC_MUL_L02
   \   000001E2   01F8               MOVW    R31:R30, R17:R16
   \   000001E4   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000001E6   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000001E8   8060               LD      R6, Z
   \   000001EA   8071               LDD     R7, Z+1
   \   000001EC   2F06               MOV     R16, R22
   \   000001EE   E010               LDI     R17, 0
   \   000001F0   E14A               LDI     R20, 26
   \   000001F2   E050               LDI     R21, 0
   \   000001F4   ........           CALL    ?S_EC_MUL_L02
   \   000001F8   01F8               MOVW    R31:R30, R17:R16
   \   000001FA   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000001FC   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000001FE   8102               LDD     R16, Z+2
   \   00000200   8113               LDD     R17, Z+3
   \   00000202   0E60               ADD     R6, R16
   \   00000204   1E71               ADC     R7, R17
   \   00000206   01F3               MOVW    R31:R30, R7:R6
   \   00000208   8380               ST      Z, R24
   \   0000020A   8391               STD     Z+1, R25
   \   0000020C   83A2               STD     Z+2, R26
   \   0000020E   83B3               STD     Z+3, R27
    456                  UART[ch].TxFirst += sizeof(float) ;
   \   00000210   2F06               MOV     R16, R22
   \   00000212   E010               LDI     R17, 0
   \   00000214   E14A               LDI     R20, 26
   \   00000216   E050               LDI     R21, 0
   \   00000218   ........           CALL    ?S_EC_MUL_L02
   \   0000021C   01F8               MOVW    R31:R30, R17:R16
   \   0000021E   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000220   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000222   8102               LDD     R16, Z+2
   \   00000224   8113               LDD     R17, Z+3
   \   00000226   5F0C               SUBI    R16, 252
   \   00000228   4F1F               SBCI    R17, 255
   \   0000022A   8302               STD     Z+2, R16
   \   0000022C   8313               STD     Z+3, R17
    457              }
   \   0000022E   5F2F               SUBI    R18, 255
   \   00000230   4F3F               SBCI    R19, 255
   \   00000232   CF93               RJMP    ??BuildMDataANA_0
    458          
    459              UART[ch].pTxBuffer[ntna] = (UART[ch].TxFirst - ntna - 2)  & 0xff ;      // length of data block lb
   \                     ??BuildMDataANA_1:
   \   00000234   2F06               MOV     R16, R22
   \   00000236   E010               LDI     R17, 0
   \   00000238   E14A               LDI     R20, 26
   \   0000023A   E050               LDI     R21, 0
   \   0000023C   ........           CALL    ?S_EC_MUL_L02
   \   00000240   01F8               MOVW    R31:R30, R17:R16
   \   00000242   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000244   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000246   8182               LDD     R24, Z+2
   \   00000248   8193               LDD     R25, Z+3
   \   0000024A   2D02               MOV     R16, R2
   \   0000024C   1B80               SUB     R24, R16
   \   0000024E   5082               SUBI    R24, 2
   \   00000250   2F06               MOV     R16, R22
   \   00000252   E010               LDI     R17, 0
   \   00000254   E14A               LDI     R20, 26
   \   00000256   E050               LDI     R21, 0
   \   00000258   ........           CALL    ?S_EC_MUL_L02
   \   0000025C   01F8               MOVW    R31:R30, R17:R16
   \   0000025E   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000260   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000262   8100               LD      R16, Z
   \   00000264   8111               LDD     R17, Z+1
   \   00000266   0D02               ADD     R16, R2
   \   00000268   1D13               ADC     R17, R3
   \   0000026A   01F8               MOVW    R31:R30, R17:R16
   \   0000026C   8380               ST      Z, R24
    460              UART[ch].pTxBuffer[ntna+1] = ((UART[ch].TxFirst - ntna - 2) >> 8 ) & 0xff ; // length of data block hb
   \   0000026E   2F06               MOV     R16, R22
   \   00000270   E010               LDI     R17, 0
   \   00000272   E14A               LDI     R20, 26
   \   00000274   E050               LDI     R21, 0
   \   00000276   ........           CALL    ?S_EC_MUL_L02
   \   0000027A   01F8               MOVW    R31:R30, R17:R16
   \   0000027C   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000027E   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000280   8182               LDD     R24, Z+2
   \   00000282   8193               LDD     R25, Z+3
   \   00000284   1982               SUB     R24, R2
   \   00000286   0993               SBC     R25, R3
   \   00000288   9702               SBIW    R25:R24, 2
   \   0000028A   2F89               MOV     R24, R25
   \   0000028C   E090               LDI     R25, 0
   \   0000028E   2F06               MOV     R16, R22
   \   00000290   E010               LDI     R17, 0
   \   00000292   E14A               LDI     R20, 26
   \   00000294   E050               LDI     R21, 0
   \   00000296   ........           CALL    ?S_EC_MUL_L02
   \   0000029A   01F8               MOVW    R31:R30, R17:R16
   \   0000029C   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000029E   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000002A0   8100               LD      R16, Z
   \   000002A2   8111               LDD     R17, Z+1
   \   000002A4   0D02               ADD     R16, R2
   \   000002A6   1D13               ADC     R17, R3
   \   000002A8   01F8               MOVW    R31:R30, R17:R16
   \   000002AA   8381               STD     Z+1, R24
    461          
    462          }
   \   000002AC   E0E8               LDI     R30, 8
   \   000002AE   ........           JMP     ?EPILOGUE_B8_L09
    463          
    464          /*************************************************************************
    465          *
    466          * Build datablock for Stack status
    467          *
    468          *************************************************************************/

   \                                 In  segment CODE, align 2, keep-with-next
    469          void BuildStackStatus(char ch, short pointer) {
   \                     BuildStackStatus:
   \   00000000   ........           CALL    ?PROLOGUE6_L09
   \   00000004                      REQUIRE ?Register_R4_is_cg_reg
   \   00000004                      REQUIRE ?Register_R5_is_cg_reg
   \   00000004   2F60               MOV     R22, R16
   \   00000006   01C9               MOVW    R25:R24, R19:R18
    470          
    471              short ntna, stack ;
    472              UART[ch].RxSendReply = true ;                               // flag for answering 
   \   00000008   2F06               MOV     R16, R22
   \   0000000A   E010               LDI     R17, 0
   \   0000000C   E14A               LDI     R20, 26
   \   0000000E   E050               LDI     R21, 0
   \   00000010   ........           CALL    ?S_EC_MUL_L02
   \   00000014   01F8               MOVW    R31:R30, R17:R16
   \   00000016   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000018   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000001A   E001               LDI     R16, 1
   \   0000001C   8F01               STD     Z+25, R16
    473          
    474              UART[ch].pTxBuffer[UART[ch].TxFirst++] = CMD_REP_STACKSTATUS & 0xff;     
   \   0000001E   2F06               MOV     R16, R22
   \   00000020   E010               LDI     R17, 0
   \   00000022   E14A               LDI     R20, 26
   \   00000024   E050               LDI     R21, 0
   \   00000026   ........           CALL    ?S_EC_MUL_L02
   \   0000002A   01F8               MOVW    R31:R30, R17:R16
   \   0000002C   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000002E   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000030   81A0               LD      R26, Z
   \   00000032   81B1               LDD     R27, Z+1
   \   00000034   2F06               MOV     R16, R22
   \   00000036   E010               LDI     R17, 0
   \   00000038   E14A               LDI     R20, 26
   \   0000003A   E050               LDI     R21, 0
   \   0000003C   ........           CALL    ?S_EC_MUL_L02
   \   00000040   01F8               MOVW    R31:R30, R17:R16
   \   00000042   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000044   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000046   8102               LDD     R16, Z+2
   \   00000048   8113               LDD     R17, Z+3
   \   0000004A   0FA0               ADD     R26, R16
   \   0000004C   1FB1               ADC     R27, R17
   \   0000004E   01FD               MOVW    R31:R30, R27:R26
   \   00000050   E707               LDI     R16, 119
   \   00000052   8300               ST      Z, R16
   \   00000054   2F06               MOV     R16, R22
   \   00000056   E010               LDI     R17, 0
   \   00000058   E14A               LDI     R20, 26
   \   0000005A   E050               LDI     R21, 0
   \   0000005C   ........           CALL    ?S_EC_MUL_L02
   \   00000060   01F8               MOVW    R31:R30, R17:R16
   \   00000062   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000064   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000066   8102               LDD     R16, Z+2
   \   00000068   8113               LDD     R17, Z+3
   \   0000006A   5F0F               SUBI    R16, 255
   \   0000006C   4F1F               SBCI    R17, 255
   \   0000006E   8302               STD     Z+2, R16
   \   00000070   8313               STD     Z+3, R17
    475              UART[ch].pTxBuffer[UART[ch].TxFirst++] = CMD_REP_STACKSTATUS >> 8;     
   \   00000072   2F06               MOV     R16, R22
   \   00000074   E010               LDI     R17, 0
   \   00000076   E14A               LDI     R20, 26
   \   00000078   E050               LDI     R21, 0
   \   0000007A   ........           CALL    ?S_EC_MUL_L02
   \   0000007E   01F8               MOVW    R31:R30, R17:R16
   \   00000080   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000082   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000084   81A0               LD      R26, Z
   \   00000086   81B1               LDD     R27, Z+1
   \   00000088   2F06               MOV     R16, R22
   \   0000008A   E010               LDI     R17, 0
   \   0000008C   E14A               LDI     R20, 26
   \   0000008E   E050               LDI     R21, 0
   \   00000090   ........           CALL    ?S_EC_MUL_L02
   \   00000094   01F8               MOVW    R31:R30, R17:R16
   \   00000096   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000098   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000009A   8102               LDD     R16, Z+2
   \   0000009C   8113               LDD     R17, Z+3
   \   0000009E   0FA0               ADD     R26, R16
   \   000000A0   1FB1               ADC     R27, R17
   \   000000A2   01FD               MOVW    R31:R30, R27:R26
   \   000000A4   E007               LDI     R16, 7
   \   000000A6   8300               ST      Z, R16
   \   000000A8   2F06               MOV     R16, R22
   \   000000AA   E010               LDI     R17, 0
   \   000000AC   E14A               LDI     R20, 26
   \   000000AE   E050               LDI     R21, 0
   \   000000B0   ........           CALL    ?S_EC_MUL_L02
   \   000000B4   01F8               MOVW    R31:R30, R17:R16
   \   000000B6   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000000B8   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000000BA   8102               LDD     R16, Z+2
   \   000000BC   8113               LDD     R17, Z+3
   \   000000BE   5F0F               SUBI    R16, 255
   \   000000C0   4F1F               SBCI    R17, 255
   \   000000C2   8302               STD     Z+2, R16
   \   000000C4   8313               STD     Z+3, R17
    476              ntna = UART[ch].TxFirst ;                                    /* remember index */
   \   000000C6   2F06               MOV     R16, R22
   \   000000C8   E010               LDI     R17, 0
   \   000000CA   E14A               LDI     R20, 26
   \   000000CC   E050               LDI     R21, 0
   \   000000CE   ........           CALL    ?S_EC_MUL_L02
   \   000000D2   01F8               MOVW    R31:R30, R17:R16
   \   000000D4   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000000D6   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000000D8   8102               LDD     R16, Z+2
   \   000000DA   8113               LDD     R17, Z+3
   \   000000DC   0118               MOVW    R3:R2, R17:R16
    477              UART[ch].TxFirst += 2 ;                                      // two byte length
   \   000000DE   2F06               MOV     R16, R22
   \   000000E0   E010               LDI     R17, 0
   \   000000E2   E14A               LDI     R20, 26
   \   000000E4   E050               LDI     R21, 0
   \   000000E6   ........           CALL    ?S_EC_MUL_L02
   \   000000EA   01F8               MOVW    R31:R30, R17:R16
   \   000000EC   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000000EE   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000000F0   8102               LDD     R16, Z+2
   \   000000F2   8113               LDD     R17, Z+3
   \   000000F4   5F0E               SUBI    R16, 254
   \   000000F6   4F1F               SBCI    R17, 255
   \   000000F8   8302               STD     Z+2, R16
   \   000000FA   8313               STD     Z+3, R17
    478          
    479              stack = OS_GetStackSpace(&TCB_USART0);                            // USART 0
   \   000000FC   E020               LDI     R18, 0
   \   000000FE   E030               LDI     R19, 0
    480              UART[ch].pTxBuffer[UART[ch].TxFirst++] = (stack & 0xff) ;
   \   00000100   2F72               MOV     R23, R18
   \   00000102   2F06               MOV     R16, R22
   \   00000104   E010               LDI     R17, 0
   \   00000106   E14A               LDI     R20, 26
   \   00000108   E050               LDI     R21, 0
   \   0000010A   ........           CALL    ?S_EC_MUL_L02
   \   0000010E   01F8               MOVW    R31:R30, R17:R16
   \   00000110   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000112   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000114   81A0               LD      R26, Z
   \   00000116   81B1               LDD     R27, Z+1
   \   00000118   2F06               MOV     R16, R22
   \   0000011A   E010               LDI     R17, 0
   \   0000011C   E14A               LDI     R20, 26
   \   0000011E   E050               LDI     R21, 0
   \   00000120   ........           CALL    ?S_EC_MUL_L02
   \   00000124   01F8               MOVW    R31:R30, R17:R16
   \   00000126   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000128   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000012A   8102               LDD     R16, Z+2
   \   0000012C   8113               LDD     R17, Z+3
   \   0000012E   0FA0               ADD     R26, R16
   \   00000130   1FB1               ADC     R27, R17
   \   00000132   01FD               MOVW    R31:R30, R27:R26
   \   00000134   8370               ST      Z, R23
   \   00000136   2F06               MOV     R16, R22
   \   00000138   E010               LDI     R17, 0
   \   0000013A   E14A               LDI     R20, 26
   \   0000013C   E050               LDI     R21, 0
   \   0000013E   ........           CALL    ?S_EC_MUL_L02
   \   00000142   01F8               MOVW    R31:R30, R17:R16
   \   00000144   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000146   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000148   8102               LDD     R16, Z+2
   \   0000014A   8113               LDD     R17, Z+3
   \   0000014C   5F0F               SUBI    R16, 255
   \   0000014E   4F1F               SBCI    R17, 255
   \   00000150   8302               STD     Z+2, R16
   \   00000152   8313               STD     Z+3, R17
    481              UART[ch].pTxBuffer[UART[ch].TxFirst++] = ((stack>>8) & 0xff) ;
   \   00000154   0129               MOVW    R5:R4, R19:R18
   \   00000156   2C45               MOV     R4, R5
   \   00000158   0C55               LSL     R5
   \   0000015A   0855               SBC     R5, R5
   \   0000015C   2F06               MOV     R16, R22
   \   0000015E   E010               LDI     R17, 0
   \   00000160   E14A               LDI     R20, 26
   \   00000162   E050               LDI     R21, 0
   \   00000164   ........           CALL    ?S_EC_MUL_L02
   \   00000168   01F8               MOVW    R31:R30, R17:R16
   \   0000016A   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000016C   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000016E   81A0               LD      R26, Z
   \   00000170   81B1               LDD     R27, Z+1
   \   00000172   2F06               MOV     R16, R22
   \   00000174   E010               LDI     R17, 0
   \   00000176   E14A               LDI     R20, 26
   \   00000178   E050               LDI     R21, 0
   \   0000017A   ........           CALL    ?S_EC_MUL_L02
   \   0000017E   01F8               MOVW    R31:R30, R17:R16
   \   00000180   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000182   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000184   8102               LDD     R16, Z+2
   \   00000186   8113               LDD     R17, Z+3
   \   00000188   0FA0               ADD     R26, R16
   \   0000018A   1FB1               ADC     R27, R17
   \   0000018C   01FD               MOVW    R31:R30, R27:R26
   \   0000018E   8240               ST      Z, R4
   \   00000190   2F06               MOV     R16, R22
   \   00000192   E010               LDI     R17, 0
   \   00000194   E14A               LDI     R20, 26
   \   00000196   E050               LDI     R21, 0
   \   00000198   ........           CALL    ?S_EC_MUL_L02
   \   0000019C   01F8               MOVW    R31:R30, R17:R16
   \   0000019E   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000001A0   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000001A2   8102               LDD     R16, Z+2
   \   000001A4   8113               LDD     R17, Z+3
   \   000001A6   5F0F               SUBI    R16, 255
   \   000001A8   4F1F               SBCI    R17, 255
   \   000001AA   8302               STD     Z+2, R16
   \   000001AC   8313               STD     Z+3, R17
    482              stack = OS_GetStackSpace(&TCB_USART1);                            // USART 1
   \   000001AE   E020               LDI     R18, 0
   \   000001B0   E030               LDI     R19, 0
    483              UART[ch].pTxBuffer[UART[ch].TxFirst++] = (stack & 0xff) ;
   \   000001B2   2F72               MOV     R23, R18
   \   000001B4   2F06               MOV     R16, R22
   \   000001B6   E010               LDI     R17, 0
   \   000001B8   E14A               LDI     R20, 26
   \   000001BA   E050               LDI     R21, 0
   \   000001BC   ........           CALL    ?S_EC_MUL_L02
   \   000001C0   01F8               MOVW    R31:R30, R17:R16
   \   000001C2   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000001C4   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000001C6   81A0               LD      R26, Z
   \   000001C8   81B1               LDD     R27, Z+1
   \   000001CA   2F06               MOV     R16, R22
   \   000001CC   E010               LDI     R17, 0
   \   000001CE   E14A               LDI     R20, 26
   \   000001D0   E050               LDI     R21, 0
   \   000001D2   ........           CALL    ?S_EC_MUL_L02
   \   000001D6   01F8               MOVW    R31:R30, R17:R16
   \   000001D8   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000001DA   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000001DC   8102               LDD     R16, Z+2
   \   000001DE   8113               LDD     R17, Z+3
   \   000001E0   0FA0               ADD     R26, R16
   \   000001E2   1FB1               ADC     R27, R17
   \   000001E4   01FD               MOVW    R31:R30, R27:R26
   \   000001E6   8370               ST      Z, R23
   \   000001E8   2F06               MOV     R16, R22
   \   000001EA   E010               LDI     R17, 0
   \   000001EC   E14A               LDI     R20, 26
   \   000001EE   E050               LDI     R21, 0
   \   000001F0   ........           CALL    ?S_EC_MUL_L02
   \   000001F4   01F8               MOVW    R31:R30, R17:R16
   \   000001F6   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000001F8   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000001FA   8102               LDD     R16, Z+2
   \   000001FC   8113               LDD     R17, Z+3
   \   000001FE   5F0F               SUBI    R16, 255
   \   00000200   4F1F               SBCI    R17, 255
   \   00000202   8302               STD     Z+2, R16
   \   00000204   8313               STD     Z+3, R17
    484              UART[ch].pTxBuffer[UART[ch].TxFirst++] = ((stack>>8) & 0xff) ;
   \   00000206   0129               MOVW    R5:R4, R19:R18
   \   00000208   2C45               MOV     R4, R5
   \   0000020A   0C55               LSL     R5
   \   0000020C   0855               SBC     R5, R5
   \   0000020E   2F06               MOV     R16, R22
   \   00000210   E010               LDI     R17, 0
   \   00000212   E14A               LDI     R20, 26
   \   00000214   E050               LDI     R21, 0
   \   00000216   ........           CALL    ?S_EC_MUL_L02
   \   0000021A   01F8               MOVW    R31:R30, R17:R16
   \   0000021C   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000021E   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000220   81A0               LD      R26, Z
   \   00000222   81B1               LDD     R27, Z+1
   \   00000224   2F06               MOV     R16, R22
   \   00000226   E010               LDI     R17, 0
   \   00000228   E14A               LDI     R20, 26
   \   0000022A   E050               LDI     R21, 0
   \   0000022C   ........           CALL    ?S_EC_MUL_L02
   \   00000230   01F8               MOVW    R31:R30, R17:R16
   \   00000232   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000234   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000236   8102               LDD     R16, Z+2
   \   00000238   8113               LDD     R17, Z+3
   \   0000023A   0FA0               ADD     R26, R16
   \   0000023C   1FB1               ADC     R27, R17
   \   0000023E   01FD               MOVW    R31:R30, R27:R26
   \   00000240   8240               ST      Z, R4
   \   00000242   2F06               MOV     R16, R22
   \   00000244   E010               LDI     R17, 0
   \   00000246   E14A               LDI     R20, 26
   \   00000248   E050               LDI     R21, 0
   \   0000024A   ........           CALL    ?S_EC_MUL_L02
   \   0000024E   01F8               MOVW    R31:R30, R17:R16
   \   00000250   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000252   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000254   8102               LDD     R16, Z+2
   \   00000256   8113               LDD     R17, Z+3
   \   00000258   5F0F               SUBI    R16, 255
   \   0000025A   4F1F               SBCI    R17, 255
   \   0000025C   8302               STD     Z+2, R16
   \   0000025E   8313               STD     Z+3, R17
    485              stack = OS_GetStackSpace(&TCB_WATCHDOG);                            // watchdog
   \   00000260   E020               LDI     R18, 0
   \   00000262   E030               LDI     R19, 0
    486              UART[ch].pTxBuffer[UART[ch].TxFirst++] = (stack & 0xff) ;
   \   00000264   2F72               MOV     R23, R18
   \   00000266   2F06               MOV     R16, R22
   \   00000268   E010               LDI     R17, 0
   \   0000026A   E14A               LDI     R20, 26
   \   0000026C   E050               LDI     R21, 0
   \   0000026E   ........           CALL    ?S_EC_MUL_L02
   \   00000272   01F8               MOVW    R31:R30, R17:R16
   \   00000274   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000276   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000278   81A0               LD      R26, Z
   \   0000027A   81B1               LDD     R27, Z+1
   \   0000027C   2F06               MOV     R16, R22
   \   0000027E   E010               LDI     R17, 0
   \   00000280   E14A               LDI     R20, 26
   \   00000282   E050               LDI     R21, 0
   \   00000284   ........           CALL    ?S_EC_MUL_L02
   \   00000288   01F8               MOVW    R31:R30, R17:R16
   \   0000028A   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000028C   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000028E   8102               LDD     R16, Z+2
   \   00000290   8113               LDD     R17, Z+3
   \   00000292   0FA0               ADD     R26, R16
   \   00000294   1FB1               ADC     R27, R17
   \   00000296   01FD               MOVW    R31:R30, R27:R26
   \   00000298   8370               ST      Z, R23
   \   0000029A   2F06               MOV     R16, R22
   \   0000029C   E010               LDI     R17, 0
   \   0000029E   E14A               LDI     R20, 26
   \   000002A0   E050               LDI     R21, 0
   \   000002A2   ........           CALL    ?S_EC_MUL_L02
   \   000002A6   01F8               MOVW    R31:R30, R17:R16
   \   000002A8   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000002AA   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000002AC   8102               LDD     R16, Z+2
   \   000002AE   8113               LDD     R17, Z+3
   \   000002B0   5F0F               SUBI    R16, 255
   \   000002B2   4F1F               SBCI    R17, 255
   \   000002B4   8302               STD     Z+2, R16
   \   000002B6   8313               STD     Z+3, R17
    487              UART[ch].pTxBuffer[UART[ch].TxFirst++] = ((stack>>8) & 0xff) ;
   \   000002B8   0129               MOVW    R5:R4, R19:R18
   \   000002BA   2C45               MOV     R4, R5
   \   000002BC   0C55               LSL     R5
   \   000002BE   0855               SBC     R5, R5
   \   000002C0   2F06               MOV     R16, R22
   \   000002C2   E010               LDI     R17, 0
   \   000002C4   E14A               LDI     R20, 26
   \   000002C6   E050               LDI     R21, 0
   \   000002C8   ........           CALL    ?S_EC_MUL_L02
   \   000002CC   01F8               MOVW    R31:R30, R17:R16
   \   000002CE   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000002D0   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000002D2   81A0               LD      R26, Z
   \   000002D4   81B1               LDD     R27, Z+1
   \   000002D6   2F06               MOV     R16, R22
   \   000002D8   E010               LDI     R17, 0
   \   000002DA   E14A               LDI     R20, 26
   \   000002DC   E050               LDI     R21, 0
   \   000002DE   ........           CALL    ?S_EC_MUL_L02
   \   000002E2   01F8               MOVW    R31:R30, R17:R16
   \   000002E4   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000002E6   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000002E8   8102               LDD     R16, Z+2
   \   000002EA   8113               LDD     R17, Z+3
   \   000002EC   0FA0               ADD     R26, R16
   \   000002EE   1FB1               ADC     R27, R17
   \   000002F0   01FD               MOVW    R31:R30, R27:R26
   \   000002F2   8240               ST      Z, R4
   \   000002F4   2F06               MOV     R16, R22
   \   000002F6   E010               LDI     R17, 0
   \   000002F8   E14A               LDI     R20, 26
   \   000002FA   E050               LDI     R21, 0
   \   000002FC   ........           CALL    ?S_EC_MUL_L02
   \   00000300   01F8               MOVW    R31:R30, R17:R16
   \   00000302   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000304   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000306   8102               LDD     R16, Z+2
   \   00000308   8113               LDD     R17, Z+3
   \   0000030A   5F0F               SUBI    R16, 255
   \   0000030C   4F1F               SBCI    R17, 255
   \   0000030E   8302               STD     Z+2, R16
   \   00000310   8313               STD     Z+3, R17
    488              switch (UnitID) {
   \   00000312   9100....           LDS     R16, UnitID
   \   00000316   3004               CPI     R16, 4
   \   00000318   F009               BREQ    $+2+2
   \   0000031A   C0AD               RJMP    ??BuildStackStatus_0
    489              case AN_SGCNV :
    490                  stack = OS_GetStackSpace(&TCB_AD7715);                            // AD handling
   \   0000031C   E020               LDI     R18, 0
   \   0000031E   E030               LDI     R19, 0
    491                  UART[ch].pTxBuffer[UART[ch].TxFirst++] = (stack & 0xff) ;
   \   00000320   2F72               MOV     R23, R18
   \   00000322   2F06               MOV     R16, R22
   \   00000324   E010               LDI     R17, 0
   \   00000326   E14A               LDI     R20, 26
   \   00000328   E050               LDI     R21, 0
   \   0000032A   ........           CALL    ?S_EC_MUL_L02
   \   0000032E   01F8               MOVW    R31:R30, R17:R16
   \   00000330   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000332   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000334   81A0               LD      R26, Z
   \   00000336   81B1               LDD     R27, Z+1
   \   00000338   2F06               MOV     R16, R22
   \   0000033A   E010               LDI     R17, 0
   \   0000033C   E14A               LDI     R20, 26
   \   0000033E   E050               LDI     R21, 0
   \   00000340   ........           CALL    ?S_EC_MUL_L02
   \   00000344   01F8               MOVW    R31:R30, R17:R16
   \   00000346   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000348   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000034A   8102               LDD     R16, Z+2
   \   0000034C   8113               LDD     R17, Z+3
   \   0000034E   0FA0               ADD     R26, R16
   \   00000350   1FB1               ADC     R27, R17
   \   00000352   01FD               MOVW    R31:R30, R27:R26
   \   00000354   8370               ST      Z, R23
   \   00000356   2F06               MOV     R16, R22
   \   00000358   E010               LDI     R17, 0
   \   0000035A   E14A               LDI     R20, 26
   \   0000035C   E050               LDI     R21, 0
   \   0000035E   ........           CALL    ?S_EC_MUL_L02
   \   00000362   01F8               MOVW    R31:R30, R17:R16
   \   00000364   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000366   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000368   8102               LDD     R16, Z+2
   \   0000036A   8113               LDD     R17, Z+3
   \   0000036C   5F0F               SUBI    R16, 255
   \   0000036E   4F1F               SBCI    R17, 255
   \   00000370   8302               STD     Z+2, R16
   \   00000372   8313               STD     Z+3, R17
    492                  UART[ch].pTxBuffer[UART[ch].TxFirst++] = ((stack>>8) & 0xff) ;
   \   00000374   0129               MOVW    R5:R4, R19:R18
   \   00000376   2C45               MOV     R4, R5
   \   00000378   0C55               LSL     R5
   \   0000037A   0855               SBC     R5, R5
   \   0000037C   2F06               MOV     R16, R22
   \   0000037E   E010               LDI     R17, 0
   \   00000380   E14A               LDI     R20, 26
   \   00000382   E050               LDI     R21, 0
   \   00000384   ........           CALL    ?S_EC_MUL_L02
   \   00000388   01F8               MOVW    R31:R30, R17:R16
   \   0000038A   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000038C   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000038E   81A0               LD      R26, Z
   \   00000390   81B1               LDD     R27, Z+1
   \   00000392   2F06               MOV     R16, R22
   \   00000394   E010               LDI     R17, 0
   \   00000396   E14A               LDI     R20, 26
   \   00000398   E050               LDI     R21, 0
   \   0000039A   ........           CALL    ?S_EC_MUL_L02
   \   0000039E   01F8               MOVW    R31:R30, R17:R16
   \   000003A0   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000003A2   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000003A4   8102               LDD     R16, Z+2
   \   000003A6   8113               LDD     R17, Z+3
   \   000003A8   0FA0               ADD     R26, R16
   \   000003AA   1FB1               ADC     R27, R17
   \   000003AC   01FD               MOVW    R31:R30, R27:R26
   \   000003AE   8240               ST      Z, R4
   \   000003B0   2F06               MOV     R16, R22
   \   000003B2   E010               LDI     R17, 0
   \   000003B4   E14A               LDI     R20, 26
   \   000003B6   E050               LDI     R21, 0
   \   000003B8   ........           CALL    ?S_EC_MUL_L02
   \   000003BC   01F8               MOVW    R31:R30, R17:R16
   \   000003BE   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000003C0   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000003C2   8102               LDD     R16, Z+2
   \   000003C4   8113               LDD     R17, Z+3
   \   000003C6   5F0F               SUBI    R16, 255
   \   000003C8   4F1F               SBCI    R17, 255
   \   000003CA   8302               STD     Z+2, R16
   \   000003CC   8313               STD     Z+3, R17
    493                  UART[ch].pTxBuffer[UART[ch].TxFirst++] = 0 ;
   \   000003CE   2F06               MOV     R16, R22
   \   000003D0   E010               LDI     R17, 0
   \   000003D2   E14A               LDI     R20, 26
   \   000003D4   E050               LDI     R21, 0
   \   000003D6   ........           CALL    ?S_EC_MUL_L02
   \   000003DA   01F8               MOVW    R31:R30, R17:R16
   \   000003DC   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000003DE   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000003E0   81A0               LD      R26, Z
   \   000003E2   81B1               LDD     R27, Z+1
   \   000003E4   2F06               MOV     R16, R22
   \   000003E6   E010               LDI     R17, 0
   \   000003E8   E14A               LDI     R20, 26
   \   000003EA   E050               LDI     R21, 0
   \   000003EC   ........           CALL    ?S_EC_MUL_L02
   \   000003F0   01F8               MOVW    R31:R30, R17:R16
   \   000003F2   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000003F4   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000003F6   8102               LDD     R16, Z+2
   \   000003F8   8113               LDD     R17, Z+3
   \   000003FA   0FA0               ADD     R26, R16
   \   000003FC   1FB1               ADC     R27, R17
   \   000003FE   01FD               MOVW    R31:R30, R27:R26
   \   00000400   E000               LDI     R16, 0
   \   00000402   8300               ST      Z, R16
   \   00000404   2F06               MOV     R16, R22
   \   00000406   E010               LDI     R17, 0
   \   00000408   E14A               LDI     R20, 26
   \   0000040A   E050               LDI     R21, 0
   \   0000040C   ........           CALL    ?S_EC_MUL_L02
   \   00000410   01F8               MOVW    R31:R30, R17:R16
   \   00000412   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000414   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000416   8102               LDD     R16, Z+2
   \   00000418   8113               LDD     R17, Z+3
   \   0000041A   5F0F               SUBI    R16, 255
   \   0000041C   4F1F               SBCI    R17, 255
   \   0000041E   8302               STD     Z+2, R16
   \   00000420   8313               STD     Z+3, R17
    494                  UART[ch].pTxBuffer[UART[ch].TxFirst++] = 0 ;
   \   00000422   2F06               MOV     R16, R22
   \   00000424   E010               LDI     R17, 0
   \   00000426   E14A               LDI     R20, 26
   \   00000428   E050               LDI     R21, 0
   \   0000042A   ........           CALL    ?S_EC_MUL_L02
   \   0000042E   01F8               MOVW    R31:R30, R17:R16
   \   00000430   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000432   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000434   81A0               LD      R26, Z
   \   00000436   81B1               LDD     R27, Z+1
   \   00000438   2F06               MOV     R16, R22
   \   0000043A   E010               LDI     R17, 0
   \   0000043C   E14A               LDI     R20, 26
   \   0000043E   E050               LDI     R21, 0
   \   00000440   ........           CALL    ?S_EC_MUL_L02
   \   00000444   01F8               MOVW    R31:R30, R17:R16
   \   00000446   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000448   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000044A   8102               LDD     R16, Z+2
   \   0000044C   8113               LDD     R17, Z+3
   \   0000044E   0FA0               ADD     R26, R16
   \   00000450   1FB1               ADC     R27, R17
   \   00000452   01FD               MOVW    R31:R30, R27:R26
   \   00000454   E000               LDI     R16, 0
   \   00000456   8300               ST      Z, R16
   \   00000458   2F06               MOV     R16, R22
   \   0000045A   E010               LDI     R17, 0
   \   0000045C   E14A               LDI     R20, 26
   \   0000045E   E050               LDI     R21, 0
   \   00000460   ........           CALL    ?S_EC_MUL_L02
   \   00000464   01F8               MOVW    R31:R30, R17:R16
   \   00000466   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000468   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000046A   8102               LDD     R16, Z+2
   \   0000046C   8113               LDD     R17, Z+3
   \   0000046E   5F0F               SUBI    R16, 255
   \   00000470   4F1F               SBCI    R17, 255
   \   00000472   8302               STD     Z+2, R16
   \   00000474   8313               STD     Z+3, R17
    495                  break;
    496              } 
    497          
    498              UART[ch].pTxBuffer[ntna] = (UART[ch].TxFirst - ntna - 2)  & 0xff ;      // length of data block lb
   \                     ??BuildStackStatus_0:
   \   00000476   2F06               MOV     R16, R22
   \   00000478   E010               LDI     R17, 0
   \   0000047A   E14A               LDI     R20, 26
   \   0000047C   E050               LDI     R21, 0
   \   0000047E   ........           CALL    ?S_EC_MUL_L02
   \   00000482   01F8               MOVW    R31:R30, R17:R16
   \   00000484   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000486   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000488   81A2               LDD     R26, Z+2
   \   0000048A   81B3               LDD     R27, Z+3
   \   0000048C   2D02               MOV     R16, R2
   \   0000048E   1BA0               SUB     R26, R16
   \   00000490   50A2               SUBI    R26, 2
   \   00000492   2F06               MOV     R16, R22
   \   00000494   E010               LDI     R17, 0
   \   00000496   E14A               LDI     R20, 26
   \   00000498   E050               LDI     R21, 0
   \   0000049A   ........           CALL    ?S_EC_MUL_L02
   \   0000049E   01F8               MOVW    R31:R30, R17:R16
   \   000004A0   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000004A2   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000004A4   8100               LD      R16, Z
   \   000004A6   8111               LDD     R17, Z+1
   \   000004A8   0D02               ADD     R16, R2
   \   000004AA   1D13               ADC     R17, R3
   \   000004AC   01F8               MOVW    R31:R30, R17:R16
   \   000004AE   83A0               ST      Z, R26
    499              UART[ch].pTxBuffer[ntna+1] = ((UART[ch].TxFirst - ntna - 2) >> 8 ) & 0xff ; // length of data block hb
   \   000004B0   2F06               MOV     R16, R22
   \   000004B2   E010               LDI     R17, 0
   \   000004B4   E14A               LDI     R20, 26
   \   000004B6   E050               LDI     R21, 0
   \   000004B8   ........           CALL    ?S_EC_MUL_L02
   \   000004BC   01F8               MOVW    R31:R30, R17:R16
   \   000004BE   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000004C0   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000004C2   81A2               LDD     R26, Z+2
   \   000004C4   81B3               LDD     R27, Z+3
   \   000004C6   19A2               SUB     R26, R2
   \   000004C8   09B3               SBC     R27, R3
   \   000004CA   9712               SBIW    R27:R26, 2
   \   000004CC   2FAB               MOV     R26, R27
   \   000004CE   E0B0               LDI     R27, 0
   \   000004D0   2F06               MOV     R16, R22
   \   000004D2   E010               LDI     R17, 0
   \   000004D4   E14A               LDI     R20, 26
   \   000004D6   E050               LDI     R21, 0
   \   000004D8   ........           CALL    ?S_EC_MUL_L02
   \   000004DC   01F8               MOVW    R31:R30, R17:R16
   \   000004DE   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000004E0   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000004E2   8100               LD      R16, Z
   \   000004E4   8111               LDD     R17, Z+1
   \   000004E6   0D02               ADD     R16, R2
   \   000004E8   1D13               ADC     R17, R3
   \   000004EA   01F8               MOVW    R31:R30, R17:R16
   \   000004EC   83A1               STD     Z+1, R26
    500          
    501          }
   \   000004EE   E0E6               LDI     R30, 6
   \   000004F0   ........           JMP     ?EPILOGUE_B6_L09
    502          
    503          //////////////////////////////////////////////////////////////////////////////
    504          // Receiving data to IO module here
    505          /////////////////////////////////////////////////////////////////////////////
    506          
    507          /*************************************************************************
    508          *
    509          * Receive Command to Reset the EEPROM
    510          *
    511          *************************************************************************/

   \                                 In  segment CODE, align 2, keep-with-next
    512          void GetResetEEPROM(char ch, short pointer) {   
   \                     GetResetEEPROM:
   \   00000000   ........           CALL    ?PROLOGUE3_L09
   \   00000004   2FA0               MOV     R26, R16
   \   00000006   01C9               MOVW    R25:R24, R19:R18
    513          
    514              EEPROMReset();
   \   00000008   ........           CALL    EEPROMReset
    515          }
   \   0000000C   E0E3               LDI     R30, 3
   \   0000000E   ........           JMP     ?EPILOGUE_B3_L09
    516          
    517          
    518          /*************************************************************************
    519          *
    520          * Receive Command to go to the bootloader program
    521          *
    522          *************************************************************************/

   \                                 In  segment CODE, align 2, keep-with-next
    523          void GetGotoBootloader(char ch, short pointer) {   
   \                     GetGotoBootloader:
    524          
    525          //    void (*BootApp)(void) = (void(*)())0xF000;
    526          
    527              while ( (EECR & 1<<EEWE) != 0 ) //chech if EEPROM is ready
   \                     ??GetGotoBootloader_0:
   \   00000000   99E1               SBIC    0x1C, 0x01
   \   00000002   CFFE               RJMP    ??GetGotoBootloader_0
    528                  ;
    529              EEARL = (0x0fff & 0xff);
   \   00000004   EF1F               LDI     R17, 255
   \   00000006   BB1E               OUT     0x1E, R17
    530              EEARH = (0x0fff >> 8);
   \   00000008   E01F               LDI     R17, 15
   \   0000000A   BB1F               OUT     0x1F, R17
    531              EEDR = 0xff;
   \   0000000C   EF1F               LDI     R17, 255
   \   0000000E   BB1D               OUT     0x1D, R17
    532              EECR |= (1<<EEMWE);
   \   00000010   9AE2               SBI     0x1C, 0x02
    533              EECR |= (1<<EEWE);
   \   00000012   9AE1               SBI     0x1C, 0x01
    534              while (EECR & (1<<EEWE))
   \                     ??GetGotoBootloader_1:
   \   00000014   99E1               SBIC    0x1C, 0x01
   \   00000016   CFFE               RJMP    ??GetGotoBootloader_1
    535                  ;
    536          
    537              WDTCR = 0x18;               //Start watchdog to genetate restart
   \   00000018   E118               LDI     R17, 24
   \   0000001A   BD11               OUT     0x21, R17
    538              WDTCR = 0x08;               //Start watchdog to genetate restart
   \   0000001C   E018               LDI     R17, 8
   \   0000001E   BD11               OUT     0x21, R17
    539          }
   \   00000020   9508               RET
   \   00000022                      REQUIRE _A_EECR
   \   00000022                      REQUIRE _A_EEAR
   \   00000022                      REQUIRE _A_EEDR
   \   00000022                      REQUIRE _A_WDTCR
    540          
    541          /*************************************************************************
    542          *
    543          * Receive EEPROM data
    544          *
    545          *************************************************************************/

   \                                 In  segment CODE, align 2, keep-with-next
    546          void GetEEPROMData(char ch, short pointer) {   
   \                     GetEEPROMData:
   \   00000000   ........           CALL    ?PROLOGUE7_L09
   \   00000004                      REQUIRE ?Register_R4_is_cg_reg
   \   00000004                      REQUIRE ?Register_R6_is_cg_reg
   \   00000004   2E40               MOV     R4, R16
   \   00000006   01D9               MOVW    R27:R26, R19:R18
    547          
    548            char channel;
    549            int t0;
    550            
    551              channel = UART[ch].pRxBuffer[pointer] ;
   \   00000008   2D04               MOV     R16, R4
   \   0000000A   E010               LDI     R17, 0
   \   0000000C   E14A               LDI     R20, 26
   \   0000000E   E050               LDI     R21, 0
   \   00000010   ........           CALL    ?S_EC_MUL_L02
   \   00000014   01F8               MOVW    R31:R30, R17:R16
   \   00000016   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000018   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000001A   8502               LDD     R16, Z+10
   \   0000001C   8513               LDD     R17, Z+11
   \   0000001E   0F0A               ADD     R16, R26
   \   00000020   1F1B               ADC     R17, R27
   \   00000022   01F8               MOVW    R31:R30, R17:R16
   \   00000024   8100               LD      R16, Z
   \   00000026   2E60               MOV     R6, R16
    552              if ((channel >= 0x80) && (UnitID == 0x01)) { // AN-ZBANA
   \   00000028   E800               LDI     R16, 128
   \   0000002A   1660               CP      R6, R16
   \   0000002C   F408               BRCC    $+2+2
   \   0000002E   C047               RJMP    ??GetEEPROMData_0
   \   00000030   9100....           LDS     R16, UnitID
   \   00000034   3001               CPI     R16, 1
   \   00000036   F009               BREQ    $+2+2
   \   00000038   C042               RJMP    ??GetEEPROMData_0
    553                *((float*)&TData.Ana.Offset[channel & 0x0f]) = *((float*)&UART[ch].pRxBuffer[pointer+1]) ;  //offset
   \   0000003A   2D04               MOV     R16, R4
   \   0000003C   E010               LDI     R17, 0
   \   0000003E   E14A               LDI     R20, 26
   \   00000040   E050               LDI     R21, 0
   \   00000042   ........           CALL    ?S_EC_MUL_L02
   \   00000046   01F8               MOVW    R31:R30, R17:R16
   \   00000048   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000004A   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000004C   8502               LDD     R16, Z+10
   \   0000004E   8513               LDD     R17, Z+11
   \   00000050   0F0A               ADD     R16, R26
   \   00000052   1F1B               ADC     R17, R27
   \   00000054   01F8               MOVW    R31:R30, R17:R16
   \   00000056   8101               LDD     R16, Z+1
   \   00000058   8112               LDD     R17, Z+2
   \   0000005A   8123               LDD     R18, Z+3
   \   0000005C   8134               LDD     R19, Z+4
   \   0000005E   2D46               MOV     R20, R6
   \   00000060   E050               LDI     R21, 0
   \   00000062   704F               ANDI    R20, 0x0F
   \   00000064   7050               ANDI    R21, 0x00
   \   00000066   0F44               LSL     R20
   \   00000068   1F55               ROL     R21
   \   0000006A   0F44               LSL     R20
   \   0000006C   1F55               ROL     R21
   \   0000006E   01FA               MOVW    R31:R30, R21:R20
   \   00000070   ....               SUBI    R30, LOW((-(TData + 198) & 0xFFFF))
   \   00000072   ....               SBCI    R31, HIGH((-(TData + 198) & 0xFFFF))
   \   00000074   8300               ST      Z, R16
   \   00000076   8311               STD     Z+1, R17
   \   00000078   8322               STD     Z+2, R18
   \   0000007A   8333               STD     Z+3, R19
    554                *((float*)&TData.Ana.Gain[channel & 0x0f]) = *((float*)&UART[ch].pRxBuffer[pointer+5]) ;  //gain
   \   0000007C   2D04               MOV     R16, R4
   \   0000007E   E010               LDI     R17, 0
   \   00000080   E14A               LDI     R20, 26
   \   00000082   E050               LDI     R21, 0
   \   00000084   ........           CALL    ?S_EC_MUL_L02
   \   00000088   01F8               MOVW    R31:R30, R17:R16
   \   0000008A   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000008C   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000008E   8502               LDD     R16, Z+10
   \   00000090   8513               LDD     R17, Z+11
   \   00000092   0F0A               ADD     R16, R26
   \   00000094   1F1B               ADC     R17, R27
   \   00000096   01F8               MOVW    R31:R30, R17:R16
   \   00000098   8105               LDD     R16, Z+5
   \   0000009A   8116               LDD     R17, Z+6
   \   0000009C   8127               LDD     R18, Z+7
   \   0000009E   8530               LDD     R19, Z+8
   \   000000A0   2D46               MOV     R20, R6
   \   000000A2   E050               LDI     R21, 0
   \   000000A4   704F               ANDI    R20, 0x0F
   \   000000A6   7050               ANDI    R21, 0x00
   \   000000A8   0F44               LSL     R20
   \   000000AA   1F55               ROL     R21
   \   000000AC   0F44               LSL     R20
   \   000000AE   1F55               ROL     R21
   \   000000B0   01FA               MOVW    R31:R30, R21:R20
   \   000000B2   ....               SUBI    R30, LOW((-(TData + 254) & 0xFFFF))
   \   000000B4   ....               SBCI    R31, HIGH((-(TData + 254) & 0xFFFF))
   \   000000B6   8300               ST      Z, R16
   \   000000B8   8311               STD     Z+1, R17
   \   000000BA   8322               STD     Z+2, R18
   \   000000BC   8333               STD     Z+3, R19
    555              }
    556              WriteEEPROMBuffer((channel * sizeof(float) * 2), sizeof(float), (char*)&UART[ch].pRxBuffer[pointer+1]);
   \                     ??GetEEPROMData_0:
   \   000000BE   2D04               MOV     R16, R4
   \   000000C0   E010               LDI     R17, 0
   \   000000C2   E14A               LDI     R20, 26
   \   000000C4   E050               LDI     R21, 0
   \   000000C6   ........           CALL    ?S_EC_MUL_L02
   \   000000CA   01F8               MOVW    R31:R30, R17:R16
   \   000000CC   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000000CE   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000000D0   8542               LDD     R20, Z+10
   \   000000D2   8553               LDD     R21, Z+11
   \   000000D4   0F4A               ADD     R20, R26
   \   000000D6   1F5B               ADC     R21, R27
   \   000000D8   5F4F               SUBI    R20, 255
   \   000000DA   4F5F               SBCI    R21, 255
   \   000000DC   E024               LDI     R18, 4
   \   000000DE   01BA               MOVW    R23:R22, R21:R20
   \   000000E0   2D06               MOV     R16, R6
   \   000000E2   E010               LDI     R17, 0
   \   000000E4   E048               LDI     R20, 8
   \   000000E6   E050               LDI     R21, 0
   \   000000E8   ........           CALL    ?S_EC_MUL_L02
   \   000000EC   01AB               MOVW    R21:R20, R23:R22
   \   000000EE   ........           CALL    WriteEEPROMBuffer
    557              t0 = OS_GetTime();
   \   000000F2   ........           CALL    OS__Gettime
   \   000000F6   01C8               MOVW    R25:R24, R17:R16
    558              do {
    559                OS_Delay(1);
   \                     ??GetEEPROMData_1:
   \   000000F8   E001               LDI     R16, 1
   \   000000FA   E010               LDI     R17, 0
   \   000000FC   ........           CALL    OS_Delay
    560              }while ((OS_GetTime()-t0)< (sizeof(float)*9) && !EEPWriteOK);  //8.5 ms programming time
   \   00000100   ........           CALL    OS__Gettime
   \   00000104   1B08               SUB     R16, R24
   \   00000106   0B19               SBC     R17, R25
   \   00000108   3204               CPI     R16, 36
   \   0000010A   4010               SBCI    R17, 0
   \   0000010C   F420               BRCC    ??GetEEPROMData_2
   \   0000010E   9100....           LDS     R16, EEPWriteOK
   \   00000112   2300               TST     R16
   \   00000114   F389               BREQ    ??GetEEPROMData_1
    561              WriteEEPROMBuffer( (channel * sizeof(float) * 2) + sizeof(float), sizeof(float), (char*)&UART[ch].pRxBuffer[pointer+5]);
   \                     ??GetEEPROMData_2:
   \   00000116   2D04               MOV     R16, R4
   \   00000118   E010               LDI     R17, 0
   \   0000011A   E14A               LDI     R20, 26
   \   0000011C   E050               LDI     R21, 0
   \   0000011E   ........           CALL    ?S_EC_MUL_L02
   \   00000122   01F8               MOVW    R31:R30, R17:R16
   \   00000124   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000126   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000128   8542               LDD     R20, Z+10
   \   0000012A   8553               LDD     R21, Z+11
   \   0000012C   0F4A               ADD     R20, R26
   \   0000012E   1F5B               ADC     R21, R27
   \   00000130   5F4B               SUBI    R20, 251
   \   00000132   4F5F               SBCI    R21, 255
   \   00000134   E024               LDI     R18, 4
   \   00000136   01BA               MOVW    R23:R22, R21:R20
   \   00000138   2D06               MOV     R16, R6
   \   0000013A   E010               LDI     R17, 0
   \   0000013C   E048               LDI     R20, 8
   \   0000013E   E050               LDI     R21, 0
   \   00000140   ........           CALL    ?S_EC_MUL_L02
   \   00000144   5F0C               SUBI    R16, 252
   \   00000146   4F1F               SBCI    R17, 255
   \   00000148   01AB               MOVW    R21:R20, R23:R22
   \   0000014A   ........           CALL    WriteEEPROMBuffer
    562              t0 = OS_GetTime();
   \   0000014E   ........           CALL    OS__Gettime
   \   00000152   01C8               MOVW    R25:R24, R17:R16
    563              do {
    564                OS_Delay(1);
   \                     ??GetEEPROMData_3:
   \   00000154   E001               LDI     R16, 1
   \   00000156   E010               LDI     R17, 0
   \   00000158   ........           CALL    OS_Delay
    565              }while ((OS_GetTime()-t0)< (sizeof(float)*9) && !EEPWriteOK);
   \   0000015C   ........           CALL    OS__Gettime
   \   00000160   1B08               SUB     R16, R24
   \   00000162   0B19               SBC     R17, R25
   \   00000164   3204               CPI     R16, 36
   \   00000166   4010               SBCI    R17, 0
   \   00000168   F420               BRCC    ??GetEEPROMData_4
   \   0000016A   9100....           LDS     R16, EEPWriteOK
   \   0000016E   2300               TST     R16
   \   00000170   F389               BREQ    ??GetEEPROMData_3
    566          }
   \                     ??GetEEPROMData_4:
   \   00000172   E0E7               LDI     R30, 7
   \   00000174   ........           JMP     ?EPILOGUE_B7_L09
    567          
    568          
    569          /*************************************************************************
    570          *
    571          * Receive AN-ZBANA setup
    572          *
    573          *************************************************************************/

   \                                 In  segment CODE, align 2, keep-with-next
    574          void GetANASetup(char ch, short pointer) {   
   \                     GetANASetup:
   \   00000000   ........           CALL    ?PROLOGUE3_L09
   \   00000004   2FA0               MOV     R26, R16
   \   00000006   01C9               MOVW    R25:R24, R19:R18
    575          
    576              TData.Ana.PortUsed = UART[ch].pRxBuffer[pointer] + (UART[ch].pRxBuffer[pointer+1] << 8);  //Get the setup
   \   00000008   2F0A               MOV     R16, R26
   \   0000000A   E010               LDI     R17, 0
   \   0000000C   E14A               LDI     R20, 26
   \   0000000E   E050               LDI     R21, 0
   \   00000010   ........           CALL    ?S_EC_MUL_L02
   \   00000014   01F8               MOVW    R31:R30, R17:R16
   \   00000016   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000018   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000001A   8502               LDD     R16, Z+10
   \   0000001C   8513               LDD     R17, Z+11
   \   0000001E   0F08               ADD     R16, R24
   \   00000020   1F19               ADC     R17, R25
   \   00000022   01F8               MOVW    R31:R30, R17:R16
   \   00000024   8120               LD      R18, Z
   \   00000026   2F0A               MOV     R16, R26
   \   00000028   E010               LDI     R17, 0
   \   0000002A   E14A               LDI     R20, 26
   \   0000002C   E050               LDI     R21, 0
   \   0000002E   ........           CALL    ?S_EC_MUL_L02
   \   00000032   01F8               MOVW    R31:R30, R17:R16
   \   00000034   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000036   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000038   8502               LDD     R16, Z+10
   \   0000003A   8513               LDD     R17, Z+11
   \   0000003C   0F08               ADD     R16, R24
   \   0000003E   1F19               ADC     R17, R25
   \   00000040   01F8               MOVW    R31:R30, R17:R16
   \   00000042   8131               LDD     R19, Z+1
   \   00000044   ....               LDI     R30, LOW(TData)
   \   00000046   ....               LDI     R31, (TData) >> 8
   \   00000048   8320               ST      Z, R18
   \   0000004A   8331               STD     Z+1, R19
    577              WriteEEPROMByte(EEPROM_PORTSETUP,UART[ch].pRxBuffer[pointer]);   // store in EEPROM 
   \   0000004C   2F0A               MOV     R16, R26
   \   0000004E   E010               LDI     R17, 0
   \   00000050   E14A               LDI     R20, 26
   \   00000052   E050               LDI     R21, 0
   \   00000054   ........           CALL    ?S_EC_MUL_L02
   \   00000058   01F8               MOVW    R31:R30, R17:R16
   \   0000005A   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000005C   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000005E   8502               LDD     R16, Z+10
   \   00000060   8513               LDD     R17, Z+11
   \   00000062   0F08               ADD     R16, R24
   \   00000064   1F19               ADC     R17, R25
   \   00000066   01F8               MOVW    R31:R30, R17:R16
   \   00000068   8120               LD      R18, Z
   \   0000006A   E002               LDI     R16, 2
   \   0000006C   E010               LDI     R17, 0
   \   0000006E   ........           CALL    WriteEEPROMByte
    578              WriteEEPROMByte(EEPROM_PORTSETUP+1,UART[ch].pRxBuffer[pointer+1]); 
   \   00000072   2F0A               MOV     R16, R26
   \   00000074   E010               LDI     R17, 0
   \   00000076   E14A               LDI     R20, 26
   \   00000078   E050               LDI     R21, 0
   \   0000007A   ........           CALL    ?S_EC_MUL_L02
   \   0000007E   01F8               MOVW    R31:R30, R17:R16
   \   00000080   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000082   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000084   8502               LDD     R16, Z+10
   \   00000086   8513               LDD     R17, Z+11
   \   00000088   0F08               ADD     R16, R24
   \   0000008A   1F19               ADC     R17, R25
   \   0000008C   01F8               MOVW    R31:R30, R17:R16
   \   0000008E   8121               LDD     R18, Z+1
   \   00000090   E003               LDI     R16, 3
   \   00000092   E010               LDI     R17, 0
   \   00000094   ........           CALL    WriteEEPROMByte
    579              SetAnaPort();                           // set the port on or off
   \   00000098   ........           CALL    SetAnaPort
    580          }
   \   0000009C   E0E3               LDI     R30, 3
   \   0000009E   ........           JMP     ?EPILOGUE_B3_L09
    581          
    582          /*************************************************************************
    583          *
    584          * Receive AN-ZBANA filter
    585          *
    586          *************************************************************************/

   \                                 In  segment CODE, align 2, keep-with-next
    587          void GetANAFilter(char ch, short pointer) {   
   \                     GetANAFilter:
   \   00000000   ........           CALL    ?PROLOGUE4_L09
   \   00000004   2F60               MOV     R22, R16
   \   00000006   01C9               MOVW    R25:R24, R19:R18
    588              char port;
    589          
    590              for (port = 0; port <12; port++) {
   \   00000008   E020               LDI     R18, 0
   \                     ??GetANAFilter_0:
   \   0000000A   302C               CPI     R18, 12
   \   0000000C   F4B8               BRCC    ??GetANAFilter_1
    591                  TData.Ana.Filter[port] = UART[ch].pRxBuffer[pointer++];  //Get the filter
   \   0000000E   2F06               MOV     R16, R22
   \   00000010   E010               LDI     R17, 0
   \   00000012   E14A               LDI     R20, 26
   \   00000014   E050               LDI     R21, 0
   \   00000016   ........           CALL    ?S_EC_MUL_L02
   \   0000001A   01D8               MOVW    R27:R26, R17:R16
   \   0000001C   ....               SUBI    R26, LOW((-(UART + 10) & 0xFFFF))
   \   0000001E   ....               SBCI    R27, HIGH((-(UART + 10) & 0xFFFF))
   \   00000020   91ED               LD      R30, X+
   \   00000022   91FC               LD      R31, X
   \   00000024   9711               SBIW    R27:R26, 1
   \   00000026   0FE8               ADD     R30, R24
   \   00000028   1FF9               ADC     R31, R25
   \   0000002A   8100               LD      R16, Z
   \   0000002C   E030               LDI     R19, 0
   \   0000002E   01F9               MOVW    R31:R30, R19:R18
   \   00000030   ....               SUBI    R30, LOW((-(TData) & 0xFFFF))
   \   00000032   ....               SBCI    R31, (-(TData) & 0xFFFF) >> 8
   \   00000034   8302               STD     Z+2, R16
   \   00000036   9601               ADIW    R25:R24, 1
    592              }
   \   00000038   9523               INC     R18
   \   0000003A   CFE7               RJMP    ??GetANAFilter_0
    593          }
   \                     ??GetANAFilter_1:
   \   0000003C   E0E4               LDI     R30, 4
   \   0000003E   ........           JMP     ?EPILOGUE_B4_L09
    594          
    595          /*************************************************************************
    596          *
    597          *  Receive data on USARTs
    598          *
    599          *************************************************************************/

   \                                 In  segment CODE, align 2, keep-with-next
    600          void ReceivePacketUart(char ch) {
   \                     ReceivePacketUart:
   \   00000000   ........           CALL    ?PROLOGUE4_L09
   \   00000004   2F80               MOV     R24, R16
    601          
    602              switch (UART[ch].RxState) {                  // check status 
   \   00000006   2F08               MOV     R16, R24
   \   00000008   E010               LDI     R17, 0
   \   0000000A   E14A               LDI     R20, 26
   \   0000000C   E050               LDI     R21, 0
   \   0000000E   ........           CALL    ?S_EC_MUL_L02
   \   00000012   01F8               MOVW    R31:R30, R17:R16
   \   00000014   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000016   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000018   8902               LDD     R16, Z+18
   \   0000001A   5000               SUBI    R16, 0
   \   0000001C   F049               BREQ    ??ReceivePacketUart_0
   \   0000001E   950A               DEC     R16
   \   00000020   F041               BREQ    ??ReceivePacketUart_1
   \   00000022   950A               DEC     R16
   \   00000024   F409               BRNE    $+2+2
   \   00000026   C0B0               RJMP    ??ReceivePacketUart_2
   \   00000028   5008               SUBI    R16, 8
   \   0000002A   F409               BRNE    $+2+2
   \   0000002C   C161               RJMP    ??ReceivePacketUart_3
   \   0000002E   C15D               RJMP    ??ReceivePacketUart_4
    603              case SYNC :
    604                  // all functionallity in inerrupt routine 
    605                  break ;
   \                     ??ReceivePacketUart_0:
   \   00000030   C15F               RJMP    ??ReceivePacketUart_3
    606              case HEADER :
    607                  if (UART[ch].RxLast >= 6) {             // receive header 
   \                     ??ReceivePacketUart_1:
   \   00000032   2F08               MOV     R16, R24
   \   00000034   E010               LDI     R17, 0
   \   00000036   E14A               LDI     R20, 26
   \   00000038   E050               LDI     R21, 0
   \   0000003A   ........           CALL    ?S_EC_MUL_L02
   \   0000003E   01F8               MOVW    R31:R30, R17:R16
   \   00000040   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000042   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000044   85A6               LDD     R26, Z+14
   \   00000046   85B7               LDD     R27, Z+15
   \   00000048   9716               SBIW    R27:R26, 6
   \   0000004A   F408               BRCC    $+2+2
   \   0000004C   C151               RJMP    ??ReceivePacketUart_3
    608                      UART[ch].RxPacklen = (UART[ch].pRxBuffer[4] + (UART[ch].pRxBuffer[5] * 256)) ; // Find length of package
   \   0000004E   2F08               MOV     R16, R24
   \   00000050   E010               LDI     R17, 0
   \   00000052   E14A               LDI     R20, 26
   \   00000054   E050               LDI     R21, 0
   \   00000056   ........           CALL    ?S_EC_MUL_L02
   \   0000005A   01F8               MOVW    R31:R30, R17:R16
   \   0000005C   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000005E   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000060   8502               LDD     R16, Z+10
   \   00000062   8513               LDD     R17, Z+11
   \   00000064   01F8               MOVW    R31:R30, R17:R16
   \   00000066   8124               LDD     R18, Z+4
   \   00000068   E030               LDI     R19, 0
   \   0000006A   2F08               MOV     R16, R24
   \   0000006C   E010               LDI     R17, 0
   \   0000006E   E14A               LDI     R20, 26
   \   00000070   E050               LDI     R21, 0
   \   00000072   ........           CALL    ?S_EC_MUL_L02
   \   00000076   01F8               MOVW    R31:R30, R17:R16
   \   00000078   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000007A   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000007C   8502               LDD     R16, Z+10
   \   0000007E   8513               LDD     R17, Z+11
   \   00000080   01F8               MOVW    R31:R30, R17:R16
   \   00000082   8105               LDD     R16, Z+5
   \   00000084   E010               LDI     R17, 0
   \   00000086   2F10               MOV     R17, R16
   \   00000088   E000               LDI     R16, 0
   \   0000008A   0F20               ADD     R18, R16
   \   0000008C   1F31               ADC     R19, R17
   \   0000008E   2F08               MOV     R16, R24
   \   00000090   E010               LDI     R17, 0
   \   00000092   E14A               LDI     R20, 26
   \   00000094   E050               LDI     R21, 0
   \   00000096   ........           CALL    ?S_EC_MUL_L02
   \   0000009A   01F8               MOVW    R31:R30, R17:R16
   \   0000009C   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000009E   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000000A0   8B26               STD     Z+22, R18
   \   000000A2   8B37               STD     Z+23, R19
    609                      if (CalcDSRxChecksum(ch, 6) && (UART[ch].pRxBuffer[0] == (DEVICE_IO + UnitID))) {
   \   000000A4   E026               LDI     R18, 6
   \   000000A6   E030               LDI     R19, 0
   \   000000A8   2F08               MOV     R16, R24
   \   000000AA   ....               RCALL   CalcDSRxChecksum
   \   000000AC   2B01               OR      R16, R17
   \   000000AE   F409               BRNE    $+2+2
   \   000000B0   C067               RJMP    ??ReceivePacketUart_5
   \   000000B2   2F08               MOV     R16, R24
   \   000000B4   E010               LDI     R17, 0
   \   000000B6   E14A               LDI     R20, 26
   \   000000B8   E050               LDI     R21, 0
   \   000000BA   ........           CALL    ?S_EC_MUL_L02
   \   000000BE   01F8               MOVW    R31:R30, R17:R16
   \   000000C0   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000000C2   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000000C4   8502               LDD     R16, Z+10
   \   000000C6   8513               LDD     R17, Z+11
   \   000000C8   01F8               MOVW    R31:R30, R17:R16
   \   000000CA   8100               LD      R16, Z
   \   000000CC   E010               LDI     R17, 0
   \   000000CE   91E0....           LDS     R30, UnitID
   \   000000D2   E0F0               LDI     R31, 0
   \   000000D4   9670               ADIW    R31:R30, 16
   \   000000D6   170E               CP      R16, R30
   \   000000D8   071F               CPC     R17, R31
   \   000000DA   F009               BREQ    $+2+2
   \   000000DC   C051               RJMP    ??ReceivePacketUart_5
    610                          // header checksum OK and to me
    611                          if ((UART[ch].RxPacklen < ((short) RXSIZE_UART-UART[ch].RxLast)) &&    /* chk. header */
    612                              (UART[ch].RxPacklen >= MIN_PACK_LEN)) {
   \   000000DE   2F08               MOV     R16, R24
   \   000000E0   E010               LDI     R17, 0
   \   000000E2   E14A               LDI     R20, 26
   \   000000E4   E050               LDI     R21, 0
   \   000000E6   ........           CALL    ?S_EC_MUL_L02
   \   000000EA   01F8               MOVW    R31:R30, R17:R16
   \   000000EC   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000000EE   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000000F0   8966               LDD     R22, Z+22
   \   000000F2   8977               LDD     R23, Z+23
   \   000000F4   E926               LDI     R18, 150
   \   000000F6   E030               LDI     R19, 0
   \   000000F8   2F08               MOV     R16, R24
   \   000000FA   E010               LDI     R17, 0
   \   000000FC   E14A               LDI     R20, 26
   \   000000FE   E050               LDI     R21, 0
   \   00000100   ........           CALL    ?S_EC_MUL_L02
   \   00000104   01F8               MOVW    R31:R30, R17:R16
   \   00000106   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000108   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000010A   8506               LDD     R16, Z+14
   \   0000010C   8517               LDD     R17, Z+15
   \   0000010E   1B20               SUB     R18, R16
   \   00000110   0B31               SBC     R19, R17
   \   00000112   1762               CP      R22, R18
   \   00000114   0773               CPC     R23, R19
   \   00000116   F580               BRCC    ??ReceivePacketUart_6
   \   00000118   2F08               MOV     R16, R24
   \   0000011A   E010               LDI     R17, 0
   \   0000011C   E14A               LDI     R20, 26
   \   0000011E   E050               LDI     R21, 0
   \   00000120   ........           CALL    ?S_EC_MUL_L02
   \   00000124   01F8               MOVW    R31:R30, R17:R16
   \   00000126   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000128   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000012A   89A6               LDD     R26, Z+22
   \   0000012C   89B7               LDD     R27, Z+23
   \   0000012E   9717               SBIW    R27:R26, 7
   \   00000130   F118               BRCS    ??ReceivePacketUart_6
    613                              UART[ch].RxState = RECEIVE ;       // Header ok go to data receive state
   \   00000132   2F08               MOV     R16, R24
   \   00000134   E010               LDI     R17, 0
   \   00000136   E14A               LDI     R20, 26
   \   00000138   E050               LDI     R21, 0
   \   0000013A   ........           CALL    ?S_EC_MUL_L02
   \   0000013E   01F8               MOVW    R31:R30, R17:R16
   \   00000140   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000142   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000144   E002               LDI     R16, 2
   \   00000146   8B02               STD     Z+18, R16
    614                              UART[ch].RxCount = UART[ch].RxLast + 1 ;    // Set receive counter
   \   00000148   2F08               MOV     R16, R24
   \   0000014A   E010               LDI     R17, 0
   \   0000014C   E14A               LDI     R20, 26
   \   0000014E   E050               LDI     R21, 0
   \   00000150   ........           CALL    ?S_EC_MUL_L02
   \   00000154   01F8               MOVW    R31:R30, R17:R16
   \   00000156   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000158   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000015A   85A6               LDD     R26, Z+14
   \   0000015C   85B7               LDD     R27, Z+15
   \   0000015E   9611               ADIW    R27:R26, 1
   \   00000160   2F08               MOV     R16, R24
   \   00000162   E010               LDI     R17, 0
   \   00000164   E14A               LDI     R20, 26
   \   00000166   E050               LDI     R21, 0
   \   00000168   ........           CALL    ?S_EC_MUL_L02
   \   0000016C   01F8               MOVW    R31:R30, R17:R16
   \   0000016E   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000170   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000172   8BA0               STD     Z+16, R26
   \   00000174   8BB1               STD     Z+17, R27
   \   00000176   C0BC               RJMP    ??ReceivePacketUart_3
    615                          } else {
    616                              GoToSyncUART(ch) ;                        // go to sync modus for recive
   \                     ??ReceivePacketUart_6:
   \   00000178   2F08               MOV     R16, R24
   \   0000017A   ........           CALL    GoToSyncUART
   \   0000017E   C0B8               RJMP    ??ReceivePacketUart_3
    617                          }
    618                      } else {
    619                          GoToSyncUART(ch) ;                            // go to sync modus for recive
   \                     ??ReceivePacketUart_5:
   \   00000180   2F08               MOV     R16, R24
   \   00000182   ........           CALL    GoToSyncUART
    620                      }
    621                  }
    622                  break ;
   \   00000186   C0B4               RJMP    ??ReceivePacketUart_3
    623              case RECEIVE :
    624                  if (++UART[ch].RxCount >= UART[ch].RxPacklen) {
   \                     ??ReceivePacketUart_2:
   \   00000188   2F08               MOV     R16, R24
   \   0000018A   E010               LDI     R17, 0
   \   0000018C   E14A               LDI     R20, 26
   \   0000018E   E050               LDI     R21, 0
   \   00000190   ........           CALL    ?S_EC_MUL_L02
   \   00000194   01F8               MOVW    R31:R30, R17:R16
   \   00000196   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000198   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000019A   8900               LDD     R16, Z+16
   \   0000019C   8911               LDD     R17, Z+17
   \   0000019E   5F0F               SUBI    R16, 255
   \   000001A0   4F1F               SBCI    R17, 255
   \   000001A2   8B00               STD     Z+16, R16
   \   000001A4   8B11               STD     Z+17, R17
   \   000001A6   2F08               MOV     R16, R24
   \   000001A8   E010               LDI     R17, 0
   \   000001AA   E14A               LDI     R20, 26
   \   000001AC   E050               LDI     R21, 0
   \   000001AE   ........           CALL    ?S_EC_MUL_L02
   \   000001B2   01F8               MOVW    R31:R30, R17:R16
   \   000001B4   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000001B6   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000001B8   8920               LDD     R18, Z+16
   \   000001BA   8931               LDD     R19, Z+17
   \   000001BC   2F08               MOV     R16, R24
   \   000001BE   E010               LDI     R17, 0
   \   000001C0   E14A               LDI     R20, 26
   \   000001C2   E050               LDI     R21, 0
   \   000001C4   ........           CALL    ?S_EC_MUL_L02
   \   000001C8   01F8               MOVW    R31:R30, R17:R16
   \   000001CA   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000001CC   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000001CE   8906               LDD     R16, Z+22
   \   000001D0   8917               LDD     R17, Z+23
   \   000001D2   1720               CP      R18, R16
   \   000001D4   0731               CPC     R19, R17
   \   000001D6   F408               BRCC    $+2+2
   \   000001D8   C08B               RJMP    ??ReceivePacketUart_3
    625                      if ((UART[ch].pRxBuffer[UART[ch].RxPacklen -1]) == ANPRO10_EOT) {
   \   000001DA   2F08               MOV     R16, R24
   \   000001DC   E010               LDI     R17, 0
   \   000001DE   E14A               LDI     R20, 26
   \   000001E0   E050               LDI     R21, 0
   \   000001E2   ........           CALL    ?S_EC_MUL_L02
   \   000001E6   01F8               MOVW    R31:R30, R17:R16
   \   000001E8   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000001EA   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000001EC   8522               LDD     R18, Z+10
   \   000001EE   8533               LDD     R19, Z+11
   \   000001F0   2F08               MOV     R16, R24
   \   000001F2   E010               LDI     R17, 0
   \   000001F4   E14A               LDI     R20, 26
   \   000001F6   E050               LDI     R21, 0
   \   000001F8   ........           CALL    ?S_EC_MUL_L02
   \   000001FC   01F8               MOVW    R31:R30, R17:R16
   \   000001FE   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000200   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000202   8906               LDD     R16, Z+22
   \   00000204   8917               LDD     R17, Z+23
   \   00000206   0F20               ADD     R18, R16
   \   00000208   1F31               ADC     R19, R17
   \   0000020A   5021               SUBI    R18, 1
   \   0000020C   4030               SBCI    R19, 0
   \   0000020E   01F9               MOVW    R31:R30, R19:R18
   \   00000210   8100               LD      R16, Z
   \   00000212   3004               CPI     R16, 4
   \   00000214   F009               BREQ    $+2+2
   \   00000216   C065               RJMP    ??ReceivePacketUart_7
    626                          if (CalcDSRxChecksum(ch, UART[ch].RxPacklen-2)) {
   \   00000218   2F08               MOV     R16, R24
   \   0000021A   E010               LDI     R17, 0
   \   0000021C   E14A               LDI     R20, 26
   \   0000021E   E050               LDI     R21, 0
   \   00000220   ........           CALL    ?S_EC_MUL_L02
   \   00000224   01F8               MOVW    R31:R30, R17:R16
   \   00000226   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000228   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000022A   8926               LDD     R18, Z+22
   \   0000022C   8937               LDD     R19, Z+23
   \   0000022E   5022               SUBI    R18, 2
   \   00000230   4030               SBCI    R19, 0
   \   00000232   2F08               MOV     R16, R24
   \   00000234   ....               RCALL   CalcDSRxChecksum
   \   00000236   2B01               OR      R16, R17
   \   00000238   F409               BRNE    $+2+2
   \   0000023A   C04F               RJMP    ??ReceivePacketUart_8
    627                              if ((UART[ch].pRxBuffer[1] == MyAddress())||      // message to me? or
    628                                  (UART[ch].pRxBuffer[1] == 0xff)) {            // broadcast
   \   0000023C   ........           CALL    MyAddress
   \   00000240   2F20               MOV     R18, R16
   \   00000242   2F08               MOV     R16, R24
   \   00000244   E010               LDI     R17, 0
   \   00000246   E14A               LDI     R20, 26
   \   00000248   E050               LDI     R21, 0
   \   0000024A   ........           CALL    ?S_EC_MUL_L02
   \   0000024E   01F8               MOVW    R31:R30, R17:R16
   \   00000250   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000252   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000254   8502               LDD     R16, Z+10
   \   00000256   8513               LDD     R17, Z+11
   \   00000258   01F8               MOVW    R31:R30, R17:R16
   \   0000025A   8101               LDD     R16, Z+1
   \   0000025C   1702               CP      R16, R18
   \   0000025E   F079               BREQ    ??ReceivePacketUart_9
   \   00000260   2F08               MOV     R16, R24
   \   00000262   E010               LDI     R17, 0
   \   00000264   E14A               LDI     R20, 26
   \   00000266   E050               LDI     R21, 0
   \   00000268   ........           CALL    ?S_EC_MUL_L02
   \   0000026C   01F8               MOVW    R31:R30, R17:R16
   \   0000026E   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000270   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000272   8502               LDD     R16, Z+10
   \   00000274   8513               LDD     R17, Z+11
   \   00000276   01F8               MOVW    R31:R30, R17:R16
   \   00000278   8101               LDD     R16, Z+1
   \   0000027A   3F0F               CPI     R16, 255
   \   0000027C   F551               BRNE    ??ReceivePacketUart_10
    629                                  hostAddress = UART[ch].pRxBuffer[3];            // address to sender (host)
   \                     ??ReceivePacketUart_9:
   \   0000027E   2F08               MOV     R16, R24
   \   00000280   E010               LDI     R17, 0
   \   00000282   E14A               LDI     R20, 26
   \   00000284   E050               LDI     R21, 0
   \   00000286   ........           CALL    ?S_EC_MUL_L02
   \   0000028A   01F8               MOVW    R31:R30, R17:R16
   \   0000028C   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000028E   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000290   8502               LDD     R16, Z+10
   \   00000292   8513               LDD     R17, Z+11
   \   00000294   01F8               MOVW    R31:R30, R17:R16
   \   00000296   8103               LDD     R16, Z+3
   \   00000298   9300....           STS     hostAddress, R16
    630                                  UART[ch].RxState = HANDLE ;                     // Package OK
   \   0000029C   2F08               MOV     R16, R24
   \   0000029E   E010               LDI     R17, 0
   \   000002A0   E14A               LDI     R20, 26
   \   000002A2   E050               LDI     R21, 0
   \   000002A4   ........           CALL    ?S_EC_MUL_L02
   \   000002A8   01F8               MOVW    R31:R30, R17:R16
   \   000002AA   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   000002AC   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   000002AE   E00A               LDI     R16, 10
   \   000002B0   8B02               STD     Z+18, R16
    631                                  if (ch == 0) {
   \   000002B2   2388               TST     R24
   \   000002B4   F431               BRNE    ??ReceivePacketUart_11
    632                                      OS_SignalEvent(1, &TCB_USART0);
   \   000002B6   ....               LDI     R18, LOW(TCB_USART0)
   \   000002B8   ....               LDI     R19, (TCB_USART0) >> 8
   \   000002BA   E001               LDI     R16, 1
   \   000002BC   ........           CALL    OS_SignalEvent
   \   000002C0   C017               RJMP    ??ReceivePacketUart_3
    633                                  } else if (ch == 1) {
   \                     ??ReceivePacketUart_11:
   \   000002C2   3081               CPI     R24, 1
   \   000002C4   F4A9               BRNE    ??ReceivePacketUart_3
    634                                      OS_SignalEvent(1, &TCB_USART1);
   \   000002C6   ....               LDI     R18, LOW(TCB_USART1)
   \   000002C8   ....               LDI     R19, (TCB_USART1) >> 8
   \   000002CA   E001               LDI     R16, 1
   \   000002CC   ........           CALL    OS_SignalEvent
   \   000002D0   C00F               RJMP    ??ReceivePacketUart_3
    635                                  }
    636                              } else {
    637                                  GoToSyncUART(ch) ;                             // go to sync modus for recive
   \                     ??ReceivePacketUart_10:
   \   000002D2   2F08               MOV     R16, R24
   \   000002D4   ........           CALL    GoToSyncUART
   \   000002D8   C00B               RJMP    ??ReceivePacketUart_3
    638                              }
    639                          } else {
    640                              GoToSyncUART(ch) ;                                // go to sync modus for recive
   \                     ??ReceivePacketUart_8:
   \   000002DA   2F08               MOV     R16, R24
   \   000002DC   ........           CALL    GoToSyncUART
   \   000002E0   C007               RJMP    ??ReceivePacketUart_3
    641                          }
    642                      } else {
    643                          GoToSyncUART(ch) ;                                    // go to sync modus for recive
   \                     ??ReceivePacketUart_7:
   \   000002E2   2F08               MOV     R16, R24
   \   000002E4   ........           CALL    GoToSyncUART
    644                      }
    645                  }
    646                  break ;
   \   000002E8   C003               RJMP    ??ReceivePacketUart_3
    647              case HANDLE :
    648                  break;
    649              default :
    650                  GoToSyncUART(ch) ;                                            // go to sync modus for recive
   \                     ??ReceivePacketUart_4:
   \   000002EA   2F08               MOV     R16, R24
   \   000002EC   ........           CALL    GoToSyncUART
    651                  break ;
    652              }                                                           // end switch 
    653              if (++UART[ch].RxLast >= RXSIZE_UART) {                     // check pointer 
   \                     ??ReceivePacketUart_3:
   \   000002F0   2F08               MOV     R16, R24
   \   000002F2   E010               LDI     R17, 0
   \   000002F4   E14A               LDI     R20, 26
   \   000002F6   E050               LDI     R21, 0
   \   000002F8   ........           CALL    ?S_EC_MUL_L02
   \   000002FC   01F8               MOVW    R31:R30, R17:R16
   \   000002FE   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000300   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000302   8506               LDD     R16, Z+14
   \   00000304   8517               LDD     R17, Z+15
   \   00000306   5F0F               SUBI    R16, 255
   \   00000308   4F1F               SBCI    R17, 255
   \   0000030A   8706               STD     Z+14, R16
   \   0000030C   8717               STD     Z+15, R17
   \   0000030E   2F08               MOV     R16, R24
   \   00000310   E010               LDI     R17, 0
   \   00000312   E14A               LDI     R20, 26
   \   00000314   E050               LDI     R21, 0
   \   00000316   ........           CALL    ?S_EC_MUL_L02
   \   0000031A   01F8               MOVW    R31:R30, R17:R16
   \   0000031C   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000031E   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000320   8506               LDD     R16, Z+14
   \   00000322   8517               LDD     R17, Z+15
   \   00000324   3906               CPI     R16, 150
   \   00000326   E020               LDI     R18, 0
   \   00000328   0712               CPC     R17, R18
   \   0000032A   F068               BRCS    ??ReceivePacketUart_12
    654                  UART[ch].RxLast = 0;                                     // reset pointer
   \   0000032C   2F08               MOV     R16, R24
   \   0000032E   E010               LDI     R17, 0
   \   00000330   E14A               LDI     R20, 26
   \   00000332   E050               LDI     R21, 0
   \   00000334   ........           CALL    ?S_EC_MUL_L02
   \   00000338   01F8               MOVW    R31:R30, R17:R16
   \   0000033A   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000033C   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000033E   E000               LDI     R16, 0
   \   00000340   8706               STD     Z+14, R16
   \   00000342   E000               LDI     R16, 0
   \   00000344   8707               STD     Z+15, R16
    655              }
    656          }
   \                     ??ReceivePacketUart_12:
   \   00000346   E0E4               LDI     R30, 4
   \   00000348   ........           JMP     ?EPILOGUE_B4_L09
    657          
    658          
    659          /*************************************************************************
    660          *
    661          * Calculate tx checksum (header and package) using Dallas Semiconductor one-wire CRC
    662          *
    663          *************************************************************************/

   \                                 In  segment CODE, align 2, keep-with-next
    664          char CalcDSTxChecksum(char ch, unsigned short len) {
   \                     CalcDSTxChecksum:
   \   00000000   ........           CALL    ?PROLOGUE6_L09
   \   00000004                      REQUIRE ?Register_R4_is_cg_reg
   \   00000004                      REQUIRE ?Register_R5_is_cg_reg
   \   00000004   2E20               MOV     R2, R16
   \   00000006   0129               MOVW    R5:R4, R19:R18
    665          
    666              unsigned short  cnt ;
    667              unsigned char   csum ;
    668          
    669              csum = 0 ;
   \   00000008   E060               LDI     R22, 0
    670              for (cnt = 4 ; cnt < len ; cnt++) {
   \   0000000A   E084               LDI     R24, 4
   \   0000000C   E090               LDI     R25, 0
   \                     ??CalcDSTxChecksum_0:
   \   0000000E   1584               CP      R24, R4
   \   00000010   0595               CPC     R25, R5
   \   00000012   F4D8               BRCC    ??CalcDSTxChecksum_1
    671                  csum = crc[csum ^ UART[ch].pTxBuffer[cnt]] ;
   \   00000014   E070               LDI     R23, 0
   \   00000016   2D02               MOV     R16, R2
   \   00000018   E010               LDI     R17, 0
   \   0000001A   E14A               LDI     R20, 26
   \   0000001C   E050               LDI     R21, 0
   \   0000001E   ........           CALL    ?S_EC_MUL_L02
   \   00000022   01D8               MOVW    R27:R26, R17:R16
   \   00000024   ....               SUBI    R26, LOW((-(UART) & 0xFFFF))
   \   00000026   ....               SBCI    R27, (-(UART) & 0xFFFF) >> 8
   \   00000028   91ED               LD      R30, X+
   \   0000002A   91FC               LD      R31, X
   \   0000002C   9711               SBIW    R27:R26, 1
   \   0000002E   0FE8               ADD     R30, R24
   \   00000030   1FF9               ADC     R31, R25
   \   00000032   8100               LD      R16, Z
   \   00000034   E010               LDI     R17, 0
   \   00000036   2760               EOR     R22, R16
   \   00000038   2771               EOR     R23, R17
   \   0000003A   01FB               MOVW    R31:R30, R23:R22
   \   0000003C   ....               SUBI    R30, LOW((-(crc) & 0xFFFFFF))
   \   0000003E   ....               SBCI    R31, HIGH((-(crc) & 0xFFFFFF))
   \   00000040   ....               LDI     R19, (crc) >> 16
   \   00000042   BF3B               OUT     0x3B, R19
   \   00000044   9166               ELPM    R22, Z
    672              }
   \   00000046   9601               ADIW    R25:R24, 1
   \   00000048   CFE2               RJMP    ??CalcDSTxChecksum_0
    673              return csum ;
   \                     ??CalcDSTxChecksum_1:
   \   0000004A   2F06               MOV     R16, R22
   \   0000004C   E0E6               LDI     R30, 6
   \   0000004E   ........           JMP     ?EPILOGUE_B6_L09
    674          }
    675          
    676          /*************************************************************************
    677          *
    678          * Calculate rx packet checksum (header and package) using Dallas Semiconductor one-wire CRC
    679          *
    680          *************************************************************************/

   \                                 In  segment CODE, align 2, keep-with-next
    681          short CalcDSRxChecksum(char ch, unsigned short len) {
   \                     CalcDSRxChecksum:
   \   00000000   ........           CALL    ?PROLOGUE4_L09
   \   00000004   2E20               MOV     R2, R16
   \   00000006   01B9               MOVW    R23:R22, R19:R18
    682          
    683              unsigned short  cnt ;
    684              unsigned char   csum ;
    685          
    686              csum = 0 ;
   \   00000008   E0A0               LDI     R26, 0
    687              for (cnt=0 ; cnt < len ; cnt++) {
   \   0000000A   E080               LDI     R24, 0
   \   0000000C   E090               LDI     R25, 0
   \                     ??CalcDSRxChecksum_0:
   \   0000000E   1786               CP      R24, R22
   \   00000010   0797               CPC     R25, R23
   \   00000012   F4D8               BRCC    ??CalcDSRxChecksum_1
    688                  csum = crc[csum ^ UART[ch].pRxBuffer[cnt]] ;
   \   00000014   E0B0               LDI     R27, 0
   \   00000016   2D02               MOV     R16, R2
   \   00000018   E010               LDI     R17, 0
   \   0000001A   E14A               LDI     R20, 26
   \   0000001C   E050               LDI     R21, 0
   \   0000001E   ........           CALL    ?S_EC_MUL_L02
   \   00000022   01F8               MOVW    R31:R30, R17:R16
   \   00000024   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000026   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000028   8502               LDD     R16, Z+10
   \   0000002A   8513               LDD     R17, Z+11
   \   0000002C   0F08               ADD     R16, R24
   \   0000002E   1F19               ADC     R17, R25
   \   00000030   01F8               MOVW    R31:R30, R17:R16
   \   00000032   8100               LD      R16, Z
   \   00000034   E010               LDI     R17, 0
   \   00000036   27A0               EOR     R26, R16
   \   00000038   27B1               EOR     R27, R17
   \   0000003A   01FD               MOVW    R31:R30, R27:R26
   \   0000003C   ....               SUBI    R30, LOW((-(crc) & 0xFFFFFF))
   \   0000003E   ....               SBCI    R31, HIGH((-(crc) & 0xFFFFFF))
   \   00000040   ....               LDI     R19, (crc) >> 16
   \   00000042   BF3B               OUT     0x3B, R19
   \   00000044   91A6               ELPM    R26, Z
    689              }
   \   00000046   9601               ADIW    R25:R24, 1
   \   00000048   CFE2               RJMP    ??CalcDSRxChecksum_0
    690              if (csum == UART[ch].pRxBuffer[len]) {
   \                     ??CalcDSRxChecksum_1:
   \   0000004A   2D02               MOV     R16, R2
   \   0000004C   E010               LDI     R17, 0
   \   0000004E   E14A               LDI     R20, 26
   \   00000050   E050               LDI     R21, 0
   \   00000052   ........           CALL    ?S_EC_MUL_L02
   \   00000056   01F8               MOVW    R31:R30, R17:R16
   \   00000058   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000005A   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000005C   8502               LDD     R16, Z+10
   \   0000005E   8513               LDD     R17, Z+11
   \   00000060   0F06               ADD     R16, R22
   \   00000062   1F17               ADC     R17, R23
   \   00000064   01F8               MOVW    R31:R30, R17:R16
   \   00000066   8100               LD      R16, Z
   \   00000068   17A0               CP      R26, R16
   \   0000006A   F419               BRNE    ??CalcDSRxChecksum_2
    691                  return true ;
   \   0000006C   E001               LDI     R16, 1
   \   0000006E   E010               LDI     R17, 0
   \   00000070   C002               RJMP    ??CalcDSRxChecksum_3
    692              } else {
    693                  return false ;
   \                     ??CalcDSRxChecksum_2:
   \   00000072   E000               LDI     R16, 0
   \   00000074   E010               LDI     R17, 0
   \                     ??CalcDSRxChecksum_3:
   \   00000076   E0E4               LDI     R30, 4
   \   00000078   ........           JMP     ?EPILOGUE_B4_L09
    694              }
    695          }
    696          
    697          /*************************************************************************
    698          *
    699          * Goes to sync mode
    700          *
    701          *************************************************************************/

   \                                 In  segment CODE, align 2, keep-with-next
    702          __monitor void GoToSyncUART(char ch) {
   \                     GoToSyncUART:
   \   00000000   B73F               IN      R19, 0x3F
   \   00000002   94F8               CLI
   \   00000004   2F20               MOV     R18, R16
    703          
    704              if (ch < 2) {
   \   00000006   3022               CPI     R18, 2
   \   00000008   F518               BRCC    ??GoToSyncUART_0
    705                  UART[ch].SyncCnt = 0 ;                        // ready for sync
   \   0000000A   2F02               MOV     R16, R18
   \   0000000C   E010               LDI     R17, 0
   \   0000000E   E14A               LDI     R20, 26
   \   00000010   E050               LDI     R21, 0
   \   00000012   ........           CALL    ?S_EC_MUL_L02
   \   00000016   01F8               MOVW    R31:R30, R17:R16
   \   00000018   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   0000001A   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   0000001C   E000               LDI     R16, 0
   \   0000001E   8B03               STD     Z+19, R16
    706                  UART[ch].RxState = SYNC ;
   \   00000020   2F02               MOV     R16, R18
   \   00000022   E010               LDI     R17, 0
   \   00000024   E14A               LDI     R20, 26
   \   00000026   E050               LDI     R21, 0
   \   00000028   ........           CALL    ?S_EC_MUL_L02
   \   0000002C   01F8               MOVW    R31:R30, R17:R16
   \   0000002E   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000030   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000032   E000               LDI     R16, 0
   \   00000034   8B02               STD     Z+18, R16
    707                  UART[ch].RxFirst = 0 ;
   \   00000036   2F02               MOV     R16, R18
   \   00000038   E010               LDI     R17, 0
   \   0000003A   E14A               LDI     R20, 26
   \   0000003C   E050               LDI     R21, 0
   \   0000003E   ........           CALL    ?S_EC_MUL_L02
   \   00000042   01F8               MOVW    R31:R30, R17:R16
   \   00000044   ....               SUBI    R30, LOW((-(UART) & 0xFFFF))
   \   00000046   ....               SBCI    R31, (-(UART) & 0xFFFF) >> 8
   \   00000048   E000               LDI     R16, 0
   \   0000004A   8704               STD     Z+12, R16
   \   0000004C   E000               LDI     R16, 0
   \   0000004E   8705               STD     Z+13, R16
    708              }
    709          }
   \                     ??GoToSyncUART_0:
   \   00000050   BF3F               OUT     0x3F, R19
   \   00000052   9508               RET

   \                                 In  segment SWITCH, align 2, keep-with-next
   \                     `?<Jumptable for CheckActionUart>_0`:
   \   00000000   E803               DW      59395
   \   00000002   01                 DB      1
   \   00000003   ....               DW      (??CheckActionUart_15) /2
   \   00000005   ....               DW      (??CheckActionUart_0) /2
   \   00000007   0A                 DB      0xa
   \   00000008   ....               DW      (??CheckActionUart_3) /2
   \   0000000A   0A                 DB      0xa
   \   0000000B   ....               DW      (??CheckActionUart_4) /2
   \   0000000D   32                 DB      0x32
   \   0000000E   ....               DW      (??CheckActionUart_5) /2
   \   00000010   0A                 DB      0xa
   \   00000011   ....               DW      (??CheckActionUart_6) /2
   \   00000013   0A                 DB      0xa
   \   00000014   ....               DW      (??CheckActionUart_7) /2
   \   00000016   0A                 DB      0xa
   \   00000017   ....               DW      (??CheckActionUart_1) /2
   \   00000019   0A                 DB      0xa
   \   0000001A   ....               DW      (??CheckActionUart_8) /2
   \   0000001C   1E                 DB      0x1e
   \   0000001D   ....               DW      (??CheckActionUart_1) /2
   \   0000001F   14                 DB      0x14
   \   00000020   ....               DW      (??CheckActionUart_1) /2
   \   00000022   28                 DB      0x28
   \   00000023   ....               DW      (??CheckActionUart_10) /2
   \   00000025   0A                 DB      0xa
   \   00000026   ....               DW      (??CheckActionUart_11) /2
   \   00000028   0A                 DB      0xa
   \   00000029   ....               DW      (??CheckActionUart_12) /2
   \   0000002B   0A                 DB      0xa
   \   0000002C   ....               DW      (??CheckActionUart_13) /2
   \   0000002E   0A                 DB      0xa
   \   0000002F   ....               DW      (??CheckActionUart_14) /2
   \   00000031   02FE9E             DB      254,0x2,0x9e
   \   00000034   ....               DW      (??CheckActionUart_2) /2
   \   00000036   FB                 DB      251
   \   00000037   00                 DB      0

   Maximum stack usage in bytes:

   CSTACK RSTACK Function
   ------ ------ --------
      4      2   BuildADEpromdata
        4      2 ?S_EC_MUL_L02
      6      2   BuildADInt
        6      2 ?S_EC_MUL_L02
      4      2   BuildANAFilter
        4      2 ?S_EC_MUL_L02
      4      2   BuildANASetup
        4      2 ?S_EC_MUL_L02
      7      2   BuildEEPROMData
        7      2   -> ReadEEPROMBuffer
        7      2 ?S_EC_MUL_L02
      8      2   BuildMDataANA
        8      2 ?S_EC_MUL_L02
      6      2   BuildStackStatus
        6      2 ?S_EC_MUL_L02
      6      2   BuildStatusData
        6      2   -> MyAddress
        6      2 ?S_EC_MUL_L02
      4      2   CalcDSRxChecksum
        4      2 ?S_EC_MUL_L02
      6      2   CalcDSTxChecksum
        6      2 ?S_EC_MUL_L02
      6      2   CheckActionUart
        6      2   -> BuildADInt
        6      2   -> BuildANAFilter
        6      2   -> BuildANASetup
        6      2   -> BuildEEPROMData
        6      2   -> BuildMDataANA
        6      2   -> BuildRS4Setup
        6      2   -> BuildStackStatus
        6      2   -> BuildStatusData
        6      2   -> GetANAFilter
        6      2   -> GetANASetup
        6      2   -> GetEEPROMData
        6      2   -> GetGotoBootloader
        6      2   -> GetResetEEPROM
        6      2 ?SV_SWITCH_L06
        6      2 ?S_EC_MUL_L02
      4      2   GetANAFilter
        4      2 ?S_EC_MUL_L02
      3      2   GetANASetup
        3      2   -> SetAnaPort
        3      2   -> WriteEEPROMByte
        3      2 ?S_EC_MUL_L02
      7      2   GetEEPROMData
        7      2   -> OS_Delay
        7      2   -> OS__Gettime
        7      2   -> WriteEEPROMBuffer
        7      2 ?S_EC_MUL_L02
      0      2   GetGotoBootloader
      3      2   GetResetEEPROM
        3      2   -> EEPROMReset
      0      2   GoToSyncUART
        0      2 ?S_EC_MUL_L02
      4      2   ReceivePacketUart
        4      2   -> CalcDSRxChecksum
        4      2   -> GoToSyncUART
        4      2   -> MyAddress
        4      2   -> OS_SignalEvent
        4      2 ?S_EC_MUL_L02
      0      2   TimoutUSART0
        0      2   -> GoToSyncUART
        0      2   -> OS_StopTimer
      0      2   TimoutUSART0On
        0      2   -> OS_StopTimer
      0      2   TimoutUSART1
        0      2   -> GoToSyncUART
        0      2   -> OS_StopTimer
      0      2   TimoutUSART1On
        0      2   -> OS_StopTimer
      1      2   Uart_BuildHeader
        1      2   -> MyAddress
        1      2 ?S_EC_MUL_L02
      4      2   Uart_BuildTail
        4      2   -> CalcDSTxChecksum
        4      2   -> OS_RetriggerTimer
        4      2   -> Uart_BuildHeader
        4      2 ?S_EC_MUL_L02
      1      2   Usart0Handler
        1      2   -> OS_Unuse
        1      2   -> OS_Use
        1      2   -> OS_WaitEventTimed
        1      2   -> UsartCheckPackage
      1      2   Usart1Handler
        1      2   -> OS_Unuse
        1      2   -> OS_Use
        1      2   -> OS_WaitEventTimed
        1      2   -> UsartCheckPackage
      4      2   UsartCheckPackage
        4      2   -> CheckActionUart
        4      2   -> GoToSyncUART
        4      2   -> Uart_BuildTail
        4      2 ?S_EC_MUL_L02


   Segment part sizes:

   Bytes  Function/Label
   -----  --------------
      56  ?<Jumptable for CheckActionUart>_0
     500  BuildADEpromdata
     632  BuildADInt
     480  BuildANAFilter
     562  BuildANASetup
     704  BuildEEPROMData
     690  BuildMDataANA
    1268  BuildStackStatus
    1396  BuildStatusData
     124  CalcDSRxChecksum
      82  CalcDSTxChecksum
     318  CheckActionUart
      66  GetANAFilter
     162  GetANASetup
     376  GetEEPROMData
      34  GetGotoBootloader
      18  GetResetEEPROM
      84  GoToSyncUART
     844  ReceivePacketUart
      50  TimoutUSART0
      12  TimoutUSART0On
      58  TimoutUSART1
      20  TimoutUSART1On
     450  Uart_BuildHeader
     908  Uart_BuildTail
      40  Usart0Handler
      40  Usart1Handler
     226  UsartCheckPackage
       2  _A_EEAR
       1  _A_EECR
       1  _A_EEDR
       1  _A_PORTE
       1  _A_UCSR0B
       1  _A_UCSR1B
       1  _A_WDTCR

 
      8 bytes in segment ABSOLUTE
 10 144 bytes in segment CODE
     56 bytes in segment SWITCH
 
 10 200 bytes of CODE memory
      0 bytes of DATA memory (+ 8 bytes shared)

Errors: none
Warnings: none
