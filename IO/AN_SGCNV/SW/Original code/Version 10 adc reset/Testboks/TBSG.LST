####################################################################################################
#                                                                                                  #
#     Micro Series H8/300 C-Compiler V2.20C/DXT                            31/Oct/96  19:17:43     #
#                                                                                                  #
#           Memory model  =  large                                                                 #
#           Source file   =  tbsg.c                                                                #
#           List file     =  tbsg.lst                                                              #
#           Object file   =  tbsg.r20                                                              #
#           Command line  =  -C -IC:\h8\ -e -q -L -P -ml -z -K tbsg                                #
#                                                                                                  #
#                                                     (c) Copyright IAR Systems, Hitachi Ltd. 1992 #
####################################################################################################


; Function name: InitRegs
; Used stack   : 2

; Function name: InitVar
; Used stack   : 4

; Function name: InitStartup
; Used stack   : 4

; Function name: GetMyAddress
; Used stack   : 2

; Function name: KickDog
; Used stack   : 2

; Function name: Led
; Used stack   : 4

; Function name: TxDriver
; Used stack   : 2

; Function name: OneMsecDelay
; Used stack   : 2

; Function name: SetEepromChannel
; Used stack   : 4

; Function name: SetSupplyChannel
; Used stack   : 6

; Function name: SetMuxChannel
; Used stack   : 4

; Function name: SetSupplyCurrent
; Used stack   : 2

; Function name: SetCalResistance
; Used stack   : 2

; Function name: CheckConvert
; Used stack   : 4

; Function name: ADConvert
; Used stack   : 6

; Function name: CalcPress
; Used stack   : 22

; Function name: CalcPercent
; Used stack   : 26

; Function name: CalcTemp
; Used stack   : 24

; Function name: CalcOther
; Used stack   : 16

; Function name: UnpackSensData
; Used stack   : 28

; Function name: CalcSensData
; Used stack   : 16

; Function name: FindTemp
; Used stack   : 6

; Function name: ReadAdByte
; Used stack   : 6

; Function name: WriteAdByte
; Used stack   : 6

; Function name: ResetRxPointer
; Used stack   : 2

; Function name: CalcRxChecksum
; Used stack   : 6

; Function name: HandleRxPacket
; Used stack   : 10

; Function name: ReceiveRxPacket
; Used stack   : 10

; Function name: Irq0Int
; Used stack   : 4

; Function name: Irq1Int
; Used stack   : 14

; Function name: Irq2Int
; Used stack   : 6

; Function name: FrtcInt
; Used stack   : 6

; Function name: FrtoInt
; Used stack   : 4

; Function name: TimInt
; Used stack   : 14

; Function name: Tx0Int
; Used stack   : 10

; Function name: Err0Int
; Used stack   : 8

; Function name: Rx0Int
; Used stack   : 10

; Function name: Tx1Int
; Used stack   : 8

; Function name: Err1Int
; Used stack   : 8

; Function name: Rx1Int
; Used stack   : 10

; Function name: main
; Used stack   : 2

   \   0000                    NAME    tbsg(16)
   \   0000                    RSEG    CODE(1)
   \   0000                    RSEG    CONST(1)
   \   0000                    COMMON  INTVEC(1)
   \   0000                    RSEG    UDATA(1)
   \   0000                    PUBLIC  ADConvert
   \   0000                    EXTERN  BuildCalData
   \   0000                    EXTERN  BuildHeader
   \   0000                    EXTERN  BuildMOData
   \   0000                    EXTERN  BuildMPData
   \   0000                    EXTERN  BuildMTData
   \   0000                    EXTERN  BuildROData
   \   0000                    EXTERN  BuildRPData
   \   0000                    EXTERN  BuildRTData
   \   0000                    EXTERN  BuildTail
   \   0000                    PUBLIC  CalcOther
   \   0000                    PUBLIC  CalcPercent
   \   0000                    PUBLIC  CalcPress
   \   0000                    PUBLIC  CalcRxChecksum
   \   0000                    PUBLIC  CalcSensData
   \   0000                    PUBLIC  CalcTemp
   \   0000                    EXTERN  CheckAction
   \   0000                    PUBLIC  CheckConvert
   \   0000                    EXTERN  CheckEepChannel
   \   0000                    PUBLIC  Err0Int
   \   0000                    PUBLIC  Err1Int
   \   0000                    PUBLIC  FindTemp
   \   0000                    PUBLIC  FrtcInt
   \   0000                    PUBLIC  FrtoInt
   \   0000                    PUBLIC  GetMyAddress
   \   0000                    PUBLIC  HandleRxPacket
   \   0000                    PUBLIC  InitRegs
   \   0000                    PUBLIC  InitStartup
   \   0000                    PUBLIC  InitVar
   \   0000                    PUBLIC  Irq0Int
   \   0000                    PUBLIC  Irq1Int
   \   0000                    PUBLIC  Irq2Int
   \   0000                    PUBLIC  KickDog
   \   0000                    PUBLIC  Led
   \   0000                    PUBLIC  OneMsecDelay
   \   0000                    PUBLIC  ReadAdByte
   \   0000                    PUBLIC  ReceiveRxPacket
   \   0000                    PUBLIC  ResetRxPointer
   \   0000                    PUBLIC  Rx0Int
   \   0000                    PUBLIC  Rx1Int
   \   0000                    PUBLIC  SetCalResistance
   \   0000                    PUBLIC  SetEepromChannel
   \   0000                    PUBLIC  SetMuxChannel
   \   0000                    PUBLIC  SetSupplyChannel
   \   0000                    PUBLIC  SetSupplyCurrent
   \   0000                    EXTERN  TestEep
   \   0000                    PUBLIC  TimInt
   \   0000                    PUBLIC  Tx0Int
   \   0000                    PUBLIC  Tx1Int
   \   0000                    PUBLIC  TxDriver
   \   0000                    PUBLIC  UnpackSensData
   \   0000                    PUBLIC  WriteAdByte
   \   0000                    PUBLIC  ad_gain
   \   0000                    PUBLIC  ad_mode
   \   0000                    PUBLIC  ad_settling
   \   0000                    PUBLIC  ad_state
   \   0000                    PUBLIC  ad_timeout_cnt
   \   0000                    PUBLIC  cal_data
   \   0000                    PUBLIC  cal_gain
   \   0000                    PUBLIC  ch_stat
   \   0000                    PUBLIC  crc
   \   0000                    PUBLIC  curr_ad_ch
   \   0000                    PUBLIC  curr_sens_data
   \   0000                    PUBLIC  display
   \   0000                    PUBLIC  eep_status
   \   0000                    PUBLIC  eep_type
   \   0000                    PUBLIC  gain
   \   0000                    PUBLIC  main
   \   0000                    PUBLIC  mes_data
   \   0000                    PUBLIC  ms_delay_cnt
   \   0000                    PUBLIC  my_address
   \   0000                    PUBLIC  not_cal_data
   \   0000                    PUBLIC  not_mes_data
   \   0000                    PUBLIC  not_raw_data
   \   0000                    PUBLIC  o_filter
   \   0000                    PUBLIC  offset
   \   0000                    PUBLIC  p_filter
   \   0000                    PUBLIC  packed_data
   \   0000                    EXTERN  pow
   \   0000                    PUBLIC  raw_data
   \   0000                    PUBLIC  rx_buff
   \   0000                    PUBLIC  rx_counter
   \   0000                    PUBLIC  rx_hndx
   \   0000                    PUBLIC  rx_indx
   \   0000                    PUBLIC  rx_packlen
   \   0000                    PUBLIC  rx_start
   \   0000                    PUBLIC  rx_state
   \   0000                    PUBLIC  rx_timeout
   \   0000                    PUBLIC  sec_cnt
   \   0000                    PUBLIC  sendtail
   \   0000                    PUBLIC  sens_data
   \   0000                    PUBLIC  sens_nl1
   \   0000                    PUBLIC  sens_nl2
   \   0000                    EXTERN  sqrt
   \   0000                    PUBLIC  t_filter
   \   0000                    PUBLIC  test_eep
   \   0000                    PUBLIC  time_b_cnt
   \   0000                    PUBLIC  time_b_temp
   \   0000                    PUBLIC  time_c_cnt
   \   0000                    PUBLIC  time_e_cnt
   \   0000                    PUBLIC  tx_buff
   \   0000                    PUBLIC  tx_bytes
   \   0000                    PUBLIC  tx_complete
   \   0000                    PUBLIC  tx_indx
   \   0000                    PUBLIC  tx_tail
   \   0000                    PUBLIC  wait_for_pc
   \   0000                    EXTERN  ?SS_MUL_L02
   \   0000                    EXTERN  ?F_ADD_L04
   \   0000                    EXTERN  ?F_SUB_L04
   \   0000                    EXTERN  ?F_SUB_SWAP_L04
   \   0000                    EXTERN  ?F_MUL_L04
   \   0000                    EXTERN  ?F_DIV_SWAP_L04
   \   0000                    EXTERN  ?F_DIV_L04
   \   0000                    EXTERN  ?UL_TO_FLT_L04
   \   0000                    EXTERN  ?SL_TO_FLT_L04
   \   0000                    EXTERN  ?FLT_TO_SL_L04
   \   0000                    EXTERN  ?CLH83L_2_20_L00
   \   0000                    RSEG    CODE
      1          /***** TBSG.C *************************************************************
      2          *
      3          *     Program for signal convertion card, AN-SGCNV
      4          *
      5          *     Company: ARISTON Norway as
      6          *
      7          *     Author: Asle Straume
      8          *
      9          *     Date: 1-aug-96.
     10          *
     11          *************************************************************************/
     12          
     13          #include "math.h"
     14          #include "stdio.h"
     15          #include "ioh8325.h"
     16          #include "inth8325.h"
     17          
     18          #include "tbsg.h"
     19          
     20          unsigned char           tx_buff[TX_SIZE] ;
     21          unsigned char           rx_buff[RX_SIZE] ;
     22          unsigned char           tx_indx ;
     23          unsigned char           tx_bytes ;
     24          unsigned char           tx_tail;
     25          unsigned char           wait_for_pc ;
     26          unsigned char           rx_indx ;
     27          unsigned char           rx_hndx ;
     28          unsigned char           rx_start ;
     29          unsigned char           rx_counter ;
     30          unsigned char           rx_packlen ;
     31          unsigned char           rx_timeout ;
     32          
     33          short                                   sens_data[UNPACKED_DATA_SIZE] ;       /*  unpacked data */
     34          signed char                     sens_nl1 ;                                                                      /* none linearity 1*/
     35          signed char                     sens_nl2 ;                                                                      /* none linearity 2*/
     36          
     37          unsigned char           packed_data[NOPSD][PACKED_DATA_SIZE] ; /* packed sensor data */
     38          
     39                                                                                                                                                          /* and the on board eep*/
     40          unsigned char           eep_status;                                                                     /* status byte of the eep*/
     41          unsigned char           time_b_temp;                                                            /* time between temp read */
     42          unsigned char           time_b_cnt;                                                             /* time between temp cnt */
     43          unsigned char           time_e_cnt;                                                             /* time between eep check */
     44          unsigned short          time_c_cnt;                                                             /* time between cal cnt */
     45          unsigned short          ad_timeout_cnt ;                                                /* timeout ad conv */
     46          unsigned short          sec_cnt ;                                                               /* seconds sounter */
     47          
     48          unsigned short          curr_sens_data ;                                /* sensor data from ad conv. */
     49          
     50          unsigned short          cal_data[NOIOCH] ;                      /* calibration data */
     51          unsigned short          raw_data[NOIOCH] ;                      /* raw data from senors */
     52          float                                   mes_data[NOIOCH];                               /* measured data result */
     53          float                                   gain[NOIOCH] ;                                  /* gain for sensors */
     54          short                                   offset[NOIOCH] ;                                /* offset for sensors */
     55          
     56          float                                   cal_gain;                                               /* gain for the 1 ohm resistor */
     57          
     58          unsigned char           not_mes_data ;                                  /* number of tx of measured data */
     59          unsigned char           not_raw_data ;                                  /* number of tx of raw data */
     60          unsigned char           not_cal_data ;                                  /* number of tx of calib. data */
     61          
     62          signed char                curr_ad_ch ;                         /* current ad ch */
     63          
     64          unsigned char           ad_state        ;                                               /* status for ad conversion */
     65          unsigned char           ad_mode ;                                               /* modus */
     66                                                                                                                    /*Bit 7 = test mode
     67                                                                                                                           Bit 6 = next cal conv.
     68                                                                                                                           Bit 5 =
     69                                                                                                                           Bit 4 = Start new channel
     70                                                                                                                           Bit 3 = Read temperature
     71                                                                                                                           Bit 2 = Read other
     72                                                                                                                           Bit 1 = Read Pressure
     73                                                                                                                           Bit 0 =                */
     74          unsigned long           ms_delay_cnt ;                          /* increased each millisecond */
     75          unsigned short          ad_settling ;                           /* ad settling timer */
     76          
     77          unsigned char           ad_gain ;                                       /* ad com register, keep gain */
     78          
     79          unsigned char           ch_stat[NOIOCH] ;                               /* sensor status */
     80                                                                                                            /*Bit  765
     81                                                                                                                                  x00 = Unknown
     82                                                                                                                                  x01 = temp
     83                                                                                                                                  x10 = inclinometer
     84                                                                                                                                  x11 = Press
     85                                                                                                                                  1xx = Mark new sensor
     86                                                                                                                  Bit     432
     87                                                                                                                                  000 = Unused
     88                                                                                                                                  001 = temp
     89                                                                                                                                  010 = inclinometer
     90                                                                                                                                  011 = Press
     91                                                                                                                                  1xx = Setup from PC
     92                                                                                                            Bit 1  cal status 0=OK 1=Fail
     93                                                                                                            Bit 0  conv. status 0=OK 1=Fail */
     94          
     95          unsigned char           eep_type[NOPSD] ;                       /* eeprom status*/
     96                                                                                                                  /* Bit 7654
     97                                                                                                                                   0000   = None
     98                                                                                                                                   0001 = Ok from sensor
     99                                                                                                                                   0010 = Error from sensor
    100                                                                                                                                   0011 =
    101                                                                                                                          Bit 3210
    102                                                                                                                                   x000 = None
    103                                                                                                                                   x001 = Ok from PC
    104                                                                                                                                   x010 = Error from PC
    105                                                                                                                                   1xxx = Use data from PC */
    106          
    107          unsigned char           p_filter ;                              /* pressure filter */
    108          unsigned char           t_filter ;                              /* temperature filter */
    109          unsigned char           o_filter ;                              /* "other" filter */
    110          unsigned char           my_address ;                    /* my address */
    111          unsigned char           rx_state ;                              /* rx state */
    112          unsigned char           tx_complete ;                   /* tx state */
    113          
    114          unsigned char           sendtail ;
    115          unsigned char     display[4] ;                  /* display mode */
    116          unsigned char           test_eep ;      
    117          
    118          const crc[] =                 /*Dallas Semiconductor one-wire CRC table */
    119          {
    120            0, 94, 188, 226, 97, 63, 221, 131, 194, 156, 126, 32, 163, 253, 31, 65,
    121            157, 195, 33, 127, 252, 162, 64, 30, 95, 1, 227, 189, 62, 96, 130, 220,
    122            35, 125, 159, 193, 66, 28, 254, 160, 225, 191, 93, 3, 128, 222, 60, 98,
    123            190, 224, 2, 92, 223, 129, 99, 61, 124, 34, 192, 158, 29, 67, 161, 255,
    124            70, 24, 250, 164, 39, 121, 155, 197, 132, 218, 56, 102, 229, 187, 89, 7,
    125            219, 133, 103, 57, 186, 228, 6, 88, 25, 71, 165, 251, 120, 38, 196, 154,
    126            101, 59, 217, 135, 4, 90, 184, 230, 167, 249, 27, 69, 198, 152, 122, 36,
    127            248, 166, 68, 26, 153, 199, 37, 123, 58, 100, 134, 216, 91, 5, 231, 185,
    128            140, 210, 48, 110, 237, 179, 81, 15, 78, 16, 242, 172, 47, 113, 147, 205,
    129            17, 79, 173, 243, 112, 46, 204, 146, 211, 141, 111, 49, 178, 236, 14, 80,
    130            175, 241, 19, 77, 206, 144, 114, 44, 109, 51, 209, 143, 12, 82, 176, 238,
    131            50, 108, 142, 208, 83, 13, 239, 177, 240, 174, 76, 18, 145, 207, 45, 115,
    132            202, 148, 118, 40, 171, 245, 23, 73, 8, 86, 180, 234, 105, 55, 213, 139,
    133            87, 9, 235, 181, 54, 104, 138, 212, 149, 203, 41, 119, 244, 170, 72, 22,
    134            233, 183, 85, 11, 136, 214, 52, 106, 43, 117, 151, 201, 74, 20, 246, 168,
    135            116, 42, 200, 150, 21, 75, 169, 247, 182, 232, 10, 84, 215, 137, 107, 53
    136          } ;
    137          
    138          
    139          
    140          /*************************************************************************
    141          *
    142          *  Initialize I/O ports
    143          *
    144          *  Set RS232 parametres
    145          *  Initialize interrupt system
    146          *
    147          *************************************************************************/
    148          void InitRegs(void)
    149          {
   \   0000            InitRegs:
    150          
    151                          /* Internal timer 1 ms */
    152            TMR1_TCR   =  0x4a;           /* int a, clear reg a, 1/64 clock (38600 Hz)*/
   \   0000  F94A              MOV.B   #74,R1L
   \   0002  39D0              MOV.B   R1L,@208:8
    153            TMR1_TCSR  = 0x00;            /* No invert p44 */
   \   0004  F900              MOV.B   #0,R1L
   \   0006  39D1              MOV.B   R1L,@209:8
    154            TMR1_TCORA =  37 ;            /* Set 38600/(37+1) = 1 msec compare */
   \   0008  F925              MOV.B   #37,R1L
   \   000A  39D2              MOV.B   R1L,@210:8
    155          
    156            P7DDR = 0x00 ;                        /* Port 7, all input */
   \   000C  F900              MOV.B   #0,R1L
   \   000E  39BC              MOV.B   R1L,@188:8
    157            P7DR = 0xff ;                 /* All pull-ups on */
   \   0010  F9FF              MOV.B   #255,R1L
   \   0012  39BE              MOV.B   R1L,@190:8
    158          
    159            P6DDR = 0x07  ;                       /* Port 6, P60,1,2 out, P6 3,4,5,6 input */
   \   0014  F907              MOV.B   #7,R1L
   \   0016  39B9              MOV.B   R1L,@185:8
    160            P6DR = 0xf8 ;                 /* Pull ups on P6 3-6 */
   \   0018  F9F8              MOV.B   #248,R1L
   \   001A  39BB              MOV.B   R1L,@187:8
    161          
    162            P5DDR = 0x2d ;                        /* Serial line I/O, may be not neccessary */
   \   001C  F92D              MOV.B   #45,R1L
   \   001E  39B8              MOV.B   R1L,@184:8
    163            P5DR = 0x12 ;                         /* internal pull up on input pins */
   \   0020  F912              MOV.B   #18,R1L
   \   0022  39BA              MOV.B   R1L,@186:8
    164          
    165            SCI0_SMR = SMR_0;             /* uart 0 mode */
   \   0024  F900              MOV.B   #0,R1L
   \   0026  39D8              MOV.B   R1L,@216:8
    166            SCI0_BRR = BRR_0;             /* uart0 baudrate */
   \   0028  F907              MOV.B   #7,R1L
   \   002A  39D9              MOV.B   R1L,@217:8
    167          
    168          /*SCI1_SMR = SMR_1;  */         /* uart1 mode,                  not used */
    169          /*SCI1_BRR = BRR_1;  */         /* uart1 baudrate,      not used */
    170          
    171            P4DDR = 0xd0 ;                        /* Port 4, P4 4,6,7 out, rest in */
   \   002C  F9D0              MOV.B   #208,R1L
   \   002E  39B5              MOV.B   R1L,@181:8
    172          
    173            P3DDR = 0xff ;                        /* All output */
   \   0030  F9FF              MOV.B   #255,R1L
   \   0032  39B4              MOV.B   R1L,@180:8
    174          
    175            P2DDR = 0x00 ;                        /* All input */
   \   0034  F900              MOV.B   #0,R1L
   \   0036  39B1              MOV.B   R1L,@177:8
    176            P2DR = 0xff ;                 /* All pull-ups on */
   \   0038  F9FF              MOV.B   #255,R1L
   \   003A  39B3              MOV.B   R1L,@179:8
    177          
    178            P1DDR = 0xff ;                        /* All output */
   \   003C  F9FF              MOV.B   #255,R1L
   \   003E  39B0              MOV.B   R1L,@176:8
    179          
    180            ISCR  = 0x8f;                         /* IRQ0, 1 and 2 on falling edge */
   \   0040  F98F              MOV.B   #143,R1L
   \   0042  39C6              MOV.B   R1L,@198:8
    181            IER   = 0xfe;                                 /* enable int 1, 2, Disable 0 */
   \   0044  F9FE              MOV.B   #254,R1L
   \   0046  39C7              MOV.B   R1L,@199:8
    182          
    183            set_interrupt_mask(0);        /* Enable interrupt */
   \   0048  067F              ANDC    #127,CCR
    184          
    185          }
   \   004A  5470              RTS
    186          
    187          /*************************************************************************
    188          *
    189          *       Initialize variables
    190          *
    191          *************************************************************************/
    192          void InitVar(void)
    193          {
   \   004C            InitVar:
   \   004C  6DF6              PUSH    R6
    194          
    195                  short i;
    196          /*
    197          **      Init the the com cannal variables
    198          */
    199                  tx_indx = 0 ;
   \   004E  F900              MOV.B   #0,R1L
   \   0050  6A8900E6          MOV.B   R1L,@tx_indx:16
    200                  tx_complete = TRUE ;
   \   0054  F901              MOV.B   #1,R1L
   \   0056  6A890336          MOV.B   R1L,@tx_complete:16
    201                  tx_bytes = 0 ;
   \   005A  F900              MOV.B   #0,R1L
   \   005C  6A8900E7          MOV.B   R1L,@tx_bytes:16
    202                  tx_tail = 0 ;
   \   0060  F900              MOV.B   #0,R1L
   \   0062  6A8900E8          MOV.B   R1L,@tx_tail:16
    203                  wait_for_pc = 0 ;
   \   0066  F900              MOV.B   #0,R1L
   \   0068  6A8900E9          MOV.B   R1L,@wait_for_pc:16
    204                  rx_indx = 1 ;
   \   006C  F901              MOV.B   #1,R1L
   \   006E  6A8900EA          MOV.B   R1L,@rx_indx:16
    205                  rx_hndx = 1 ;
   \   0072  F901              MOV.B   #1,R1L
   \   0074  6A8900EB          MOV.B   R1L,@rx_hndx:16
    206                  rx_start = 0 ;
   \   0078  F900              MOV.B   #0,R1L
   \   007A  6A8900EC          MOV.B   R1L,@rx_start:16
    207                  rx_buff[0] = 0 ;
   \   007E  F900              MOV.B   #0,R1L
   \   0080  6A890078          MOV.B   R1L,@rx_buff:16
    208                  rx_counter = 0 ;
   \   0084  F900              MOV.B   #0,R1L
   \   0086  6A8900ED          MOV.B   R1L,@rx_counter:16
    209                  rx_state = SYNC ;
   \   008A  F900              MOV.B   #0,R1L
   \   008C  6A890335          MOV.B   R1L,@rx_state:16
    210                  rx_timeout = 0 ;
   \   0090  F900              MOV.B   #0,R1L
   \   0092  6A8900EF          MOV.B   R1L,@rx_timeout:16
    211                  wait_for_pc = 0 ;
   \   0096  F900              MOV.B   #0,R1L
   \   0098  6A8900E9          MOV.B   R1L,@wait_for_pc:16
    212          /*
    213          **      Init channel variables
    214          */
    215                  for (i = 0; i< NOIOCH; i += 2) {
   \   009C  1966              SUB.W   R6,R6
   \   009E            ?0001:
   \   009E  7901000E          MOV.W   #14,R1
   \   00A2  1D16              CMP.W   R1,R6
   \   00A4  4C0A              BGE     ?0000
   \   00A6            ?0002:
    216                          ch_stat[i] = 0x0c ;                    /*channel setup, try pressure */
   \   00A6  F90C              MOV.B   #12,R1L
   \   00A8  6EE9031B          MOV.B   R1L,@(ch_stat,R6)
   \   00AC  0B86              ADDS.W  #2,R6
    217                  }
    218                  for (i = 1; i< NOIOCH; i += 2) {
   \   00AE  40EE              BRA     ?0001
   \   00B0            ?0000:
   \   00B0  79060001          MOV.W   #1,R6
   \   00B4            ?0005:
   \   00B4  7901000E          MOV.W   #14,R1
   \   00B8  1D16              CMP.W   R1,R6
   \   00BA  4C0A              BGE     ?0004
   \   00BC            ?0006:
    219                          ch_stat[i] = 0x04 ;                    /*channel setup, try temp */
   \   00BC  F904              MOV.B   #4,R1L
   \   00BE  6EE9031B          MOV.B   R1L,@(ch_stat,R6)
   \   00C2  0B86              ADDS.W  #2,R6
    220                  }
    221                  for (i = 0; i< NOPSD; i++) {
   \   00C4  40EE              BRA     ?0005
   \   00C6            ?0004:
   \   00C6  1966              SUB.W   R6,R6
   \   00C8            ?0009:
   \   00C8  79010008          MOV.W   #8,R1
   \   00CC  1D16              CMP.W   R1,R6
   \   00CE  4C0A              BGE     ?0008
   \   00D0            ?0010:
    222                          eep_type[i] = 0 ;                      /*eeprom status */
   \   00D0  F900              MOV.B   #0,R1L
   \   00D2  6EE90329          MOV.B   R1L,@(eep_type,R6)
   \   00D6  0B06              ADDS.W  #1,R6
    223                  }
    224                  for (i = 0; i< NOIOCH; i++) {
   \   00D8  40EE              BRA     ?0009
   \   00DA            ?0008:
   \   00DA  1966              SUB.W   R6,R6
   \   00DC            ?0013:
   \   00DC  7901000E          MOV.W   #14,R1
   \   00E0  1D16              CMP.W   R1,R6
   \   00E2  4C22              BGE     ?0012
   \   00E4            ?0014:
    225                          offset[i] = 0 ;                                 /*channel setup, offest */
   \   00E4  0D61              MOV.W   R6,R1
   \   00E6  0911              ADD.W   R1,R1
   \   00E8  1933              SUB.W   R3,R3
   \   00EA  6F9302EE          MOV.W   R3,@(offset,R1)
    226                          gain[i] = 1.0;
   \   00EE  0D61              MOV.W   R6,R1
   \   00F0  0911              ADD.W   R1,R1
   \   00F2  0911              ADD.W   R1,R1
   \   00F4  1922              SUB.W   R2,R2
   \   00F6  79003F80          MOV.W   #16256,R0
   \   00FA  6F9202B8          MOV.W   R2,@(gain+2,R1)
   \   00FE  6F9002B6          MOV.W   R0,@(gain,R1)
   \   0102  0B06              ADDS.W  #1,R6
    227                  }
    228          
    229          /*
    230          **      Init other variables
    231          */
    232          
    233                  cal_gain = 1.0 ;
   \   0104  40D6              BRA     ?0013
   \   0106            ?0012:
   \   0106  1911              SUB.W   R1,R1
   \   0108  79003F80          MOV.W   #16256,R0
   \   010C  6B81030C          MOV.W   R1,@cal_gain+2:16
   \   0110  6B80030A          MOV.W   R0,@cal_gain:16
    234                  p_filter = 0 ;
   \   0114  F900              MOV.B   #0,R1L
   \   0116  6A890331          MOV.B   R1L,@p_filter:16
    235                  t_filter = 0 ;
   \   011A  F900              MOV.B   #0,R1L
   \   011C  6A890332          MOV.B   R1L,@t_filter:16
    236                  o_filter = 0 ;
   \   0120  F900              MOV.B   #0,R1L
   \   0122  6A890333          MOV.B   R1L,@o_filter:16
    237                  sec_cnt = SEC_CNT_INIT;                                         /* initvalue for 1 sec couinter */
   \   0126  790103E8          MOV.W   #1000,R1
   \   012A  6B810242          MOV.W   R1,@sec_cnt:16
    238                  ad_state = IDLE ;                                                               /* no convertion */
   \   012E  F907              MOV.B   #7,R1L
   \   0130  6A890312          MOV.B   R1L,@ad_state:16
    239                  curr_ad_ch = NOIOCH  ;
   \   0134  F90E              MOV.B   #14,R1L
   \   0136  6A890311          MOV.B   R1L,@curr_ad_ch:16
    240                  ad_mode = 0x84 ;                                                        /* test mode on and start with press.*/
   \   013A  F984              MOV.B   #132,R1L
   \   013C  6A890313          MOV.B   R1L,@ad_mode:16
    241                  ad_gain = 0 ;                                   /* gain 1 */
   \   0140  F900              MOV.B   #0,R1L
   \   0142  6A89031A          MOV.B   R1L,@ad_gain:16
    242                  time_b_temp = 5 ;                       /* continious temp readings */
   \   0146  F905              MOV.B   #5,R1L
   \   0148  6A89023B          MOV.B   R1L,@time_b_temp:16
    243                  time_b_cnt = 0 ;
   \   014C  F900              MOV.B   #0,R1L
   \   014E  6A89023C          MOV.B   R1L,@time_b_cnt:16
    244                  time_c_cnt = 0 ;
   \   0152  1911              SUB.W   R1,R1
   \   0154  6B81023E          MOV.W   R1,@time_c_cnt:16
    245                  time_e_cnt = TIME_BETWEEN_EEP ;
   \   0158  F90F              MOV.B   #15,R1L
   \   015A  6A89023D          MOV.B   R1L,@time_e_cnt:16
    246                  not_mes_data = 0 ;
   \   015E  F900              MOV.B   #0,R1L
   \   0160  6A89030E          MOV.B   R1L,@not_mes_data:16
    247                  not_raw_data = 0 ;
   \   0164  F900              MOV.B   #0,R1L
   \   0166  6A89030F          MOV.B   R1L,@not_raw_data:16
    248                  not_cal_data = 0 ;
   \   016A  F900              MOV.B   #0,R1L
   \   016C  6A890310          MOV.B   R1L,@not_cal_data:16
    249          }
   \   0170  6D76              POP     R6
   \   0172  5470              RTS
    250          
    251          /*************************************************************************
    252          *
    253          *       Startup
    254          *
    255          *************************************************************************/
    256          void InitStartup(void)
    257          {
   \   0174            InitStartup:
    258          
    259                  P5DR |= ADCLK ;                                                 /*      set AD clock line high */
   \   0174  7FBA7050          BSET    #5,@186:8
    260          
    261                  Led(1, OFF) ;                                                   /* switch leds off */
   \   0178  1911              SUB.W   R1,R1
   \   017A  6DF1              MOV.W   R1,@-SP
   \   017C  79010001          MOV.W   #1,R1
   \   0180  5544              BSR     Led
   \   0182  0B87              ADDS.W  #2,SP
    262                  Led(2, OFF) ;
   \   0184  1911              SUB.W   R1,R1
   \   0186  6DF1              MOV.W   R1,@-SP
   \   0188  79010002          MOV.W   #2,R1
   \   018C  5538              BSR     Led
   \   018E  0B87              ADDS.W  #2,SP
    263          
    264                  TxDriver(OFF) ;                                                 /* tx enable off */
   \   0190  1911              SUB.W   R1,R1
   \   0192  5E000218          JSR     @TxDriver:16
    265                  SetEepromChannel(EEPCHOFF) ;                    /* set eeprom channel off */
   \   0196  F909              MOV.B   #9,R1L
   \   0198  5E000256          JSR     @SetEepromChannel:16
    266                  SetMuxChannel(MUXCHOFF) ;                               /* set mux channel off */
   \   019C  F910              MOV.B   #16,R1L
   \   019E  5E0002D0          JSR     @SetMuxChannel:16
    267                  SetSupplyChannel(EEPCHOFF) ;                    /* set supply channel off */
   \   01A2  F909              MOV.B   #9,R1L
   \   01A4  5E000280          JSR     @SetSupplyChannel:16
    268                  SetSupplyCurrent(1);                                            /* set 1 mA supply */
   \   01A8  F901              MOV.B   #1,R1L
   \   01AA  5E000302          JSR     @SetSupplyCurrent:16
    269          
    270                  GetMyAddress() ;                                                        /* get my address */
   \   01AE  5502              BSR     GetMyAddress
    271          
    272          }
   \   01B0  5470              RTS
    273          
    274          
    275          /*************************************************************************
    276          *
    277          *  Get my address from address switch
    278          *
    279          *************************************************************************/
    280          unsigned char GetMyAddress(void)
    281          {
   \   01B2            GetMyAddress:
    282          
    283            my_address  = (P4DR & 0x0f + 10) ;           /* Bit 0-3 */
    284                                                        /* add 10 due to protocole */
    285            return my_address;
   \   01B2  29B7              MOV.B   @183:8,R1L
   \   01B4  E919              AND.B   #25,R1L
   \   01B6  6A890334          MOV.B   R1L,@my_address:16
    286          }
   \   01BA  5470              RTS
    287          
    288          /*************************************************************************
    289          *
    290          *  Kick watch dog
    291          *
    292          *************************************************************************/
    293          void KickDog(void)
    294          {
   \   01BC            KickDog:
    295          
    296                  P6DR &= ~WATCH_DOG;
   \   01BC  7FBB7200          BCLR    #0,@187:8
    297                  P6DR |=  WATCH_DOG;
   \   01C0  7FBB7000          BSET    #0,@187:8
    298          }
   \   01C4  5470              RTS
    299          
    300          /*************************************************************************
    301          *
    302          *  Write to the leds
    303          *
    304          *************************************************************************/
    305          void Led(short no, short state)
    306          {
   \   01C6            Led:
   \   01C6  6DF6              PUSH    R6
   \   01C8  6F760004          MOV.W   @(4,SP),R6
    307                  switch (no) {
   \   01CC  A100              CMP.B   #0,R1H
   \   01CE  4620              BNE     ?0022
   \   01D0  A901              CMP.B   #1,R1L
   \   01D2  461C              BNE     ?0022
   \   01D4            ?0017:
    308                  case    1:                              /* LED 1 */
    309                          switch (state) {
   \   01D4  A600              CMP.B   #0,R6H
   \   01D6  460A              BNE     ?0020
   \   01D8  AE01              CMP.B   #1,R6L
   \   01DA  4606              BNE     ?0020
   \   01DC            ?0019:
    310                          case ON :
    311                                  P6DR &= ~LED1;
   \   01DC  7FBB7210          BCLR    #1,@187:8
    312                                  break ;
   \   01E0  400C              BRA     ?0018
   \   01E2            ?0020:
   \   01E2  A600              CMP.B   #0,R6H
   \   01E4  4604              BNE     ?0021
   \   01E6  AE00              CMP.B   #0,R6L
   \   01E8  4600              BNE     ?0021
   \   01EA            ?0021:
    313                          case OFF :
    314                          default :
    315                                  P6DR |= LED1;
   \   01EA  7FBB7010          BSET    #1,@187:8
    316                                  break ;
   \   01EE            ?0018:
    317                          }
    318                          break ;
   \   01EE  4024              BRA     ?0016
   \   01F0            ?0022:
   \   01F0  A100              CMP.B   #0,R1H
   \   01F2  4620              BNE     ?0027
   \   01F4  A902              CMP.B   #2,R1L
   \   01F6  461C              BNE     ?0027
    319                  case    2:                              /* LED 2 */
    320                          switch (state) {
   \   01F8  A600              CMP.B   #0,R6H
   \   01FA  460A              BNE     ?0025
   \   01FC  AE01              CMP.B   #1,R6L
   \   01FE  4606              BNE     ?0025
   \   0200            ?0024:
    321                          case ON :
    322                                  P4DR &= ~LED2;
   \   0200  7FB77240          BCLR    #4,@183:8
    323                                  break ;
   \   0204  400C              BRA     ?0023
   \   0206            ?0025:
   \   0206  A600              CMP.B   #0,R6H
   \   0208  4604              BNE     ?0026
   \   020A  AE00              CMP.B   #0,R6L
   \   020C  4600              BNE     ?0026
   \   020E            ?0026:
    324                          case OFF :
    325                          default :
    326                                  P4DR |= LED2;
   \   020E  7FB77040          BSET    #4,@183:8
    327                                  break ;
   \   0212            ?0023:
    328                          }
    329                          break ;
   \   0212  4000              BRA     ?0016
   \   0214            ?0027:
    330                   default :
    331                          break ;
   \   0214            ?0016:
    332                   }
    333          }
   \   0214  6D76              POP     R6
   \   0216  5470              RTS
    334          
    335          
    336          /*************************************************************************
    337          *
    338          *  Enable / disable RS485 driver on SCI0
    339          *
    340          *************************************************************************/
    341          void TxDriver(short state)
    342          {
   \   0218            TxDriver:
    343          
    344                  switch (state) {
   \   0218  A100              CMP.B   #0,R1H
   \   021A  460A              BNE     ?0030
   \   021C  A901              CMP.B   #1,R1L
   \   021E  4606              BNE     ?0030
   \   0220            ?0029:
    345                  case ON :                      /* driver on */
    346                          P5DR |= TXE;
   \   0220  7FBA7020          BSET    #2,@186:8
    347                          break;
   \   0224  400E              BRA     ?0028
   \   0226            ?0030:
   \   0226  A100              CMP.B   #0,R1H
   \   0228  460A              BNE     ?0031
   \   022A  A900              CMP.B   #0,R1L
   \   022C  4606              BNE     ?0031
    348                  case OFF :                     /* driver off */
    349                          P5DR &= ~TXE;
   \   022E  7FBA7220          BCLR    #2,@186:8
    350                          break;
   \   0232  4000              BRA     ?0028
   \   0234            ?0031:
    351                  default :
    352                          break;
   \   0234            ?0028:
    353                  }
    354          }
   \   0234  5470              RTS
    355          
    356          
    357          /*************************************************************************
    358          *
    359          *  Return from this function after  time * 1ms
    360          *
    361          *************************************************************************/
    362          void OneMsecDelay(unsigned long time)
    363          {
   \   0236            OneMsecDelay:
    364                  ms_delay_cnt = time ;
   \   0236  6B810316          MOV.W   R1,@ms_delay_cnt+2:16
   \   023A  6B800314          MOV.W   R0,@ms_delay_cnt:16
   \   023E            ?0033:
    365                  while (ms_delay_cnt) {       /* wait for time * 1ms */
   \   023E  6B010316          MOV.W   @ms_delay_cnt+2:16,R1
   \   0242  6B000314          MOV.W   @ms_delay_cnt:16,R0
   \   0246  1419              OR.B    R1H,R1L
   \   0248  1408              OR.B    R0H,R0L
   \   024A  1489              OR.B    R0L,R1L
   \   024C  4706              BEQ     ?0032
   \   024E            ?0034:
    366                          KickDog() ;
   \   024E  5E0001BC          JSR     @KickDog:16
    367                  }
    368          }
   \   0252  40EA              BRA     ?0033
   \   0254            ?0032:
   \   0254  5470              RTS
    369          
    370          
    371          /*************************************************************************
    372          *
    373          *  Set com channel to a eeprom DS2430
    374          *
    375          *************************************************************************/
    376          void SetEepromChannel(unsigned char channel)
    377          {
   \   0256            SetEepromChannel:
   \   0256  6DF6              PUSH    R6
   \   0258  0C9E              MOV.B   R1L,R6L
    378                  if (channel == EEPCHOFF) {
   \   025A  A909              CMP.B   #9,R1L
   \   025C  4608              BNE     ?0036
   \   025E            ?0035:
    379                          P1DR &= ~0x3C ;                                                         /* switch off any channel */
   \   025E  29B2              MOV.B   @178:8,R1L
   \   0260  E9C3              AND.B   #195,R1L
   \   0262  39B2              MOV.B   R1L,@178:8
    380                  } else {
   \   0264  4016              BRA     ?0037
   \   0266            ?0036:
    381                          P1DR &= ~0x3C ;                                                         /* switch off any output */
   \   0266  29B2              MOV.B   @178:8,R1L
   \   0268  E9C3              AND.B   #195,R1L
   \   026A  39B2              MOV.B   R1L,@178:8
    382                          P1DR |= ((channel & 0x7) << 2) | 0x20 ;  /* set channel and enable bit */
   \   026C  0CE9              MOV.B   R6L,R1L
   \   026E  E907              AND.B   #7,R1L
   \   0270  1009              SHLL.B  R1L
   \   0272  1009              SHLL.B  R1L
   \   0274  C920              OR.B    #32,R1L
   \   0276  2BB2              MOV.B   @178:8,R3L
   \   0278  149B              OR.B    R1L,R3L
   \   027A  3BB2              MOV.B   R3L,@178:8
   \   027C            ?0037:
    383                  }
    384          }
   \   027C  6D76              POP     R6
   \   027E  5470              RTS
    385          
    386          
    387          /*************************************************************************
    388          *
    389          *  Set supply channel to a sensor
    390          *
    391          *************************************************************************/
    392          void SetSupplyChannel(unsigned char channel)
    393          {
   \   0280            SetSupplyChannel:
   \   0280  6DF5              PUSH    R5
   \   0282  6DF6              PUSH    R6
   \   0284  0C9D              MOV.B   R1L,R5L
    394                  unsigned char ch_tmp;
    395          
    396                  if (channel == SUPPCHOFF) {
   \   0286  A910              CMP.B   #16,R1L
   \   0288  460E              BNE     ?0039
   \   028A            ?0038:
    397                          P1DR &= ~0x03 ;                                                         /* switch off any channel */
   \   028A  29B2              MOV.B   @178:8,R1L
   \   028C  E9FC              AND.B   #252,R1L
   \   028E  39B2              MOV.B   R1L,@178:8
    398                          P3DR &= ~0xe0 ;
   \   0290  29B6              MOV.B   @182:8,R1L
   \   0292  E91F              AND.B   #31,R1L
   \   0294  39B6              MOV.B   R1L,@182:8
    399                  } else {
   \   0296  4032              BRA     ?0040
   \   0298            ?0039:
    400                          P1DR &= ~0x03 ;                                                         /* switch off any channel */
   \   0298  29B2              MOV.B   @178:8,R1L
   \   029A  E9FC              AND.B   #252,R1L
   \   029C  39B2              MOV.B   R1L,@178:8
    401                          P3DR &= ~0xe0 ;
   \   029E  29B6              MOV.B   @182:8,R1L
   \   02A0  E91F              AND.B   #31,R1L
   \   02A2  39B6              MOV.B   R1L,@182:8
    402                          ch_tmp = channel ;                              /* remember the channel no */
   \   02A4  0CDE              MOV.B   R5L,R6L
    403                          P3DR |= ((channel & 0x07) << 5) ;
   \   02A6  0CD9              MOV.B   R5L,R1L
   \   02A8  E907              AND.B   #7,R1L
   \   02AA  1389              ROTR.B  R1L
   \   02AC  1389              ROTR.B  R1L
   \   02AE  1389              ROTR.B  R1L
   \   02B0  E9E0              AND.B   #224,R1L
   \   02B2  2BB6              MOV.B   @182:8,R3L
   \   02B4  149B              OR.B    R1L,R3L
   \   02B6  3BB6              MOV.B   R3L,@182:8
    404                          P1DR |= ((ch_tmp & 0x08) >> 3) | 0x02 ; /* set channel and enable bit */
   \   02B8  0CE9              MOV.B   R6L,R1L
   \   02BA  E908              AND.B   #8,R1L
   \   02BC  1109              SHLR.B  R1L
   \   02BE  1109              SHLR.B  R1L
   \   02C0  1109              SHLR.B  R1L
   \   02C2  C902              OR.B    #2,R1L
   \   02C4  2BB2              MOV.B   @178:8,R3L
   \   02C6  149B              OR.B    R1L,R3L
   \   02C8  3BB2              MOV.B   R3L,@178:8
   \   02CA            ?0040:
    405                  }
    406          }
   \   02CA  6D76              POP     R6
   \   02CC  6D75              POP     R5
   \   02CE  5470              RTS
    407          
    408          /*************************************************************************
    409          *
    410          *  Set mux channel to a sensor
    411          *
    412          *************************************************************************/
    413          void SetMuxChannel(unsigned char channel)
    414          {
   \   02D0            SetMuxChannel:
   \   02D0  6DF6              PUSH    R6
   \   02D2  0C9E              MOV.B   R1L,R6L
    415          
    416                  if (channel == MUXCHOFF) {
   \   02D4  A910              CMP.B   #16,R1L
   \   02D6  4608              BNE     ?0042
   \   02D8            ?0041:
    417                          P3DR &= ~0x1f ;                                                         /* switch off any channel */
   \   02D8  29B6              MOV.B   @182:8,R1L
   \   02DA  E9E0              AND.B   #224,R1L
   \   02DC  39B6              MOV.B   R1L,@182:8
    418                  } else {
   \   02DE  401E              BRA     ?0043
   \   02E0            ?0042:
    419                          P3DR &= ~0x1f ;                                 /* switch off any channel */
   \   02E0  29B6              MOV.B   @182:8,R1L
   \   02E2  E9E0              AND.B   #224,R1L
   \   02E4  39B6              MOV.B   R1L,@182:8
    420                          P3DR |= (channel & 0x07) ;
   \   02E6  0CE9              MOV.B   R6L,R1L
   \   02E8  E907              AND.B   #7,R1L
   \   02EA  2BB6              MOV.B   @182:8,R3L
   \   02EC  149B              OR.B    R1L,R3L
   \   02EE  3BB6              MOV.B   R3L,@182:8
    421                          if (channel < 8 ) {                                                     /* set E1 or E2 */
   \   02F0  AE08              CMP.B   #8,R6L
   \   02F2  4406              BCC     ?0045
   \   02F4            ?0044:
    422                                  P3DR |= 0x08 ;                                                  /* set enable bit 1 */
   \   02F4  7FB67030          BSET    #3,@182:8
    423                          } else {
   \   02F8  4004              BRA     ?0046
   \   02FA            ?0045:
    424                                  P3DR |= 0x10 ;                                                  /* set enable bit 2 */
   \   02FA  7FB67040          BSET    #4,@182:8
   \   02FE            ?0046:
   \   02FE            ?0043:
    425                          }
    426                  }
    427          }
   \   02FE  6D76              POP     R6
   \   0300  5470              RTS
    428          
    429          /*************************************************************************
    430          *
    431          *  Set 1 / 10 mA sypply current
    432          *
    433          *************************************************************************/
    434          void SetSupplyCurrent(unsigned char current)
    435          {
   \   0302            SetSupplyCurrent:
    436                  if (current == 10 ) {
   \   0302  A90A              CMP.B   #10,R1L
   \   0304  4606              BNE     ?0048
   \   0306            ?0047:
    437                          P4DR &= ~SELMA ;                                                                /* set 10 mA */
   \   0306  7FB77270          BCLR    #7,@183:8
    438                  } else {
   \   030A  4004              BRA     ?0049
   \   030C            ?0048:
    439                          P4DR |= SELMA ;                                                                 /* set 1 mA */
   \   030C  7FB77070          BSET    #7,@183:8
   \   0310            ?0049:
    440                  }
    441          }
   \   0310  5470              RTS
    442          
    443          /*************************************************************************
    444          *
    445          *  Select calibration resistance
    446          *
    447          *************************************************************************/
    448          void SetCalResistance(unsigned char value)
    449          {
   \   0312            SetCalResistance:
    450                  switch (value) {
   \   0312  A940              CMP.B   #64,R1L
   \   0314  460A              BNE     ?0052
   \   0316            ?0051:
    451                  case OHM_1R :                                                                                   /* 1 ohm resistor */
    452                          P1DR |= OHM_1R ;
   \   0316  7FB27060          BSET    #6,@178:8
    453                          P1DR &= ~OHM_1K ;
   \   031A  7FB27270          BCLR    #7,@178:8
    454                          break ;
   \   031E  4014              BRA     ?0050
   \   0320            ?0052:
   \   0320  A980              CMP.B   #128,R1L
   \   0322  460A              BNE     ?0053
    455                  case OHM_1K :                                                                           /* 1000 ohm resistor */
    456                          P1DR |= OHM_1K ;
   \   0324  7FB27070          BSET    #7,@178:8
    457                          P1DR &= ~OHM_1R ;
   \   0328  7FB27260          BCLR    #6,@178:8
    458                          break ;
   \   032C  4006              BRA     ?0050
   \   032E            ?0053:
    459                  default :                                                                               /* both off */
    460                          P1DR &= ~(OHM_1R | OHM_1K) ;
   \   032E  29B2              MOV.B   @178:8,R1L
   \   0330  E93F              AND.B   #63,R1L
   \   0332  39B2              MOV.B   R1L,@178:8
    461                          break ;
   \   0334            ?0050:
    462                  }
    463          }
   \   0334  5470              RTS
    464          
    465          /*************************************************************************
    466          *
    467          *  Check new convertion*
    468          *************************************************************************/
    469          void CheckConvert(void)
    470          {
   \   0336            CheckConvert:
    471          
    472                  if (ad_state == IDLE ) {                        /* New channel? */
   \   0336  6A090312          MOV.B   @ad_state:16,R1L
   \   033A  A907              CMP.B   #7,R1L
   \   033C  4704              BEQ     $+6
   \   033E  5A0004B6          JMP     @?0055:16
   \   0342            ?0054:
    473                          ad_state = START_NEW_POINT ;
   \   0342  F901              MOV.B   #1,R1L
   \   0344  6A890312          MOV.B   R1L,@ad_state:16
    474                          if (curr_ad_ch < (NOIOCH-1)) {
   \   0348  6A090311          MOV.B   @curr_ad_ch:16,R1L
   \   034C  A90D              CMP.B   #13,R1L
   \   034E  4C0E              BGE     ?0057
   \   0350            ?0056:
    475                                  curr_ad_ch++ ;
   \   0350  6A090311          MOV.B   @curr_ad_ch:16,R1L
   \   0354  8901              ADD.B   #1,R1L
   \   0356  6A890311          MOV.B   R1L,@curr_ad_ch:16
    476                          } else {
   \   035A  5A0004B6          JMP     @?0058:16
   \   035E            ?0057:
    477                                  curr_ad_ch = 0 ;
   \   035E  F900              MOV.B   #0,R1L
   \   0360  6A890311          MOV.B   R1L,@curr_ad_ch:16
    478                                  if (!time_e_cnt) {
   \   0364  6A09023D          MOV.B   @time_e_cnt:16,R1L
   \   0368  461A              BNE     ?0060
   \   036A            ?0059:
    479                                          if (ad_mode & 0x80) {                           /* test */
   \   036A  6A090313          MOV.B   @ad_mode:16,R1L
   \   036E  E980              AND.B   #128,R1L
   \   0370  4708              BEQ     ?0062
   \   0372            ?0061:
    480                                                  ad_mode &= ~0x80 ;                              /* test mode off */
   \   0372  79010313          MOV.W   #ad_mode,R1
   \   0376  7D107270          BCLR    #7,@R1
   \   037A            ?0062:
    481                                          }
    482                                          CheckEepChannel()       ;                                       /* Check the sensordata */
   \   037A  5E000000          JSR     @CheckEepChannel:16
    483                                          time_e_cnt = TIME_BETWEEN_EEP ;
   \   037E  F90F              MOV.B   #15,R1L
   \   0380  6A89023D          MOV.B   R1L,@time_e_cnt:16
   \   0384            ?0060:
    484                                  }
    485                                  if (not_mes_data && (ad_mode & 0x02)) {         /* autosend? */
   \   0384  6A09030E          MOV.B   @not_mes_data:16,R1L
   \   0388  4730              BEQ     ?0064
   \   038A  6A090313          MOV.B   @ad_mode:16,R1L
   \   038E  E902              AND.B   #2,R1L
   \   0390  4728              BEQ     ?0064
   \   0392            ?0066:
   \   0392            ?0065:
   \   0392            ?0063:
    486                                          BuildHeader() ;                                         /* Build send packet header */
   \   0392  5E000000          JSR     @BuildHeader:16
    487                                          BuildMPData();                                          /* Build data p. for pressure */
   \   0396  5E000000          JSR     @BuildMPData:16
    488                                          BuildMTData();                                          /* Build data p. for temp */
   \   039A  5E000000          JSR     @BuildMTData:16
    489                                          BuildMOData();                                          /* Build data p. for other */
   \   039E  5E000000          JSR     @BuildMOData:16
    490                                          BuildTail(NO_MORE_DATA, 0) ;    /* Build tail */
   \   03A2  F900              MOV.B   #0,R1L
   \   03A4  6DF1              MOV.W   R1,@-SP
   \   03A6  F900              MOV.B   #0,R1L
   \   03A8  5E000000          JSR     @BuildTail:16
   \   03AC  0B87              ADDS.W  #2,SP
    491                                          not_mes_data-- ;
   \   03AE  6A09030E          MOV.B   @not_mes_data:16,R1L
   \   03B2  89FF              ADD.B   #-1,R1L
   \   03B4  6A89030E          MOV.B   R1L,@not_mes_data:16
    492                                  } else if (not_raw_data && (ad_mode & 0x02)) {  /* autosend? */
   \   03B8  4062              BRA     ?0067
   \   03BA            ?0064:
   \   03BA  6A09030F          MOV.B   @not_raw_data:16,R1L
   \   03BE  4730              BEQ     ?0069
   \   03C0  6A090313          MOV.B   @ad_mode:16,R1L
   \   03C4  E902              AND.B   #2,R1L
   \   03C6  4728              BEQ     ?0069
   \   03C8            ?0071:
   \   03C8            ?0070:
   \   03C8            ?0068:
    493                                          BuildHeader() ;                                         /* Build send packet header */
   \   03C8  5E000000          JSR     @BuildHeader:16
    494                                          BuildRPData();                                          /* Build data p. for pressure */
   \   03CC  5E000000          JSR     @BuildRPData:16
    495                                          BuildRTData();                                          /* Build data p. for temp */
   \   03D0  5E000000          JSR     @BuildRTData:16
    496                                          BuildROData();                                          /* Build data p. for other */
   \   03D4  5E000000          JSR     @BuildROData:16
    497                                          BuildTail(NO_MORE_DATA, 0) ;    /* Build tail */
   \   03D8  F900              MOV.B   #0,R1L
   \   03DA  6DF1              MOV.W   R1,@-SP
   \   03DC  F900              MOV.B   #0,R1L
   \   03DE  5E000000          JSR     @BuildTail:16
   \   03E2  0B87              ADDS.W  #2,SP
    498                                          not_raw_data-- ;
   \   03E4  6A09030F          MOV.B   @not_raw_data:16,R1L
   \   03E8  89FF              ADD.B   #-1,R1L
   \   03EA  6A89030F          MOV.B   R1L,@not_raw_data:16
    499                                  } else if (not_cal_data && (ad_mode & 0x02)) {  /* autosend? */
   \   03EE  402C              BRA     ?0072
   \   03F0            ?0069:
   \   03F0  6A090310          MOV.B   @not_cal_data:16,R1L
   \   03F4  4726              BEQ     ?0074
   \   03F6  6A090313          MOV.B   @ad_mode:16,R1L
   \   03FA  E902              AND.B   #2,R1L
   \   03FC  471E              BEQ     ?0074
   \   03FE            ?0076:
   \   03FE            ?0075:
   \   03FE            ?0073:
    500                                          BuildHeader() ;                                         /* Build send packet header */
   \   03FE  5E000000          JSR     @BuildHeader:16
    501                                          BuildCalData();                                         /* Build data p. for calib */
   \   0402  5E000000          JSR     @BuildCalData:16
    502                                          BuildTail(NO_MORE_DATA, 0) ;    /* Build tail */
   \   0406  F900              MOV.B   #0,R1L
   \   0408  6DF1              MOV.W   R1,@-SP
   \   040A  F900              MOV.B   #0,R1L
   \   040C  5E000000          JSR     @BuildTail:16
   \   0410  0B87              ADDS.W  #2,SP
    503                                          not_cal_data-- ;
   \   0412  6A090310          MOV.B   @not_cal_data:16,R1L
   \   0416  89FF              ADD.B   #-1,R1L
   \   0418  6A890310          MOV.B   R1L,@not_cal_data:16
   \   041C            ?0074:
   \   041C            ?0072:
   \   041C            ?0067:
    504                                  }
    505                                  if (ad_mode & 0x08) {                   /* temp readings */
   \   041C  6A090313          MOV.B   @ad_mode:16,R1L
   \   0420  E908              AND.B   #8,R1L
   \   0422  471A              BEQ     ?0078
   \   0424            ?0077:
    506                                          ad_mode &= ~0x0e ;
   \   0424  6A090313          MOV.B   @ad_mode:16,R1L
   \   0428  E9F1              AND.B   #241,R1L
   \   042A  6A890313          MOV.B   R1L,@ad_mode:16
    507                                          ad_mode |= 0x04 ;
   \   042E  79010313          MOV.W   #ad_mode,R1
   \   0432  7D107020          BSET    #2,@R1
    508                                          ad_state = START_CALIBRATION ;
   \   0436  F904              MOV.B   #4,R1L
   \   0438  6A890312          MOV.B   R1L,@ad_state:16
    509                                  } else if (ad_mode & 0x04) {    /* "other" */
   \   043C  4064              BRA     ?0079
   \   043E            ?0078:
   \   043E  6A090313          MOV.B   @ad_mode:16,R1L
   \   0442  E904              AND.B   #4,R1L
   \   0444  471A              BEQ     ?0081
   \   0446            ?0080:
    510                                          ad_mode &= ~0x0e ;
   \   0446  6A090313          MOV.B   @ad_mode:16,R1L
   \   044A  E9F1              AND.B   #241,R1L
   \   044C  6A890313          MOV.B   R1L,@ad_mode:16
    511                                          ad_mode |= 0x02 ;
   \   0450  79010313          MOV.W   #ad_mode,R1
   \   0454  7D107010          BSET    #1,@R1
    512                                          ad_state = START_CALIBRATION ;
   \   0458  F904              MOV.B   #4,R1L
   \   045A  6A890312          MOV.B   R1L,@ad_state:16
    513                                  } else if (ad_mode & 0x02) {                    /* pressure */
   \   045E  4042              BRA     ?0082
   \   0460            ?0081:
   \   0460  6A090313          MOV.B   @ad_mode:16,R1L
   \   0464  E902              AND.B   #2,R1L
   \   0466  4728              BEQ     ?0084
   \   0468            ?0083:
    514                                          if (!time_b_cnt) {
   \   0468  6A09023C          MOV.B   @time_b_cnt:16,R1L
   \   046C  4620              BNE     ?0086
   \   046E            ?0085:
    515                                                  ad_mode &= ~0x0e ;
   \   046E  6A090313          MOV.B   @ad_mode:16,R1L
   \   0472  E9F1              AND.B   #241,R1L
   \   0474  6A890313          MOV.B   R1L,@ad_mode:16
    516                                                  ad_mode |= 0x08 ;                                       /* convert temp */
   \   0478  79010313          MOV.W   #ad_mode,R1
   \   047C  7D107030          BSET    #3,@R1
    517                                                  ad_state = START_CALIBRATION ;
   \   0480  F904              MOV.B   #4,R1L
   \   0482  6A890312          MOV.B   R1L,@ad_state:16
    518                                                  time_b_cnt = time_b_temp ;              /* reload counter */
   \   0486  6A09023B          MOV.B   @time_b_temp:16,R1L
   \   048A  6A89023C          MOV.B   R1L,@time_b_cnt:16
   \   048E            ?0086:
    519                                          }
    520                                  } else {
   \   048E  4012              BRA     ?0087
   \   0490            ?0084:
    521                                          ad_mode &= ~0x0e ;
   \   0490  6A090313          MOV.B   @ad_mode:16,R1L
   \   0494  E9F1              AND.B   #241,R1L
   \   0496  6A890313          MOV.B   R1L,@ad_mode:16
    522                                          ad_mode |= 0x04 ;                                               /* next pressure */
   \   049A  79010313          MOV.W   #ad_mode,R1
   \   049E  7D107020          BSET    #2,@R1
   \   04A2            ?0087:
   \   04A2            ?0082:
   \   04A2            ?0079:
    523                                  }
    524                                  if (!time_c_cnt) {
   \   04A2  6B01023E          MOV.W   @time_c_cnt:16,R1
   \   04A6  460E              BNE     ?0089
   \   04A8            ?0088:
    525                                          time_c_cnt = TIME_BETWEEN_CAL ; /*reaload timer */
   \   04A8  7901012C          MOV.W   #300,R1
   \   04AC  6B81023E          MOV.W   R1,@time_c_cnt:16
    526                                          ad_state = START_CALIBRATION ;
   \   04B0  F904              MOV.B   #4,R1L
   \   04B2  6A890312          MOV.B   R1L,@ad_state:16
   \   04B6            ?0089:
   \   04B6            ?0058:
   \   04B6            ?0055:
    527                                  }
    528                          }
    529                  }
    530                  if (tx_complete) {
   \   04B6  6A090336          MOV.B   @tx_complete:16,R1L
   \   04BA  4702              BEQ     ?0091
   \   04BC            ?0090:
    531                          ADConvert() ;                                                   /* convert data */
   \   04BC  5502              BSR     ADConvert
   \   04BE            ?0091:
    532                  }
    533          }
   \   04BE  5470              RTS
    534          
    535          /*************************************************************************
    536          *
    537          *  Convert sensor data
    538          *
    539          *************************************************************************/
    540          void ADConvert(void)
    541          {
   \   04C0            ADConvert:
    542          
    543                  switch (ad_state) {
   \   04C0  6A090312          MOV.B   @ad_state:16,R1L
   \   04C4  A901              CMP.B   #1,R1L
   \   04C6  4704              BEQ     $+6
   \   04C8  5A000614          JMP     @?0108:16
   \   04CC            ?0093:
    544                  case    START_NEW_POINT :
    545                          ad_timeout_cnt = AD_TIMEOUT ;                                   /* timeout ad cnv */
   \   04CC  790107D0          MOV.W   #2000,R1
   \   04D0  6B810240          MOV.W   R1,@ad_timeout_cnt:16
    546                          switch ((ch_stat[curr_ad_ch]>> 2) & 0x03) {
   \   04D4  6A090311          MOV.B   @curr_ad_ch:16,R1L
   \   04D8  7779              BLD     #7,R1L
   \   04DA  1E11              SUBX.B  R1H,R1H
   \   04DC  6E1B031B          MOV.B   @(ch_stat,R1),R3L
   \   04E0  110B              SHLR.B  R3L
   \   04E2  110B              SHLR.B  R3L
   \   04E4  EB03              AND.B   #3,R3L
   \   04E6  AB03              CMP.B   #3,R3L
   \   04E8  4664              BNE     ?0099
   \   04EA            ?0095:
    547                          case 0x03 :                              /* pressure */
    548                                  if (ad_mode & 0x02) {                   /* pressure readings */
   \   04EA  6A090313          MOV.B   @ad_mode:16,R1L
   \   04EE  E902              AND.B   #2,R1L
   \   04F0  4752              BEQ     ?0097
   \   04F2            ?0096:
    549                                          Led(2, ON)      ;                                       /* ASt mark test only */
   \   04F2  79010001          MOV.W   #1,R1
   \   04F6  6DF1              MOV.W   R1,@-SP
   \   04F8  79010002          MOV.W   #2,R1
   \   04FC  5E0001C6          JSR     @Led:16
   \   0500  0B87              ADDS.W  #2,SP
    550                                          SetCalResistance(OHM_1R);
   \   0502  F940              MOV.B   #64,R1L
   \   0504  5E000312          JSR     @SetCalResistance:16
    551                                          SetSupplyChannel(curr_ad_ch) ;
   \   0508  6A090311          MOV.B   @curr_ad_ch:16,R1L
   \   050C  5E000280          JSR     @SetSupplyChannel:16
    552                                          SetSupplyCurrent(10) ;
   \   0510  F90A              MOV.B   #10,R1L
   \   0512  5E000302          JSR     @SetSupplyCurrent:16
    553                                          SetMuxChannel(curr_ad_ch) ;
   \   0516  6A090311          MOV.B   @curr_ad_ch:16,R1L
   \   051A  5E0002D0          JSR     @SetMuxChannel:16
    554                                          ad_gain = 3 ;
   \   051E  F903              MOV.B   #3,R1L
   \   0520  6A89031A          MOV.B   R1L,@ad_gain:16
    555                                          WriteAdByte(ad_gain | 0x10) ;                           /* Next write data */
   \   0524  6A09031A          MOV.B   @ad_gain:16,R1L
   \   0528  C910              OR.B    #16,R1L
   \   052A  5E00211A          JSR     @WriteAdByte:16
    556                                          WriteAdByte(0x2c) ;                                                     /* Ad setup data */
   \   052E  F92C              MOV.B   #44,R1L
   \   0530  5E00211A          JSR     @WriteAdByte:16
    557                                          ad_settling = AD_SET_TIME ;                             /* wait 67 ms */
   \   0534  79010043          MOV.W   #67,R1
   \   0538  6B810318          MOV.W   R1,@ad_settling:16
    558                                          ad_state = WAIT_FOR_INTERRUPT ;                         /* next state */
   \   053C  F902              MOV.B   #2,R1L
   \   053E  6A890312          MOV.B   R1L,@ad_state:16
    559                                  } else {
   \   0542  4006              BRA     ?0098
   \   0544            ?0097:
    560                                          ad_state = IDLE ;
   \   0544  F907              MOV.B   #7,R1L
   \   0546  6A890312          MOV.B   R1L,@ad_state:16
   \   054A            ?0098:
    561                                  }
    562                                  break;
   \   054A  5A000610          JMP     @?0094:16
   \   054E            ?0099:
   \   054E  AB02              CMP.B   #2,R3L
   \   0550  4652              BNE     ?0103
    563                          case 0x02 :                               /* "OTHER " */
    564                                  if (ad_mode & 0x04) {                   /* other readings */
   \   0552  6A090313          MOV.B   @ad_mode:16,R1L
   \   0556  E904              AND.B   #4,R1L
   \   0558  4742              BEQ     ?0101
   \   055A            ?0100:
    565                                          SetCalResistance(OHM_1K);
   \   055A  F980              MOV.B   #128,R1L
   \   055C  5E000312          JSR     @SetCalResistance:16
    566                                          SetSupplyChannel(curr_ad_ch) ;
   \   0560  6A090311          MOV.B   @curr_ad_ch:16,R1L
   \   0564  5E000280          JSR     @SetSupplyChannel:16
    567                                          SetSupplyCurrent(1) ;
   \   0568  F901              MOV.B   #1,R1L
   \   056A  5E000302          JSR     @SetSupplyCurrent:16
    568                                          SetMuxChannel(curr_ad_ch) ;
   \   056E  6A090311          MOV.B   @curr_ad_ch:16,R1L
   \   0572  5E0002D0          JSR     @SetMuxChannel:16
    569                                          ad_gain = 0 ;
   \   0576  F900              MOV.B   #0,R1L
   \   0578  6A89031A          MOV.B   R1L,@ad_gain:16
    570                                          WriteAdByte(ad_gain | 0x10) ;                           /* Next write data */
   \   057C  6A09031A          MOV.B   @ad_gain:16,R1L
   \   0580  C910              OR.B    #16,R1L
   \   0582  5E00211A          JSR     @WriteAdByte:16
    571                                          WriteAdByte(0x2c) ;                                                     /* Ad setup data */
   \   0586  F92C              MOV.B   #44,R1L
   \   0588  5E00211A          JSR     @WriteAdByte:16
    572                                          ad_settling = AD_SET_TIME ;                             /* wait 67 ms */
   \   058C  79010043          MOV.W   #67,R1
   \   0590  6B810318          MOV.W   R1,@ad_settling:16
    573                                          ad_state = WAIT_FOR_INTERRUPT ;                         /* next state */
   \   0594  F902              MOV.B   #2,R1L
   \   0596  6A890312          MOV.B   R1L,@ad_state:16
    574                                  } else {
   \   059A  4006              BRA     ?0102
   \   059C            ?0101:
    575                                          ad_state = IDLE ;
   \   059C  F907              MOV.B   #7,R1L
   \   059E  6A890312          MOV.B   R1L,@ad_state:16
   \   05A2            ?0102:
    576                                  }
    577                                  break;
   \   05A2  406C              BRA     ?0094
   \   05A4            ?0103:
   \   05A4  AB01              CMP.B   #1,R3L
   \   05A6  4662              BNE     ?0107
    578                          case 0x01 :                               /* temp */
    579                                  if (ad_mode & 0x08) {                           /* convert temp? */
   \   05A8  6A090313          MOV.B   @ad_mode:16,R1L
   \   05AC  E908              AND.B   #8,R1L
   \   05AE  4752              BEQ     ?0105
   \   05B0            ?0104:
    580                                          Led(1, ON)      ;                                       /* ASt mark test only */
   \   05B0  79010001          MOV.W   #1,R1
   \   05B4  6DF1              MOV.W   R1,@-SP
   \   05B6  79010001          MOV.W   #1,R1
   \   05BA  5E0001C6          JSR     @Led:16
   \   05BE  0B87              ADDS.W  #2,SP
    581                                          SetCalResistance(OHM_1R);
   \   05C0  F940              MOV.B   #64,R1L
   \   05C2  5E000312          JSR     @SetCalResistance:16
    582                                          SetSupplyChannel(curr_ad_ch) ;
   \   05C6  6A090311          MOV.B   @curr_ad_ch:16,R1L
   \   05CA  5E000280          JSR     @SetSupplyChannel:16
    583                                          SetSupplyCurrent(1) ;
   \   05CE  F901              MOV.B   #1,R1L
   \   05D0  5E000302          JSR     @SetSupplyCurrent:16
    584                                          SetMuxChannel(curr_ad_ch) ;
   \   05D4  6A090311          MOV.B   @curr_ad_ch:16,R1L
   \   05D8  5E0002D0          JSR     @SetMuxChannel:16
    585                                          ad_gain = 0 ;
   \   05DC  F900              MOV.B   #0,R1L
   \   05DE  6A89031A          MOV.B   R1L,@ad_gain:16
    586                                          WriteAdByte(ad_gain | 0x10) ;                           /* Next write data */
   \   05E2  6A09031A          MOV.B   @ad_gain:16,R1L
   \   05E6  C910              OR.B    #16,R1L
   \   05E8  5E00211A          JSR     @WriteAdByte:16
    587                                          WriteAdByte(0x2c) ;                                                     /* Ad setup data */
   \   05EC  F92C              MOV.B   #44,R1L
   \   05EE  5E00211A          JSR     @WriteAdByte:16
    588                                          ad_settling = AD_SET_TIME ;                      /* wait 67 ms */
   \   05F2  79010043          MOV.W   #67,R1
   \   05F6  6B810318          MOV.W   R1,@ad_settling:16
    589                                          ad_state = WAIT_FOR_INTERRUPT ;                  /* next state */
   \   05FA  F902              MOV.B   #2,R1L
   \   05FC  6A890312          MOV.B   R1L,@ad_state:16
    590                                   } else {
   \   0600  4006              BRA     ?0106
   \   0602            ?0105:
    591                                          ad_state = IDLE ;
   \   0602  F907              MOV.B   #7,R1L
   \   0604  6A890312          MOV.B   R1L,@ad_state:16
   \   0608            ?0106:
    592                                   }
    593                                  break;
   \   0608  4006              BRA     ?0094
   \   060A            ?0107:
    594                          default :
    595                                  ad_state = IDLE ;
   \   060A  F907              MOV.B   #7,R1L
   \   060C  6A890312          MOV.B   R1L,@ad_state:16
    596                                  break ;
   \   0610            ?0094:
    597                          }
    598                          break ;
   \   0610  5A000B78          JMP     @?0092:16
   \   0614            ?0108:
   \   0614  A902              CMP.B   #2,R1L
   \   0616  4604              BNE     ?0109
    599                  case    WAIT_FOR_INTERRUPT :
    600                          break ;
   \   0618  5A000B78          JMP     @?0092:16
   \   061C            ?0109:
   \   061C  A903              CMP.B   #3,R1L
   \   061E  4704              BEQ     $+6
   \   0620  5A000AB6          JMP     @?0151:16
    601                  case    CONV_COMPLETE :
    602                          WriteAdByte(ad_gain | 0x38) ;                   /* Next read data */
   \   0624  6A09031A          MOV.B   @ad_gain:16,R1L
   \   0628  C938              OR.B    #56,R1L
   \   062A  5E00211A          JSR     @WriteAdByte:16
    603                          if (ad_mode & 0x40) {                                   /* cal point ? */
   \   062E  6A090313          MOV.B   @ad_mode:16,R1L
   \   0632  E940              AND.B   #64,R1L
   \   0634  4604              BNE     $+6
   \   0636  5A0009EC          JMP     @?0111:16
   \   063A            ?0110:
    604                                  cal_data[curr_ad_ch] = ReadAdByte()* 256 ;
   \   063A  5E0020EE          JSR     @ReadAdByte:16
   \   063E  F100              MOV.B   #0,R1H
   \   0640  0C91              MOV.B   R1L,R1H
   \   0642  F900              MOV.B   #0,R1L
   \   0644  6A0B0311          MOV.B   @curr_ad_ch:16,R3L
   \   0648  777B              BLD     #7,R3L
   \   064A  1E33              SUBX.B  R3H,R3H
   \   064C  0933              ADD.W   R3,R3
   \   064E  6FB10246          MOV.W   R1,@(cal_data,R3)
    605                                  cal_data[curr_ad_ch] += ReadAdByte() ;                  /*read data */
   \   0652  5E0020EE          JSR     @ReadAdByte:16
   \   0656  F100              MOV.B   #0,R1H
   \   0658  6A0B0311          MOV.B   @curr_ad_ch:16,R3L
   \   065C  777B              BLD     #7,R3L
   \   065E  1E33              SUBX.B  R3H,R3H
   \   0660  0933              ADD.W   R3,R3
   \   0662  6F300246          MOV.W   @(cal_data,R3),R0
   \   0666  0910              ADD.W   R1,R0
   \   0668  6FB00246          MOV.W   R0,@(cal_data,R3)
    606                                  ad_mode &= ~0x40 ;
   \   066C  79010313          MOV.W   #ad_mode,R1
   \   0670  7D107260          BCLR    #6,@R1
    607                                  SetSupplyCurrent(1) ;
   \   0674  F901              MOV.B   #1,R1L
   \   0676  5E000302          JSR     @SetSupplyCurrent:16
    608                                  SetMuxChannel(MUXCHOFF) ;
   \   067A  F910              MOV.B   #16,R1L
   \   067C  5E0002D0          JSR     @SetMuxChannel:16
    609                                  SetSupplyChannel(SUPPCHOFF) ;
   \   0680  F910              MOV.B   #16,R1L
   \   0682  5E000280          JSR     @SetSupplyChannel:16
    610                                  SetCalResistance(OFF);
   \   0686  F900              MOV.B   #0,R1L
   \   0688  5E000312          JSR     @SetCalResistance:16
    611                                  ad_state = IDLE ;
   \   068C  F907              MOV.B   #7,R1L
   \   068E  6A890312          MOV.B   R1L,@ad_state:16
    612                                  ad_timeout_cnt = 0 ;                                                    /* timeout off */
   \   0692  1911              SUB.W   R1,R1
   \   0694  6B810240          MOV.W   R1,@ad_timeout_cnt:16
    613          
    614                                  switch ((ch_stat[curr_ad_ch]>> 2) & 0x03) {
   \   0698  6A090311          MOV.B   @curr_ad_ch:16,R1L
   \   069C  7779              BLD     #7,R1L
   \   069E  1E11              SUBX.B  R1H,R1H
   \   06A0  6E1B031B          MOV.B   @(ch_stat,R1),R3L
   \   06A4  110B              SHLR.B  R3L
   \   06A6  110B              SHLR.B  R3L
   \   06A8  EB03              AND.B   #3,R3L
   \   06AA  AB03              CMP.B   #3,R3L
   \   06AC  4704              BEQ     $+6
   \   06AE  5A00086A          JMP     @?0128:16
   \   06B2            ?0113:
    615                                  case 0x03 :                                /* pressure */
    616                                          cal_data[curr_ad_ch] = (unsigned short)((float) cal_data[curr_ad_ch]
    617                                                                                                          * cal_gain) ;    /* adjust for resistor errors */
   \   06B2  6A090311          MOV.B   @curr_ad_ch:16,R1L
   \   06B6  7779              BLD     #7,R1L
   \   06B8  1E11              SUBX.B  R1H,R1H
   \   06BA  0911              ADD.W   R1,R1
   \   06BC  6F110246          MOV.W   @(cal_data,R1),R1
   \   06C0  1900              SUB.W   R0,R0
   \   06C2  5E000000          JSR     @?UL_TO_FLT_L04
   \   06C6  6B03030C          MOV.W   @cal_gain+2:16,R3
   \   06CA  6B02030A          MOV.W   @cal_gain:16,R2
   \   06CE  5E000000          JSR     @?F_MUL_L04
   \   06D2  5E000000          JSR     @?FLT_TO_SL_L04
   \   06D6  6A0B0311          MOV.B   @curr_ad_ch:16,R3L
   \   06DA  777B              BLD     #7,R3L
   \   06DC  1E33              SUBX.B  R3H,R3H
   \   06DE  0933              ADD.W   R3,R3
   \   06E0  6FB10246          MOV.W   R1,@(cal_data,R3)
    618                                          if ((cal_data[curr_ad_ch] > MAX_PRE_CAL) ||
    619                                                   (cal_data[curr_ad_ch] < MIN_PRE_CAL)) {
   \   06E4  6A090311          MOV.B   @curr_ad_ch:16,R1L
   \   06E8  7779              BLD     #7,R1L
   \   06EA  1E11              SUBX.B  R1H,R1H
   \   06EC  0911              ADD.W   R1,R1
   \   06EE  6F110246          MOV.W   @(cal_data,R1),R1
   \   06F2  A9B8              CMP.B   #184,R1L
   \   06F4  B188              SUBX.B  #136,R1H
   \   06F6  4214              BHI     ?0114
   \   06F8  6A090311          MOV.B   @curr_ad_ch:16,R1L
   \   06FC  7779              BLD     #7,R1L
   \   06FE  1E11              SUBX.B  R1H,R1H
   \   0700  0911              ADD.W   R1,R1
   \   0702  6F110246          MOV.W   @(cal_data,R1),R1
   \   0706  A9A8              CMP.B   #168,R1L
   \   0708  B161              SUBX.B  #97,R1H
   \   070A  4414              BCC     ?0115
   \   070C            ?0116:
   \   070C            ?0117:
   \   070C            ?0114:
    620                                            ch_stat[curr_ad_ch] |= 0x02 ;                 /* Calibration fail */
   \   070C  6A090311          MOV.B   @curr_ad_ch:16,R1L
   \   0710  7779              BLD     #7,R1L
   \   0712  1E11              SUBX.B  R1H,R1H
   \   0714  6E1B031B          MOV.B   @(ch_stat,R1),R3L
   \   0718  CB02              OR.B    #2,R3L
   \   071A  6E9B031B          MOV.B   R3L,@(ch_stat,R1)
    621                                          } else {
   \   071E  4012              BRA     ?0118
   \   0720            ?0115:
    622                                                  ch_stat[curr_ad_ch] &= ~0x02 ;                  /* Calibration OK */
   \   0720  6A090311          MOV.B   @curr_ad_ch:16,R1L
   \   0724  7779              BLD     #7,R1L
   \   0726  1E11              SUBX.B  R1H,R1H
   \   0728  6E1B031B          MOV.B   @(ch_stat,R1),R3L
   \   072C  EBFD              AND.B   #253,R3L
   \   072E  6E9B031B          MOV.B   R3L,@(ch_stat,R1)
   \   0732            ?0118:
    623                                          }
    624                                          if ((cal_data[curr_ad_ch] > FMAX_PRE_CAL)||
    625                                                   (cal_data[curr_ad_ch] < FMIN_PRE_CAL)) {
   \   0732  6A090311          MOV.B   @curr_ad_ch:16,R1L
   \   0736  7779              BLD     #7,R1L
   \   0738  1E11              SUBX.B  R1H,R1H
   \   073A  0911              ADD.W   R1,R1
   \   073C  6F110246          MOV.W   @(cal_data,R1),R1
   \   0740  A960              CMP.B   #96,R1L
   \   0742  B1EA              SUBX.B  #234,R1H
   \   0744  4214              BHI     ?0119
   \   0746  6A090311          MOV.B   @curr_ad_ch:16,R1L
   \   074A  7779              BLD     #7,R1L
   \   074C  1E11              SUBX.B  R1H,R1H
   \   074E  0911              ADD.W   R1,R1
   \   0750  6F110246          MOV.W   @(cal_data,R1),R1
   \   0754  A9D0              CMP.B   #208,R1L
   \   0756  B107              SUBX.B  #7,R1H
   \   0758  446A              BCC     ?0120
   \   075A            ?0121:
   \   075A            ?0122:
   \   075A            ?0119:
    626                                                  ch_stat[curr_ad_ch] |= 0x01 ;                   /* Reading fail */
   \   075A  6A090311          MOV.B   @curr_ad_ch:16,R1L
   \   075E  7779              BLD     #7,R1L
   \   0760  1E11              SUBX.B  R1H,R1H
   \   0762  6E1B031B          MOV.B   @(ch_stat,R1),R3L
   \   0766  CB01              OR.B    #1,R3L
   \   0768  6E9B031B          MOV.B   R3L,@(ch_stat,R1)
    627                                                  eep_type[curr_ad_ch >> 1] = 0 ;         /* clear read status */
   \   076C  6A090311          MOV.B   @curr_ad_ch:16,R1L
   \   0770  1189              SHAR.B  R1L
   \   0772  7779              BLD     #7,R1L
   \   0774  1E11              SUBX.B  R1H,R1H
   \   0776  FB00              MOV.B   #0,R3L
   \   0778  6E9B0329          MOV.B   R3L,@(eep_type,R1)
    628                                                  mes_data[curr_ad_ch] = 0.0 ;        /* ASt mark ?? */
   \   077C  6A090311          MOV.B   @curr_ad_ch:16,R1L
   \   0780  7779              BLD     #7,R1L
   \   0782  1E11              SUBX.B  R1H,R1H
   \   0784  0911              ADD.W   R1,R1
   \   0786  0911              ADD.W   R1,R1
   \   0788  1922              SUB.W   R2,R2
   \   078A  1900              SUB.W   R0,R0
   \   078C  6F920280          MOV.W   R2,@(mes_data+2,R1)
   \   0790  6F90027E          MOV.W   R0,@(mes_data,R1)
    629                                                  raw_data[curr_ad_ch] = curr_sens_data ; /* sen raw raw */
   \   0794  6A090311          MOV.B   @curr_ad_ch:16,R1L
   \   0798  7779              BLD     #7,R1L
   \   079A  1E11              SUBX.B  R1H,R1H
   \   079C  0911              ADD.W   R1,R1
   \   079E  6B030244          MOV.W   @curr_sens_data:16,R3
   \   07A2  6F930262          MOV.W   R3,@(raw_data,R1)
    630                                                  if (ad_mode & 0x80) {                                                   /* test */
   \   07A6  6A090313          MOV.B   @ad_mode:16,R1L
   \   07AA  E980              AND.B   #128,R1L
   \   07AC  4712              BEQ     ?0124
   \   07AE            ?0123:
    631                                                          ch_stat[curr_ad_ch] &= 0 ;                              /* no sensor */
   \   07AE  6A090311          MOV.B   @curr_ad_ch:16,R1L
   \   07B2  7779              BLD     #7,R1L
   \   07B4  1E11              SUBX.B  R1H,R1H
   \   07B6  6E1B031B          MOV.B   @(ch_stat,R1),R3L
   \   07BA  EB00              AND.B   #0,R3L
   \   07BC  6E9B031B          MOV.B   R3L,@(ch_stat,R1)
   \   07C0            ?0124:
    632                                                  }
    633                                          } else {
   \   07C0  5A00084A          JMP     @?0125:16
   \   07C4            ?0120:
    634                                                  if (ad_mode & 0x80) {                                                   /* test */
   \   07C4  6A090313          MOV.B   @ad_mode:16,R1L
   \   07C8  E980              AND.B   #128,R1L
   \   07CA  4712              BEQ     ?0127
   \   07CC            ?0126:
    635                                                          ch_stat[curr_ad_ch] |= 0x60 ;                           /* pr. sensor  OK*/
   \   07CC  6A090311          MOV.B   @curr_ad_ch:16,R1L
   \   07D0  7779              BLD     #7,R1L
   \   07D2  1E11              SUBX.B  R1H,R1H
   \   07D4  6E1B031B          MOV.B   @(ch_stat,R1),R3L
   \   07D8  CB60              OR.B    #96,R3L
   \   07DA  6E9B031B          MOV.B   R3L,@(ch_stat,R1)
   \   07DE            ?0127:
    636                                                  }
    637                                                  ch_stat[curr_ad_ch] &= ~0x01 ;                  /* Reading OK */
   \   07DE  6A090311          MOV.B   @curr_ad_ch:16,R1L
   \   07E2  7779              BLD     #7,R1L
   \   07E4  1E11              SUBX.B  R1H,R1H
   \   07E6  6E1B031B          MOV.B   @(ch_stat,R1),R3L
   \   07EA  EBFE              AND.B   #254,R3L
   \   07EC  6E9B031B          MOV.B   R3L,@(ch_stat,R1)
    638                                                  raw_data[curr_ad_ch] = (unsigned short) (curr_sens_data * 10000.0
    639                                                                                                            / cal_data[curr_ad_ch]) ;
   \   07F0  6B010244          MOV.W   @curr_sens_data:16,R1
   \   07F4  1900              SUB.W   R0,R0
   \   07F6  5E000000          JSR     @?UL_TO_FLT_L04
   \   07FA  79034000          MOV.W   #16384,R3
   \   07FE  7902461C          MOV.W   #17948,R2
   \   0802  5E000000          JSR     @?F_MUL_L04
   \   0806  6A0B0311          MOV.B   @curr_ad_ch:16,R3L
   \   080A  777B              BLD     #7,R3L
   \   080C  1E33              SUBX.B  R3H,R3H
   \   080E  0933              ADD.W   R3,R3
   \   0810  6DF1              MOV.W   R1,@-SP
   \   0812  6F310246          MOV.W   @(cal_data,R3),R1
   \   0816  6DF0              MOV.W   R0,@-SP
   \   0818  1900              SUB.W   R0,R0
   \   081A  5E000000          JSR     @?UL_TO_FLT_L04
   \   081E  6F730002          MOV.W   @(2,SP),R3
   \   0822  6972              MOV.W   @SP,R2
   \   0824  6FF20002          MOV.W   R2,@(2,SP)
   \   0828  0B87              ADDS.W  #2,SP
   \   082A  6D72              MOV.W   @SP+,R2
   \   082C  5E000000          JSR     @?F_DIV_SWAP_L04
   \   0830  5E000000          JSR     @?FLT_TO_SL_L04
   \   0834  6A0B0311          MOV.B   @curr_ad_ch:16,R3L
   \   0838  777B              BLD     #7,R3L
   \   083A  1E33              SUBX.B  R3H,R3H
   \   083C  0933              ADD.W   R3,R3
   \   083E  6FB10262          MOV.W   R1,@(raw_data,R3)
    640                                                  CalcPress(curr_ad_ch) ;                                 /* calculate pressure */
   \   0842  6A090311          MOV.B   @curr_ad_ch:16,R1L
   \   0846  5E000B7A          JSR     @CalcPress:16
   \   084A            ?0125:
    641                                          }
    642                                          Led(1, OFF)     ;                                       /* ASt mark test only */
   \   084A  1911              SUB.W   R1,R1
   \   084C  6DF1              MOV.W   R1,@-SP
   \   084E  79010001          MOV.W   #1,R1
   \   0852  5E0001C6          JSR     @Led:16
   \   0856  0B87              ADDS.W  #2,SP
    643                                          Led(2, OFF)     ;                                       /* ASt mark test only */
   \   0858  1911              SUB.W   R1,R1
   \   085A  6DF1              MOV.W   R1,@-SP
   \   085C  79010002          MOV.W   #2,R1
   \   0860  5E0001C6          JSR     @Led:16
   \   0864  0B87              ADDS.W  #2,SP
    644                                          break;
   \   0866  5A0009E8          JMP     @?0112:16
   \   086A            ?0128:
   \   086A  AB02              CMP.B   #2,R3L
   \   086C  4604              BNE     ?0129
    645                                  case 0x02 :                                 /* "other" */
    646                                          break;
   \   086E  5A0009E8          JMP     @?0112:16
   \   0872            ?0129:
   \   0872  AB01              CMP.B   #1,R3L
   \   0874  4704              BEQ     $+6
   \   0876  5A0009E8          JMP     @?0144:16
    647                                  case 0x01 :                                 /* temp */
    648                                          if ((cal_data[curr_ad_ch] > MAX_TMP_CAL) ||
    649                                                   (cal_data[curr_ad_ch] < MIN_TMP_CAL)) {
   \   087A  6A090311          MOV.B   @curr_ad_ch:16,R1L
   \   087E  7779              BLD     #7,R1L
   \   0880  1E11              SUBX.B  R1H,R1H
   \   0882  0911              ADD.W   R1,R1
   \   0884  6F110246          MOV.W   @(cal_data,R1),R1
   \   0888  A930              CMP.B   #48,R1L
   \   088A  B175              SUBX.B  #117,R1H
   \   088C  4214              BHI     ?0130
   \   088E  6A090311          MOV.B   @curr_ad_ch:16,R1L
   \   0892  7779              BLD     #7,R1L
   \   0894  1E11              SUBX.B  R1H,R1H
   \   0896  0911              ADD.W   R1,R1
   \   0898  6F110246          MOV.W   @(cal_data,R1),R1
   \   089C  A920              CMP.B   #32,R1L
   \   089E  B14E              SUBX.B  #78,R1H
   \   08A0  4414              BCC     ?0131
   \   08A2            ?0132:
   \   08A2            ?0133:
   \   08A2            ?0130:
    650                                            ch_stat[curr_ad_ch] |= 0x02 ;                 /* Calibration fail */
   \   08A2  6A090311          MOV.B   @curr_ad_ch:16,R1L
   \   08A6  7779              BLD     #7,R1L
   \   08A8  1E11              SUBX.B  R1H,R1H
   \   08AA  6E1B031B          MOV.B   @(ch_stat,R1),R3L
   \   08AE  CB02              OR.B    #2,R3L
   \   08B0  6E9B031B          MOV.B   R3L,@(ch_stat,R1)
    651                                          } else {
   \   08B4  4012              BRA     ?0134
   \   08B6            ?0131:
    652                                            ch_stat[curr_ad_ch] &= ~0x02 ;                        /* Calibration OK */
   \   08B6  6A090311          MOV.B   @curr_ad_ch:16,R1L
   \   08BA  7779              BLD     #7,R1L
   \   08BC  1E11              SUBX.B  R1H,R1H
   \   08BE  6E1B031B          MOV.B   @(ch_stat,R1),R3L
   \   08C2  EBFD              AND.B   #253,R3L
   \   08C4  6E9B031B          MOV.B   R3L,@(ch_stat,R1)
   \   08C8            ?0134:
    653                                          }
    654                                          if ((cal_data[curr_ad_ch] > FMAX_TMP_CAL) ||
    655                                                   (cal_data[curr_ad_ch] < FMIN_TMP_CAL)) {
   \   08C8  6A090311          MOV.B   @curr_ad_ch:16,R1L
   \   08CC  7779              BLD     #7,R1L
   \   08CE  1E11              SUBX.B  R1H,R1H
   \   08D0  0911              ADD.W   R1,R1
   \   08D2  6F110246          MOV.W   @(cal_data,R1),R1
   \   08D6  A960              CMP.B   #96,R1L
   \   08D8  B1EA              SUBX.B  #234,R1H
   \   08DA  4214              BHI     ?0135
   \   08DC  6A090311          MOV.B   @curr_ad_ch:16,R1L
   \   08E0  7779              BLD     #7,R1L
   \   08E2  1E11              SUBX.B  R1H,R1H
   \   08E4  0911              ADD.W   R1,R1
   \   08E6  6F110246          MOV.W   @(cal_data,R1),R1
   \   08EA  A9D0              CMP.B   #208,R1L
   \   08EC  B107              SUBX.B  #7,R1H
   \   08EE  445A              BCC     ?0136
   \   08F0            ?0137:
   \   08F0            ?0138:
   \   08F0            ?0135:
    656                                                  ch_stat[curr_ad_ch] |= 0x01 ;                   /* Reading fail */
   \   08F0  6A090311          MOV.B   @curr_ad_ch:16,R1L
   \   08F4  7779              BLD     #7,R1L
   \   08F6  1E11              SUBX.B  R1H,R1H
   \   08F8  6E1B031B          MOV.B   @(ch_stat,R1),R3L
   \   08FC  CB01              OR.B    #1,R3L
   \   08FE  6E9B031B          MOV.B   R3L,@(ch_stat,R1)
    657                                                  mes_data[curr_ad_ch] = 0.0 ;          /* ASt mark ?? */
   \   0902  6A090311          MOV.B   @curr_ad_ch:16,R1L
   \   0906  7779              BLD     #7,R1L
   \   0908  1E11              SUBX.B  R1H,R1H
   \   090A  0911              ADD.W   R1,R1
   \   090C  0911              ADD.W   R1,R1
   \   090E  1922              SUB.W   R2,R2
   \   0910  1900              SUB.W   R0,R0
   \   0912  6F920280          MOV.W   R2,@(mes_data+2,R1)
   \   0916  6F90027E          MOV.W   R0,@(mes_data,R1)
    658                                                  raw_data[curr_ad_ch] = curr_sens_data ; /* sen raw raw */
   \   091A  6A090311          MOV.B   @curr_ad_ch:16,R1L
   \   091E  7779              BLD     #7,R1L
   \   0920  1E11              SUBX.B  R1H,R1H
   \   0922  0911              ADD.W   R1,R1
   \   0924  6B030244          MOV.W   @curr_sens_data:16,R3
   \   0928  6F930262          MOV.W   R3,@(raw_data,R1)
    659                                                  if (ad_mode & 0x80) {                                                   /* test */
   \   092C  6A090313          MOV.B   @ad_mode:16,R1L
   \   0930  E980              AND.B   #128,R1L
   \   0932  4712              BEQ     ?0140
   \   0934            ?0139:
    660                                                          ch_stat[curr_ad_ch] &= 0 ;                              /* no sensor */
   \   0934  6A090311          MOV.B   @curr_ad_ch:16,R1L
   \   0938  7779              BLD     #7,R1L
   \   093A  1E11              SUBX.B  R1H,R1H
   \   093C  6E1B031B          MOV.B   @(ch_stat,R1),R3L
   \   0940  EB00              AND.B   #0,R3L
   \   0942  6E9B031B          MOV.B   R3L,@(ch_stat,R1)
   \   0946            ?0140:
    661                                                  }
    662                                          } else {
   \   0946  5A0009D8          JMP     @?0141:16
   \   094A            ?0136:
    663                                                  if (ad_mode & 0x80) {                                                   /* test */
   \   094A  6A090313          MOV.B   @ad_mode:16,R1L
   \   094E  E980              AND.B   #128,R1L
   \   0950  4712              BEQ     ?0143
   \   0952            ?0142:
    664                                                          ch_stat[curr_ad_ch] |= 0x20 ;                           /* tmp sensor  OK*/
   \   0952  6A090311          MOV.B   @curr_ad_ch:16,R1L
   \   0956  7779              BLD     #7,R1L
   \   0958  1E11              SUBX.B  R1H,R1H
   \   095A  6E1B031B          MOV.B   @(ch_stat,R1),R3L
   \   095E  CB20              OR.B    #32,R3L
   \   0960  6E9B031B          MOV.B   R3L,@(ch_stat,R1)
   \   0964            ?0143:
    665                                                  }
    666                                                  ch_stat[curr_ad_ch] &= ~0x01 ;                  /* Reading OK */
   \   0964  6A090311          MOV.B   @curr_ad_ch:16,R1L
   \   0968  7779              BLD     #7,R1L
   \   096A  1E11              SUBX.B  R1H,R1H
   \   096C  6E1B031B          MOV.B   @(ch_stat,R1),R3L
   \   0970  EBFE              AND.B   #254,R3L
   \   0972  6E9B031B          MOV.B   R3L,@(ch_stat,R1)
    667                                                  raw_data[curr_ad_ch] = (unsigned short) (((float)curr_sens_data * 1000.0
    668                                                                                                            / (float)cal_data[curr_ad_ch] ) * 10.0);
   \   0976  6B010244          MOV.W   @curr_sens_data:16,R1
   \   097A  1900              SUB.W   R0,R0
   \   097C  5E000000          JSR     @?UL_TO_FLT_L04
   \   0980  1933              SUB.W   R3,R3
   \   0982  7902447A          MOV.W   #17530,R2
   \   0986  5E000000          JSR     @?F_MUL_L04
   \   098A  6A0B0311          MOV.B   @curr_ad_ch:16,R3L
   \   098E  777B              BLD     #7,R3L
   \   0990  1E33              SUBX.B  R3H,R3H
   \   0992  0933              ADD.W   R3,R3
   \   0994  6DF1              MOV.W   R1,@-SP
   \   0996  6F310246          MOV.W   @(cal_data,R3),R1
   \   099A  6DF0              MOV.W   R0,@-SP
   \   099C  1900              SUB.W   R0,R0
   \   099E  5E000000          JSR     @?UL_TO_FLT_L04
   \   09A2  6F730002          MOV.W   @(2,SP),R3
   \   09A6  6972              MOV.W   @SP,R2
   \   09A8  6FF20002          MOV.W   R2,@(2,SP)
   \   09AC  0B87              ADDS.W  #2,SP
   \   09AE  6D72              MOV.W   @SP+,R2
   \   09B0  5E000000          JSR     @?F_DIV_SWAP_L04
   \   09B4  1933              SUB.W   R3,R3
   \   09B6  79024120          MOV.W   #16672,R2
   \   09BA  5E000000          JSR     @?F_MUL_L04
   \   09BE  5E000000          JSR     @?FLT_TO_SL_L04
   \   09C2  6A0B0311          MOV.B   @curr_ad_ch:16,R3L
   \   09C6  777B              BLD     #7,R3L
   \   09C8  1E33              SUBX.B  R3H,R3H
   \   09CA  0933              ADD.W   R3,R3
   \   09CC  6FB10262          MOV.W   R1,@(raw_data,R3)
    669                                                  CalcTemp(curr_ad_ch) ;                                  /* calculate temperature */
   \   09D0  6A090311          MOV.B   @curr_ad_ch:16,R1L
   \   09D4  5E001346          JSR     @CalcTemp:16
   \   09D8            ?0141:
    670                                          }
    671                                          Led(1, OFF)     ;                                       /* ASt mark test only */
   \   09D8  1911              SUB.W   R1,R1
   \   09DA  6DF1              MOV.W   R1,@-SP
   \   09DC  79010001          MOV.W   #1,R1
   \   09E0  5E0001C6          JSR     @Led:16
   \   09E4  0B87              ADDS.W  #2,SP
    672                                          break;
   \   09E6  4000              BRA     ?0112
   \   09E8            ?0144:
    673                                  default :
    674                                          break ;
   \   09E8            ?0112:
    675                                  }
    676                          } else {                                                                                        /* normal conv enter point */
   \   09E8  5A000AB2          JMP     @?0145:16
   \   09EC            ?0111:
    677                                  curr_sens_data = ReadAdByte()* 256 ;
   \   09EC  5E0020EE          JSR     @ReadAdByte:16
   \   09F0  F100              MOV.B   #0,R1H
   \   09F2  0C91              MOV.B   R1L,R1H
   \   09F4  F900              MOV.B   #0,R1L
   \   09F6  6B810244          MOV.W   R1,@curr_sens_data:16
    678                                  curr_sens_data += ReadAdByte() ;                                /*les data */
   \   09FA  5E0020EE          JSR     @ReadAdByte:16
   \   09FE  F100              MOV.B   #0,R1H
   \   0A00  6B030244          MOV.W   @curr_sens_data:16,R3
   \   0A04  0913              ADD.W   R1,R3
   \   0A06  6B830244          MOV.W   R3,@curr_sens_data:16
    679          
    680                                  switch ((ch_stat[curr_ad_ch]>> 2) & 0x03) {
   \   0A0A  6A090311          MOV.B   @curr_ad_ch:16,R1L
   \   0A0E  7779              BLD     #7,R1L
   \   0A10  1E11              SUBX.B  R1H,R1H
   \   0A12  6E1B031B          MOV.B   @(ch_stat,R1),R3L
   \   0A16  110B              SHLR.B  R3L
   \   0A18  110B              SHLR.B  R3L
   \   0A1A  EB03              AND.B   #3,R3L
   \   0A1C  AB03              CMP.B   #3,R3L
   \   0A1E  4626              BNE     ?0148
   \   0A20            ?0147:
    681                                  case 0x03 :                               /* pressure */
    682                                          SetMuxChannel(PRE_CAL_CH) ;                             /* cal channel */
   \   0A20  F90F              MOV.B   #15,R1L
   \   0A22  5E0002D0          JSR     @SetMuxChannel:16
    683                                          ad_mode |= 0x40 ;                                                               /* next cal */
   \   0A26  79010313          MOV.W   #ad_mode,R1
   \   0A2A  7D107060          BSET    #6,@R1
    684                                          ad_settling = AD_SET_TIME ;                             /* wait 67 ms */
   \   0A2E  79010043          MOV.W   #67,R1
   \   0A32  6B810318          MOV.W   R1,@ad_settling:16
    685                                          ad_state = WAIT_FOR_INTERRUPT ;                         /* wait for cal int */
   \   0A36  F902              MOV.B   #2,R1L
   \   0A38  6A890312          MOV.B   R1L,@ad_state:16
    686                                          UnpackSensData(curr_ad_ch) ;                            /* Unpack data */
   \   0A3C  6A090311          MOV.B   @curr_ad_ch:16,R1L
   \   0A40  5E00164E          JSR     @UnpackSensData:16
    687                                          break;
   \   0A44  406C              BRA     ?0146
   \   0A46            ?0148:
   \   0A46  AB02              CMP.B   #2,R3L
   \   0A48  4640              BNE     ?0149
    688                                  case 0x02 :                                /* other */
    689                                          SetSupplyCurrent(1) ;                   /* no cal on this */
   \   0A4A  F901              MOV.B   #1,R1L
   \   0A4C  5E000302          JSR     @SetSupplyCurrent:16
    690                                          SetMuxChannel(MUXCHOFF) ;
   \   0A50  F910              MOV.B   #16,R1L
   \   0A52  5E0002D0          JSR     @SetMuxChannel:16
    691                                          SetSupplyChannel(SUPPCHOFF) ;
   \   0A56  F910              MOV.B   #16,R1L
   \   0A58  5E000280          JSR     @SetSupplyChannel:16
    692                                          SetCalResistance(OFF);
   \   0A5C  F900              MOV.B   #0,R1L
   \   0A5E  5E000312          JSR     @SetCalResistance:16
    693                                          raw_data[curr_ad_ch] = curr_sens_data ;
   \   0A62  6A090311          MOV.B   @curr_ad_ch:16,R1L
   \   0A66  7779              BLD     #7,R1L
   \   0A68  1E11              SUBX.B  R1H,R1H
   \   0A6A  0911              ADD.W   R1,R1
   \   0A6C  6B030244          MOV.W   @curr_sens_data:16,R3
   \   0A70  6F930262          MOV.W   R3,@(raw_data,R1)
    694                                          ad_timeout_cnt = 0 ;                                                    /* timeout off */
   \   0A74  1911              SUB.W   R1,R1
   \   0A76  6B810240          MOV.W   R1,@ad_timeout_cnt:16
    695                                          CalcOther(curr_ad_ch) ;                                 /* calculate "other" */
   \   0A7A  6A090311          MOV.B   @curr_ad_ch:16,R1L
   \   0A7E  5E001506          JSR     @CalcOther:16
    696                                          ad_state = IDLE ;
   \   0A82  F907              MOV.B   #7,R1L
   \   0A84  6A890312          MOV.B   R1L,@ad_state:16
    697                                          break;
   \   0A88  4028              BRA     ?0146
   \   0A8A            ?0149:
   \   0A8A  AB01              CMP.B   #1,R3L
   \   0A8C  461E              BNE     ?0150
    698                                  case 0x01 :                               /* temp */
    699                                          SetMuxChannel(TMP_CAL_CH) ;                             /* cal channel */
   \   0A8E  F90E              MOV.B   #14,R1L
   \   0A90  5E0002D0          JSR     @SetMuxChannel:16
    700                                          ad_mode |= 0x40 ;                                                               /* next cal */
   \   0A94  79010313          MOV.W   #ad_mode,R1
   \   0A98  7D107060          BSET    #6,@R1
    701                                          ad_settling = AD_SET_TIME ;                             /* wait 67 ms */
   \   0A9C  79010043          MOV.W   #67,R1
   \   0AA0  6B810318          MOV.W   R1,@ad_settling:16
    702                                          ad_state = WAIT_FOR_INTERRUPT ;                         /* wait for cal int */
   \   0AA4  F902              MOV.B   #2,R1L
   \   0AA6  6A890312          MOV.B   R1L,@ad_state:16
    703                                          break;
   \   0AAA  4006              BRA     ?0146
   \   0AAC            ?0150:
    704                                  default :
    705                                          ad_state = IDLE ;                                                       /* Start new point */
   \   0AAC  F907              MOV.B   #7,R1L
   \   0AAE  6A890312          MOV.B   R1L,@ad_state:16
    706                                          break ;
   \   0AB2            ?0146:
   \   0AB2            ?0145:
    707                                  }
    708                          }
    709                          break ;
   \   0AB2  5A000B78          JMP     @?0092:16
   \   0AB6            ?0151:
   \   0AB6  A904              CMP.B   #4,R1L
   \   0AB8  465E              BNE     ?0160
    710                  case    START_CALIBRATION :
    711                          ad_timeout_cnt = AD_TIMEOUT ;                                   /* timeout ad cnv */
   \   0ABA  790107D0          MOV.W   #2000,R1
   \   0ABE  6B810240          MOV.W   R1,@ad_timeout_cnt:16
    712                          if (tx_complete == TRUE) {
   \   0AC2  6A090336          MOV.B   @tx_complete:16,R1L
   \   0AC6  A901              CMP.B   #1,R1L
   \   0AC8  464C              BNE     ?0153
   \   0ACA            ?0152:
    713                                  if (ad_mode & 0x02) {                           /* pressure readings */
   \   0ACA  6A090313          MOV.B   @ad_mode:16,R1L
   \   0ACE  E902              AND.B   #2,R1L
   \   0AD0  4708              BEQ     ?0155
   \   0AD2            ?0154:
    714                                          ad_gain = 3;
   \   0AD2  F903              MOV.B   #3,R1L
   \   0AD4  6A89031A          MOV.B   R1L,@ad_gain:16
    715                                  } else {
   \   0AD8  4006              BRA     ?0156
   \   0ADA            ?0155:
    716                                          ad_gain = 0;
   \   0ADA  F900              MOV.B   #0,R1L
   \   0ADC  6A89031A          MOV.B   R1L,@ad_gain:16
   \   0AE0            ?0156:
    717                                  }
    718                                  ad_state = WAIT_FOR_CAL_INT ;                           /* next state */
   \   0AE0  F905              MOV.B   #5,R1L
   \   0AE2  6A890312          MOV.B   R1L,@ad_state:16
    719                                  Led(1, ON) ;                                                            /* ASt mark test led 1 on */
   \   0AE6  79010001          MOV.W   #1,R1
   \   0AEA  6DF1              MOV.W   R1,@-SP
   \   0AEC  79010001          MOV.W   #1,R1
   \   0AF0  5E0001C6          JSR     @Led:16
   \   0AF4  0B87              ADDS.W  #2,SP
    720                                  WriteAdByte(ad_gain | 0x10) ;                           /* Next write setup reg */
   \   0AF6  6A09031A          MOV.B   @ad_gain:16,R1L
   \   0AFA  C910              OR.B    #16,R1L
   \   0AFC  5E00211A          JSR     @WriteAdByte:16
    721                                  if (ad_mode & 0x04){                                            /* 0ther */
   \   0B00  6A090313          MOV.B   @ad_mode:16,R1L
   \   0B04  E904              AND.B   #4,R1L
   \   0B06  4708              BEQ     ?0158
   \   0B08            ?0157:
    722                                          WriteAdByte(0x68) ;                                     /*  Ad setup data, bipolar */
   \   0B08  F968              MOV.B   #104,R1L
   \   0B0A  5E00211A          JSR     @WriteAdByte:16
    723                                  } else {
   \   0B0E  4006              BRA     ?0159
   \   0B10            ?0158:
    724                                          WriteAdByte(0x6c) ;                                     /* Ad setup data, unipolar */
   \   0B10  F96C              MOV.B   #108,R1L
   \   0B12  5E00211A          JSR     @WriteAdByte:16
   \   0B16            ?0159:
   \   0B16            ?0153:
    725                                  }
    726                          }
    727                          break ;
   \   0B16  4060              BRA     ?0092
   \   0B18            ?0160:
   \   0B18  A905              CMP.B   #5,R1L
   \   0B1A  461E              BNE     ?0163
    728                  case    WAIT_FOR_CAL_INT :
    729                          WriteAdByte(ad_gain | 0x18) ;                           /* Next read setup reg */
   \   0B1C  6A09031A          MOV.B   @ad_gain:16,R1L
   \   0B20  C918              OR.B    #24,R1L
   \   0B22  5E00211A          JSR     @WriteAdByte:16
    730                          if (!(ReadAdByte() & 0xc0)){                                    /* read setup data */
   \   0B26  5E0020EE          JSR     @ReadAdByte:16
   \   0B2A  E9C0              AND.B   #192,R1L
   \   0B2C  460A              BNE     ?0162
   \   0B2E            ?0161:
    731                                  ad_state++ ;
   \   0B2E  6A090312          MOV.B   @ad_state:16,R1L
   \   0B32  8901              ADD.B   #1,R1L
   \   0B34  6A890312          MOV.B   R1L,@ad_state:16
   \   0B38            ?0162:
    732                          }
    733                          break ;
   \   0B38  403E              BRA     ?0092
   \   0B3A            ?0163:
   \   0B3A  A906              CMP.B   #6,R1L
   \   0B3C  462E              BNE     ?0164
    734                  case    CAL_COMPLETE :
    735                          ad_timeout_cnt = 0 ;                                                    /* timeout off */
   \   0B3E  1911              SUB.W   R1,R1
   \   0B40  6B810240          MOV.W   R1,@ad_timeout_cnt:16
    736                          curr_ad_ch -= 1 ;                                                               /* To start with ch 0 !! */
   \   0B44  6A090311          MOV.B   @curr_ad_ch:16,R1L
   \   0B48  89FF              ADD.B   #-1,R1L
   \   0B4A  6A890311          MOV.B   R1L,@curr_ad_ch:16
    737                          time_c_cnt = TIME_BETWEEN_CAL ;                         /*reaload timer */
   \   0B4E  7901012C          MOV.W   #300,R1
   \   0B52  6B81023E          MOV.W   R1,@time_c_cnt:16
    738                          ad_state = IDLE ;
   \   0B56  F907              MOV.B   #7,R1L
   \   0B58  6A890312          MOV.B   R1L,@ad_state:16
    739                          Led(1, OFF) ;                                                           /* ASt mark test led 1 off */
   \   0B5C  1911              SUB.W   R1,R1
   \   0B5E  6DF1              MOV.W   R1,@-SP
   \   0B60  79010001          MOV.W   #1,R1
   \   0B64  5E0001C6          JSR     @Led:16
   \   0B68  0B87              ADDS.W  #2,SP
    740                          break ;
   \   0B6A  400C              BRA     ?0092
   \   0B6C            ?0164:
   \   0B6C  A907              CMP.B   #7,R1L
   \   0B6E  4602              BNE     ?0165
    741                  case    IDLE :
    742                          break ;
   \   0B70  4006              BRA     ?0092
   \   0B72            ?0165:
    743                  default :
    744                          ad_state = IDLE ;
   \   0B72  F907              MOV.B   #7,R1L
   \   0B74  6A890312          MOV.B   R1L,@ad_state:16
    745                          break ;
   \   0B78            ?0092:
    746                  }
    747          }
   \   0B78  5470              RTS
    748          
    749          /*************************************************************************
    750          *
    751          *  Calculate and filter pressure
    752          *
    753          *************************************************************************/
    754          void CalcPress(signed char ch)
    755          {
   \   0B7A            CalcPress:
   \   0B7A  6DF4              PUSH    R4
   \   0B7C  6DF6              PUSH    R6
   \   0B7E  1B87              SUBS.W  #2,SP
   \   0B80  1B87              SUBS.W  #2,SP
   \   0B82  0C9E              MOV.B   R1L,R6L
    756          
    757                  float temp_data ;
    758          
    759          
    760                  if ((short)raw_data[ch] < sens_data[0]) {
   \   0B84  7779              BLD     #7,R1L
   \   0B86  1E11              SUBX.B  R1H,R1H
   \   0B88  0911              ADD.W   R1,R1
   \   0B8A  6F110262          MOV.W   @(raw_data,R1),R1
   \   0B8E  6B0300F0          MOV.W   @sens_data:16,R3
   \   0B92  1D31              CMP.W   R3,R1
   \   0B94  4C64              BGE     ?0167
   \   0B96            ?0166:
    761                          temp_data = CalcPercent((float)(sens_data[1]-sens_data[0]), (float)sens_data[0],
    762                                                                                   (float)raw_data[ch], 0.0) ;
   \   0B96  1911              SUB.W   R1,R1
   \   0B98  1900              SUB.W   R0,R0
   \   0B9A  6DF1              MOV.W   R1,@-SP
   \   0B9C  6DF0              MOV.W   R0,@-SP
   \   0B9E  0CE9              MOV.B   R6L,R1L
   \   0BA0  7779              BLD     #7,R1L
   \   0BA2  1E11              SUBX.B  R1H,R1H
   \   0BA4  0911              ADD.W   R1,R1
   \   0BA6  6F110262          MOV.W   @(raw_data,R1),R1
   \   0BAA  1900              SUB.W   R0,R0
   \   0BAC  5E000000          JSR     @?UL_TO_FLT_L04
   \   0BB0  6DF1              MOV.W   R1,@-SP
   \   0BB2  6DF0              MOV.W   R0,@-SP
   \   0BB4  6B0100F0          MOV.W   @sens_data:16,R1
   \   0BB8  7371              BTST    #7,R1H
   \   0BBA  4706              BEQ     $+8
   \   0BBC  7900FFFF          MOV.W   #-1,R0
   \   0BC0  4002              BRA     $+4
   \   0BC2  1900              SUB.W   R0,R0
   \   0BC4  5E000000          JSR     @?SL_TO_FLT_L04
   \   0BC8  6DF1              MOV.W   R1,@-SP
   \   0BCA  6DF0              MOV.W   R0,@-SP
   \   0BCC  6B0100F2          MOV.W   @sens_data+2:16,R1
   \   0BD0  6B0300F0          MOV.W   @sens_data:16,R3
   \   0BD4  1931              SUB.W   R3,R1
   \   0BD6  7371              BTST    #7,R1H
   \   0BD8  4706              BEQ     $+8
   \   0BDA  7900FFFF          MOV.W   #-1,R0
   \   0BDE  4002              BRA     $+4
   \   0BE0  1900              SUB.W   R0,R0
   \   0BE2  5E000000          JSR     @?SL_TO_FLT_L04
   \   0BE6  5E00106E          JSR     @CalcPercent:16
   \   0BEA  7902000C          MOV.W   #12,R2
   \   0BEE  0927              ADD.W   R2,SP
   \   0BF0  6FF10002          MOV.W   R1,@(2,SP)
   \   0BF4  69F0              MOV.W   R0,@SP
    763          
    764                  } else if (((short)raw_data[ch] >= sens_data[0]) && ((short)raw_data[ch] <  sens_data[1])) {
   \   0BF6  5A000ED4          JMP     @?0168:16
   \   0BFA            ?0167:
   \   0BFA  0CE9              MOV.B   R6L,R1L
   \   0BFC  7779              BLD     #7,R1L
   \   0BFE  1E11              SUBX.B  R1H,R1H
   \   0C00  0911              ADD.W   R1,R1
   \   0C02  6F110262          MOV.W   @(raw_data,R1),R1
   \   0C06  6B0300F0          MOV.W   @sens_data:16,R3
   \   0C0A  1D31              CMP.W   R3,R1
   \   0C0C  4C04              BGE     $+6
   \   0C0E  5A000CB8          JMP     @?0170:16
   \   0C12  0CE9              MOV.B   R6L,R1L
   \   0C14  7779              BLD     #7,R1L
   \   0C16  1E11              SUBX.B  R1H,R1H
   \   0C18  0911              ADD.W   R1,R1
   \   0C1A  6F110262          MOV.W   @(raw_data,R1),R1
   \   0C1E  6B0300F2          MOV.W   @sens_data+2:16,R3
   \   0C22  1D31              CMP.W   R3,R1
   \   0C24  4D04              BLT     $+6
   \   0C26  5A000CB8          JMP     @?0170:16
   \   0C2A            ?0172:
   \   0C2A            ?0171:
   \   0C2A            ?0169:
    765                          temp_data = CalcPercent((float)(sens_data[1]-sens_data[0]), (float)sens_data[0],
    766                                                                                   (float)raw_data[ch], (float)sens_nl1) ;
   \   0C2A  6A0900F8          MOV.B   @sens_nl1:16,R1L
   \   0C2E  7379              BTST    #7,R1L
   \   0C30  4708              BEQ     $+10
   \   0C32  F1FF              MOV.B   #255,R1H
   \   0C34  7900FFFF          MOV.W   #-1,R0
   \   0C38  4004              BRA     $+6
   \   0C3A  F100              MOV.B   #0,R1H
   \   0C3C  1900              SUB.W   R0,R0
   \   0C3E  5E000000          JSR     @?SL_TO_FLT_L04
   \   0C42  6DF1              MOV.W   R1,@-SP
   \   0C44  6DF0              MOV.W   R0,@-SP
   \   0C46  0CE9              MOV.B   R6L,R1L
   \   0C48  7779              BLD     #7,R1L
   \   0C4A  1E11              SUBX.B  R1H,R1H
   \   0C4C  0911              ADD.W   R1,R1
   \   0C4E  6F110262          MOV.W   @(raw_data,R1),R1
   \   0C52  1900              SUB.W   R0,R0
   \   0C54  5E000000          JSR     @?UL_TO_FLT_L04
   \   0C58  6DF1              MOV.W   R1,@-SP
   \   0C5A  6DF0              MOV.W   R0,@-SP
   \   0C5C  6B0100F0          MOV.W   @sens_data:16,R1
   \   0C60  7371              BTST    #7,R1H
   \   0C62  4706              BEQ     $+8
   \   0C64  7900FFFF          MOV.W   #-1,R0
   \   0C68  4002              BRA     $+4
   \   0C6A  1900              SUB.W   R0,R0
   \   0C6C  5E000000          JSR     @?SL_TO_FLT_L04
   \   0C70  6DF1              MOV.W   R1,@-SP
   \   0C72  6DF0              MOV.W   R0,@-SP
   \   0C74  6B0100F2          MOV.W   @sens_data+2:16,R1
   \   0C78  6B0300F0          MOV.W   @sens_data:16,R3
   \   0C7C  1931              SUB.W   R3,R1
   \   0C7E  7371              BTST    #7,R1H
   \   0C80  4706              BEQ     $+8
   \   0C82  7900FFFF          MOV.W   #-1,R0
   \   0C86  4002              BRA     $+4
   \   0C88  1900              SUB.W   R0,R0
   \   0C8A  5E000000          JSR     @?SL_TO_FLT_L04
   \   0C8E  5E00106E          JSR     @CalcPercent:16
   \   0C92  7902000C          MOV.W   #12,R2
   \   0C96  0927              ADD.W   R2,SP
   \   0C98  6FF10002          MOV.W   R1,@(2,SP)
   \   0C9C  69F0              MOV.W   R0,@SP
    767                          temp_data *= 40.0 ;                             /* caluclate % */
   \   0C9E  6970              MOV.W   @SP,R0
   \   0CA0  6F710002          MOV.W   @(2,SP),R1
   \   0CA4  1933              SUB.W   R3,R3
   \   0CA6  79024220          MOV.W   #16928,R2
   \   0CAA  5E000000          JSR     @?F_MUL_L04
   \   0CAE  6FF10002          MOV.W   R1,@(2,SP)
   \   0CB2  69F0              MOV.W   R0,@SP
    768          
    769                  } else if (((short)raw_data[ch] >= sens_data[1]) && ((short)raw_data[ch] < sens_data[2])) {
   \   0CB4  5A000ED4          JMP     @?0173:16
   \   0CB8            ?0170:
   \   0CB8  0CE9              MOV.B   R6L,R1L
   \   0CBA  7779              BLD     #7,R1L
   \   0CBC  1E11              SUBX.B  R1H,R1H
   \   0CBE  0911              ADD.W   R1,R1
   \   0CC0  6F110262          MOV.W   @(raw_data,R1),R1
   \   0CC4  6B0300F2          MOV.W   @sens_data+2:16,R3
   \   0CC8  1D31              CMP.W   R3,R1
   \   0CCA  4C04              BGE     $+6
   \   0CCC  5A000D7A          JMP     @?0175:16
   \   0CD0  0CE9              MOV.B   R6L,R1L
   \   0CD2  7779              BLD     #7,R1L
   \   0CD4  1E11              SUBX.B  R1H,R1H
   \   0CD6  0911              ADD.W   R1,R1
   \   0CD8  6F110262          MOV.W   @(raw_data,R1),R1
   \   0CDC  6B0300F4          MOV.W   @sens_data+4:16,R3
   \   0CE0  1D31              CMP.W   R3,R1
   \   0CE2  4D04              BLT     $+6
   \   0CE4  5A000D7A          JMP     @?0175:16
   \   0CE8            ?0177:
   \   0CE8            ?0176:
   \   0CE8            ?0174:
    770                          temp_data = CalcPercent((float)(sens_data[2]-sens_data[1]), (float)sens_data[1],
    771                                                                                   (float)raw_data[ch], (float)sens_nl2) ;
    772                          temp_data = temp_data*(60.0 - 40.0)+40.0 ;                              /* caluclate % */
   \   0CE8  6A0900F9          MOV.B   @sens_nl2:16,R1L
   \   0CEC  7379              BTST    #7,R1L
   \   0CEE  4708              BEQ     $+10
   \   0CF0  F1FF              MOV.B   #255,R1H
   \   0CF2  7900FFFF          MOV.W   #-1,R0
   \   0CF6  4004              BRA     $+6
   \   0CF8  F100              MOV.B   #0,R1H
   \   0CFA  1900              SUB.W   R0,R0
   \   0CFC  5E000000          JSR     @?SL_TO_FLT_L04
   \   0D00  6DF1              MOV.W   R1,@-SP
   \   0D02  6DF0              MOV.W   R0,@-SP
   \   0D04  0CE9              MOV.B   R6L,R1L
   \   0D06  7779              BLD     #7,R1L
   \   0D08  1E11              SUBX.B  R1H,R1H
   \   0D0A  0911              ADD.W   R1,R1
   \   0D0C  6F110262          MOV.W   @(raw_data,R1),R1
   \   0D10  1900              SUB.W   R0,R0
   \   0D12  5E000000          JSR     @?UL_TO_FLT_L04
   \   0D16  6DF1              MOV.W   R1,@-SP
   \   0D18  6DF0              MOV.W   R0,@-SP
   \   0D1A  6B0100F2          MOV.W   @sens_data+2:16,R1
   \   0D1E  7371              BTST    #7,R1H
   \   0D20  4706              BEQ     $+8
   \   0D22  7900FFFF          MOV.W   #-1,R0
   \   0D26  4002              BRA     $+4
   \   0D28  1900              SUB.W   R0,R0
   \   0D2A  5E000000          JSR     @?SL_TO_FLT_L04
   \   0D2E  6DF1              MOV.W   R1,@-SP
   \   0D30  6DF0              MOV.W   R0,@-SP
   \   0D32  6B0100F4          MOV.W   @sens_data+4:16,R1
   \   0D36  6B0300F2          MOV.W   @sens_data+2:16,R3
   \   0D3A  1931              SUB.W   R3,R1
   \   0D3C  7371              BTST    #7,R1H
   \   0D3E  4706              BEQ     $+8
   \   0D40  7900FFFF          MOV.W   #-1,R0
   \   0D44  4002              BRA     $+4
   \   0D46  1900              SUB.W   R0,R0
   \   0D48  5E000000          JSR     @?SL_TO_FLT_L04
   \   0D4C  5E00106E          JSR     @CalcPercent:16
   \   0D50  7902000C          MOV.W   #12,R2
   \   0D54  0927              ADD.W   R2,SP
   \   0D56  6FF10002          MOV.W   R1,@(2,SP)
   \   0D5A  69F0              MOV.W   R0,@SP
   \   0D5C  1933              SUB.W   R3,R3
   \   0D5E  790241A0          MOV.W   #16800,R2
   \   0D62  5E000000          JSR     @?F_MUL_L04
   \   0D66  1933              SUB.W   R3,R3
   \   0D68  79024220          MOV.W   #16928,R2
   \   0D6C  5E000000          JSR     @?F_ADD_L04
   \   0D70  6FF10002          MOV.W   R1,@(2,SP)
   \   0D74  69F0              MOV.W   R0,@SP
    773          
    774                  } else if (((short)raw_data[ch] >= sens_data[2]) && ((short)raw_data[ch] < sens_data[3])) {
   \   0D76  5A000ED4          JMP     @?0178:16
   \   0D7A            ?0175:
   \   0D7A  0CE9              MOV.B   R6L,R1L
   \   0D7C  7779              BLD     #7,R1L
   \   0D7E  1E11              SUBX.B  R1H,R1H
   \   0D80  0911              ADD.W   R1,R1
   \   0D82  6F110262          MOV.W   @(raw_data,R1),R1
   \   0D86  6B0300F4          MOV.W   @sens_data+4:16,R3
   \   0D8A  1D31              CMP.W   R3,R1
   \   0D8C  4C04              BGE     $+6
   \   0D8E  5A000E46          JMP     @?0180:16
   \   0D92  0CE9              MOV.B   R6L,R1L
   \   0D94  7779              BLD     #7,R1L
   \   0D96  1E11              SUBX.B  R1H,R1H
   \   0D98  0911              ADD.W   R1,R1
   \   0D9A  6F110262          MOV.W   @(raw_data,R1),R1
   \   0D9E  6B0300F6          MOV.W   @sens_data+6:16,R3
   \   0DA2  1D31              CMP.W   R3,R1
   \   0DA4  4D04              BLT     $+6
   \   0DA6  5A000E46          JMP     @?0180:16
   \   0DAA            ?0182:
   \   0DAA            ?0181:
   \   0DAA            ?0179:
    775                          temp_data = CalcPercent((float)(sens_data[3]-sens_data[2]), (float)sens_data[2],
    776                                                                                   (float)raw_data[ch], (float)sens_nl1 * 0.5 ) ;
    777                          temp_data = temp_data*(100.0 - 60.0)+60.0 ;                             /* caluclate % */
   \   0DAA  6A0900F8          MOV.B   @sens_nl1:16,R1L
   \   0DAE  7379              BTST    #7,R1L
   \   0DB0  4708              BEQ     $+10
   \   0DB2  F1FF              MOV.B   #255,R1H
   \   0DB4  7900FFFF          MOV.W   #-1,R0
   \   0DB8  4004              BRA     $+6
   \   0DBA  F100              MOV.B   #0,R1H
   \   0DBC  1900              SUB.W   R0,R0
   \   0DBE  5E000000          JSR     @?SL_TO_FLT_L04
   \   0DC2  1933              SUB.W   R3,R3
   \   0DC4  79023F00          MOV.W   #16128,R2
   \   0DC8  5E000000          JSR     @?F_MUL_L04
   \   0DCC  6DF1              MOV.W   R1,@-SP
   \   0DCE  6DF0              MOV.W   R0,@-SP
   \   0DD0  0CE9              MOV.B   R6L,R1L
   \   0DD2  7779              BLD     #7,R1L
   \   0DD4  1E11              SUBX.B  R1H,R1H
   \   0DD6  0911              ADD.W   R1,R1
   \   0DD8  6F110262          MOV.W   @(raw_data,R1),R1
   \   0DDC  1900              SUB.W   R0,R0
   \   0DDE  5E000000          JSR     @?UL_TO_FLT_L04
   \   0DE2  6DF1              MOV.W   R1,@-SP
   \   0DE4  6DF0              MOV.W   R0,@-SP
   \   0DE6  6B0100F4          MOV.W   @sens_data+4:16,R1
   \   0DEA  7371              BTST    #7,R1H
   \   0DEC  4706              BEQ     $+8
   \   0DEE  7900FFFF          MOV.W   #-1,R0
   \   0DF2  4002              BRA     $+4
   \   0DF4  1900              SUB.W   R0,R0
   \   0DF6  5E000000          JSR     @?SL_TO_FLT_L04
   \   0DFA  6DF1              MOV.W   R1,@-SP
   \   0DFC  6DF0              MOV.W   R0,@-SP
   \   0DFE  6B0100F6          MOV.W   @sens_data+6:16,R1
   \   0E02  6B0300F4          MOV.W   @sens_data+4:16,R3
   \   0E06  1931              SUB.W   R3,R1
   \   0E08  7371              BTST    #7,R1H
   \   0E0A  4706              BEQ     $+8
   \   0E0C  7900FFFF          MOV.W   #-1,R0
   \   0E10  4002              BRA     $+4
   \   0E12  1900              SUB.W   R0,R0
   \   0E14  5E000000          JSR     @?SL_TO_FLT_L04
   \   0E18  5E00106E          JSR     @CalcPercent:16
   \   0E1C  7902000C          MOV.W   #12,R2
   \   0E20  0927              ADD.W   R2,SP
   \   0E22  6FF10002          MOV.W   R1,@(2,SP)
   \   0E26  69F0              MOV.W   R0,@SP
   \   0E28  1933              SUB.W   R3,R3
   \   0E2A  79024220          MOV.W   #16928,R2
   \   0E2E  5E000000          JSR     @?F_MUL_L04
   \   0E32  1933              SUB.W   R3,R3
   \   0E34  79024270          MOV.W   #17008,R2
   \   0E38  5E000000          JSR     @?F_ADD_L04
   \   0E3C  6FF10002          MOV.W   R1,@(2,SP)
   \   0E40  69F0              MOV.W   R0,@SP
    778          
    779                  } else if ((short)raw_data[ch] >= sens_data[3]) {
   \   0E42  5A000ED4          JMP     @?0183:16
   \   0E46            ?0180:
   \   0E46  0CE9              MOV.B   R6L,R1L
   \   0E48  7779              BLD     #7,R1L
   \   0E4A  1E11              SUBX.B  R1H,R1H
   \   0E4C  0911              ADD.W   R1,R1
   \   0E4E  6F110262          MOV.W   @(raw_data,R1),R1
   \   0E52  6B0300F6          MOV.W   @sens_data+6:16,R3
   \   0E56  1D31              CMP.W   R3,R1
   \   0E58  4D7A              BLT     ?0185
   \   0E5A            ?0184:
    780                          temp_data = CalcPercent((float)(sens_data[3]-sens_data[2]), (float)sens_data[2],
    781                                                                                   (float)raw_data[ch], 0.0) ;
    782                          temp_data = temp_data*(100.0 - 60.0)+60.0 ;                             /* caluclate % */
   \   0E5A  1911              SUB.W   R1,R1
   \   0E5C  1900              SUB.W   R0,R0
   \   0E5E  6DF1              MOV.W   R1,@-SP
   \   0E60  6DF0              MOV.W   R0,@-SP
   \   0E62  0CE9              MOV.B   R6L,R1L
   \   0E64  7779              BLD     #7,R1L
   \   0E66  1E11              SUBX.B  R1H,R1H
   \   0E68  0911              ADD.W   R1,R1
   \   0E6A  6F110262          MOV.W   @(raw_data,R1),R1
   \   0E6E  1900              SUB.W   R0,R0
   \   0E70  5E000000          JSR     @?UL_TO_FLT_L04
   \   0E74  6DF1              MOV.W   R1,@-SP
   \   0E76  6DF0              MOV.W   R0,@-SP
   \   0E78  6B0100F4          MOV.W   @sens_data+4:16,R1
   \   0E7C  7371              BTST    #7,R1H
   \   0E7E  4706              BEQ     $+8
   \   0E80  7900FFFF          MOV.W   #-1,R0
   \   0E84  4002              BRA     $+4
   \   0E86  1900              SUB.W   R0,R0
   \   0E88  5E000000          JSR     @?SL_TO_FLT_L04
   \   0E8C  6DF1              MOV.W   R1,@-SP
   \   0E8E  6DF0              MOV.W   R0,@-SP
   \   0E90  6B0100F6          MOV.W   @sens_data+6:16,R1
   \   0E94  6B0300F4          MOV.W   @sens_data+4:16,R3
   \   0E98  1931              SUB.W   R3,R1
   \   0E9A  7371              BTST    #7,R1H
   \   0E9C  4706              BEQ     $+8
   \   0E9E  7900FFFF          MOV.W   #-1,R0
   \   0EA2  4002              BRA     $+4
   \   0EA4  1900              SUB.W   R0,R0
   \   0EA6  5E000000          JSR     @?SL_TO_FLT_L04
   \   0EAA  5E00106E          JSR     @CalcPercent:16
   \   0EAE  7902000C          MOV.W   #12,R2
   \   0EB2  0927              ADD.W   R2,SP
   \   0EB4  6FF10002          MOV.W   R1,@(2,SP)
   \   0EB8  69F0              MOV.W   R0,@SP
   \   0EBA  1933              SUB.W   R3,R3
   \   0EBC  79024220          MOV.W   #16928,R2
   \   0EC0  5E000000          JSR     @?F_MUL_L04
   \   0EC4  1933              SUB.W   R3,R3
   \   0EC6  79024270          MOV.W   #17008,R2
   \   0ECA  5E000000          JSR     @?F_ADD_L04
   \   0ECE  6FF10002          MOV.W   R1,@(2,SP)
   \   0ED2  69F0              MOV.W   R0,@SP
   \   0ED4            ?0185:
   \   0ED4            ?0183:
   \   0ED4            ?0178:
   \   0ED4            ?0173:
   \   0ED4            ?0168:
    783                  }
    784          
    785          
    786                  temp_data *= ((((float)packed_data[ch >> 1][6]/10.0) -
    787                                                          (float) packed_data[ch >> 1][5] / 100.0) /100.0 ) * 10.197162 ;
   \   0ED4  0CE9              MOV.B   R6L,R1L
   \   0ED6  1189              SHAR.B  R1L
   \   0ED8  7779              BLD     #7,R1L
   \   0EDA  1E11              SUBX.B  R1H,R1H
   \   0EDC  79030028          MOV.W   #40,R3
   \   0EE0  5E000000          JSR     @?SS_MUL_L02
   \   0EE4  6E190100          MOV.B   @(packed_data+6,R1),R1L
   \   0EE8  F100              MOV.B   #0,R1H
   \   0EEA  1900              SUB.W   R0,R0
   \   0EEC  5E000000          JSR     @?UL_TO_FLT_L04
   \   0EF0  1933              SUB.W   R3,R3
   \   0EF2  79024120          MOV.W   #16672,R2
   \   0EF6  5E000000          JSR     @?F_DIV_L04
   \   0EFA  0CEB              MOV.B   R6L,R3L
   \   0EFC  118B              SHAR.B  R3L
   \   0EFE  777B              BLD     #7,R3L
   \   0F00  1E33              SUBX.B  R3H,R3H
   \   0F02  6DF1              MOV.W   R1,@-SP
   \   0F04  0D31              MOV.W   R3,R1
   \   0F06  79030028          MOV.W   #40,R3
   \   0F0A  5E000000          JSR     @?SS_MUL_L02
   \   0F0E  6E1900FF          MOV.B   @(packed_data+5,R1),R1L
   \   0F12  6DF0              MOV.W   R0,@-SP
   \   0F14  F100              MOV.B   #0,R1H
   \   0F16  1900              SUB.W   R0,R0
   \   0F18  5E000000          JSR     @?UL_TO_FLT_L04
   \   0F1C  1933              SUB.W   R3,R3
   \   0F1E  790242C8          MOV.W   #17096,R2
   \   0F22  5E000000          JSR     @?F_DIV_L04
   \   0F26  6F730002          MOV.W   @(2,SP),R3
   \   0F2A  6972              MOV.W   @SP,R2
   \   0F2C  6FF20002          MOV.W   R2,@(2,SP)
   \   0F30  0B87              ADDS.W  #2,SP
   \   0F32  6D72              MOV.W   @SP+,R2
   \   0F34  5E000000          JSR     @?F_SUB_SWAP_L04
   \   0F38  1933              SUB.W   R3,R3
   \   0F3A  790242C8          MOV.W   #17096,R2
   \   0F3E  5E000000          JSR     @?F_DIV_L04
   \   0F42  79032793          MOV.W   #10131,R3
   \   0F46  79024123          MOV.W   #16675,R2
   \   0F4A  5E000000          JSR     @?F_MUL_L04
   \   0F4E  6DF0              MOV.W   R0,@-SP
   \   0F50  6DF1              MOV.W   R1,@-SP
   \   0F52  6F700004          MOV.W   @(4,SP),R0
   \   0F56  6F710006          MOV.W   @(6,SP),R1
   \   0F5A  6D73              MOV.W   @SP+,R3
   \   0F5C  6D72              MOV.W   @SP+,R2
   \   0F5E  5E000000          JSR     @?F_MUL_L04
   \   0F62  6FF10002          MOV.W   R1,@(2,SP)
   \   0F66  69F0              MOV.W   R0,@SP
    788          
    789                  temp_data -= (float) offset[ch] / 1000.0 ;
   \   0F68  0CE9              MOV.B   R6L,R1L
   \   0F6A  7779              BLD     #7,R1L
   \   0F6C  1E11              SUBX.B  R1H,R1H
   \   0F6E  0911              ADD.W   R1,R1
   \   0F70  6F1102EE          MOV.W   @(offset,R1),R1
   \   0F74  7371              BTST    #7,R1H
   \   0F76  4706              BEQ     $+8
   \   0F78  7900FFFF          MOV.W   #-1,R0
   \   0F7C  4002              BRA     $+4
   \   0F7E  1900              SUB.W   R0,R0
   \   0F80  5E000000          JSR     @?SL_TO_FLT_L04
   \   0F84  1933              SUB.W   R3,R3
   \   0F86  7902447A          MOV.W   #17530,R2
   \   0F8A  5E000000          JSR     @?F_DIV_L04
   \   0F8E  6DF0              MOV.W   R0,@-SP
   \   0F90  6DF1              MOV.W   R1,@-SP
   \   0F92  6F700004          MOV.W   @(4,SP),R0
   \   0F96  6F710006          MOV.W   @(6,SP),R1
   \   0F9A  6D73              MOV.W   @SP+,R3
   \   0F9C  6D72              MOV.W   @SP+,R2
   \   0F9E  5E000000          JSR     @?F_SUB_L04
   \   0FA2  6FF10002          MOV.W   R1,@(2,SP)
   \   0FA6  69F0              MOV.W   R0,@SP
    790                  temp_data *=  gain[ch] ;
   \   0FA8  0CE9              MOV.B   R6L,R1L
   \   0FAA  7779              BLD     #7,R1L
   \   0FAC  1E11              SUBX.B  R1H,R1H
   \   0FAE  0911              ADD.W   R1,R1
   \   0FB0  0911              ADD.W   R1,R1
   \   0FB2  6DF1              MOV.W   R1,@-SP
   \   0FB4  6F700002          MOV.W   @(2,SP),R0
   \   0FB8  6F710004          MOV.W   @(4,SP),R1
   \   0FBC  6D73              MOV.W   @SP+,R3
   \   0FBE  0D32              MOV.W   R3,R2
   \   0FC0  6F2302B8          MOV.W   @(gain+2,R2),R3
   \   0FC4  6F2202B6          MOV.W   @(gain,R2),R2
   \   0FC8  5E000000          JSR     @?F_MUL_L04
   \   0FCC  6FF10002          MOV.W   R1,@(2,SP)
   \   0FD0  69F0              MOV.W   R0,@SP
    791                  mes_data[ch] += (temp_data - mes_data[ch])/ ((float)p_filter + 1.0) ;
   \   0FD2  0CE9              MOV.B   R6L,R1L
   \   0FD4  7779              BLD     #7,R1L
   \   0FD6  1E11              SUBX.B  R1H,R1H
   \   0FD8  0911              ADD.W   R1,R1
   \   0FDA  0911              ADD.W   R1,R1
   \   0FDC  6F100280          MOV.W   @(mes_data+2,R1),R0
   \   0FE0  6F11027E          MOV.W   @(mes_data,R1),R1
   \   0FE4  0D11              MOV.W   R1,R1
   \   0FE6  4702              BEQ     $+4
   \   0FE8  7171              BNOT    #7,R1H
   \   0FEA  6DF1              MOV.W   R1,@-SP
   \   0FEC  0D01              MOV.W   R0,R1
   \   0FEE  6D70              MOV.W   @SP+,R0
   \   0FF0  6F730002          MOV.W   @(2,SP),R3
   \   0FF4  6972              MOV.W   @SP,R2
   \   0FF6  5E000000          JSR     @?F_ADD_L04
   \   0FFA  6DF1              MOV.W   R1,@-SP
   \   0FFC  6A090331          MOV.B   @p_filter:16,R1L
   \   1000  6DF0              MOV.W   R0,@-SP
   \   1002  F100              MOV.B   #0,R1H
   \   1004  1900              SUB.W   R0,R0
   \   1006  5E000000          JSR     @?UL_TO_FLT_L04
   \   100A  1933              SUB.W   R3,R3
   \   100C  79023F80          MOV.W   #16256,R2
   \   1010  5E000000          JSR     @?F_ADD_L04
   \   1014  6F730002          MOV.W   @(2,SP),R3
   \   1018  6972              MOV.W   @SP,R2
   \   101A  6FF20002          MOV.W   R2,@(2,SP)
   \   101E  0B87              ADDS.W  #2,SP
   \   1020  6D72              MOV.W   @SP+,R2
   \   1022  5E000000          JSR     @?F_DIV_SWAP_L04
   \   1026  0CEB              MOV.B   R6L,R3L
   \   1028  777B              BLD     #7,R3L
   \   102A  1E33              SUBX.B  R3H,R3H
   \   102C  0933              ADD.W   R3,R3
   \   102E  0933              ADD.W   R3,R3
   \   1030  6DF0              MOV.W   R0,@-SP
   \   1032  6DF1              MOV.W   R1,@-SP
   \   1034  6F30027E          MOV.W   @(mes_data,R3),R0
   \   1038  6F310280          MOV.W   @(mes_data+2,R3),R1
   \   103C  6DF3              MOV.W   R3,@-SP
   \   103E  6F730002          MOV.W   @(2,SP),R3
   \   1042  6972              MOV.W   @SP,R2
   \   1044  6FF20002          MOV.W   R2,@(2,SP)
   \   1048  0B87              ADDS.W  #2,SP
   \   104A  6F720002          MOV.W   @(2,SP),R2
   \   104E  6974              MOV.W   @SP,R4
   \   1050  6FF40002          MOV.W   R4,@(2,SP)
   \   1054  0B87              ADDS.W  #2,SP
   \   1056  5E000000          JSR     @?F_ADD_L04
   \   105A  6D73              MOV.W   @SP+,R3
   \   105C  6FB10280          MOV.W   R1,@(mes_data+2,R3)
   \   1060  6FB0027E          MOV.W   R0,@(mes_data,R3)
    792          }
   \   1064  0B87              ADDS.W  #2,SP
   \   1066  0B87              ADDS.W  #2,SP
   \   1068  6D76              POP     R6
   \   106A  6D74              POP     R4
   \   106C  5470              RTS
    793          
    794          /*************************************************************************
    795          *
    796          *  Calculate precentage for pressure
    797          *
    798          *************************************************************************/
    799          float   CalcPercent(float span, float low_span, float raw_data,
    800                                                          float nl)
    801          {
   \   106E            CalcPercent:
   \   106E  6DF1              PUSH    R1
   \   1070  6DF0              PUSH    R0
   \   1072  1B87              SUBS.W  #2,SP
   \   1074  1B87              SUBS.W  #2,SP
    802          
    803                  float sp_h_2 ;
    804          
    805                  if (nl > 0) {
   \   1076  6F710016          MOV.W   @(22,SP),R1
   \   107A  6F700014          MOV.W   @(20,SP),R0
   \   107E  1933              SUB.W   R3,R3
   \   1080  1922              SUB.W   R2,R2
   \   1082  5E000000          JSR     @?F_SUB_L04
   \   1086  0D00              MOV.W   R0,R0
   \   1088  4E04              BGT     $+6
   \   108A  5A0011CE          JMP     @?0187:16
   \   108E            ?0186:
    806                          sp_h_2 = span * span / 4.0 ;
   \   108E  6F710006          MOV.W   @(6,SP),R1
   \   1092  6F700004          MOV.W   @(4,SP),R0
   \   1096  6F730006          MOV.W   @(6,SP),R3
   \   109A  6F720004          MOV.W   @(4,SP),R2
   \   109E  5E000000          JSR     @?F_MUL_L04
   \   10A2  1933              SUB.W   R3,R3
   \   10A4  79024080          MOV.W   #16512,R2
   \   10A8  5E000000          JSR     @?F_DIV_L04
   \   10AC  6FF10002          MOV.W   R1,@(2,SP)
   \   10B0  69F0              MOV.W   R0,@SP
    807                          return ((nl*span + sp_h_2)/(2.0*nl*span))-
    808                                                  sqrt(pow(((nl*span+sp_h_2)/(2.0*nl*span)),2.0)+
    809                                                                          (((low_span-raw_data)*sp_h_2)/(pow(span,2.0)*nl))) ;
   \   10B2  6F71000E          MOV.W   @(14,SP),R1
   \   10B6  6F70000C          MOV.W   @(12,SP),R0
   \   10BA  6F730012          MOV.W   @(18,SP),R3
   \   10BE  6F720010          MOV.W   @(16,SP),R2
   \   10C2  5E000000          JSR     @?F_SUB_L04
   \   10C6  6F730002          MOV.W   @(2,SP),R3
   \   10CA  6972              MOV.W   @SP,R2
   \   10CC  5E000000          JSR     @?F_MUL_L04
   \   10D0  6DF0              MOV.W   R0,@-SP
   \   10D2  6DF1              MOV.W   R1,@-SP
   \   10D4  1911              SUB.W   R1,R1
   \   10D6  79004000          MOV.W   #16384,R0
   \   10DA  6DF1              MOV.W   R1,@-SP
   \   10DC  6DF0              MOV.W   R0,@-SP
   \   10DE  6F71000E          MOV.W   @(14,SP),R1
   \   10E2  6F70000C          MOV.W   @(12,SP),R0
   \   10E6  5E000000          JSR     @pow:16
   \   10EA  0B87              ADDS.W  #2,SP
   \   10EC  0B87              ADDS.W  #2,SP
   \   10EE  6F73001A          MOV.W   @(26,SP),R3
   \   10F2  6F720018          MOV.W   @(24,SP),R2
   \   10F6  5E000000          JSR     @?F_MUL_L04
   \   10FA  6D73              MOV.W   @SP+,R3
   \   10FC  6D72              MOV.W   @SP+,R2
   \   10FE  5E000000          JSR     @?F_DIV_SWAP_L04
   \   1102  6DF0              MOV.W   R0,@-SP
   \   1104  6DF1              MOV.W   R1,@-SP
   \   1106  1911              SUB.W   R1,R1
   \   1108  79004000          MOV.W   #16384,R0
   \   110C  6DF1              MOV.W   R1,@-SP
   \   110E  6DF0              MOV.W   R0,@-SP
   \   1110  6F71001E          MOV.W   @(30,SP),R1
   \   1114  6F70001C          MOV.W   @(28,SP),R0
   \   1118  6F73000E          MOV.W   @(14,SP),R3
   \   111C  6F72000C          MOV.W   @(12,SP),R2
   \   1120  5E000000          JSR     @?F_MUL_L04
   \   1124  6F73000A          MOV.W   @(10,SP),R3
   \   1128  6F720008          MOV.W   @(8,SP),R2
   \   112C  5E000000          JSR     @?F_ADD_L04
   \   1130  6DF0              MOV.W   R0,@-SP
   \   1132  6DF1              MOV.W   R1,@-SP
   \   1134  6F710022          MOV.W   @(34,SP),R1
   \   1138  6F700020          MOV.W   @(32,SP),R0
   \   113C  1933              SUB.W   R3,R3
   \   113E  79024000          MOV.W   #16384,R2
   \   1142  5E000000          JSR     @?F_MUL_L04
   \   1146  6F730012          MOV.W   @(18,SP),R3
   \   114A  6F720010          MOV.W   @(16,SP),R2
   \   114E  5E000000          JSR     @?F_MUL_L04
   \   1152  6D73              MOV.W   @SP+,R3
   \   1154  6D72              MOV.W   @SP+,R2
   \   1156  5E000000          JSR     @?F_DIV_SWAP_L04
   \   115A  5E000000          JSR     @pow:16
   \   115E  0B87              ADDS.W  #2,SP
   \   1160  0B87              ADDS.W  #2,SP
   \   1162  6D73              MOV.W   @SP+,R3
   \   1164  6D72              MOV.W   @SP+,R2
   \   1166  5E000000          JSR     @?F_ADD_L04
   \   116A  5E000000          JSR     @sqrt:16
   \   116E  0D00              MOV.W   R0,R0
   \   1170  4702              BEQ     $+4
   \   1172  7170              BNOT    #7,R0H
   \   1174  6DF0              MOV.W   R0,@-SP
   \   1176  6DF1              MOV.W   R1,@-SP
   \   1178  6F71001A          MOV.W   @(26,SP),R1
   \   117C  6F700018          MOV.W   @(24,SP),R0
   \   1180  6F73000A          MOV.W   @(10,SP),R3
   \   1184  6F720008          MOV.W   @(8,SP),R2
   \   1188  5E000000          JSR     @?F_MUL_L04
   \   118C  6F730006          MOV.W   @(6,SP),R3
   \   1190  6F720004          MOV.W   @(4,SP),R2
   \   1194  5E000000          JSR     @?F_ADD_L04
   \   1198  6DF0              MOV.W   R0,@-SP
   \   119A  6DF1              MOV.W   R1,@-SP
   \   119C  6F71001E          MOV.W   @(30,SP),R1
   \   11A0  6F70001C          MOV.W   @(28,SP),R0
   \   11A4  1933              SUB.W   R3,R3
   \   11A6  79024000          MOV.W   #16384,R2
   \   11AA  5E000000          JSR     @?F_MUL_L04
   \   11AE  6F73000E          MOV.W   @(14,SP),R3
   \   11B2  6F72000C          MOV.W   @(12,SP),R2
   \   11B6  5E000000          JSR     @?F_MUL_L04
   \   11BA  6D73              MOV.W   @SP+,R3
   \   11BC  6D72              MOV.W   @SP+,R2
   \   11BE  5E000000          JSR     @?F_DIV_SWAP_L04
   \   11C2  6D73              MOV.W   @SP+,R3
   \   11C4  6D72              MOV.W   @SP+,R2
   \   11C6  5E000000          JSR     @?F_ADD_L04
    810                  } else if (nl < 0){
   \   11CA  5A00133E          JMP     @?0190:16
   \   11CE            ?0187:
   \   11CE  6F710016          MOV.W   @(22,SP),R1
   \   11D2  6F700014          MOV.W   @(20,SP),R0
   \   11D6  1933              SUB.W   R3,R3
   \   11D8  1922              SUB.W   R2,R2
   \   11DA  5E000000          JSR     @?F_SUB_L04
   \   11DE  0D00              MOV.W   R0,R0
   \   11E0  4D04              BLT     $+6
   \   11E2  5A00131E          JMP     @?0189:16
   \   11E6            ?0188:
    811                          sp_h_2 = span* span / 4.0 ;
   \   11E6  6F710006          MOV.W   @(6,SP),R1
   \   11EA  6F700004          MOV.W   @(4,SP),R0
   \   11EE  6F730006          MOV.W   @(6,SP),R3
   \   11F2  6F720004          MOV.W   @(4,SP),R2
   \   11F6  5E000000          JSR     @?F_MUL_L04
   \   11FA  1933              SUB.W   R3,R3
   \   11FC  79024080          MOV.W   #16512,R2
   \   1200  5E000000          JSR     @?F_DIV_L04
   \   1204  6FF10002          MOV.W   R1,@(2,SP)
   \   1208  69F0              MOV.W   R0,@SP
    812                          return ((nl*span + sp_h_2)/(2.0*nl*span))+
    813                                                  sqrt(pow(((nl*span+sp_h_2)/(2.0*nl*span)),2.0)+
    814                                                                          (((low_span-raw_data)*sp_h_2)/(pow(span,2.0)*nl))) ;
   \   120A  6F71000E          MOV.W   @(14,SP),R1
   \   120E  6F70000C          MOV.W   @(12,SP),R0
   \   1212  6F730012          MOV.W   @(18,SP),R3
   \   1216  6F720010          MOV.W   @(16,SP),R2
   \   121A  5E000000          JSR     @?F_SUB_L04
   \   121E  6F730002          MOV.W   @(2,SP),R3
   \   1222  6972              MOV.W   @SP,R2
   \   1224  5E000000          JSR     @?F_MUL_L04
   \   1228  6DF0              MOV.W   R0,@-SP
   \   122A  6DF1              MOV.W   R1,@-SP
   \   122C  1911              SUB.W   R1,R1
   \   122E  79004000          MOV.W   #16384,R0
   \   1232  6DF1              MOV.W   R1,@-SP
   \   1234  6DF0              MOV.W   R0,@-SP
   \   1236  6F71000E          MOV.W   @(14,SP),R1
   \   123A  6F70000C          MOV.W   @(12,SP),R0
   \   123E  5E000000          JSR     @pow:16
   \   1242  0B87              ADDS.W  #2,SP
   \   1244  0B87              ADDS.W  #2,SP
   \   1246  6F73001A          MOV.W   @(26,SP),R3
   \   124A  6F720018          MOV.W   @(24,SP),R2
   \   124E  5E000000          JSR     @?F_MUL_L04
   \   1252  6D73              MOV.W   @SP+,R3
   \   1254  6D72              MOV.W   @SP+,R2
   \   1256  5E000000          JSR     @?F_DIV_SWAP_L04
   \   125A  6DF0              MOV.W   R0,@-SP
   \   125C  6DF1              MOV.W   R1,@-SP
   \   125E  1911              SUB.W   R1,R1
   \   1260  79004000          MOV.W   #16384,R0
   \   1264  6DF1              MOV.W   R1,@-SP
   \   1266  6DF0              MOV.W   R0,@-SP
   \   1268  6F71001E          MOV.W   @(30,SP),R1
   \   126C  6F70001C          MOV.W   @(28,SP),R0
   \   1270  6F73000E          MOV.W   @(14,SP),R3
   \   1274  6F72000C          MOV.W   @(12,SP),R2
   \   1278  5E000000          JSR     @?F_MUL_L04
   \   127C  6F73000A          MOV.W   @(10,SP),R3
   \   1280  6F720008          MOV.W   @(8,SP),R2
   \   1284  5E000000          JSR     @?F_ADD_L04
   \   1288  6DF0              MOV.W   R0,@-SP
   \   128A  6DF1              MOV.W   R1,@-SP
   \   128C  6F710022          MOV.W   @(34,SP),R1
   \   1290  6F700020          MOV.W   @(32,SP),R0
   \   1294  1933              SUB.W   R3,R3
   \   1296  79024000          MOV.W   #16384,R2
   \   129A  5E000000          JSR     @?F_MUL_L04
   \   129E  6F730012          MOV.W   @(18,SP),R3
   \   12A2  6F720010          MOV.W   @(16,SP),R2
   \   12A6  5E000000          JSR     @?F_MUL_L04
   \   12AA  6D73              MOV.W   @SP+,R3
   \   12AC  6D72              MOV.W   @SP+,R2
   \   12AE  5E000000          JSR     @?F_DIV_SWAP_L04
   \   12B2  5E000000          JSR     @pow:16
   \   12B6  0B87              ADDS.W  #2,SP
   \   12B8  0B87              ADDS.W  #2,SP
   \   12BA  6D73              MOV.W   @SP+,R3
   \   12BC  6D72              MOV.W   @SP+,R2
   \   12BE  5E000000          JSR     @?F_ADD_L04
   \   12C2  5E000000          JSR     @sqrt:16
   \   12C6  6DF0              MOV.W   R0,@-SP
   \   12C8  6DF1              MOV.W   R1,@-SP
   \   12CA  6F71001A          MOV.W   @(26,SP),R1
   \   12CE  6F700018          MOV.W   @(24,SP),R0
   \   12D2  6F73000A          MOV.W   @(10,SP),R3
   \   12D6  6F720008          MOV.W   @(8,SP),R2
   \   12DA  5E000000          JSR     @?F_MUL_L04
   \   12DE  6F730006          MOV.W   @(6,SP),R3
   \   12E2  6F720004          MOV.W   @(4,SP),R2
   \   12E6  5E000000          JSR     @?F_ADD_L04
   \   12EA  6DF0              MOV.W   R0,@-SP
   \   12EC  6DF1              MOV.W   R1,@-SP
   \   12EE  6F71001E          MOV.W   @(30,SP),R1
   \   12F2  6F70001C          MOV.W   @(28,SP),R0
   \   12F6  1933              SUB.W   R3,R3
   \   12F8  79024000          MOV.W   #16384,R2
   \   12FC  5E000000          JSR     @?F_MUL_L04
   \   1300  6F73000E          MOV.W   @(14,SP),R3
   \   1304  6F72000C          MOV.W   @(12,SP),R2
   \   1308  5E000000          JSR     @?F_MUL_L04
   \   130C  6D73              MOV.W   @SP+,R3
   \   130E  6D72              MOV.W   @SP+,R2
   \   1310  5E000000          JSR     @?F_DIV_SWAP_L04
   \   1314  6D73              MOV.W   @SP+,R3
   \   1316  6D72              MOV.W   @SP+,R2
   \   1318  5E000000          JSR     @?F_ADD_L04
    815                  } else {                                                                        /* non liniarety == 0 */
   \   131C  4020              BRA     ?0190
   \   131E            ?0189:
    816                          return (raw_data-low_span) / span ;
   \   131E  6F710012          MOV.W   @(18,SP),R1
   \   1322  6F700010          MOV.W   @(16,SP),R0
   \   1326  6F73000E          MOV.W   @(14,SP),R3
   \   132A  6F72000C          MOV.W   @(12,SP),R2
   \   132E  5E000000          JSR     @?F_SUB_L04
   \   1332  6F730006          MOV.W   @(6,SP),R3
   \   1336  6F720004          MOV.W   @(4,SP),R2
   \   133A  5E000000          JSR     @?F_DIV_L04
    817                  }
   \   133E            ?0190:
   \   133E  79020008          MOV.W   #8,R2
   \   1342  0927              ADD.W   R2,SP
   \   1344  5470              RTS
    818          
    819          }
    820          
    821          /*************************************************************************
    822          *
    823          *  Calculate and filter temperature
    824          *
    825          *************************************************************************/
    826          void CalcTemp(signed char ch)
    827          {
   \   1346            CalcTemp:
   \   1346  6DF4              PUSH    R4
   \   1348  6DF6              PUSH    R6
   \   134A  7902000C          MOV.W   #12,R2
   \   134E  1927              SUB.W   R2,SP
   \   1350  0C9E              MOV.B   R1L,R6L
    828          
    829                  float temp_data, resist, temp_resist ;
    830          
    831                  resist = (float) raw_data[ch] ;
   \   1352  7779              BLD     #7,R1L
   \   1354  1E11              SUBX.B  R1H,R1H
   \   1356  0911              ADD.W   R1,R1
   \   1358  6F110262          MOV.W   @(raw_data,R1),R1
   \   135C  1900              SUB.W   R0,R0
   \   135E  5E000000          JSR     @?UL_TO_FLT_L04
   \   1362  6FF10002          MOV.W   R1,@(2,SP)
   \   1366  69F0              MOV.W   R0,@SP
    832                  resist /= 10.0 ;
    833                  if (resist > 500.0 ) {                                                          /* Pt 1000 ?*/
   \   1368  6970              MOV.W   @SP,R0
   \   136A  6F710002          MOV.W   @(2,SP),R1
   \   136E  1933              SUB.W   R3,R3
   \   1370  79024120          MOV.W   #16672,R2
   \   1374  5E000000          JSR     @?F_DIV_L04
   \   1378  6FF10002          MOV.W   R1,@(2,SP)
   \   137C  69F0              MOV.W   R0,@SP
   \   137E  1933              SUB.W   R3,R3
   \   1380  790243FA          MOV.W   #17402,R2
   \   1384  5E000000          JSR     @?F_SUB_L04
   \   1388  0D00              MOV.W   R0,R0
   \   138A  4F16              BLE     ?0192
   \   138C            ?0191:
    834                          resist /= 10.0 ;                                                        /* Yes */
   \   138C  6970              MOV.W   @SP,R0
   \   138E  6F710002          MOV.W   @(2,SP),R1
   \   1392  1933              SUB.W   R3,R3
   \   1394  79024120          MOV.W   #16672,R2
   \   1398  5E000000          JSR     @?F_DIV_L04
   \   139C  6FF10002          MOV.W   R1,@(2,SP)
   \   13A0  69F0              MOV.W   R0,@SP
   \   13A2            ?0192:
    835                  }
    836          
    837          /*      temp_data = 3367.85 - sqrt(((100.0 - resist) / 58.0195e-6)+ 11342416.75) ;
    838          */
    839                  temp_resist = resist - 100.0 ;
    840                  temp_data = (temp_resist / 0.390802) +
    841                                                  ((temp_resist * temp_resist)/1000.0) ;   /* ASt mark */
   \   13A2  6F710002          MOV.W   @(2,SP),R1
   \   13A6  6970              MOV.W   @SP,R0
   \   13A8  1933              SUB.W   R3,R3
   \   13AA  7902C2C8          MOV.W   #-15672,R2
   \   13AE  5E000000          JSR     @?F_ADD_L04
   \   13B2  6FF10006          MOV.W   R1,@(6,SP)
   \   13B6  6FF00004          MOV.W   R0,@(4,SP)
   \   13BA  6F730006          MOV.W   @(6,SP),R3
   \   13BE  6F720004          MOV.W   @(4,SP),R2
   \   13C2  5E000000          JSR     @?F_MUL_L04
   \   13C6  1933              SUB.W   R3,R3
   \   13C8  7902447A          MOV.W   #17530,R2
   \   13CC  5E000000          JSR     @?F_DIV_L04
   \   13D0  6DF0              MOV.W   R0,@-SP
   \   13D2  6DF1              MOV.W   R1,@-SP
   \   13D4  6F71000A          MOV.W   @(10,SP),R1
   \   13D8  6F700008          MOV.W   @(8,SP),R0
   \   13DC  79031733          MOV.W   #5939,R3
   \   13E0  79023EC8          MOV.W   #16072,R2
   \   13E4  5E000000          JSR     @?F_DIV_L04
   \   13E8  6D73              MOV.W   @SP+,R3
   \   13EA  6D72              MOV.W   @SP+,R2
   \   13EC  5E000000          JSR     @?F_ADD_L04
   \   13F0  6FF1000A          MOV.W   R1,@(10,SP)
   \   13F4  6FF00008          MOV.W   R0,@(8,SP)
    842          
    843                  temp_data -= (float) offset[ch] / 10.0 ;
   \   13F8  0CE9              MOV.B   R6L,R1L
   \   13FA  7779              BLD     #7,R1L
   \   13FC  1E11              SUBX.B  R1H,R1H
   \   13FE  0911              ADD.W   R1,R1
   \   1400  6F1102EE          MOV.W   @(offset,R1),R1
   \   1404  7371              BTST    #7,R1H
   \   1406  4706              BEQ     $+8
   \   1408  7900FFFF          MOV.W   #-1,R0
   \   140C  4002              BRA     $+4
   \   140E  1900              SUB.W   R0,R0
   \   1410  5E000000          JSR     @?SL_TO_FLT_L04
   \   1414  1933              SUB.W   R3,R3
   \   1416  79024120          MOV.W   #16672,R2
   \   141A  5E000000          JSR     @?F_DIV_L04
   \   141E  6DF0              MOV.W   R0,@-SP
   \   1420  6DF1              MOV.W   R1,@-SP
   \   1422  6F70000C          MOV.W   @(12,SP),R0
   \   1426  6F71000E          MOV.W   @(14,SP),R1
   \   142A  6D73              MOV.W   @SP+,R3
   \   142C  6D72              MOV.W   @SP+,R2
   \   142E  5E000000          JSR     @?F_SUB_L04
   \   1432  6FF1000A          MOV.W   R1,@(10,SP)
   \   1436  6FF00008          MOV.W   R0,@(8,SP)
    844                  temp_data *= gain[ch] ;
   \   143A  0CE9              MOV.B   R6L,R1L
   \   143C  7779              BLD     #7,R1L
   \   143E  1E11              SUBX.B  R1H,R1H
   \   1440  0911              ADD.W   R1,R1
   \   1442  0911              ADD.W   R1,R1
   \   1444  6DF1              MOV.W   R1,@-SP
   \   1446  6F70000A          MOV.W   @(10,SP),R0
   \   144A  6F71000C          MOV.W   @(12,SP),R1
   \   144E  6D73              MOV.W   @SP+,R3
   \   1450  0D32              MOV.W   R3,R2
   \   1452  6F2302B8          MOV.W   @(gain+2,R2),R3
   \   1456  6F2202B6          MOV.W   @(gain,R2),R2
   \   145A  5E000000          JSR     @?F_MUL_L04
   \   145E  6FF1000A          MOV.W   R1,@(10,SP)
   \   1462  6FF00008          MOV.W   R0,@(8,SP)
    845                  mes_data[ch] += (temp_data - mes_data[ch])/ ((float)t_filter + 1.0) ;
   \   1466  0CE9              MOV.B   R6L,R1L
   \   1468  7779              BLD     #7,R1L
   \   146A  1E11              SUBX.B  R1H,R1H
   \   146C  0911              ADD.W   R1,R1
   \   146E  0911              ADD.W   R1,R1
   \   1470  6F100280          MOV.W   @(mes_data+2,R1),R0
   \   1474  6F11027E          MOV.W   @(mes_data,R1),R1
   \   1478  0D11              MOV.W   R1,R1
   \   147A  4702              BEQ     $+4
   \   147C  7171              BNOT    #7,R1H
   \   147E  6DF1              MOV.W   R1,@-SP
   \   1480  0D01              MOV.W   R0,R1
   \   1482  6D70              MOV.W   @SP+,R0
   \   1484  6F73000A          MOV.W   @(10,SP),R3
   \   1488  6F720008          MOV.W   @(8,SP),R2
   \   148C  5E000000          JSR     @?F_ADD_L04
   \   1490  6DF1              MOV.W   R1,@-SP
   \   1492  6A090332          MOV.B   @t_filter:16,R1L
   \   1496  6DF0              MOV.W   R0,@-SP
   \   1498  F100              MOV.B   #0,R1H
   \   149A  1900              SUB.W   R0,R0
   \   149C  5E000000          JSR     @?UL_TO_FLT_L04
   \   14A0  1933              SUB.W   R3,R3
   \   14A2  79023F80          MOV.W   #16256,R2
   \   14A6  5E000000          JSR     @?F_ADD_L04
   \   14AA  6F730002          MOV.W   @(2,SP),R3
   \   14AE  6972              MOV.W   @SP,R2
   \   14B0  6FF20002          MOV.W   R2,@(2,SP)
   \   14B4  0B87              ADDS.W  #2,SP
   \   14B6  6D72              MOV.W   @SP+,R2
   \   14B8  5E000000          JSR     @?F_DIV_SWAP_L04
   \   14BC  0CEB              MOV.B   R6L,R3L
   \   14BE  777B              BLD     #7,R3L
   \   14C0  1E33              SUBX.B  R3H,R3H
   \   14C2  0933              ADD.W   R3,R3
   \   14C4  0933              ADD.W   R3,R3
   \   14C6  6DF0              MOV.W   R0,@-SP
   \   14C8  6DF1              MOV.W   R1,@-SP
   \   14CA  6F30027E          MOV.W   @(mes_data,R3),R0
   \   14CE  6F310280          MOV.W   @(mes_data+2,R3),R1
   \   14D2  6DF3              MOV.W   R3,@-SP
   \   14D4  6F730002          MOV.W   @(2,SP),R3
   \   14D8  6972              MOV.W   @SP,R2
   \   14DA  6FF20002          MOV.W   R2,@(2,SP)
   \   14DE  0B87              ADDS.W  #2,SP
   \   14E0  6F720002          MOV.W   @(2,SP),R2
   \   14E4  6974              MOV.W   @SP,R4
   \   14E6  6FF40002          MOV.W   R4,@(2,SP)
   \   14EA  0B87              ADDS.W  #2,SP
   \   14EC  5E000000          JSR     @?F_ADD_L04
   \   14F0  6D73              MOV.W   @SP+,R3
   \   14F2  6FB10280          MOV.W   R1,@(mes_data+2,R3)
   \   14F6  6FB0027E          MOV.W   R0,@(mes_data,R3)
    846          }
   \   14FA  7902000C          MOV.W   #12,R2
   \   14FE  0927              ADD.W   R2,SP
   \   1500  6D76              POP     R6
   \   1502  6D74              POP     R4
   \   1504  5470              RTS
    847          
    848          /*************************************************************************
    849          *
    850          *  Calculate and filter "other"
    851          *
    852          *************************************************************************/
    853          void CalcOther(signed char ch)
    854          {
   \   1506            CalcOther:
   \   1506  6DF4              PUSH    R4
   \   1508  6DF6              PUSH    R6
   \   150A  1B87              SUBS.W  #2,SP
   \   150C  1B87              SUBS.W  #2,SP
   \   150E  0C9E              MOV.B   R1L,R6L
    855          
    856                  float temp_data ;
    857          
    858          /*      temp_data = (float)raw_data[ch] * 2.5 / 65535.0 ;/*input/16 bit*2.5 volt */
    859          */
    860                  temp_data = (float)((short)raw_data[ch]) * 2.5 / 32767.0 ;/*input/15 bit*2.5 volt */
   \   1510  7779              BLD     #7,R1L
   \   1512  1E11              SUBX.B  R1H,R1H
   \   1514  0911              ADD.W   R1,R1
   \   1516  6F110262          MOV.W   @(raw_data,R1),R1
   \   151A  7371              BTST    #7,R1H
   \   151C  4706              BEQ     $+8
   \   151E  7900FFFF          MOV.W   #-1,R0
   \   1522  4002              BRA     $+4
   \   1524  1900              SUB.W   R0,R0
   \   1526  5E000000          JSR     @?SL_TO_FLT_L04
   \   152A  1933              SUB.W   R3,R3
   \   152C  79024020          MOV.W   #16416,R2
   \   1530  5E000000          JSR     @?F_MUL_L04
   \   1534  7903FE00          MOV.W   #-512,R3
   \   1538  790246FF          MOV.W   #18175,R2
   \   153C  5E000000          JSR     @?F_DIV_L04
   \   1540  6FF10002          MOV.W   R1,@(2,SP)
   \   1544  69F0              MOV.W   R0,@SP
    861                  temp_data -= (float) offset[ch]/ 10000.0 ;
   \   1546  0CE9              MOV.B   R6L,R1L
   \   1548  7779              BLD     #7,R1L
   \   154A  1E11              SUBX.B  R1H,R1H
   \   154C  0911              ADD.W   R1,R1
   \   154E  6F1102EE          MOV.W   @(offset,R1),R1
   \   1552  7371              BTST    #7,R1H
   \   1554  4706              BEQ     $+8
   \   1556  7900FFFF          MOV.W   #-1,R0
   \   155A  4002              BRA     $+4
   \   155C  1900              SUB.W   R0,R0
   \   155E  5E000000          JSR     @?SL_TO_FLT_L04
   \   1562  79034000          MOV.W   #16384,R3
   \   1566  7902461C          MOV.W   #17948,R2
   \   156A  5E000000          JSR     @?F_DIV_L04
   \   156E  6DF0              MOV.W   R0,@-SP
   \   1570  6DF1              MOV.W   R1,@-SP
   \   1572  6F700004          MOV.W   @(4,SP),R0
   \   1576  6F710006          MOV.W   @(6,SP),R1
   \   157A  6D73              MOV.W   @SP+,R3
   \   157C  6D72              MOV.W   @SP+,R2
   \   157E  5E000000          JSR     @?F_SUB_L04
   \   1582  6FF10002          MOV.W   R1,@(2,SP)
   \   1586  69F0              MOV.W   R0,@SP
    862                  temp_data *= gain[ch] ;
   \   1588  0CE9              MOV.B   R6L,R1L
   \   158A  7779              BLD     #7,R1L
   \   158C  1E11              SUBX.B  R1H,R1H
   \   158E  0911              ADD.W   R1,R1
   \   1590  0911              ADD.W   R1,R1
   \   1592  6DF1              MOV.W   R1,@-SP
   \   1594  6F700002          MOV.W   @(2,SP),R0
   \   1598  6F710004          MOV.W   @(4,SP),R1
   \   159C  6D73              MOV.W   @SP+,R3
   \   159E  0D32              MOV.W   R3,R2
   \   15A0  6F2302B8          MOV.W   @(gain+2,R2),R3
   \   15A4  6F2202B6          MOV.W   @(gain,R2),R2
   \   15A8  5E000000          JSR     @?F_MUL_L04
   \   15AC  6FF10002          MOV.W   R1,@(2,SP)
   \   15B0  69F0              MOV.W   R0,@SP
    863                  mes_data[ch] += (temp_data - mes_data[ch])/ ((float)o_filter + 1.0) ;
   \   15B2  0CE9              MOV.B   R6L,R1L
   \   15B4  7779              BLD     #7,R1L
   \   15B6  1E11              SUBX.B  R1H,R1H
   \   15B8  0911              ADD.W   R1,R1
   \   15BA  0911              ADD.W   R1,R1
   \   15BC  6F100280          MOV.W   @(mes_data+2,R1),R0
   \   15C0  6F11027E          MOV.W   @(mes_data,R1),R1
   \   15C4  0D11              MOV.W   R1,R1
   \   15C6  4702              BEQ     $+4
   \   15C8  7171              BNOT    #7,R1H
   \   15CA  6DF1              MOV.W   R1,@-SP
   \   15CC  0D01              MOV.W   R0,R1
   \   15CE  6D70              MOV.W   @SP+,R0
   \   15D0  6F730002          MOV.W   @(2,SP),R3
   \   15D4  6972              MOV.W   @SP,R2
   \   15D6  5E000000          JSR     @?F_ADD_L04
   \   15DA  6DF1              MOV.W   R1,@-SP
   \   15DC  6A090333          MOV.B   @o_filter:16,R1L
   \   15E0  6DF0              MOV.W   R0,@-SP
   \   15E2  F100              MOV.B   #0,R1H
   \   15E4  1900              SUB.W   R0,R0
   \   15E6  5E000000          JSR     @?UL_TO_FLT_L04
   \   15EA  1933              SUB.W   R3,R3
   \   15EC  79023F80          MOV.W   #16256,R2
   \   15F0  5E000000          JSR     @?F_ADD_L04
   \   15F4  6F730002          MOV.W   @(2,SP),R3
   \   15F8  6972              MOV.W   @SP,R2
   \   15FA  6FF20002          MOV.W   R2,@(2,SP)
   \   15FE  0B87              ADDS.W  #2,SP
   \   1600  6D72              MOV.W   @SP+,R2
   \   1602  5E000000          JSR     @?F_DIV_SWAP_L04
   \   1606  0CEB              MOV.B   R6L,R3L
   \   1608  777B              BLD     #7,R3L
   \   160A  1E33              SUBX.B  R3H,R3H
   \   160C  0933              ADD.W   R3,R3
   \   160E  0933              ADD.W   R3,R3
   \   1610  6DF0              MOV.W   R0,@-SP
   \   1612  6DF1              MOV.W   R1,@-SP
   \   1614  6F30027E          MOV.W   @(mes_data,R3),R0
   \   1618  6F310280          MOV.W   @(mes_data+2,R3),R1
   \   161C  6DF3              MOV.W   R3,@-SP
   \   161E  6F730002          MOV.W   @(2,SP),R3
   \   1622  6972              MOV.W   @SP,R2
   \   1624  6FF20002          MOV.W   R2,@(2,SP)
   \   1628  0B87              ADDS.W  #2,SP
   \   162A  6F720002          MOV.W   @(2,SP),R2
   \   162E  6974              MOV.W   @SP,R4
   \   1630  6FF40002          MOV.W   R4,@(2,SP)
   \   1634  0B87              ADDS.W  #2,SP
   \   1636  5E000000          JSR     @?F_ADD_L04
   \   163A  6D73              MOV.W   @SP+,R3
   \   163C  6FB10280          MOV.W   R1,@(mes_data+2,R3)
   \   1640  6FB0027E          MOV.W   R0,@(mes_data,R3)
    864          
    865          }
   \   1644  0B87              ADDS.W  #2,SP
   \   1646  0B87              ADDS.W  #2,SP
   \   1648  6D76              POP     R6
   \   164A  6D74              POP     R4
   \   164C  5470              RTS
    866          
    867          /*************************************************************************
    868          *
    869          *  Unpack sensor data
    870          *
    871          *************************************************************************/
    872          void UnpackSensData(signed char ch)
    873          {
   \   164E            UnpackSensData:
   \   164E  6DF4              PUSH    R4
   \   1650  6DF5              PUSH    R5
   \   1652  6DF6              PUSH    R6
   \   1654  7902000A          MOV.W   #10,R2
   \   1658  1927              SUB.W   R2,SP
   \   165A  0C9E              MOV.B   R1L,R6L
    874          
    875                  short knst, g1, g2, g3 ;
    876                  float temp_data ;
    877                  char temp_byte ;
    878                  unsigned short temp_us, knst_us ;
    879          
    880                  temp_byte = FindTemp(ch) ;                                              /* find temperature channel */
    881                  if (temp_byte >= NOIOCH ) {                                     /* no temp. found */
   \   165C  0CE9              MOV.B   R6L,R1L
   \   165E  7779              BLD     #7,R1L
   \   1660  1E11              SUBX.B  R1H,R1H
   \   1662  5E00202C          JSR     @FindTemp:16
   \   1666  0C96              MOV.B   R1L,R6H
   \   1668  A90E              CMP.B   #14,R1L
   \   166A  450E              BCS     ?0194
   \   166C            ?0193:
    882                          temp_data = 0 ;                                                                 /* 25. 0 - 25.0  */
   \   166C  1911              SUB.W   R1,R1
   \   166E  1900              SUB.W   R0,R0
   \   1670  6FF10008          MOV.W   R1,@(8,SP)
   \   1674  6FF00006          MOV.W   R0,@(6,SP)
    883                  } else {
   \   1678  4020              BRA     ?0195
   \   167A            ?0194:
    884                          temp_data = mes_data[temp_byte] - 25.0 ;
   \   167A  F904              MOV.B   #4,R1L
   \   167C  5061              MULXU   R6H,R1
   \   167E  0D10              MOV.W   R1,R0
   \   1680  6F010280          MOV.W   @(mes_data+2,R0),R1
   \   1684  6F00027E          MOV.W   @(mes_data,R0),R0
   \   1688  1933              SUB.W   R3,R3
   \   168A  7902C1C8          MOV.W   #-15928,R2
   \   168E  5E000000          JSR     @?F_ADD_L04
   \   1692  6FF10008          MOV.W   R1,@(8,SP)
   \   1696  6FF00006          MOV.W   R0,@(6,SP)
   \   169A            ?0195:
    885                  }
    886                  temp_data /= 100.0 ;                      /* use 1/100 deg C in calc. */
   \   169A  6F700006          MOV.W   @(6,SP),R0
   \   169E  6F710008          MOV.W   @(8,SP),R1
   \   16A2  1933              SUB.W   R3,R3
   \   16A4  790242C8          MOV.W   #17096,R2
   \   16A8  5E000000          JSR     @?F_DIV_L04
   \   16AC  6FF10008          MOV.W   R1,@(8,SP)
   \   16B0  6FF00006          MOV.W   R0,@(6,SP)
    887          
    888                                                                                                                  /* start calculate data for 0 % FRO */
    889                  if ((eep_type[ch >>1] & 0x01) || (eep_type[ch>>1] & 0x10)) { /* OK data */
   \   16B4  0CE9              MOV.B   R6L,R1L
   \   16B6  1189              SHAR.B  R1L
   \   16B8  7779              BLD     #7,R1L
   \   16BA  1E11              SUBX.B  R1H,R1H
   \   16BC  6E1B0329          MOV.B   @(eep_type,R1),R3L
   \   16C0  EB01              AND.B   #1,R3L
   \   16C2  4614              BNE     ?0196
   \   16C4  0CE9              MOV.B   R6L,R1L
   \   16C6  1189              SHAR.B  R1L
   \   16C8  7779              BLD     #7,R1L
   \   16CA  1E11              SUBX.B  R1H,R1H
   \   16CC  6E1B0329          MOV.B   @(eep_type,R1),R3L
   \   16D0  EB10              AND.B   #16,R3L
   \   16D2  4604              BNE     $+6
   \   16D4  5A001E7C          JMP     @?0197:16
   \   16D8            ?0198:
   \   16D8            ?0199:
   \   16D8            ?0196:
    890                          knst =  ((short) packed_data[ch >> 1][8] +
    891                                                                    packed_data[ch >> 1][9] * 256) & 0x1fff ;
    892          
    893                          if (knst & 0x1000) {                            /* negative */
   \   16D8  0CE9              MOV.B   R6L,R1L
   \   16DA  1189              SHAR.B  R1L
   \   16DC  7779              BLD     #7,R1L
   \   16DE  1E11              SUBX.B  R1H,R1H
   \   16E0  79030028          MOV.W   #40,R3
   \   16E4  5E000000          JSR     @?SS_MUL_L02
   \   16E8  6E1B0103          MOV.B   @(packed_data+9,R1),R3L
   \   16EC  F300              MOV.B   #0,R3H
   \   16EE  0CB3              MOV.B   R3L,R3H
   \   16F0  FB00              MOV.B   #0,R3L
   \   16F2  0CE9              MOV.B   R6L,R1L
   \   16F4  1189              SHAR.B  R1L
   \   16F6  7779              BLD     #7,R1L
   \   16F8  1E11              SUBX.B  R1H,R1H
   \   16FA  6DF3              MOV.W   R3,@-SP
   \   16FC  79030028          MOV.W   #40,R3
   \   1700  5E000000          JSR     @?SS_MUL_L02
   \   1704  6D73              MOV.W   @SP+,R3
   \   1706  6E180102          MOV.B   @(packed_data+8,R1),R0L
   \   170A  088B              ADD.B   R0L,R3L
   \   170C  9300              ADDX.B  #0,R3H
   \   170E  E31F              AND.B   #31,R3H
   \   1710  6FF30002          MOV.W   R3,@(2,SP)
   \   1714  E310              AND.B   #16,R3H
   \   1716  470A              BEQ     ?0201
   \   1718            ?0200:
    894                                  knst |= 0xe000 ;
   \   1718  6F710002          MOV.W   @(2,SP),R1
   \   171C  C1E0              OR.B    #224,R1H
   \   171E  6FF10002          MOV.W   R1,@(2,SP)
   \   1722            ?0201:
    895                          }
    896                          g1 =  ((short) ((packed_data[ch >> 1][9] >> 5) & 0x07) +
    897                                                                  (packed_data[ch >> 1][10] * 8)  +
    898                                                                  ((packed_data[ch >> 1][11] & 0x03) * 2048)) & 0x1fff ;
    899                          if (g1 & 0x1000) {                            /* negative */
   \   1722  0CE9              MOV.B   R6L,R1L
   \   1724  1189              SHAR.B  R1L
   \   1726  7779              BLD     #7,R1L
   \   1728  1E11              SUBX.B  R1H,R1H
   \   172A  79030028          MOV.W   #40,R3
   \   172E  5E000000          JSR     @?SS_MUL_L02
   \   1732  6E1B0105          MOV.B   @(packed_data+11,R1),R3L
   \   1736  EB03              AND.B   #3,R3L
   \   1738  F300              MOV.B   #0,R3H
   \   173A  F90B              MOV.B   #11,R1L
   \   173C  0933              ADD.W   R3,R3
   \   173E  1A09              DEC.B   R1L
   \   1740  46FA              BNE     $-4
   \   1742  0CE9              MOV.B   R6L,R1L
   \   1744  1189              SHAR.B  R1L
   \   1746  7779              BLD     #7,R1L
   \   1748  1E11              SUBX.B  R1H,R1H
   \   174A  6DF3              MOV.W   R3,@-SP
   \   174C  79030028          MOV.W   #40,R3
   \   1750  5E000000          JSR     @?SS_MUL_L02
   \   1754  FB08              MOV.B   #8,R3L
   \   1756  6E180104          MOV.B   @(packed_data+10,R1),R0L
   \   175A  5083              MULXU   R0L,R3
   \   175C  6D71              MOV.W   @SP+,R1
   \   175E  0913              ADD.W   R1,R3
   \   1760  0CE9              MOV.B   R6L,R1L
   \   1762  1189              SHAR.B  R1L
   \   1764  7779              BLD     #7,R1L
   \   1766  1E11              SUBX.B  R1H,R1H
   \   1768  6DF3              MOV.W   R3,@-SP
   \   176A  79030028          MOV.W   #40,R3
   \   176E  5E000000          JSR     @?SS_MUL_L02
   \   1772  6E1B0103          MOV.B   @(packed_data+9,R1),R3L
   \   1776  128B              ROTL.B  R3L
   \   1778  128B              ROTL.B  R3L
   \   177A  128B              ROTL.B  R3L
   \   177C  EB07              AND.B   #7,R3L
   \   177E  EB07              AND.B   #7,R3L
   \   1780  6D71              MOV.W   @SP+,R1
   \   1782  08B9              ADD.B   R3L,R1L
   \   1784  9100              ADDX.B  #0,R1H
   \   1786  E11F              AND.B   #31,R1H
   \   1788  69F1              MOV.W   R1,@SP
   \   178A  E110              AND.B   #16,R1H
   \   178C  4706              BEQ     ?0203
   \   178E            ?0202:
    900                                  g1 |= 0xe000 ;
   \   178E  6971              MOV.W   @SP,R1
   \   1790  C1E0              OR.B    #224,R1H
   \   1792  69F1              MOV.W   R1,@SP
   \   1794            ?0203:
    901                          }
    902                          g2 =  ((short) ((packed_data[ch >> 1][11] >> 2) & 0x3f) +
    903                                                                  ((packed_data[ch >> 1][12] & 0x7f)* 64 )) & 0x1fff ;
    904                          if (g2 & 0x1000) {                            /* negative */
   \   1794  0CE9              MOV.B   R6L,R1L
   \   1796  1189              SHAR.B  R1L
   \   1798  7779              BLD     #7,R1L
   \   179A  1E11              SUBX.B  R1H,R1H
   \   179C  79030028          MOV.W   #40,R3
   \   17A0  5E000000          JSR     @?SS_MUL_L02
   \   17A4  6E1B0106          MOV.B   @(packed_data+12,R1),R3L
   \   17A8  EB7F              AND.B   #127,R3L
   \   17AA  F940              MOV.B   #64,R1L
   \   17AC  50B1              MULXU   R3L,R1
   \   17AE  0CEB              MOV.B   R6L,R3L
   \   17B0  118B              SHAR.B  R3L
   \   17B2  777B              BLD     #7,R3L
   \   17B4  1E33              SUBX.B  R3H,R3H
   \   17B6  6DF1              MOV.W   R1,@-SP
   \   17B8  0D31              MOV.W   R3,R1
   \   17BA  79030028          MOV.W   #40,R3
   \   17BE  5E000000          JSR     @?SS_MUL_L02
   \   17C2  6E1B0105          MOV.B   @(packed_data+11,R1),R3L
   \   17C6  110B              SHLR.B  R3L
   \   17C8  110B              SHLR.B  R3L
   \   17CA  EB3F              AND.B   #63,R3L
   \   17CC  6D71              MOV.W   @SP+,R1
   \   17CE  08B9              ADD.B   R3L,R1L
   \   17D0  9100              ADDX.B  #0,R1H
   \   17D2  E11F              AND.B   #31,R1H
   \   17D4  0D14              MOV.W   R1,R4
   \   17D6  E110              AND.B   #16,R1H
   \   17D8  4702              BEQ     ?0205
   \   17DA            ?0204:
    905                                  g2 |= 0xe000 ;
   \   17DA  C4E0              OR.B    #224,R4H
   \   17DC            ?0205:
    906                          }
    907                          g3 =  ((short) ((packed_data[ch >> 1][12] >> 7) & 0x01) +
    908                                                                  (packed_data[ch >> 1][13] * 2)  +
    909                                                                  ((packed_data[ch >> 1][14] & 0x0f) * 512)) & 0x1fff ;
    910                          if (g3 & 0x1000) {                            /* negative */
   \   17DC  0CE9              MOV.B   R6L,R1L
   \   17DE  1189              SHAR.B  R1L
   \   17E0  7779              BLD     #7,R1L
   \   17E2  1E11              SUBX.B  R1H,R1H
   \   17E4  79030028          MOV.W   #40,R3
   \   17E8  5E000000          JSR     @?SS_MUL_L02
   \   17EC  6E1B0108          MOV.B   @(packed_data+14,R1),R3L
   \   17F0  EB0F              AND.B   #15,R3L
   \   17F2  F300              MOV.B   #0,R3H
   \   17F4  0CB3              MOV.B   R3L,R3H
   \   17F6  FB00              MOV.B   #0,R3L
   \   17F8  1003              SHLL.B  R3H
   \   17FA  0CE9              MOV.B   R6L,R1L
   \ eF   @@ @B
 4 0       @@U     @B
U J       ((A!-(  #7,R1L
   \   1800  1E11              SUBX.B  R1H,R1H
   \   1802  6DF3              MOV.W   R3,@-SP
   \   1804  79030028          MOV.W   #40,R3
   \   1808  5E000000          JSR     @?SS_MUL_L02
   \   180C  6E1B0107          MOV.B   @(packed_data+13,R1),R3L
   \   1810  F300              MOV.B   #0,R3H
   \   1812  0933              ADD.W   R3,R3
   \   1814  6D71              MOV.W   @SP+,R1
   \   1816  0913              ADD.W   R1,R3
   \   1818  0CE9              MOV.B   R6L,R1L
   \   181A  1189              SHAR.B  R1L
   \   181C  7779              BLD     #7,R1L
   \   181E  1E11              SUBX.B  R1H,R1H
   \   1820  6DF3              MOV.W   R3,@-SP
   \   1822  79030028          MOV.W   #40,R3
   \   1826  5E000000          JSR     @?SS_MUL_L02
   \   182A  6E1B0106          MOV.B   @(packed_data+12,R1),R3L
   \   182E  128B              ROTL.B  R3L
   \   1830  EB01              AND.B   #1,R3L
   \   1832  EB01              AND.B   #1,R3L
   \   1834  6D71              MOV.W   @SP+,R1
   \   1836  08B9              ADD.B   R3L,R1L
   \   1838  9100              ADDX.B  #0,R1H
   \   183A  E11F              AND.B   #31,R1H
   \   183C  0D15              MOV.W   R1,R5
   \   183E  E110              AND.B   #16,R1H
   \   1840  4702              BEQ     ?0207
   \   1842            ?0206:
    911                                  g3 |= 0xe000 ;
   \   1842  C5E0              OR.B    #224,R5H
   \   1844            ?0207:
    912                          }
    913                          sens_data[0] = CalcSensData(knst, g1, g2, g3, temp_data) ;
   \   1844  6F710008          MOV.W   @(8,SP),R1
   \   1848  6F700006          MOV.W   @(6,SP),R0
   \   184C  6DF1              MOV.W   R1,@-SP
   \   184E  6DF0              MOV.W   R0,@-SP
   \   1850  6DF5              MOV.W   R5,@-SP
   \   1852  6DF4              MOV.W   R4,@-SP
   \   1854  6F710008          MOV.W   @(8,SP),R1
   \   1858  6DF1              MOV.W   R1,@-SP
   \   185A  6F71000C          MOV.W   @(12,SP),R1
   \   185E  5E001F34          JSR     @CalcSensData:16
   \   1862  7902000A          MOV.W   #10,R2
   \   1866  0927              ADD.W   R2,SP
   \   1868  6B8100F0          MOV.W   R1,@sens_data:16
    914                                                                                                                                          /* sens value 0%FRO @ temp */
    915          
    916                                                                                                                  /* start calculate data for 40 % FRO */
    917                          knst_us =  ((short) ((packed_data[ch >> 1][14] >> 4) & 0x0f) +
    918                                                                                  (packed_data[ch >> 1][15] * 16) +
    919                                                                                  ((packed_data[ch >> 1][16] & 0x01) * 4096))& 0x1fff ;
   \   186C  0CE9              MOV.B   R6L,R1L
   \   186E  1fF   @@ @B
 4 0       @@U     @B
U J       ((A (
   \   1872  1E11              SUBX.B  R1H,R1H
   \   1874  79030028          MOV.W   #40,R3
   \   1878  5E000000          JSR     @?SS_MUL_L02
   \   187C  6E1B010A          MOV.B   @(packed_data+16,R1),R3L
   \   1880  EB01              AND.B   #1,R3L
   \   1882  F300              MOV.B   #0,R3H
   \   1884  F90C              MOV.B   #12,R1L
   \   1886  0933              ADD.W   R3,R3
   \   1888  1A09              DEC.B   R1L
   \   188A  46FA              BNE     $-4
   \   188C  0CE9              MOV.B   R6L,R1L
   \   188E  1189              SHAR.B  R1L
   \   1890  7779              BLD     #7,R1L
   \   1892  1E11              SUBX.B  R1H,R1H
   \   1894  6DF3              MOV.W   R3,@-SP
   \   1896  79030028          MOV.W   #40,R3
   \   189A  5E000000          JSR     @?SS_MUL_L02
   \   189E  FB10              MOV.B   #16,R3L
   \   18A0  6E180109          MOV.B   @(packed_data+15,R1),R0L
   \   18A4  5083              MULXU   R0L,R3
   \   18A6  6D71              MOV.W   @SP+,R1
   \   18A8  0913              ADD.W   R1,R3
   \   18AA  0CE9              MOV.B   R6L,R1L
   \   18AC  1189              SHAR.B  R1L
   \   18AE  7779              BLD     #7,R1L
   \   18B0  1E11              SUBX.B  R1H,R1H
   \   18B2  6DF3              MOV.W   R3,@-SP
   \   18B4  79030028          MOV.W   #40,R3
   \   18B8  5E000000          JSR     @?SS_MUL_L02
   \   18BC  6E1B0108          MOV.B   @(packed_data+14,R1),R3L
   \   18C0  110B              SHLR.B  R3L
   \   18C2  110B              SHLR.B  R3L
   \   18C4  110B              SHLR.B  R3L
   \   18C6  110B              SHLR.B  R3L
   \   18C8  EB0F              AND.B   #15,R3L
   \   18CA  6D71              MOV.W   @SP+,R1
   \   18CC  08B9              ADD.B   R3L,R1L
   \   18CE  9100              ADDX.B  #0,R1H
   \   18D0  E11F              AND.B   #31,R1H
   \   18D2  6FF10004          MOV.W   R1,@(4,SP)
    920          
    921                          g1 =  ((short) ((packed_data[ch >> 1][16] >> 1) & 0x7f) +
    922                                                                  ((packed_data[ch >> 1][17] & 0x3f) * 128)) & 0x1fff ;
    923                          if (g1 & 0x1000) {                            /* negative */
   \   18D6  0CE9              MOV.B   R6L,R1L
   \   18D8  1189              SHAR.B  R1L
   \   18DA  7779              BLD     #7,R1L
   \   18DC  1E11              SUBX.B  R1H,R1H
   \   18DE  79030028          MOV.W   #40,R3
   \   18E2  5E000000          JSR     @?SS_MUL_L02
   \   18E6  6E1B010B          MOV.B   @(packed_data+17,R1),R3L
   \   18EA  EB3F              AND.B   #63,R3L
   \   18EC  F980              MOV.B   #128,R1L
   \   18EE  50B1              MULXU   R3L,R1
   \   18F0  0CEB              MOV.B   R6L,R3L
   \   18F2  118B              SHAR.B  R3L
   \   18F4  777B              BLD     #7,R3L
   \   18F6  1E33              SUBX.B  R3H,R3H
   \   18F8  6DF1              MOV.W   R1,@-SP
   \   18FA  0D31              MOV.W   R3,R1
   \   18FC  79030028          MOV.W   #40,R3
   \   1900  5E000000          JSR     @?SS_MUL_L02
   \   1904  6E1B010A          MOV.B   @(packed_data+16,R1),R3L
   \   1908  110B              SHLR.B  R3L
   \   190A  EB7F              AND.B   #127,R3L
   \   190C  6D71              MOV.W   @SP+,R1
   \   190E  08B9              ADD.B   R3L,R1L
   \   1910  9100              ADDX.B  #0,R1H
   \   1912  E11F              AND.B   #31,R1H
   \   1914  69F1              MOV.W   R1,@SP
   \   1916  E110              AND.B   #16,R1H
   \   1918  4706              BEQ     ?0209
   \   191A            ?0208:
    924                                  g1 |= 0xe000 ;
   \   191A  6971              MOV.W   @SP,R1
   \   191C  C1E0              OR.B    #224,R1H
   \   191E  69F1              MOV.W   R1,@SP
   \   1920            ?0209:
    925                          }
    926                          g2 =  ((short) ((packed_data[ch >> 1][17] >> 6) & 0x03) +
    927                                                                  (packed_data[ch >> 1][18] * 4)  +
    928                                                                  ((packed_data[ch >> 1][19]&lF   @@ @B
 4 0       @@U     @B
U J       ((A^Xj() {                            /* negative */
   \   1920  0CE9              MOV.B   R6L,R1L
   \   1922  1189              SHAR.B  R1L
   \   1924  7779              BLD     #7,R1L
   \   1926  1E11              SUBX.B  R1H,R1H
   \   1928  79030028          MOV.W   #40,R3
   \   192C  5E000000          JSR     @?SS_MUL_L02
   \   1930  6E1B010D          MOV.B   @(packed_data+19,R1),R3L
   \   1934  EB07              AND.B   #7,R3L
   \   1936  F300              MOV.B   #0,R3H
   \   1938  0CB3              MOV.B   R3L,R3H
   \   193A  FB00              MOV.B   #0,R3L
   \   193C  1003              SHLL.B  R3H
   \   193E  1003              SHLL.B  R3H
   \   1940  0CE9              MOV.B   R6L,R1L
   \   1942  1189              SHAR.B  R1L
   \   1944  7779              BLD     #7,R1L
   \   1946  1E11              SUBX.B  R1H,R1H
   \   1948  6DF3              MOV.W   R3,@-SP
   \   194A  79030028          MOV.W   #40,R3
   \   194E  5E000000          JSR     @?SS_MUL_L02
   \   1952  FB04              MOV.B   #4,R3L
   \   1954  6E18010C          MOV.B   @(packed_data+18,R1),R0L
   \   1958  5083              MULXU   R0L,R3
   \   195A  6D71              MOV.W   @SP+,R1
   \   195C  0913              ADD.W   R1,R3
   \   195E  0CE9              MOV.B   R6L,R1L
   \   1960  1189              SHAR.B  R1L
   \   1962  7779              BLD     #7,R1L
   \   1964  1E11              SUBX.B  R1H,R1H
   \   1966  6DF3              MOV.W   R3,@-SP
   \   1968  79030028          MOV.W   #40,R3
   \   196C  5E000000          JSR     @?SS_MUL_L02
   \   1970  6E1B010B          MOV.B   @(packed_data+17,R1),R3L
   \   1974  128B              ROTL.B  R3L
   \   1976  128B              ROTL.B  R3L
   \   1978  EB03              AND.B   #3,R3L
   \   197A  EB03              AND.B   #3,R3L
   \   197C  6D71              MOV.W   @SP+,R1
   \   197E  08B9              ADD.B   R3L,R1L
   \   1980  9100              ADDX.B  #0,R1H
   \   1982  E11F              AND.B   #31,R1H
   \   1984  0D14              MOV.W   R1,R4
   \   1986  E110              AND.B   #16,R1H
   \   1988  4702              BEQ     ?0211
   \   198A            ?0210:
    930                                  g2 |= 0xe000 ;
   \   198A  C4E0              OR.B    #224,R4H
   \   198C            ?0211:
    931                          }
    932                          g3 =  ((short) ((packed_data[ch >> 1][19] >> 3) & 0x1f) +
    933                                                                  (packed_data[ch >> 1][20] * 32)) & 0x1fff ;
    934                          if (g3 & 0x1000) {                            /* negative */
   \   198C  0CE9              MOV.B   R6L,R1L
   \   198E  1189              SHAR.B  R1L
   \   1990  7779              BLD     #7,R1L
   \   1992  1E11              SUBX.B  R1H,R1H
   \   1994  79030028          MOV.W   #40,R3
   \   1998  5E000000          JSR     @?SS_MUL_L02
   \   199C  FB20              MOV.B   #32,R3L
   \   199E  6E18010E          MOV.B   @(packed_data+20,R1),R0L
   \   19A2  5083              MULXU   R0L,R3
   \   19A4  0CE9              MOV.B   R6L,R1L
   \   19A6  1189              SHAR.B  R1L
   \   19A8  7779              BLD     #7,R1L
   \   19AA  1E11              SUBX.B  R1H,R1H
   \   19AC  6DF3              MOV.W   R3,@-SP
   \   19AE  79030028          MOV.W   #40,R3
   \   19B2  5E000000          JSR     @?SS_MUL_L02
   \   19B6  6E1B010D          MOV.B   @(packed_data+19,R1),R3L
   \   19BA  110B              SHLR.B  R3L
   \   19BC  110B              SHLR.B  R3L
   \   19BE  110B              SHLR.B  R3L
   \   19C0  EB1F              AND.B   #31,R3L
   \   19C2  6D71              MOV.W   @SP+,R1
   \   19C4  08B9              ADD.B   R3L,R1L
   \   19C6  9100              ADDX.B  #0,R1H
   \   19C8  E11F              AND.B   #31,R1H
   \   19CA  0D15              MOV.W   R1,R5
   \   19CC  E110              AND.B   #16,R1H
   \   19CE  4702              BEQ     ?0213
   \   19D0            ?0212:
    935                                  g3 |= 0xe000 ;
   \   19D0  C5E0              OR.B    #224,R5H
   \   19D2            ?0213:
    936                          }
    937                          knst += (short) knst_us;                                                                        /* remember new value */
   \   19D2  6F710004          MOV.W   @(4,SP),R1
   \   19D6  6F730002          MOV.W   @(2,SP),R3
   \   19DA  0913              ADD.W   R1,R3
   \   19DC  6FF30002          MOV.W   R3,@(2,SP)
    938                          sens_data[1] = CalcSensData(knst, g1, g2, g3, temp_data) ;      /* sens value 40%FRO @ temp */
   \   19E0  6F710008          MOV.W   @(8,SP),R1
   \   19E4  6F700006          MOV.W   @(6,SP),R0
   \   19E8  6DF1              MOV.W   R1,@-SP
   \   19EA  6DF0              MOV.W   R0,@-SP
   \   19EC  6DF5              MOV.W   R5,@-SP
   \   19EE  6DF4              MOV.W   R4,@-SP
   \   19F0  6F710008          MOV.W   @(8,SP),R1
   \   19F4  6DF1              MOV.W   R1,@-SP
   \   19F6  6F71000C          MOV.W   @(12,SP),R1
   \   19FA  5E001F34          JSR     @CalcSensData:16
   \   19FE  7902000A          MOV.W   #10,R2
   \   1A02  0927              ADD.W   R2,SP
   \   1A04  6B8100F2          MOV.W   R1,@sens_data+2:16
    939          
    940                                                                                                                  /* start calculate data for 60 % FRO */
    941                          knst_us =  ((unsigned short) packed_data[ch >> 1][21] +
    942                                                                    packed_data[ch >> 1][22] * 256) & 0x1fff ;
   \   1A08  0CE9              MOV.B   R6L,R1L
   \   1A0A  1189              SHAR.B  R1L
   \   1A0C  7779              BLD     #7,R1L
   \   1A0E  1E11              SUBX.B  R1H,R1H
   \   1A10  79030028          MOV.W   #40,R3
   \   1A14  5E000000          JSR     @?SS_MUL_L02
   \   1A18  6E1B0110          MOV.B   @(packed_data+22,R1),R3L
   \   1A1C  F300              MOV.B   #0,R3H
   \   1A1E  0CB3              MOV.B   R3L,R3H
   \   1A20  FB00              MOV.B   #0,R3L
   \   1A22  0CE9              MOV.B   R6L,R1L
   \   1A24  1189              SHAR.B  R1L
   \   1A26  7779              BLD     #7,R1L
   \   1A28  1E11              SUBX.B  R1H,R1H
   \   1A2A  6DF3              MOV.W   R3,@-SP
   \   1A2C  79030028          MOV.W   #40,R3
   \   1A30  5E000000          JSR     @?SS_MUL_L02
   \   1A34  6D73              MOV.W   @SP+,R3
   \   1A36  6E18010F          MOV.B   @(packed_data+21,R1),R0L
   \   1A3A  088B              ADD.B   R0L,R3L
   \   1A3C  9300              ADDX.B  #0,R3H
   \   1A3E  E31F              AND.B   #31,R3H
   \   1A40  6FF30004          MOV.W   R3,@(4,SP)
    943          
    944                          g1 =  ((short) ((packed_data[ch >> 1][22] >> 5) & 0x07) +
    945                                                                  (packed_data[ch >> 1][23] * 8)  +
    946                                                                  ((packed_data[ch >> 1][24] & 0x03) * 2048)) & 0x1fff ;
    947                          if (g1 & 0x1000) {                            /* negative */
   \   1A44  0CE9              MOV.B   R6L,R1L
   \   1A46  1189              SHAR.B  R1L
   \   1A48  7779              BLD     #7,R1L
   \   1A4A  1E11              SUBX.B  R1H,R1H
   \   1A4C  79030028          MOV.W   #40,R3
   \   1A50  5E000000          JSR     @?SS_MUL_L02
   \   1A54  6E1B0112          MOV.B   @(packed_data+24,R1),R3L
   \   1A58  EB03              AND.B   #3,R3L
   \   1A5A  F300              MOV.B   #0,R3H
   \   1A5C  F90B              MOV.B   #11,R1L
   \   1A5E  0933              ADD.W   R3,R3
   \   1A60  1A09              DEC.B   R1L
   \   1A62  46FA              BNE     $-4
   \   1A64  0CE9              MOV.B   R6L,R1L
   \   1A66  1189              SHAR.B  R1L
   \   1A68  7779              BLD     #7,R1L
   \   1A6A  1E11              SUBX.B  R1H,R1H
   \   1A6C  6DF3              MOV.W   R3,@-SP
   \   1A6E  79030028          MOV.W   #40,R3
   \   1A72  5E000000          JSR     @?SS_MUL_L02
   \   1A76  FB08              MOV.B   #8,R3L
   \   1A78  6E180111          MOV.B   @(packed_data+23,R1),R0L
   \   1A7C  5083              MULXU   R0L,R3
   \   1A7E  6D71              MOV.W   @SP+,R1
   \   1A80  0913              ADD.W   R1,R3
   \   1A82  0CE9              MOV.B   R6L,R1L
   \   1A84  1189              SHAR.B  R1L
   \   1A86  7779              BLD     #7,R1L
   \   1A88  1E11              SUBX.B  R1H,R1H
   \   1A8A  6DF3              MOV.W   R3,@-SP
   \   1A8C  79030028          MOV.W   #40,R3
   \   1A90  5E000000          JSR     @?SS_MUL_L02
   \   1A94  6E1B0110          MOV.B   @(packed_data+22,R1),R3L
   \   1A98  128B              ROTL.B  R3L
   \   1A9A  128B              ROTL.B  R3L
   \   1A9C  128B              ROTL.B  R3L
   \   1A9E  EB07              AND.B   #7,R3L
   \   1AA0  EB07              AND.B   #7,R3L
   \   1AA2  6D71              MOV.W   @SP+,R1
   \   1AA4  08B9              ADD.B   R3L,R1L
   \   1AA6  9100              ADDX.B  #0,R1H
   \   1AA8  E11F              AND.B   #31,R1H
   \   1AAA  69F1              MOV.W   R1,@SP
   \   1AAC  E110              AND.B   #16,R1H
   \   1AAE  4706              BEQ     ?0215
   \   1AB0            ?0214:
    948                                  g1 |= 0xe000 ;
   \   1AB0  6971              MOV.W   @SP,R1
   \   1AB2  C1E0              OR.B    #224,R1H
   \   1AB4  69F1              MOV.W   R1,@SP
   \   1AB6            ?0215:
    949                          }
    950                          g2 =  ((short) ((packed_data[ch >> 1][24] >> 2) & 0x3f) +
    951                                                                  ((packed_data[ch >> 1][25] & 0x7f)* 64 )) & 0x1fff ;
    952                          if (g2 & 0x1000) {                            /* negative */
   \   1AB6  0CE9              MOV.B   R6L,R1L
   \   1AB8  1189              SHAR.B  R1L
   \   1ABA  7779              BLD     #7,R1L
   \   1ABC  1E11              SUBX.B  R1H,R1H
   \   1ABE  79030028          MOV.W   #40,R3
   \   1AC2  5E000000          JSR     @?SS_MUL_L02
   \   1AC6  6E1B0113          MOV.B   @(packed_data+25,R1),R3L
   \   1ACA  EB7F              AND.B   #127,R3L
   \   1ACC  F940              MOV.B   #64,R1L
   \   1ACE  50B1              MULXU   R3L,R1
   \   1AD0  0CEB              MOV.B   R6L,R3L
   \   1AD2  118B              SHAR.B  R3L
   \   1AD4  777B              BLD     #7,R3L
   \   1AD6  1E33              SUBX.B  R3H,R3H
   \   1AD8  6DF1              MOV.W   R1,@-SP
   \   1ADA  0D31              MOV.W   R3,R1
   \   1ADC  79030028          MOV.W   #40,R3
   \   1AE0  5E000000          JSR     @?SS_MUL_L02
   \   1AE4  6E1B0112          MOV.B   @(packed_data+24,R1),R3L
   \   1AE8  110B              SHLR.B  R3L
   \   1AEA  110B              SHLR.B  R3L
   \   1AEC  EB3F              AND.B   #63,R3L
   \   1AEE  6D71              MOV.W   @SP+,R1
   \   1AF0  08B9              ADD.B   R3L,R1L
   \   1AF2  9100              ADDX.B  #0,R1H
   \   1AF4  E11F              AND.B   #31,R1H
   \   1AF6  0D14              MOV.W   R1,R4
   \   1AF8  E110              AND.B   #16,R1H
   \   1AFA  4702              BEQ     ?0217
   \   1AFC            ?0216:
    953                                  g2 |= 0xe000 ;
   \   1AFC  C4E0              OR.B    #224,R4H
   \   1AFE            ?0217:
    954                          }
    955                          g3 =  ((short) ((packed_data[ch >> 1][25] >> 7) & 0x01) +
    956                                                                  (packed_data[ch >> 1][26] * 2)  +
    957                                                                  ((packed_data[ch >> 1][27] & 0x0f) * 512)) & 0x1fff ;
    958                          if (g3 & 0x1000) {                            /* negative */
   \   1AFE  0CE9              MOV.B   R6L,R1L
   \   1B00  1189              SHAR.B  R1L
   \   1B02  7779              BLD     #7,R1L
   \   1B04  1E11              SUBX.B  R1H,R1H
   \   1B06  79030028          MOV.W   #40,R3
   \   1B0A  5E000000          JSR     @?SS_MUL_L02
   \   1B0E  6E1B0115          MOV.B   @(packed_data+27,R1),R3L
   \   1B12  EB0F              AND.B   #15,R3L
   \   1B14  F300              MOV.B   #0,R3H
   \   1B16  0CB3              MOV.B   R3L,R3H
   \   1B18  FB00              MOV.B   #0,R3L
   \   1B1A  1003              SHLL.B  R3H
   \   1B1C  0CE9              MOV.B   R6L,R1L
   \   1B1E  1189              SHAR.B  R1L
   \   1B20  7779              BLD     #7,R1L
   \   1B22  1E11              SUBX.B  R1H,R1H
   \   1B24  6DF3              MOV.W   R3,@-SP
   \   1B26  79030028          MOV.W   #40,R3
   \   1B2A  5E000000          JSR     @?SS_MUL_L02
   \   1B2E  6E1B0114          MOV.B   @(packed_data+26,R1),R3L
   \   1B32  F300              MOV.B   #0,R3H
   \   1B34  0933              ADD.W   R3,R3
   \   1B36  6D71              MOV.W   @SP+,R1
   \   1B38  0913              ADD.W   R1,R3
   \   1B3A  0CE9              MOV.B   R6L,R1L
   \   1B3C  1189              SHAR.B  R1L
   \   1B3E  7779              BLD     #7,R1L
   \   1B40  1E11              SUBX.B  R1H,R1H
   \   1B42  6DF3              MOV.W   R3,@-SP
   \   1B44  79030028          MOV.W   #40,R3
   \   1B48  5E000000          JSR     @?SS_MUL_L02
   \   1B4C  6E1B0113          MOV.B   @(packed_data+25,R1),R3L
   \   1B50  128B              ROTL.B  R3L
   \   1B52  EB01              AND.B   #1,R3L
   \   1B54  EB01              AND.B   #1,R3L
   \   1B56  6D71              MOV.W   @SP+,R1
   \   1B58  08B9              ADD.B   R3L,R1L
   \   1B5A  9100              ADDX.B  #0,R1H
   \   1B5C  E11F              AND.B   #31,R1H
   \   1B5E  0D15              MOV.W   R1,R5
   \   1B60  E110              AND.B   #16,R1H
   \   1B62  4702              BEQ     ?0219
   \   1B64            ?0218:
    959                                  g3 |= 0xe000 ;
   \   1B64  C5E0              OR.B    #224,R5H
   \   1B66            ?0219:
    960                          }
    961                          knst += (short) knst_us;                                                                        /* remember new value */
   \   1B66  6F710004          MOV.W   @(4,SP),R1
   \   1B6A  6F730002          MOV.W   @(2,SP),R3
   \   1B6E  0913              ADD.W   R1,R3
   \   1B70  6FF30002          MOV.W   R3,@(2,SP)
    962                          sens_data[2] = CalcSensData(knst, g1, g2, g3, temp_data) ;
   \   1B74  6F710008          MOV.W   @(8,SP),R1
   \   1B78  6F700006          MOV.W   @(6,SP),R0
   \   1B7C  6DF1              MOV.W   R1,@-SP
   \   1B7E  6DF0              MOV.W   R0,@-SP
   \   1B80  6DF5              MOV.W   R5,@-SP
   \   1B82  6DF4              MOV.W   R4,@-SP
   \   1B84  6F710008          MOV.W   @(8,SP),R1
   \   1B88  6DF1              MOV.W   R1,@-SP
   \   1B8A  6F71000C          MOV.W   @(12,SP),R1
   \   1B8E  5E001F34          JSR     @CalcSensData:16
   \   1B92  7902000A          MOV.W   #10,R2
   \   1B96  0927              ADD.W   R2,SP
   \   1B98  6B8100F4          MOV.W   R1,@sens_data+4:16
    963                                                                                                                                          /* sens value 60%FRO @ temp */
    964          
    965                                                                                                                  /* start calculate data for 100 % FRO */
    966                          knst_us =  ((short) ((packed_data[ch >> 1][27] >> 4) & 0x0f) +
    967                                                                                  (packed_data[ch >> 1][28] * 16) +
    968                                                                                  ((packed_data[ch >> 1][29] & 0x01)) * 4096)& 0x1fff ;
   \   1B9C  0CE9              MOV.B   R6L,R1L
   \   1B9E  1189              SHAR.B  R1L
   \   1BA0  7779              BLD     #7,R1L
   \   1BA2  1E11              SUBX.B  R1H,R1H
   \   1BA4  79030028          MOV.W   #40,R3
   \   1BA8  5E000000          JSR     @?SS_MUL_L02
   \   1BAC  6E1B0117          MOV.B   @(packed_data+29,R1),R3L
   \   1BB0  EB01              AND.B   #1,R3L
   \   1BB2  F300              MOV.B   #0,R3H
   \   1BB4  F90C              MOV.B   #12,R1L
   \   1BB6  0933              ADD.W   R3,R3
   \   1BB8  1A09              DEC.B   R1L
   \   1BBA  46FA              BNE     $-4
   \   1BBC  0CE9              MOV.B   R6L,R1L
   \   1BBE  1189              SHAR.B  R1L
   \   1BC0  7779              BLD     #7,R1L
   \   1BC2  1E11              SUBX.B  R1H,R1H
   \   1BC4  6DF3              MOV.W   R3,@-SP
   \   1BC6  79030028          MOV.W   #40,R3
   \   1BCA  5E000000          JSR     @?SS_MUL_L02
   \   1BCE  FB10              MOV.B   #16,R3L
   \   1BD0  6E180116          MOV.B   @(packed_data+28,R1),R0L
   \   1BD4  5083              MULXU   R0L,R3
   \   1BD6  6D71              MOV.W   @SP+,R1
   \   1BD8  0913              ADD.W   R1,R3
   \   1BDA  0CE9              MOV.B   R6L,R1L
   \   1BDC  1189              SHAR.B  R1L
   \   1BDE  7779              BLD     #7,R1L
   \   1BE0  1E11              SUBX.B  R1H,R1H
   \   1BE2  6DF3              MOV.W   R3,@-SP
   \   1BE4  79030028          MOV.W   #40,R3
   \   1BE8  5E000000          JSR     @?SS_MUL_L02
   \   1BEC  6E1B0115          MOV.B   @(packed_data+27,R1),R3L
   \   1BF0  110B              SHLR.B  R3L
   \   1BF2  110B              SHLR.B  R3L
   \   1BF4  110B              SHLR.B  R3L
   \   1BF6  110B              SHLR.B  R3L
   \   1BF8  EB0F              AND.B   #15,R3L
   \   1BFA  6D71              MOV.W   @SP+,R1
   \   1BFC  08B9              ADD.B   R3L,R1L
   \   1BFE  9100              ADDX.B  #0,R1H
   \   1C00  E11F              AND.B   #31,R1H
   \   1C02  6FF10004          MOV.W   R1,@(4,SP)
    969          
    970                          g1 =  ((short) ((packed_data[ch >> 1][29] >> 1) & 0x7f) +
    971                                                                  ((packed_data[ch >> 1][30] & 0x3f) * 128)) & 0x1fff ;
    972                          if (g1 & 0x1000) {                            /* negative */
   \   1C06  0CE9              MOV.B   R6L,R1L
   \   1C08  1189              SHAR.B  R1L
   \   1C0A  7779              BLD     #7,R1L
   \   1C0C  1E11              SUBX.B  R1H,R1H
   \   1C0E  79030028          MOV.W   #40,R3
   \   1C12  5E000000          JSR     @?SS_MUL_L02
   \   1C16  6E1B0118          MOV.B   @(packed_data+30,R1),R3L
   \   1C1A  EB3F              AND.B   #63,R3L
   \   1C1C  F980              MOV.B   #128,R1L
   \   1C1E  50B1              MULXU   R3L,R1
   \   1C20  0CEB              MOV.B   R6L,R3L
   \   1C22  118B              SHAR.B  R3L
   \   1C24  777B              BLD     #7,R3L
   \   1C26  1E33              SUBX.B  R3H,R3H
   \   1C28  6DF1              MOV.W   R1,@-SP
   \   1C2A  0D31              MOV.W   R3,R1
   \   1C2C  79030028          MOV.W   #40,R3
   \   1C30  5E000000          JSR     @?SS_MUL_L02
   \   1C34  6E1B0117          MOV.B   @(packed_data+29,R1),R3L
   \   1C38  110B              SHLR.B  R3L
   \   1C3A  EB7F              AND.B   #127,R3L
   \   1C3C  6D71              MOV.W   @SP+,R1
   \   1C3E  08B9              ADD.B   R3L,R1L
   \   1C40  9100              ADDX.B  #0,R1H
   \   1C42  E11F              AND.B   #31,R1H
   \   1C44  69F1              MOV.W   R1,@SP
   \   1C46  E110              AND.B   #16,R1H
   \   1C48  4706              BEQ     ?0221
   \   1C4A            ?0220:
    973                                  g1 |= 0xe000 ;
   \   1C4A  6971              MOV.W   @SP,R1
   \   1C4C  C1E0              OR.B    #224,R1H
   \   1C4E  69F1              MOV.W   R1,@SP
   \   1C50            ?0221:
    974                          }
    975                          g2 =  ((short) ((packed_data[ch >> 1][30] >> 6) & 0x03) +
    976                                                                  (packed_data[ch >> 1][31] * 4)  +
    977                                                          ((packed_data[ch >> 1][32]& 0x07) * 1024)) & 0x1fff ;
    978                          if (g2 & 0x1000) {                            /* negative */
   \   1C50  0CE9              MOV.B   R6L,R1L
   \   1C52  1189              SHAR.B  R1L
   \   1C54  7779              BLD     #7,R1L
   \   1C56  1E11              SUBX.B  R1H,R1H
   \   1C58  79030028          MOV.W   #40,R3
   \   1C5C  5E000000          JSR     @?SS_MUL_L02
   \   1C60  6E1B011A          MOV.B   @(packed_data+32,R1),R3L
   \   1C64  EB07              AND.B   #7,R3L
   \   1C66  F300              MOV.B   #0,R3H
   \   1C68  0CB3              MOV.B   R3L,R3H
   \   1C6A  FB00              MOV.B   #0,R3L
   \   1C6C  1003              SHLL.B  R3H
   \   1C6E  1003              SHLL.B  R3H
   \   1C70  0CE9              MOV.B   R6L,R1L
   \   1C72  1189              SHAR.B  R1L
   \   1C74  7779              BLD     #7,R1L
   \   1C76  1E11              SUBX.B  R1H,R1H
   \   1C78  6DF3              MOV.W   R3,@-SP
   \   1C7A  79030028          MOV.W   #40,R3
   \   1C7E  5E000000          JSR     @?SS_MUL_L02
   \   1C82  FB04              MOV.B   #4,R3L
   \   1C84  6E180119          MOV.B   @(packed_data+31,R1),R0L
   \   1C88  5083              MULXU   R0L,R3
   \   1C8A  6D71              MOV.W   @SP+,R1
   \   1C8C  0913              ADD.W   R1,R3
   \   1C8E  0CE9              MOV.B   R6L,R1L
   \   1C90  1189              SHAR.B  R1L
   \   1C92  7779              BLD     #7,R1L
   \   1C94  1E11              SUBX.B  R1H,R1H
   \   1C96  6DF3              MOV.W   R3,@-SP
   \   1C98  79030028          MOV.W   #40,R3
   \   1C9C  5E000000          JSR     @?SS_MUL_L02
   \   1CA0  6E1B0118          MOV.B   @(packed_data+30,R1),R3L
   \   1CA4  128B              ROTL.B  R3L
   \   1CA6  128B              ROTL.B  R3L
   \   1CA8  EB03              AND.B   #3,R3L
   \   1CAA  EB03              AND.B   #3,R3L
   \   1CAC  6D71              MOV.W   @SP+,R1
   \   1CAE  08B9              ADD.B   R3L,R1L
   \   1CB0  9100              ADDX.B  #0,R1H
   \   1CB2  E11F              AND.B   #31,R1H
   \   1CB4  0D14              MOV.W   R1,R4
   \   1CB6  E110              AND.B   #16,R1H
   \   1CB8  4702              BEQ     ?0223
   \   1CBA            ?0222:
    979                                  g2 |= 0xe000 ;
   \   1CBA  C4E0              OR.B    #224,R4H
   \   1CBC            ?0223:
    980                          }
    981                          g3 =  ((short) ((packed_data[ch >> 1][32] >> 3) & 0x1f) +
    982                                                                  (packed_data[ch >> 1][33] * 32)) & 0x1fff ;
    983                          if (g3 & 0x1000) {                            /* negative */
   \   1CBC  0CE9              MOV.B   R6L,R1L
   \   1CBE  1189              SHAR.B  R1L
   \   1CC0  7779              BLD     #7,R1L
   \   1CC2  1E11              SUBX.B  R1H,R1H
   \   1CC4  79030028          MOV.W   #40,R3
   \   1CC8  5E000000          JSR     @?SS_MUL_L02
   \   1CCC  FB20              MOV.B   #32,R3L
   \   1CCE  6E18011B          MOV.B   @(packed_data+33,R1),R0L
   \   1CD2  5083              MULXU   R0L,R3
   \   1CD4  0CE9              MOV.B   R6L,R1L
   \   1CD6  1189              SHAR.B  R1L
   \   1CD8  7779              BLD     #7,R1L
   \   1CDA  1E11              SUBX.B  R1H,R1H
   \   1CDC  6DF3              MOV.W   R3,@-SP
   \   1CDE  79030028          MOV.W   #40,R3
   \   1CE2  5E000000          JSR     @?SS_MUL_L02
   \   1CE6  6E1B011A          MOV.B   @(packed_data+32,R1),R3L
   \   1CEA  110B              SHLR.B  R3L
   \   1CEC  110B              SHLR.B  R3L
   \   1CEE  110B              SHLR.B  R3L
   \   1CF0  EB1F              AND.B   #31,R3L
   \   1CF2  6D71              MOV.W   @SP+,R1
   \   1CF4  08B9              ADD.B   R3L,R1L
   \   1CF6  9100              ADDX.B  #0,R1H
   \   1CF8  E11F              AND.B   #31,R1H
   \   1CFA  0D15              MOV.W   R1,R5
   \   1CFC  E110              AND.B   #16,R1H
   \   1CFE  4702              BEQ     ?0225
   \   1D00            ?0224:
    984                                  g3 |= 0xe000 ;
   \   1D00  C5E0              OR.B    #224,R5H
   \   1D02            ?0225:
    985                          }
    986                          knst += (short) knst_us;                                                                        /* remember new value */
   \   1D02  6F710004          MOV.W   @(4,SP),R1
   \   1D06  6F730002          MOV.W   @(2,SP),R3
   \   1D0A  0913              ADD.W   R1,R3
   \   1D0C  6FF30002          MOV.W   R3,@(2,SP)
    987                          sens_data[3] = CalcSensData(knst, g1, g2, g3, temp_data) ;
   \   1D10  6F710008          MOV.W   @(8,SP),R1
   \   1D14  6F700006          MOV.W   @(6,SP),R0
   \   1D18  6DF1              MOV.W   R1,@-SP
   \   1D1A  6DF0              MOV.W   R0,@-SP
   \   1D1C  6DF5              MOV.W   R5,@-SP
   \   1D1E  6DF4              MOV.W   R4,@-SP
   \   1D20  6F710008          MOV.W   @(8,SP),R1
   \   1D24  6DF1              MOV.W   R1,@-SP
   \   1D26  6F71000C          MOV.W   @(12,SP),R1
   \   1D2A  5E001F34          JSR     @CalcSensData:16
   \   1D2E  7902000A          MOV.W   #10,R2
   \   1D32  0927              ADD.W   R2,SP
   \   1D34  6B8100F6          MOV.W   R1,@sens_data+6:16
    988                                                                                                                                  /* sens value 100%FRO @ temp */
    989          
    990                          sens_nl1 = (signed char)((packed_data[ch >> 1][34] >> 3) & 0x0f) ;      /* sensor NL1 */
   \   1D38  0CE9              MOV.B   R6L,R1L
   \   1D3A  1189              SHAR.B  R1L
   \   1D3C  7779              BLD     #7,R1L
   \   1D3E  1E11              SUBX.B  R1H,R1H
   \   1D40  79030028          MOV.W   #40,R3
   \   1D44  5E000000          JSR     @?SS_MUL_L02
   \   1D48  6E1B011C          MOV.B   @(packed_data+34,R1),R3L
   \   1D4C  110B              SHLR.B  R3L
   \   1D4E  110B              SHLR.B  R3L
   \   1D50  110B              SHLR.B  R3L
   \   1D52  EB0F              AND.B   #15,R3L
   \   1D54  6A8B00F8          MOV.B   R3L,@sens_nl1:16
    991                          if ((packed_data[ch >> 1][34]) & 0x80) {
   \   1D58  0CE9              MOV.B   R6L,R1L
   \   1D5A  1189              SHAR.B  R1L
   \   1D5C  7779              BLD     #7,R1L
   \   1D5E  1E11              SUBX.B  R1H,R1H
   \   1D60  79030028          MOV.W   #40,R3
   \   1D64  5E000000          JSR     @?SS_MUL_L02
   \   1D68  6E1B011C          MOV.B   @(packed_data+34,R1),R3L
   \   1D6C  EB80              AND.B   #128,R3L
   \   1D6E  470A              BEQ     ?0227
   \   1D70            ?0226:
    992                                  sens_nl1 |= 0xf0 ;
   \   1D70  6A0900F8          MOV.B   @sens_nl1:16,R1L
   \   1D74  C9F0              OR.B    #-16,R1L
   \   1D76  6A8900F8          MOV.B   R1L,@sens_nl1:16
   \   1D7A            ?0227:
    993                          }
    994          
    995                          sens_nl2 = (signed char) (packed_data[ch >> 1][34] & 0x07) ;                    /* sensor NL2 */
   \   1D7A  0CE9              MOV.B   R6L,R1L
   \   1D7C  1189              SHAR.B  R1L
   \   1D7E  7779              BLD     #7,R1L
   \   1D80  1E11              SUBX.B  R1H,R1H
   \   1D82  79030028          MOV.W   #40,R3
   \   1D86  5E000000          JSR     @?SS_MUL_L02
   \   1D8A  6E1B011C          MOV.B   @(packed_data+34,R1),R3L
   \   1D8E  EB07              AND.B   #7,R3L
   \   1D90  6A8B00F9          MOV.B   R3L,@sens_nl2:16
    996                          if ((packed_data[ch >> 1][34]) & 0x80) {
   \   1D94  0CE9              MOV.B   R6L,R1L
   \   1D96  1189              SHAR.B  R1L
   \   1D98  7779              BLD     #7,R1L
   \   1D9A  1E11              SUBX.B  R1H,R1H
   \   1D9C  79030028          MOV.W   #40,R3
   \   1DA0  5E000000          JSR     @?SS_MUL_L02
   \   1DA4  6E1B011C          MOV.B   @(packed_data+34,R1),R3L
   \   1DA8  EB80              AND.B   #128,R3L
   \   1DAA  470A              BEQ     ?0229
   \   1DAC            ?0228:
    997                                  sens_nl2 |= 0xf8 ;
   \   1DAC  6A0900F9          MOV.B   @sens_nl2:16,R1L
   \   1DB0  C9F8              OR.B    #-8,R1L
   \   1DB2  6A8900F9          MOV.B   R1L,@sens_nl2:16
   \   1DB6            ?0229:
    998                          }
    999          
   1000                          offset[ch] =  packed_data[ch >> 1][35] +
   1001                                                           (packed_data[ch >> 1][36] * 256) ;                     /*offset*/
   \   1DB6  0CE9              MOV.B   R6L,R1L
   \   1DB8  1189              SHAR.B  R1L
   \   1DBA  7779              BLD     #7,R1L
   \   1DBC  1E11              SUBX.B  R1H,R1H
   \   1DBE  79030028          MOV.W   #40,R3
   \   1DC2  5E000000          JSR     @?SS_MUL_L02
   \   1DC6  6E1B011E          MOV.B   @(packed_data+36,R1),R3L
   \   1DCA  F300              MOV.B   #0,R3H
   \   1DCC  0CB3              MOV.B   R3L,R3H
   \   1DCE  FB00              MOV.B   #0,R3L
   \   1DD0  0CE9              MOV.B   R6L,R1L
   \   1DD2  1189              SHAR.B  R1L
   \   1DD4  7779              BLD     #7,R1L
   \   1DD6  1E11              SUBX.B  R1H,R1H
   \   1DD8  6DF3              MOV.W   R3,@-SP
   \   1DDA  79030028          MOV.W   #40,R3
   \   1DDE  5E000000          JSR     @?SS_MUL_L02
   \   1DE2  6D73              MOV.W   @SP+,R3
   \   1DE4  6E18011D          MOV.B   @(packed_data+35,R1),R0L
   \   1DE8  088B              ADD.B   R0L,R3L
   \   1DEA  9300              ADDX.B  #0,R3H
   \   1DEC  0CE9              MOV.B   R6L,R1L
   \   1DEE  7779              BLD     #7,R1L
   \   1DF0  1E11              SUBX.B  R1H,R1H
   \   1DF2  0911              ADD.W   R1,R1
   \   1DF4  6F9302EE          MOV.W   R3,@(offset,R1)
   1002          
   1003                          gain[ch] =  1.0 + (float)((packed_data[ch >> 1][37] +
   1004                                                                            packed_data[ch >> 1][38] * 256.0)/100000.0) ; /*gain*/
   \   1DF8  0CE9              MOV.B   R6L,R1L
   \   1DFA  1189              SHAR.B  R1L
   \   1DFC  7779              BLD     #7,R1L
   \   1DFE  1E11              SUBX.B  R1H,R1H
   \   1E00  79030028          MOV.W   #40,R3
   \   1E04  5E000000          JSR     @?SS_MUL_L02
   \   1E08  6E190120          MOV.B   @(packed_data+38,R1),R1L
   \   1E0C  F100              MOV.B   #0,R1H
   \   1E0E  1900              SUB.W   R0,R0
   \   1E10  5E000000          JSR     @?UL_TO_FLT_L04
   \   1E14  1933              SUB.W   R3,R3
   \   1E16  79024380          MOV.W   #17280,R2
   \   1E1A  5E000000          JSR     @?F_MUL_L04
   \   1E1E  0CEB              MOV.B   R6L,R3L
   \   1E20  118B              SHAR.B  R3L
   \   1E22  777B              BLD     #7,R3L
   \   1E24  1E33              SUBX.B  R3H,R3H
   \   1E26  6DF1              MOV.W   R1,@-SP
   \   1E28  0D31              MOV.W   R3,R1
   \   1E2A  79030028          MOV.W   #40,R3
   \   1E2E  5E000000          JSR     @?SS_MUL_L02
   \   1E32  6E19011F          MOV.B   @(packed_data+37,R1),R1L
   \   1E36  6DF0              MOV.W   R0,@-SP
   \   1E38  F100              MOV.B   #0,R1H
   \   1E3A  1900              SUB.W   R0,R0
   \   1E3C  5E000000          JSR     @?UL_TO_FLT_L04
   \   1E40  6F730002          MOV.W   @(2,SP),R3
   \   1E44  6972              MOV.W   @SP,R2
   \   1E46  6FF20002          MOV.W   R2,@(2,SP)
   \   1E4A  0B87              ADDS.W  #2,SP
   \   1E4C  6D72              MOV.W   @SP+,R2
   \   1E4E  5E000000          JSR     @?F_ADD_L04
   \   1E52  79035000          MOV.W   #20480,R3
   \   1E56  790247C3          MOV.W   #18371,R2
   \   1E5A  5E000000          JSR     @?F_DIV_L04
   \   1E5E  1933              SUB.W   R3,R3
   \   1E60  79023F80          MOV.W   #16256,R2
   \   1E64  5E000000          JSR     @?F_ADD_L04
   \   1E68  0CEB              MOV.B   R6L,R3L
   \   1E6A  777B              BLD     #7,R3L
   \   1E6C  1E33              SUBX.B  R3H,R3H
   \   1E6E  0933              ADD.W   R3,R3
   \   1E70  0933              ADD.W   R3,R3
   \   1E72  6FB102B8          MOV.W   R1,@(gain+2,R3)
   \   1E76  6FB002B6          MOV.W   R0,@(gain,R3)
   1005                  } else {
   \   1E7A  404A              BRA     ?0230
   \   1E7C            ?0197:
   1006                          sens_data[0] = 0 ;
   \   1E7C  1911              SUB.W   R1,R1
   \   1E7E  6B8100F0          MOV.W   R1,@sens_data:16
   1007                          sens_data[1] = 0 ;
   \   1E82  1911              SUB.W   R1,R1
   \   1E84  6B8100F2          MOV.W   R1,@sens_data+2:16
   1008                          sens_data[2] = 0 ;
   \   1E88  1911              SUB.W   R1,R1
   \   1E8A  6B8100F4          MOV.W   R1,@sens_data+4:16
   1009                          sens_data[3] = 0 ;
   \   1E8E  1911              SUB.W   R1,R1
   \   1E90  6B8100F6          MOV.W   R1,@sens_data+6:16
   1010                          sens_nl1 = 0 ;
   \   1E94  F900              MOV.B   #0,R1L
   \   1E96  6A8900F8          MOV.B   R1L,@sens_nl1:16
   1011                          sens_nl2 = 0 ;
   \   1E9A  F900              MOV.B   #0,R1L
   \   1E9C  6A8900F9          MOV.B   R1L,@sens_nl2:16
   1012                          offset[ch] =  0 ;                                               /*offset*/
   \   1EA0  0CE9              MOV.B   R6L,R1L
   \   1EA2  7779              BLD     #7,R1L
   \   1EA4  1E11              SUBX.B  R1H,R1H
   \   1EA6  0911              ADD.W   R1,R1
   \   1EA8  1933              SUB.W   R3,R3
   \   1EAA  6F9302EE          MOV.W   R3,@(offset,R1)
   1013                          gain[ch] =  1.0 ;                                               /* gain */
   \   1EAE  0CE9              MOV.B   R6L,R1L
   \   1EB0  7779              BLD     #7,R1L
   \   1EB2  1E11              SUBX.B  R1H,R1H
   \   1EB4  0911              ADD.W   R1,R1
   \   1EB6  0911              ADD.W   R1,R1
   \   1EB8  1922              SUB.W   R2,R2
   \   1EBA  79003F80          MOV.W   #16256,R0
   \   1EBE  6F9202B8          MOV.W   R2,@(gain+2,R1)
   \   1EC2  6F9002B6          MOV.W   R0,@(gain,R1)
   \   1EC6            ?0230:
   1014                  }
   1015                  if ((eep_type[7] & 0x01) || (eep_type[7] & 0x10)){     /* ok data */
   \   1EC6  6A090330          MOV.B   @eep_type+7:16,R1L
   \   1ECA  E901              AND.B   #1,R1L
   \   1ECC  4608              BNE     ?0231
   \   1ECE  6A090330          MOV.B   @eep_type+7:16,R1L
   \   1ED2  E910              AND.B   #16,R1L
   \   1ED4  4742              BEQ     ?0232
   \   1ED6            ?0233:
   \   1ED6            ?0234:
   \   1ED6            ?0231:
   1016                          cal_gain =  1.0 + (float)((packed_data[7][37] +
   1017                                                                    packed_data[7][38] * 256)/100000.0) ; /*gain*/
   \   1ED6  6A090238          MOV.B   @packed_data+318:16,R1L
   \   1EDA  F100              MOV.B   #0,R1H
   \   1EDC  0C91              MOV.B   R1L,R1H
   \   1EDE  F900              MOV.B   #0,R1L
   \   1EE0  6A0B0237          MOV.B   @packed_data+317:16,R3L
   \   1EE4  08B9              ADD.B   R3L,R1L
   \   1EE6  9100              ADDX.B  #0,R1H
   \   1EE8  7371              BTST    #7,R1H
   \   1EEA  4706              BEQ     $+8
   \   1EEC  7900FFFF          MOV.W   #-1,R0
   \   1EF0  4002              BRA     $+4
   \   1EF2  1900              SUB.W   R0,R0
   \   1EF4  5E000000          JSR     @?SL_TO_FLT_L04
   \   1EF8  79035000          MOV.W   #20480,R3
   \   1EFC  790247C3          MOV.W   #18371,R2
   \   1F00  5E000000          JSR     @?F_DIV_L04
   \   1F04  1933              SUB.W   R3,R3
   \   1F06  79023F80          MOV.W   #16256,R2
   \   1F0A  5E000000          JSR     @?F_ADD_L04
   \   1F0E  6B81030C          MOV.W   R1,@cal_gain+2:16
   \   1F12  6B80030A          MOV.W   R0,@cal_gain:16
   1018                  } else {
   \   1F16  400E              BRA     ?0235
   \   1F18            ?0232:
   1019                          cal_gain = 1.0 ;
   \   1F18  1911              SUB.W   R1,R1
   \   1F1A  79003F80          MOV.W   #16256,R0
   \   1F1E  6B81030C          MOV.W   R1,@cal_gain+2:16
   \   1F22  6B80030A          MOV.W   R0,@cal_gain:16
   \   1F26            ?0235:
   1020                  }
   1021          }
   \   1F26  7902000A          MOV.W   #10,R2
   \   1F2A  0927              ADD.W   R2,SP
   \   1F2C  6D76              POP     R6
   \   1F2E  6D75              POP     R5
   \   1F30  6D74              POP     R4
   \   1F32  5470              RTS
   1022          
   1023          /*************************************************************************
   1024          *
   1025          *  Calculate sensordata
   1026          *
   1027          *************************************************************************/
   1028          short CalcSensData(short knst, short g1, short g2, short g3, float temp)
   1029          {
   \   1F34            CalcSensData:
   \   1F34  6DF4              PUSH    R4
   \   1F36  6DF5              PUSH    R5
   \   1F38  6DF6              PUSH    R6
   \   1F3A  6DF1              PUSH    R1
   \   1F3C  6F76000E          MOV.W   @(14,SP),R6
   \   1F40  6F75000C          MOV.W   @(12,SP),R5
   \   1F44  6F74000A          MOV.W   @(10,SP),R4
   1030          
   1031                  return (knst + (g1 * temp) +
   1032                                                          (g2 * temp * temp) +
   1033                                                          (g3 * temp * temp * temp)) ;    /* sens value ?%FRO @ temp */
   \   1F48  0D61              MOV.W   R6,R1
   \   1F4A  7371              BTST    #7,R1H
   \   1F4C  4706              BEQ     $+8
   \   1F4E  7900FFFF          MOV.W   #-1,R0
   \   1F52  4002              BRA     $+4
   \   1F54  1900              SUB.W   R0,R0
   \   1F56  5E000000          JSR     @?SL_TO_FLT_L04
   \   1F5A  6F730012          MOV.W   @(18,SP),R3
   \   1F5E  6F720010          MOV.W   @(16,SP),R2
   \   1F62  5E000000          JSR     @?F_MUL_L04
   \   1F66  6F730012          MOV.W   @(18,SP),R3
   \   1F6A  6F720010          MOV.W   @(16,SP),R2
   \   1F6E  5E000000          JSR     @?F_MUL_L04
   \   1F72  6F730012          MOV.W   @(18,SP),R3
   \   1F76  6F720010          MOV.W   @(16,SP),R2
   \   1F7A  5E000000          JSR     @?F_MUL_L04
   \   1F7E  6DF1              MOV.W   R1,@-SP
   \   1F80  0D51              MOV.W   R5,R1
   \   1F82  6DF0              MOV.W   R0,@-SP
   \   1F84  7371              BTST    #7,R1H
   \   1F86  4706              BEQ     $+8
   \   1F88  7900FFFF          MOV.W   #-1,R0
   \   1F8C  4002              BRA     $+4
   \   1F8E  1900              SUB.W   R0,R0
   \   1F90  5E000000          JSR     @?SL_TO_FLT_L04
   \   1F94  6F730016          MOV.W   @(22,SP),R3
   \   1F98  6F720014          MOV.W   @(20,SP),R2
   \   1F9C  5E000000          JSR     @?F_MUL_L04
   \   1FA0  6F730016          MOV.W   @(22,SP),R3
   \   1FA4  6F720014          MOV.W   @(20,SP),R2
   \   1FA8  5E000000          JSR     @?F_MUL_L04
   \   1FAC  6F730002          MOV.W   @(2,SP),R3
   \   1FB0  6972              MOV.W   @SP,R2
   \   1FB2  6FF20002          MOV.W   R2,@(2,SP)
   \   1FB6  0B87              ADDS.W  #2,SP
   \   1FB8  6D72              MOV.W   @SP+,R2
   \   1FBA  5E000000          JSR     @?F_ADD_L04
   \   1FBE  6DF1              MOV.W   R1,@-SP
   \   1FC0  0D41              MOV.W   R4,R1
   \   1FC2  6DF0              MOV.W   R0,@-SP
   \   1FC4  7371              BTST    #7,R1H
   \   1FC6  4706              BEQ     $+8
   \   1FC8  7900FFFF          MOV.W   #-1,R0
   \   1FCC  4002              BRA     $+4
   \   1FCE  1900              SUB.W   R0,R0
   \   1FD0  5E000000          JSR     @?SL_TO_FLT_L04
   \   1FD4  6F730016          MOV.W   @(22,SP),R3
   \   1FD8  6F720014          MOV.W   @(20,SP),R2
   \   1FDC  5E000000          JSR     @?F_MUL_L04
   \   1FE0  6F730002          MOV.W   @(2,SP),R3
   \   1FE4  6972              MOV.W   @SP,R2
   \   1FE6  6FF20002          MOV.W   R2,@(2,SP)
   \   1FEA  0B87              ADDS.W  #2,SP
   \   1FEC  6D72              MOV.W   @SP+,R2
   \   1FEE  5E000000          JSR     @?F_ADD_L04
   \   1FF2  6DF1              MOV.W   R1,@-SP
   \   1FF4  6F710002          MOV.W   @(2,SP),R1
   \   1FF8  6DF0              MOV.W   R0,@-SP
   \   1FFA  7371              BTST    #7,R1H
   \   1FFC  4706              BEQ     $+8
   \   1FFE  7900FFFF          MOV.W   #-1,R0
   \   2002  4002              BRA     $+4
   \   2004  1900              SUB.W   R0,R0
   \   2006  5E000000          JSR     @?SL_TO_FLT_L04
   \   200A  6F730002          MOV.W   @(2,SP),R3
   \   200E  6972              MOV.W   @SP,R2
   \   2010  6FF20002          MOV.W   R2,@(2,SP)
   \   2014  0B87              ADDS.W  #2,SP
   \   2016  6D72              MOV.W   @SP+,R2
   \   2018  5E000000          JSR     @?F_ADD_L04
   \   201C  5E000000          JSR     @?FLT_TO_SL_L04
   1034          
   1035           ;
   \   2020  4000              BRA     ?0236
   1036          }
   \   2022            ?0236:
   \   2022  0B87              ADDS.W  #2,SP
   \   2024  6D76              POP     R6
   \   2026  6D75              POP     R5
   \   2028  6D74              POP     R4
   \   202A  5470              RTS
   1037          
   1038          /*************************************************************************
   1039          *
   1040          *  Find temperature for a channel
   1041          *
   1042          *************************************************************************/
   1043          short FindTemp(short ch)
   1044          {
   \   202C            FindTemp:
   \   202C  6DF5              PUSH    R5
   \   202E  6DF6              PUSH    R6
   1045          
   1046                  short temp_ch, i ;
   1047          
   1048                  temp_ch = ch + 1 ;
   1049                  if ((mes_data[temp_ch] > 150.0) ||         /* to high or */
   1050                           (mes_data[temp_ch] < -80.0) ||         /* to low temp or */
   1051                           (ch_stat[temp_ch] & 0x01)) {             /* convertion error */
   \   2030  0B01              ADDS.W  #1,R1
   \   2032  0D15              MOV.W   R1,R5
   \   2034  0911              ADD.W   R1,R1
   \   2036  0911              ADD.W   R1,R1
   \   2038  0D10              MOV.W   R1,R0
   \   203A  6F010280          MOV.W   @(mes_data+2,R0),R1
   \   203E  6F00027E          MOV.W   @(mes_data,R0),R0
   \   2042  1933              SUB.W   R3,R3
   \   2044  79024316          MOV.W   #17174,R2
   \   2048  5E000000          JSR     @?F_SUB_L04
   \   204C  0D00              MOV.W   R0,R0
   \   204E  4E2A              BGT     ?0237
   \   2050  0D51              MOV.W   R5,R1
   \   2052  0911              ADD.W   R1,R1
   \   2054  0911              ADD.W   R1,R1
   \   2056  0D10              MOV.W   R1,R0
   \   2058  6F010280          MOV.W   @(mes_data+2,R0),R1
   \   205C  6F00027E          MOV.W   @(mes_data,R0),R0
   \   2060  1933              SUB.W   R3,R3
   \   2062  7902C2A0          MOV.W   #-15712,R2
   \   2066  5E000000          JSR     @?F_SUB_L04
   \   206A  0D00              MOV.W   R0,R0
   \   206C  4D0C              BLT     ?0237
   \   206E  6E59031B          MOV.B   @(ch_stat,R5),R1L
   \   2072  E901              AND.B   #1,R1L
   \   2074  4604              BNE     $+6
   \   2076  5A0020E6          JMP     @?0238:16
   \   207A            ?0239:
   \   207A            ?0240:
   \   207A            ?0237:
   1052                           temp_ch = NOIOCH ;                                                     /* used if no temp */
   \   207A  7905000E          MOV.W   #14,R5
   1053                           for (i = 0; i < NOIOCH; i++) {
   \   207E  1966              SUB.W   R6,R6
   \   2080            ?0242:
   \   2080  7901000E          MOV.W   #14,R1
   \   2084  1D16              CMP.W   R1,R6
   \   2086  4C5E              BGE     ?0241
   \   2088            ?0243:
   1054                                  if ((ch_stat[i] == 0x14) || (ch_stat[i] == 0x20)) {  /* temp ? */
   \   2088  6E69031B          MOV.B   @(ch_stat,R6),R1L
   \   208C  A914              CMP.B   #20,R1L
   \   208E  4708              BEQ     ?0245
   \   2090  6E69031B          MOV.B   @(ch_stat,R6),R1L
   \   2094  A920              CMP.B   #32,R1L
   \   2096  464A              BNE     ?0246
   \   2098            ?0247:
   \   2098            ?0248:
   \   2098            ?0245:
   1055                                          if ((mes_data[i] < 150.0) &&         /* to high or */
   1056                                                   (mes_data[i] > -80.0) &&         /* to low temp or */
   1057                                                   !(ch_stat[i] & 0x01)) {             /* convertion error */
   \   2098  0D61              MOV.W   R6,R1
   \   209A  0911              ADD.W   R1,R1
   \   209C  0911              ADD.W   R1,R1
   \   209E  0D10              MOV.W   R1,R0
   \   20A0  6F010280          MOV.W   @(mes_data+2,R0),R1
   \   20A4  6F00027E          MOV.W   @(mes_data,R0),R0
   \   20A8  1933              SUB.W   R3,R3
   \   20AA  79024316          MOV.W   #17174,R2
   \   20AE  5E000000          JSR     @?F_SUB_L04
   \   20B2  0D00              MOV.W   R0,R0
   \   20B4  4C2C              BGE     ?0250
   \   20B6  0D61              MOV.W   R6,R1
   \   20B8  0911              ADD.W   R1,R1
   \   20BA  0911              ADD.W   R1,R1
   \   20BC  0D10              MOV.W   R1,R0
   \   20BE  6F010280          MOV.W   @(mes_data+2,R0),R1
   \   20C2  6F00027E          MOV.W   @(mes_data,R0),R0
   \   20C6  1933              SUB.W   R3,R3
   \   20C8  7902C2A0          MOV.W   #-15712,R2
   \   20CC  5E000000          JSR     @?F_SUB_L04
   \   20D0  0D00              MOV.W   R0,R0
   \   20D2  4F0E              BLE     ?0250
   \   20D4  6E69031B          MOV.B   @(ch_stat,R6),R1L
   \   20D8  E901              AND.B   #1,R1L
   \   20DA  4606              BNE     ?0250
   \   20DC            ?0252:
   \   20DC            ?0251:
   \   20DC            ?0249:
   1058                                                   temp_ch = i ;
   \   20DC  0D65              MOV.W   R6,R5
   1059                                                   i = NOIOCH ;                                                           /* exit */
   \   20DE  7906000E          MOV.W   #14,R6
   \   20E2            ?0250:
   \   20E2            ?0246:
   \   20E2  0B06              ADDS.W  #1,R6
   1060                                          }
   1061                                  }
   1062                           }
   1063                  }
   \   20E4  409A              BRA     ?0242
   \   20E6            ?0241:
   \   20E6            ?0238:
   1064                  return temp_ch ;
   \   20E6  0D51              MOV.W   R5,R1
   1065          }
   \   20E8  6D76              POP     R6
   \   20EA  6D75              POP     R5
   \   20EC  5470              RTS
   1066          
   1067          
   1068          
   1069          /*************************************************************************
   1070          *
   1071          *  Read from AD-converter
   1072          *
   1073          *************************************************************************/
   1074          unsigned char ReadAdByte(void)
   1075          {
   \   20EE            ReadAdByte:
   \   20EE  6DF5              PUSH    R5
   \   20F0  6DF6              PUSH    R6
   1076          
   1077                  unsigned char i, read_byte ;
   1078          
   1079                  for (i = 0; i <  8; i++) {
   \   20F2  FD00              MOV.B   #0,R5L
   \   20F4            ?0254:
   \   20F4  AD08              CMP.B   #8,R5L
   \   20F6  441A              BCC     ?0253
   \   20F8            ?0255:
   1080                          read_byte <<= 1 ;                                                 /* shift to next bit */
   \   20F8  100E              SHLL.B  R6L
   1081                          P5DR &= ~ADCLK ;                                                                /*      set clock line low */
   \   20FA  7FBA7250          BCLR    #5,@186:8
   1082                          P5DR |= ADCLK ;                                                                 /*      set clock line high */
   \   20FE  7FBA7050          BSET    #5,@186:8
   1083                          if (P5DR & ADDO) {                                                      /* data  = 1? */
   \   2102  29BA              MOV.B   @186:8,R1L
   \   2104  E910              AND.B   #16,R1L
   \   2106  4704              BEQ     ?0258
   \   2108            ?0257:
   1084                            read_byte |= 0x01 ;                                           /* set bit high */
   \   2108  700E              BSET    #0,R6L
   1085                          } else {
   \   210A  4002              BRA     ?0259
   \   210C            ?0258:
   1086                            read_byte &= ~0x01 ;                                          /* set bit low */
   \   210C  720E              BCLR    #0,R6L
   \   210E            ?0259:
   \   210E  8D01              ADD.B   #1,R5L
   1087                          }
   1088                  }
   1089                  return read_byte ;
   \   2110  40E2              BRA     ?0254
   \   2112            ?0253:
   \   2112  0CE9              MOV.B   R6L,R1L
   1090          }
   \   2114  6D76              POP     R6
   \   2116  6D75              POP     R5
   \   2118  5470              RTS
   1091          
   1092          /*************************************************************************
   1093          *
   1094          *  Write to AD-converter
   1095          *
   1096          *************************************************************************/
   1097          void WriteAdByte(unsigned char data)
   1098          {
   \   211A            WriteAdByte:
   \   211A  6DF5              PUSH    R5
   \   211C  6DF6              PUSH    R6
   \   211E  0C9D              MOV.B   R1L,R5L
   1099          
   1100                  short i;
   1101          
   1102                  for (i = 0; i <  8; i++) {
   \   2120  1966              SUB.W   R6,R6
   \   2122            ?0261:
   \   2122  79010008          MOV.W   #8,R1
   \   2126  1D16              CMP.W   R1,R6
   \   2128  4C1E              BGE     ?0260
   \   212A            ?0262:
   1103                          P5DR &= ~ADCLK ;                                                                /*      set clock line low */
   \   212A  7FBA7250          BCLR    #5,@186:8
   1104                          if (data & 0x80) {                                                      /* data bit = 1? */
   \   212E  0CD9              MOV.B   R5L,R1L
   \   2130  E980              AND.B   #128,R1L
   \   2132  4706              BEQ     ?0265
   \   2134            ?0264:
   1105                            P5DR |= ADDI ;                                                                /* set data high */
   \   2134  7FBA7030          BSET    #3,@186:8
   1106                          } else {
   \   2138  4004              BRA     ?0266
   \   213A            ?0265:
   1107                            P5DR &= ~ADDI ;                                                               /* set data low */
   \   213A  7FBA7230          BCLR    #3,@186:8
   \   213E            ?0266:
   1108                          }
   1109                          data <<= 1 ;                                                     /* shift to next bit */
   \   213E  100D              SHLL.B  R5L
   1110                          P5DR |= ADCLK ;                                                                 /*      set clock line high */
   \   2140  7FBA7050          BSET    #5,@186:8
   \   2144  0B06              ADDS.W  #1,R6
   1111                  }
   1112          }
   \   2146  40DA              BRA     ?0261
   \   2148            ?0260:
   \   2148  6D76              POP     R6
   \   214A  6D75              POP     R5
   \   214C  5470              RTS
   1113          
   1114          
   1115          
   1116          /*************************************************************************
   1117          *
   1118          *  Reset pointer to RX received data on RS485
   1119          *
   1120          *************************************************************************/
   1121          void ResetRxPointer(void) {
   \   214E            ResetRxPointer:
   1122          
   1123                  rx_indx = 1 ;
   \   214E  F901              MOV.B   #1,R1L
   \   2150  6A8900EA          MOV.B   R1L,@rx_indx:16
   1124                  rx_hndx = 0 ;
   \   2154  F900              MOV.B   #0,R1L
   \   2156  6A8900EB          MOV.B   R1L,@rx_hndx:16
   1125                  rx_start = 0 ;
   \   215A  F900              MOV.B   #0,R1L
   \   215C  6A8900EC          MOV.B   R1L,@rx_start:16
   1126                  rx_buff[0] = 0 ;
   \   2160  F900              MOV.B   #0,R1L
   \   2162  6A890078          MOV.B   R1L,@rx_buff:16
   1127                  rx_buff[1] = 0 ;
   \   2166  F900              MOV.B   #0,R1L
   \   2168  6A890079          MOV.B   R1L,@rx_buff+1:16
   1128                  rx_buff[2] = 0 ;
   \   216C  F900              MOV.B   #0,R1L
   \   216E  6A89007A          MOV.B   R1L,@rx_buff+2:16
   1129                  rx_state = SYNC ;                                       /* error in pack len */
   \   2172  F900              MOV.B   #0,R1L
   \   2174  6A890335          MOV.B   R1L,@rx_state:16
   1130                  rx_timeout = OFF ;                                 /* timeout on channel */
   \   2178  F900              MOV.B   #0,R1L
   \   217A  6A8900EF          MOV.B   R1L,@rx_timeout:16
   1131          }
   \   217E  5470              RTS
   1132          
   1133          /*************************************************************************
   1134          *
   1135          * Calculate rx checksum
   1136          *
   1137          *************************************************************************/
   1138          int CalcRxChecksum(void)
   1139          {
   \   2180            CalcRxChecksum:
   \   2180  6DF5              PUSH    R5
   \   2182  6DF6              PUSH    R6
   1140          
   1141                  int                             cnt ;
   1142                  unsigned char   csum ;
   1143          
   1144                  csum = 0 ;
   \   2184  FD00              MOV.B   #0,R5L
   1145                  for (cnt=rx_start ; cnt < (rx_start+rx_packlen-2) ; cnt++) {
   \   2186  6A0900EC          MOV.B   @rx_start:16,R1L
   \   218A  F100              MOV.B   #0,R1H
   \   218C  0D16              MOV.W   R1,R6
   \   218E            ?0268:
   \   218E  6A0900EE          MOV.B   @rx_packlen:16,R1L
   \   2192  F100              MOV.B   #0,R1H
   \   2194  6A0B00EC          MOV.B   @rx_start:16,R3L
   \   2198  08B9              ADD.B   R3L,R1L
   \   219A  9100              ADDX.B  #0,R1H
   \   219C  1B81              SUBS.W  #2,R1
   \   219E  1D61              CMP.W   R6,R1
   \   21A0  4F12              BLE     ?0267
   \   21A2            ?0269:
   1146                          csum = crc[csum ^ rx_buff[cnt]] ;
   \   21A2  6E690078          MOV.B   @(rx_buff,R6),R1L
   \   21A6  15D9              XOR.B   R5L,R1L
   \   21A8  F100              MOV.B   #0,R1H
   \   21AA  0911              ADD.W   R1,R1
   \   21AC  6E1D0001          MOV.B   @(crc+1,R1),R5L
   \   21B0  0B06              ADDS.W  #1,R6
   1147                  }
   1148                  if (csum == (rx_buff[rx_start + rx_packlen - 2])) {
   \   21B2  40DA              BRA     ?0268
   \   21B4            ?0267:
   \   21B4  6A0900EE          MOV.B   @rx_packlen:16,R1L
   \   21B8  F100              MOV.B   #0,R1H
   \   21BA  6A0B00EC          MOV.B   @rx_start:16,R3L
   \   21BE  08B9              ADD.B   R3L,R1L
   \   21C0  9100              ADDX.B  #0,R1H
   \   21C2  6E1B0076          MOV.B   @(rx_buff-2,R1),R3L
   \   21C6  1CDB              CMP.B   R5L,R3L
   \   21C8  4606              BNE     ?0272
   \   21CA            ?0271:
   1149                          return TRUE ;
   \   21CA  79010001          MOV.W   #1,R1
   1150                  } else {
   \   21CE  4002              BRA     ?0273
   \   21D0            ?0272:
   1151                          return FALSE ;
   \   21D0  1911              SUB.W   R1,R1
   1152                  }
   \   21D2            ?0273:
   \   21D2  6D76              POP     R6
   \   21D4  6D75              POP     R5
   \   21D6  5470              RTS
   1153          }
   1154          
   1155          
   1156          
   1157          /*************************************************************************
   1158          *
   1159          *  Handle rx data on RS485
   1160          *
   1161          *************************************************************************/
   1162          void HandleRxPacket(void)
   1163          {
   \   21D8            HandleRxPacket:
   \   21D8  6DF4              PUSH    R4
   \   21DA  6DF5              PUSH    R5
   \   21DC  6DF6              PUSH    R6
   1164                  short     pointer, ndb, more ;
   1165          
   1166                  Led(1, ON) ;                                                            /* ASt mark test led 2 off */
   \   21DE  79010001          MOV.W   #1,R1
   \   21E2  6DF1              MOV.W   R1,@-SP
   \   21E4  79010001          MOV.W   #1,R1
   \   21E8  5E0001C6          JSR     @Led:16
   \   21EC  0B87              ADDS.W  #2,SP
   1167                  sendtail = FALSE ;
   \   21EE  F900              MOV.B   #0,R1L
   \   21F0  6A890337          MOV.B   R1L,@sendtail:16
   1168                  more    = TRUE ;
   \   21F4  79050001          MOV.W   #1,R5
   1169                  pointer = 0 ;
   \   21F8  1966              SUB.W   R6,R6
   1170                  ndb     = 2 ;                                                                                   /* point to first command */
   \   21FA  79040002          MOV.W   #2,R4
   1171                  pointer = rx_start;                                                             /* Point to  command */
   \   21FE  6A0900EC          MOV.B   @rx_start:16,R1L
   \   2202  F100              MOV.B   #0,R1H
   \   2204  0D16              MOV.W   R1,R6
   \   2206            ?0275:
   1172                  while (more && (pointer < (rx_packlen + rx_start))) {
   \   2206  0D51              MOV.W   R5,R1
   \   2208  4730              BEQ     ?0274
   \   220A  6A0900EC          MOV.B   @rx_start:16,R1L
   \   220E  F100              MOV.B   #0,R1H
   \   2210  6A0B00EE          MOV.B   @rx_packlen:16,R3L
   \   2214  08B9              ADD.B   R3L,R1L
   \   2216  9100              ADDX.B  #0,R1H
   \   2218  1D61              CMP.W   R6,R1
   \   221A  4F1E              BLE     ?0274
   \   221C            ?0278:
   \   221C            ?0277:
   \   221C            ?0276:
   1173                          pointer = pointer + ndb + 2;                            /* Point to  command */
   1174                          ndb = rx_buff[pointer+1]        ;                               /* Save pointer to next command */
   \   221C  0D41              MOV.W   R4,R1
   \   221E  0961              ADD.W   R6,R1
   \   2220  0B81              ADDS.W  #2,R1
   \   2222  0D16              MOV.W   R1,R6
   \   2224  6E1B0079          MOV.B   @(rx_buff+1,R1),R3L
   \   2228  F300              MOV.B   #0,R3H
   \   222A  0D34              MOV.W   R3,R4
   1175                          if (!CheckAction(pointer)){
   \   222C  0D61              MOV.W   R6,R1
   \   222E  5E000000          JSR     @CheckAction:16
   \   2232  0D11              MOV.W   R1,R1
   \   2234  4602              BNE     ?0280
   \   2236            ?0279:
   1176                                  more = FALSE ;                                                          /* terminate while  */
   \   2236  1955              SUB.W   R5,R5
   \   2238            ?0280:
   1177                          }
   1178                  }
   1179                          Led(1, OFF) ;                                                           /* ASt mark test led 2 off */
   \   2238  40CC              BRA     ?0275
   \   223A            ?0274:
   \   223A  1911              SUB.W   R1,R1
   \   223C  6DF1              MOV.W   R1,@-SP
   \   223E  79010001          MOV.W   #1,R1
   \   2242  5E0001C6          JSR     @Led:16
   \   2246  0B87              ADDS.W  #2,SP
   1180          }
   \   2248  6D76              POP     R6
   \   224A  6D75              POP     R5
   \   224C  6D74              POP     R4
   \   224E  5470              RTS
   1181          
   1182          /*************************************************************************
   1183          *
   1184          *  Receive data on RS485
   1185          *
   1186          *************************************************************************/
   1187          int ReceiveRxPacket(void)
   1188          {
   \   2250            ReceiveRxPacket:
   \   2250  6DF4              PUSH    R4
   \   2252  6DF5              PUSH    R5
   \   2254  6DF6              PUSH    R6
   1189                  int       ret_val, cnt, new_sync ;
   1190          
   1191                  ret_val = FALSE ;
   \   2256  1944              SUB.W   R4,R4
   \   2258            ?0282:
   1192                  while (rx_indx > rx_hndx) {                                             /* more char to check */
   \   2258  6A0900EB          MOV.B   @rx_hndx:16,R1L
   \   225C  6A0B00EA          MOV.B   @rx_indx:16,R3L
   \   2260  1C9B              CMP.B   R1L,R3L
   \   2262  4204              BHI     $+6
   \   2264  5A002418          JMP     @?0281:16
   \   2268            ?0283:
   1193                          switch (rx_state) {                                             /* check state */
   \   2268  6A090335          MOV.B   @rx_state:16,R1L
   \   226C  A900              CMP.B   #0,R1L
   \   226E  4640              BNE     ?0292
   \   2270            ?0285:
   1194                          case SYNC :
   1195                                  if ((rx_buff[rx_hndx] != STX) &&
   1196                                           (rx_buff[rx_hndx-1] == STX)) {
   \   2270  6A0900EB          MOV.B   @rx_hndx:16,R1L
   \   2274  F100              MOV.B   #0,R1H
   \   2276  6E1B0078          MOV.B   @(rx_buff,R1),R3L
   \   227A  AB02              CMP.B   #2,R3L
   \   227C  4722              BEQ     ?0287
   \   227E  6A0900EB          MOV.B   @rx_hndx:16,R1L
   \   2282  F100              MOV.B   #0,R1H
   \   2284  6E1B0077          MOV.B   @(rx_buff-1,R1),R3L
   \   2288  AB02              CMP.B   #2,R3L
   \   228A  4614              BNE     ?0287
   \   228C            ?0289:
   \   228C            ?0288:
   \   228C            ?0286:
   1197                                          rx_start = rx_hndx ;                                            /* start after the two STX */
   \   228C  6A0900EB          MOV.B   @rx_hndx:16,R1L
   \   2290  6A8900EC          MOV.B   R1L,@rx_start:16
   1198                                          rx_state = HEADER ;
   \   2294  F901              MOV.B   #1,R1L
   \   2296  6A890335          MOV.B   R1L,@rx_state:16
   1199                                          rx_timeout = RX_TO_TIME ;                               /* timeout on channel */
   \   229A  F9E8              MOV.B   #232,R1L
   \   229C  6A8900EF          MOV.B   R1L,@rx_timeout:16
   \   22A0            ?0287:
   1200                                  }
   1201                                  if (rx_hndx > (RX_SIZE - RX_PACK_LEN)) {        /* near end of buffer */
   \   22A0  6A0900EB          MOV.B   @rx_hndx:16,R1L
   \   22A4  A90A              CMP.B   #10,R1L
   \   22A6  4304              BLS     ?0291
   \   22A8            ?0290:
   1202                                          ResetRxPointer() ;                                              /* reset pointer */
   \   22A8  5E00214E          JSR     @ResetRxPointer:16
   \   22AC            ?0291:
   1203                                  }
   1204                                  break ;
   \   22AC  5A002402          JMP     @?0284:16
   \   22B0            ?0292:
   \   22B0  A901              CMP.B   #1,R1L
   \   22B2  4704              BEQ     $+6
   \   22B4  5A00238A          JMP     @?0312:16
   1205                          case HEADER :
   1206                                   if ((rx_hndx-rx_start) >= 3) {                         /* rec. header */
   \   22B8  6A0900EB          MOV.B   @rx_hndx:16,R1L
   \   22BC  F100              MOV.B   #0,R1H
   \   22BE  6A0B00EC          MOV.B   @rx_start:16,R3L
   \   22C2  F300              MOV.B   #0,R3H
   \   22C4  1931              SUB.W   R3,R1
   \   22C6  A903              CMP.B   #3,R1L
   \   22C8  B100              SUBX.B  #0,R1H
   \   22CA  4C04              BGE     $+6
   \   22CC  5A002386          JMP     @?0294:16
   \   22D0            ?0293:
   1207                                          rx_packlen = ((rx_buff[rx_start+2] * 256) +
   1208                                                                                  rx_buff[rx_start+3] ) ;                         /* calc. pack.len */
   \   22D0  6A0900EC          MOV.B   @rx_start:16,R1L
   \   22D4  F100              MOV.B   #0,R1H
   \   22D6  6A0B00EC          MOV.B   @rx_start:16,R3L
   \   22DA  F300              MOV.B   #0,R3H
   \   22DC  6E38007A          MOV.B   @(rx_buff+2,R3),R0L
   \   22E0  F800              MOV.B   #0,R0L
   \   22E2  6E1B007B          MOV.B   @(rx_buff+3,R1),R3L
   \   22E6  08B8              ADD.B   R3L,R0L
   \   22E8  6A8800EE          MOV.B   R0L,@rx_packlen:16
   1209                                          if ((rx_packlen < ((short) RX_SIZE-rx_hndx)) &&    /* chk. header */
   1210                                                   (rx_packlen >= MIN_PACK_LEN) &&
   1211                                                   (rx_buff[rx_start+1] != 0xff)) {
   \   22EC  6A0900EB          MOV.B   @rx_hndx:16,R1L
   \   22F0  F100              MOV.B   #0,R1H
   \   22F2  7903006E          MOV.W   #110,R3
   \   22F6  1913              SUB.W   R1,R3
   \   22F8  6A0900EE          MOV.B   @rx_packlen:16,R1L
   \   22FC  F100              MOV.B   #0,R1H
   \   22FE  1D13              CMP.W   R1,R3
   \   2300  4F2E              BLE     ?0296
   \   2302  6A0900EE          MOV.B   @rx_packlen:16,R1L
   \   2306  A905              CMP.B   #5,R1L
   \   2308  4526              BCS     ?0296
   \   230A  6A0900EC          MOV.B   @rx_start:16,R1L
   \   230E  F100              MOV.B   #0,R1H
   \   2310  6E1B0079          MOV.B   @(rx_buff+1,R1),R3L
   \   2314  ABFF              CMP.B   #255,R3L
   \   2316  4718              BEQ     ?0296
   \   2318            ?0298:
   \   2318            ?0297:
   \   2318            ?0295:
   1212                                                  rx_state = RECEIVE ;                                    /* header ok */
   \   2318  F902              MOV.B   #2,R1L
   \   231A  6A890335          MOV.B   R1L,@rx_state:16
   1213                                                  rx_counter = rx_hndx - rx_start + 1 ;
   \   231E  6A0900EB          MOV.B   @rx_hndx:16,R1L
   \   2322  6A0B00EC          MOV.B   @rx_start:16,R3L
   \   2326  18B9              SUB.B   R3L,R1L
   \   2328  8901              ADD.B   #1,R1L
   \   232A  6A8900ED          MOV.B   R1L,@rx_counter:16
   1214                                          } else {
   \   232E  4056              BRA     ?0299
   \   2330            ?0296:
   1215          /*
   1216          **   Try to sync again without reset pointers
   1217          */
   1218                                                  new_sync = FALSE ;
   \   2330  1955              SUB.W   R5,R5
   1219                                                  for (cnt = rx_start ; cnt < (rx_hndx-1); cnt ++) {
   \   2332  6A0900EC          MOV.B   @rx_start:16,R1L
   \   2336  F100              MOV.B   #0,R1H
   \   2338  0D16              MOV.W   R1,R6
   \   233A            ?0301:
   \   233A  6A0900EB          MOV.B   @rx_hndx:16,R1L
   \   233E  F100              MOV.B   #0,R1H
   \   2340  1B01              SUBS.W  #1,R1
   \   2342  1D61              CMP.W   R6,R1
   \   2344  4F30              BLE     ?0300
   \   2346            ?0302:
   1220                                                          if ((rx_buff[cnt] == STX) && (rx_buff[cnt+1] != STX)) {
   \   2346  6E690078          MOV.B   @(rx_buff,R6),R1L
   \   234A  A902              CMP.B   #2,R1L
   \   234C  4624              BNE     ?0305
   \   234E  6E690079          MOV.B   @(rx_buff+1,R6),R1L
   \   2352  A902              CMP.B   #2,R1L
   \   2354  471C              BEQ     ?0305
   \   2356            ?0307:
   \   2356            ?0306:
   \   2356            ?0304:
   1221                                                                  rx_start = cnt + 1 ;
   \   2356  0CE9              MOV.B   R6L,R1L
   \   2358  8901              ADD.B   #1,R1L
   \   235A  6A8900EC          MOV.B   R1L,@rx_start:16
   1222                                                                  new_sync = TRUE ;
   \   235E  79050001          MOV.W   #1,R5
   1223                                                                  cnt = rx_hndx -1 ;
   \   2362  6A0900EB          MOV.B   @rx_hndx:16,R1L
   \   2366  F100              MOV.B   #0,R1H
   \   2368  1B01              SUBS.W  #1,R1
   \   236A  0D16              MOV.W   R1,R6
   1224                                                                  rx_timeout = RX_TO_TIME ;
   \   236C  F9E8              MOV.B   #232,R1L
   \   236E  6A8900EF          MOV.B   R1L,@rx_timeout:16
   \   2372            ?0305:
   \   2372  0B06              ADDS.W  #1,R6
   1225                                                          }
   1226                                                  }
   1227                                                  if ((!new_sync) || (rx_hndx > (RX_SIZE - RX_PACK_LEN))) {
   \   2374  40C4              BRA     ?0301
   \   2376            ?0300:
   \   2376  0D51              MOV.W   R5,R1
   \   2378  4708              BEQ     ?0308
   \   237A  6A0900EB          MOV.B   @rx_hndx:16,R1L
   \   237E  A90A              CMP.B   #10,R1L
   \   2380  4304              BLS     ?0309
   \   2382            ?0310:
   \   2382            ?0311:
   \   2382            ?0308:
   1228                                                          ResetRxPointer() ;
   \   2382  5E00214E          JSR     @ResetRxPointer:16
   \   2386            ?0309:
   \   2386            ?0299:
   \   2386            ?0294:
   1229                                                  }
   1230                                          }
   1231                                  }
   1232                                  break ;
   \   2386  5A002402          JMP     @?0284:16
   \   238A            ?0312:
   \   238A  A902              CMP.B   #2,R1L
   \   238C  4704              BEQ     $+6
   \   238E  5A0023FE          JMP     @?0326:16
   1233                          case RECEIVE :
   1234                                  if (++rx_counter >= rx_packlen) {
   \   2392  6A0900ED          MOV.B   @rx_counter:16,R1L
   \   2396  8901              ADD.B   #1,R1L
   \   2398  6A8900ED          MOV.B   R1L,@rx_counter:16
   \   239C  6A0B00EE          MOV.B   @rx_packlen:16,R3L
   \   23A0  1CB9              CMP.B   R3L,R1L
   \   23A2  4558              BCS     ?0314
   \   23A4            ?0313:
   1235                                          if ((rx_buff[rx_packlen + rx_start-1]) == ETX) {
   \   23A4  6A0900EC          MOV.B   @rx_start:16,R1L
   \   23A8  F100              MOV.B   #0,R1H
   \   23AA  6A0B00EE          MOV.B   @rx_packlen:16,R3L
   \   23AE  08B9              ADD.B   R3L,R1L
   \   23B0  9100              ADDX.B  #0,R1H
   \   23B2  6E1B0077          MOV.B   @(rx_buff-1,R1),R3L
   \   23B6  AB03              CMP.B   #3,R3L
   \   23B8  4642              BNE     ?0316
   \   23BA            ?0315:
   1236                                                  if (CalcRxChecksum()) {
   \   23BA  5E002180          JSR     @CalcRxChecksum:16
   \   23BE  0D11              MOV.W   R1,R1
   \   23C0  4736              BEQ     ?0318
   \   23C2            ?0317:
   1237                                                          if (rx_buff[rx_start + 1] < PC_START_ADDRESS) {
   \   23C2  6A0900EC          MOV.B   @rx_start:16,R1L
   \   23C6  F100              MOV.B   #0,R1H
   \   23C8  6E1B0079          MOV.B   @(rx_buff+1,R1),R3L
   \   23CC  ABF0              CMP.B   #240,R3L
   \   23CE  4400              BCC     ?0320
   \   23D0            ?0319:
   \   23D0            ?0320:
   1238                                                          }
   1239                                                          if ((rx_buff[rx_start] == GetMyAddress())||
   1240                                                                   (rx_buff[rx_start] == 0)){            /* don't use address*/
   \   23D0  6A0900EC          MOV.B   @rx_start:16,R1L
   \   23D4  F100              MOV.B   #0,R1H
   \   23D6  6DF1              MOV.W   R1,@-SP
   \   23D8  5E0001B2          JSR     @GetMyAddress:16
   \   23DC  6D73              MOV.W   @SP+,R3
   \   23DE  6E380078          MOV.B   @(rx_buff,R3),R0L
   \   23E2  1C98              CMP.B   R1L,R0L
   \   23E4  470C              BEQ     ?0321
   \   23E6  6A0900EC          MOV.B   @rx_start:16,R1L
   \   23EA  F100              MOV.B   #0,R1H
   \   23EC  6E1B0078          MOV.B   @(rx_buff,R1),R3L
   \   23F0  4604              BNE     ?0322
   \   23F2            ?0323:
   \   23F2            ?0324:
   \   23F2            ?0321:
   1241                                                                  ret_val = TRUE ;
   \   23F2  79040001          MOV.W   #1,R4
   \   23F6            ?0322:
   1242                                                          }
   1243                                                  } else {
   \   23F6  4004              BRA     ?0325
   \   23F8            ?0318:
   1244                                                          ResetRxPointer() ;                          /* reset pointer */
   \   23F8  5E00214E          JSR     @ResetRxPointer:16
   \   23FC            ?0325:
   \   23FC            ?0316:
   \   23FC            ?0314:
   1245                                                  }
   1246                                          }
   1247                                  }
   1248                                  break ;
   \   23FC  4004              BRA     ?0284
   \   23FE            ?0326:
   1249                          default :
   1250                                  ResetRxPointer() ;                                                      /* reset pointer */
   \   23FE  5E00214E          JSR     @ResetRxPointer:16
   1251                                  break ;
   \   2402            ?0284:
   1252                          }                                                                                                               /* end switch */
   1253                          if (++rx_hndx >= RX_SIZE) {                                     /* check pointer */
   \   2402  6A0900EB          MOV.B   @rx_hndx:16,R1L
   \   2406  8901              ADD.B   #1,R1L
   \   2408  6A8900EB          MOV.B   R1L,@rx_hndx:16
   \   240C  A96E              CMP.B   #110,R1L
   \   240E  4504              BCS     ?0328
   \   2410            ?0327:
   1254                                  ResetRxPointer() ;                                                      /* reset pointer */
   \   2410  5E00214E          JSR     @ResetRxPointer:16
   \   2414            ?0328:
   1255                          }
   1256                  }                                                                                                                       /* end while.. */
   1257                  return ret_val ;
   \   2414  5A002258          JMP     @?0282:16
   \   2418            ?0281:
   \   2418  0D41              MOV.W   R4,R1
   1258          }
   \   241A  6D76              POP     R6
   \   241C  6D75              POP     R5
   \   241E  6D74              POP     R4
   \   2420  5470              RTS
   1259          
   1260          
   1261          
   1262          
   1263          /*************************************************************************
   1264          *
   1265          *      IRQ 0    (Not used)
   1266          *
   1267          *************************************************************************/
   1268          interrupt [IRQ_0] void Irq0Int(void)
   1269          {
   \   2422            Irq0Int:
   1270          
   1271          }
   \   2422  5670              RTE
   1272          
   1273          
   1274          /*************************************************************************
   1275          *
   1276          *      IRQ 1 , interrupt from AD converter
   1277          *
   1278          *************************************************************************/
   1279          interrupt [IRQ_1] void Irq1Int(void)
   1280          {
   \   2424            Irq1Int:
   \   2424  6DF0              PUSH    R0
   \   2426  6DF1              PUSH    R1
   \   2428  6DF2              PUSH    R2
   \   242A  6DF3              PUSH    R3
   1281          
   1282                  if (ad_mode & 0x20) {                                           /* ok for int */
   \   242C  6A090313          MOV.B   @ad_mode:16,R1L
   \   2430  E920              AND.B   #32,R1L
   \   2432  4720              BEQ     ?0330
   \   2434            ?0329:
   1283                          ad_state++ ;                                                                    /* Go to next state */
   \   2434  6A090312          MOV.B   @ad_state:16,R1L
   \   2438  8901              ADD.B   #1,R1L
   \   243A  6A890312          MOV.B   R1L,@ad_state:16
   1284                          ad_mode &= ~0x20;                                                       /* int ok, reset flag */
   \   243E  79010313          MOV.W   #ad_mode,R1
   \   2442  7D107250          BCLR    #5,@R1
   1285                                          Led(1, OFF)     ;                                       /* ASt mark test only */
   \   2446  1911              SUB.W   R1,R1
   \   2448  6DF1              MOV.W   R1,@-SP
   \   244A  79010001          MOV.W   #1,R1
   \   244E  5E0001C6          JSR     @Led:16
   \   2452  0B87              ADDS.W  #2,SP
   \   2454            ?0330:
   1286                  }
   1287          
   1288          }
   \   2454  6D73              POP     R3
   \   2456  6D72              POP     R2
   \   2458  6D71              POP     R1
   \   245A  6D70              POP     R0
   \   245C  5670              RTE
   1289          
   1290          
   1291          /*************************************************************************
   1292          *
   1293          *      IRQ 2 , external int from display connector
   1294          *
   1295          *************************************************************************/
   1296          interrupt [IRQ_2] void Irq2Int(void)
   1297          {
   \   245E            Irq2Int:
   \   245E  6DF1              PUSH    R1
   1298          
   1299                                  test_eep = TRUE ;
   \   2460  F901              MOV.B   #1,R1L
   \   2462  6A89033C          MOV.B   R1L,@test_eep:16
   1300          
   1301          }
   \   2466  6D71              POP     R1
   \   2468  5670              RTE
   1302          
   1303          
   1304          /*************************************************************************
   1305          *
   1306          *  Free running timer capture interrupt routine
   1307          *
   1308          *************************************************************************/
   1309          interrupt [FRT_ICI] void FrtcInt(void)
   1310          {
   \   246A            FrtcInt:
   \   246A  6DF6              PUSH    R6
   1311          
   1312                  unsigned temp_icr;
   1313          
   1314                  temp_icr = FRT_ICR ;
   \   246C  6B06FF98          MOV.W   @-104:16,R6
   1315                  FRT_TCSR &= ~TCSRF_ICF;         /* clear input capt flag */
   \   2470  7F917270          BCLR    #7,@145:8
   1316          }
   \   2474  6D76              POP     R6
   \   2476  5670              RTE
   1317          
   1318          /*************************************************************************
   1319          *
   1320          *  Free running timer overflow interrupt routine
   1321          *
   1322          *************************************************************************/
   1323          interrupt [FRT_FOVI] void FrtoInt(void)
   1324          {
   \   2478            FrtoInt:
   1325          
   1326                  FRT_TCSR &= ~TCSRF_OVF;         /* clear overflow flag */
   \   2478  7F917240          BCLR    #4,@145:8
   1327          }
   \   247C  5670              RTE
   1328          
   1329          /*************************************************************************
   1330          *
   1331          *  Timer interrupt routine
   1332          *
   1333          *  This routine is called each msec
   1334          *
   1335          *************************************************************************/
   1336          interrupt [TMR_CMI1A] void TimInt(void)
   1337          {
   \   247E            TimInt:
   \   247E  6DF0              PUSH    R0
   \   2480  6DF1              PUSH    R1
   \   2482  6DF2              PUSH    R2
   \   2484  6DF3              PUSH    R3
   1338          
   1339                  TMR1_TCSR &= ~(TCSR_CMFB | TCSR_CMFA | TCSR_OVF);  /* Clear match to reenable interrupt */
   \   2486  29D1              MOV.B   @209:8,R1L
   \   2488  E91F              AND.B   #31,R1L
   \   248A  39D1              MOV.B   R1L,@209:8
   1340          
   1341                  if (ms_delay_cnt) {                                                     /* count down 1 ms delay */
   \   248C  6B010316          MOV.W   @ms_delay_cnt+2:16,R1
   \   2490  6B000314          MOV.W   @ms_delay_cnt:16,R0
   \   2494  1419              OR.B    R1H,R1L
   \   2496  1408              OR.B    R0H,R0L
   \   2498  1489              OR.B    R0L,R1L
   \   249A  4718              BEQ     ?0332
   \   249C            ?0331:
   1342                          ms_delay_cnt-- ;
   \   249C  6B000314          MOV.W   @ms_delay_cnt:16,R0
   \   24A0  6B010316          MOV.W   @ms_delay_cnt+2:16,R1
   \   24A4  89FF              ADD.B   #255,R1L
   \   24A6  91FF              ADDX.B  #255,R1H
   \   24A8  98FF              ADDX.B  #-1,R0L
   \   24AA  90FF              ADDX.B  #-1,R0H
   \   24AC  6B810316          MOV.W   R1,@ms_delay_cnt+2:16
   \   24B0  6B800314          MOV.W   R0,@ms_delay_cnt:16
   \   24B4            ?0332:
   1343                  }
   1344          
   1345                  if (!--sec_cnt) {                               /* counter for 1 sec. */
   \   24B4  6B010242          MOV.W   @sec_cnt:16,R1
   \   24B8  1B01              SUBS.W  #1,R1
   \   24BA  6B810242          MOV.W   R1,@sec_cnt:16
   \   24BE  4638              BNE     ?0334
   \   24C0            ?0333:
   1346                          sec_cnt = SEC_CNT_INIT;
   \   24C0  790103E8          MOV.W   #1000,R1
   \   24C4  6B810242          MOV.W   R1,@sec_cnt:16
   1347                          if (time_b_cnt) {                       /* timer for temperature readings */
   \   24C8  6A09023C          MOV.B   @time_b_cnt:16,R1L
   \   24CC  470A              BEQ     ?0336
   \   24CE            ?0335:
   1348                                  time_b_cnt-- ;
   \   24CE  6A09023C          MOV.B   @time_b_cnt:16,R1L
   \   24D2  89FF              ADD.B   #-1,R1L
   \   24D4  6A89023C          MOV.B   R1L,@time_b_cnt:16
   \   24D8            ?0336:
   1349                          }
   1350                          if (time_c_cnt) {                       /* timer for ad calibration */
   \   24D8  6B01023E          MOV.W   @time_c_cnt:16,R1
   \   24DC  470A              BEQ     ?0338
   \   24DE            ?0337:
   1351                                  time_c_cnt-- ;
   \   24DE  6B01023E          MOV.W   @time_c_cnt:16,R1
   \   24E2  1B01              SUBS.W  #1,R1
   \   24E4  6B81023E          MOV.W   R1,@time_c_cnt:16
   \   24E8            ?0338:
   1352                          }
   1353                          if (time_e_cnt) {                       /* timer for eed check*/
   \   24E8  6A09023D          MOV.B   @time_e_cnt:16,R1L
   \   24EC  470A              BEQ     ?0340
   \   24EE            ?0339:
   1354                                  time_e_cnt-- ;
   \   24EE  6A09023D          MOV.B   @time_e_cnt:16,R1L
   \   24F2  89FF              ADD.B   #-1,R1L
   \   24F4  6A89023D          MOV.B   R1L,@time_e_cnt:16
   \   24F8            ?0340:
   \   24F8            ?0334:
   1355                          }
   1356                  }
   1357          
   1358                  if (ad_settling) {                                                      /* count down ad setling time */
   \   24F8  6B010318          MOV.W   @ad_settling:16,R1
   \   24FC  4724              BEQ     ?0342
   \   24FE            ?0341:
   1359                          if (!--ad_settling) {
   \   24FE  6B010318          MOV.W   @ad_settling:16,R1
   \   2502  1B01              SUBS.W  #1,R1
   \   2504  6B810318          MOV.W   R1,@ad_settling:16
   \   2508  4618              BNE     ?0344
   \   250A            ?0343:
   1360                                  ad_mode |= 0x20;                                                /* Ok for int 1 */
   \   250A  79010313          MOV.W   #ad_mode,R1
   \   250E  7D107050          BSET    #5,@R1
   1361                                          Led(1, ON)      ;                                       /* ASt mark test only */
   \   2512  79010001          MOV.W   #1,R1
   \   2516  6DF1              MOV.W   R1,@-SP
   \   2518  79010001          MOV.W   #1,R1
   \   251C  5E0001C6          JSR     @Led:16
   \   2520  0B87              ADDS.W  #2,SP
   \   2522            ?0344:
   \   2522            ?0342:
   1362                          }
   1363                  }
   1364                                                                                                                          /* timeout ad converter */
   1365                  if (ad_timeout_cnt) {
   \   2522  6B010240          MOV.W   @ad_timeout_cnt:16,R1
   \   2526  472A              BEQ     ?0346
   \   2528            ?0345:
   1366                          if (!--ad_timeout_cnt) {
   \   2528  6B010240          MOV.W   @ad_timeout_cnt:16,R1
   \   252C  1B01              SUBS.W  #1,R1
   \   252E  6B810240          MOV.W   R1,@ad_timeout_cnt:16
   \   2532  461E              BNE     ?0348
   \   2534            ?0347:
   1367                                  ad_state = IDLE ;
   \   2534  F907              MOV.B   #7,R1L
   \   2536  6A890312          MOV.B   R1L,@ad_state:16
   1368                                  WriteAdByte(0xff) ;                             /* Reset the ad */
   \   253A  F9FF              MOV.B   #255,R1L
   \   253C  5E00211A          JSR     @WriteAdByte:16
   1369                                  WriteAdByte(0xff) ;                             /* with */
   \   2540  F9FF              MOV.B   #255,R1L
   \   2542  5E00211A          JSR     @WriteAdByte:16
   1370                                  WriteAdByte(0xff) ;                             /* 32 (8*4)*/
   \   2546  F9FF              MOV.B   #255,R1L
   \   2548  5E00211A          JSR     @WriteAdByte:16
   1371                                  WriteAdByte(0xff) ;                             /* write pulses*/
   \   254C  F9FF              MOV.B   #255,R1L
   \   254E  5E00211A          JSR     @WriteAdByte:16
   \   2552            ?0348:
   \   2552            ?0346:
   1372                          }
   1373                  }
   1374          
   1375                  if (rx_timeout) {                                                               /* check timeout on tx0  */
   \   2552  6A0900EF          MOV.B   @rx_timeout:16,R1L
   \   2556  470C              BEQ     ?0350
   \   2558            ?0349:
   1376                          if (!--rx_timeout) {
   \   2558  6A0900EF          MOV.B   @rx_timeout:16,R1L
   \   255C  89FF              ADD.B   #-1,R1L
   \   255E  6A8900EF          MOV.B   R1L,@rx_timeout:16
   \   2562  4600              BNE     ?0352
   \   2564            ?0351:
   1377                                  ResetRxPointer;
   \   2564            ?0352:
   \   2564            ?0350:
   1378                          }
   1379                  }
   1380          
   1381          
   1382                  if (tx_tail) {                                                                  /* check tx0 driver */
   \   2564  6A0900E8          MOV.B   @tx_tail:16,R1L
   \   2568  4718              BEQ     ?0354
   \   256A            ?0353:
   1383                          if (!--tx_tail) {
   \   256A  6A0900E8          MOV.B   @tx_tail:16,R1L
   \   256E  89FF              ADD.B   #-1,R1L
   \   2570  6A8900E8          MOV.B   R1L,@tx_tail:16
   \   2574  460C              BNE     ?0356
   \   2576            ?0355:
   1384                                  TxDriver(OFF);
   \   2576  1911              SUB.W   R1,R1
   \   2578  5E000218          JSR     @TxDriver:16
   1385                                  tx_complete = TRUE;
   \   257C  F901              MOV.B   #1,R1L
   \   257E  6A890336          MOV.B   R1L,@tx_complete:16
   \   2582            ?0356:
   \   2582            ?0354:
   1386                          }
   1387                  }
   1388          
   1389                  if (wait_for_pc) {                                                      /* delay before sending ch0 */
   \   2582  6A0900E9          MOV.B   @wait_for_pc:16,R1L
   \   2586  4728              BEQ     ?0358
   \   2588            ?0357:
   1390                          if (!--wait_for_pc) {
   \   2588  6A0900E9          MOV.B   @wait_for_pc:16,R1L
   \   258C  89FF              ADD.B   #-1,R1L
   \   258E  6A8900E9          MOV.B   R1L,@wait_for_pc:16
   \   2592  461C              BNE     ?0360
   \   2594            ?0359:
   1391                                  SCI0_TDR = tx_buff[tx_indx++];
   \   2594  6A0900E6          MOV.B   @tx_indx:16,R1L
   \   2598  0A09              INC.B   R1L
   \   259A  6A8900E6          MOV.B   R1L,@tx_indx:16
   \   259E  1A09              DEC.B   R1L
   \   25A0  F100              MOV.B   #0,R1H
   \   25A2  6E1B0000          MOV.B   @(tx_buff,R1),R3L
   \   25A6  3BDB              MOV.B   R3L,@219:8
   1392                                  SCI0_SSR &= ~SSR_TDRE;                          /* clear TDRE-flag */
   \   25A8  7FDC7270          BCLR    #7,@220:8
   1393                                  SCI0_SCR |= SCR_TIE;                                    /*  enable  tx int */
   \   25AC  7FDA7070          BSET    #7,@218:8
   \   25B0            ?0360:
   \   25B0            ?0358:
   1394                          }
   1395                  }
   1396          }
   \   25B0  6D73              POP     R3
   \   25B2  6D72              POP     R2
   \   25B4  6D71              POP     R1
   \   25B6  6D70              POP     R0
   \   25B8  5670              RTE
   1397          
   1398          
   1399          /*************************************************************************
   1400          *
   1401          *  Transmit interrupt routine  TX0
   1402          *
   1403          *  This routine is called on transmition on serial line 0 (RS485)
   1404          *
   1405          ****************************************************************************/
   1406          interrupt [SCI_TXI0] void Tx0Int(void)
   1407          {
   \   25BA            Tx0Int:
   \   25BA  6DF1              PUSH    R1
   \   25BC  6DF3              PUSH    R3
   \   25BE  6DF6              PUSH    R6
   1408          
   1409            char status;
   1410          
   1411            status = SCI0_SSR;
   \   25C0  2EDC              MOV.B   @220:8,R6L
   1412            if (tx_indx < tx_bytes) {            /* More to send ? */
   \   25C2  6A0900E7          MOV.B   @tx_bytes:16,R1L
   \   25C6  6A0B00E6          MOV.B   @tx_indx:16,R3L
   \   25CA  1C9B              CMP.B   R1L,R3L
   \   25CC  441C              BCC     ?0362
   \   25CE            ?0361:
   1413                   SCI0_TDR = tx_buff[tx_indx++];
   \   25CE  6A0900E6          MOV.B   @tx_indx:16,R1L
   \   25D2  0A09              INC.B   R1L
   \   25D4  6A8900E6          MOV.B   R1L,@tx_indx:16
   \   25D8  1A09              DEC.B   R1L
   \   25DA  F100              MOV.B   #0,R1H
   \   25DC  6E1B0000          MOV.B   @(tx_buff,R1),R3LfF   @@ @B
 4 0       @@U     @B
U J       ,)1)Aw)1  SCI0_SSR = status & ~SSR_TDRE;        /* clear TDRE-flag */
   \   25E2  0CE9              MOV.B   R6L,R1L
   \   25E4  E97F              AND.B   #127,R1L
   \   25E6  39DC              MOV.B   R1L,@220:8
   1415            } else {
   \   25E8  400A              BRA     ?0363
   \   25EA            ?0362:
   1416                   SCI0_SCR &= ~SCR_TIE;                 /* Disable tx int */
   \   25EA  7FDA7270          BCLR    #7,@218:8
   1417                   tx_tail = TXTAIL ;                    /* driver on for last char */
   \   25EE  F902              MOV.B   #2,R1L
   \   25F0  6A8900E8          MOV.B   R1L,@tx_tail:16
   \   25F4            ?0363:
   1418            }
   1419          }
   \   25F4  6D76              POP     R6
   \   25F6  6D73              POP     R3
   \   25F8  6D71              POP     R1
   \   25FA  5670              RTE
   1420          
   1421          
   1422          /*************************************************************************
   1423          *
   1424          *  Error interrupt routine
   1425          *
   1426          *  Error on RS485 port 0 goes here.
   1427          *
   1428          *************************************************************************/
   1429          interrupt [SCI_ERI0] void Err0Int(void)
   1430          {
   \   25FC            Err0Int:
   \   25FC  6DF1              PUSH    R1
   \   25FE  6DF6              PUSH    R6
   1431          
   1432                  char status;
   1433          
   1434                  status = SCI0_SSR;
   1435                  SCI0_SSR = status & ~(SSR_ORER | SSR_FER | SSR_PER);
   \   2600  29DC              MOV.B   @220:8,R1L
   \   2602  0C9E              MOV.B   R1L,R6L
   \   2604  E9C7              AND.B   #199,R1L
   \   2606  39DC              MOV.B   R1L,@220:8
   1436          
   1437          }
   \   2608  6D76              POP     R6
   \   260A  6D71              POP     R1
   \   260C  5670              RTE
   1438          
   1439          
   1440          /*************************************************************************
   1441          *
   1442          *  Receive interrupt routine  RX0
   1443          *
   1444          *  Char received on serial port 0
   1445          *
   1446          *************************************************************************/
   1447          interrupt [SCI_RXI0] void Rx0Int(void)
   1448          {
   \   260E            Rx0Int:
   \   260E  6DF1              PUSH    R1
   \   2610  6DF5              PUSH    R5
   \   2612  6DF6              PUSH    R6
   1449          
   1450                  char status, bufch;
   1451          
   1452                  status = SCI0_SSR;
   \   2614  2DDC              MOV.B   @220:8,R5L
   1453                  bufch = SCI0_RDR;
   \   2616  2EDD              MOV.B   @221:8,R6L
   1454                  ad_mode |= 0x01 ;                                               /* mark that receiving starts */
   \   2618  79010313          MOV.W   #ad_mode,R1
   \   261C  7D107000          BSET    #0,@R1
   1455                  if (tx_complete) {                                              /* ok to receive? */
   \   2620  6A090336          MOV.B   @tx_complete:16,R1L
   \   2624  4724              BEQ     ?0365
   \   2626            ?0364:
   1456                          rx_buff[rx_indx] = bufch;
   \   2626  6A0900EA          MOV.B   @rx_indx:16,R1L
   \   262A  F100              MOV.B   #0,R1H
   \   262C  6E9E0078          MOV.B   R6L,@(rx_buff,R1)
   1457                          if (++rx_indx >= RX_SIZE) {             /* check rx pointer */
   \   2630  6A0900EA          MOV.B   @rx_indx:16,R1L
   \   2634  8901              ADD.B   #1,R1L
   \   2636  6A8900EA          MOV.B   R1L,@rx_indx:16
   \   263A  A96E              CMP.B   #110,R1L
   \   263C  450C              BCS     ?0367
   \   263E            ?0366:
   1458                                  rx_indx = 1 ;
   \   263E  F901              MOV.B   #1,R1L
   \   2640  6A8900EA          MOV.B   R1L,@rx_indx:16
   1459                                  rx_hndx = 0 ;
   \   2644  F900              MOV.B   #0,R1L
   \   2646  6A8900EB          MOV.B   R1L,@rx_hndx:16
   \   264A            ?0367:
   \   264A            ?0365:
   1460                          }
   1461                  }
   1462                  SCI0_SSR = status & ~SSR_RDRF;                  /* Reset RDRF */
   \   264A  0CD9              MOV.B   R5L,R1L
   \   264C  E9BF              AND.B   #191,R1L
   \   264E  39DC              MOV.B   R1L,@220:8
   1463          }
   \   2650  6D76              POP     R6
   \   2652  6D75              POP     R5
   \   2654  6D71              POP     R1
   \   2656  5670              RTE
   1464          
   1465          
   1466          /*************************************************************************
   1467          *
   1468          *  Transmit interrupt routine  TX1
   1469          *
   1470          *  This routine is called on transmition on serial line 1
   1471          *
   1472          ****************************************************************************/
   1473          interrupt [SCI_TXI1] void Tx1Int(void)
   1474          {
   \   2658            Tx1Int:
   \   2658  6DF1              PUSH    R1
   \   265A  6DF6              PUSH    R6
   1475          
   1476                  char status;
   1477          
   1478                  status = SCI1_SSR;
   \   265C  2EE4              MOV.B   @228:8,R6L
   1479                  SCI1_TDR = 0;
   \   265E  F900              MOV.B   #0,R1L
   \   2660  39E3              MOV.B   R1L,@227:8
   1480                  SCI1_SSR = status & ~SSR_TDRE;  /* clear TDRE-flag */
   \   2662  0CE9              MOV.B   R6L,R1L
   \   2664  E97F              AND.B   #127,R1L
   \   2666  39E4              MOV.B   R1L,@228:8
   1481                  SCI1_SCR &= ~SCR_TIE;                                   /* Disable tx int */
   \   2668  7FE27270          BCLR    #7,@226:8
   1482          }
   \   266C  6D76              POP     R6
   \   266E  6D71              POP     R1
   \   2670  5670              RTE
   1483          
   1484          
   1485          /*************************************************************************
   1486          *
   1487          *  Error interrupt routine
   1488          *
   1489          *  Error on port 1 goes here.
   1490          *
   1491          *************************************************************************/
   1492          interrupt [SCI_ERI1] void Err1Int(void)
   1493          {
   \   2672            Err1Int:
   \   2672  6DF1              PUSH    R1
   \   2674  6DF6              PUSH    R6
   1494          
   1495                  char status;
   1496          
   1497                  status = SCI1_SSR;
   1498                  SCI1_SSR = status & ~(SSR_ORER | SSR_FER | SSR_PER);
   \   2676  29E4              MOV.B   @228:8,R1L
   \   2678  0C9E              MOV.B   R1L,R6L
   \   267A  E9C7              AND.B   #199,R1L
   \   267C  39E4              MOV.B   R1L,@228:8
   1499          
   1500          }
   \   267E  6D76              POP     R6
   \   2680  6D71              POP     R1
   \   2682  5670              RTE
   1501          
   1502          
   1503          /*************************************************************************
   1504          *
   1505          *  Receive interrupt routine  RX1
   1506          *
   1507          *  Char received on serial port 1
   1508          *
   1509          *************************************************************************/
   1510          interrupt [SCI_RXI1] void Rx1Int(void)
   1511          {
   \   2684            Rx1Int:
   \   2684  6DF1              PUSH    R1
   \   2686  6DF5              PUSH    R5
   \   2688  6DF6              PUSH    R6
   1512          
   1513                  char status, bufch;
   1514          
   1515                  status = SCI1_SSR;
   \   268A  2EE4              MOV.B   @228:8,R6L
   1516                  bufch  = SCI1_RDR;
   \   268C  2DE5              MOV.B   @229:8,R5L
   1517                  SCI1_SSR = status & ~SSR_RDRF;  /* Reset RDRF */
   \   268E  0CE9              MOV.B   R6L,R1L
   \   2690  E9BF              AND.B   #191,R1L
   \   2692  39E4              MOV.B   R1L,@228:8
   1518          }
   \   2694  6D76              POP     R6
   \   2696  6D75              POP     R5
   \   2698  6D71              POP     R1
   \   269A  5670              RTE
   1519          
   1520          
   1521          /*************************************************************************
   1522          *
   1523          *  MAIN ROUTINE
   1524          *
   1525          *************************************************************************/
   1526          int main(void)
   1527          {
   \   269C            main:
   1528            int           cnt ;
   1529          
   1530                  InitRegs();
   \   269C  5E000000          JSR     @InitRegs:16
   1531                  InitVar();
   \   26A0  5E00004C          JSR     @InitVar:16
   1532                  InitStartup();
   \   26A4  5E000174          JSR     @InitStartup:16
   1533          
   1534                  SCI0_SCR = 0x7c;                                                /* enable rx0/tx0 + rx0 interrupt */
   \   26A8  F97C              MOV.B   #124,R1L
   \   26AA  39DA              MOV.B   R1L,@218:8
   1535          
   1536                  CheckEepChannel()       ;                               /*ASt mark */
   \   26AC  5E000000          JSR     @CheckEepChannel:16
   \   26B0            ?0369:
   1537                  while (TRUE) {
   1538                          KickDog();
   \   26B0  5E0001BC          JSR     @KickDog:16
   1539                                                                            /* communication starts here */
   1540                          if (rx_indx > rx_hndx) {                        /* new char in buffer ? */
   \   26B4  6A0900EB          MOV.B   @rx_hndx:16,R1L
   \   26B8  6A0B00EA          MOV.B   @rx_indx:16,R3L
   \   26BC  1C9B              CMP.B   R1L,R3L
   \   26BE  4310              BLS     ?0372
   \   26C0            ?0371:
   1541                                  if (ReceiveRxPacket()) {
   \   26C0  5E002250          JSR     @ReceiveRxPacket:16
   \   26C4  0D11              MOV.W   R1,R1
   \   26C6  4708              BEQ     ?0374
   \   26C8            ?0373:
   1542                                          HandleRxPacket() ;                      /* Handle here */
   \   26C8  5E0021D8          JSR     @HandleRxPacket:16
   1543                                          ResetRxPointer() ;                      /* reset pointer */
   \   26CC  5E00214E          JSR     @ResetRxPointer:16
   \   26D0            ?0374:
   \   26D0            ?0372:
   1544                                  }
   1545                          }
   1546                          if (test_eep) {
   \   26D0  6A09033C          MOV.B   @test_eep:16,R1L
   \   26D4  470A              BEQ     ?0376
   \   26D6            ?0375:
   1547                                  TestEep() ;
   \   26D6  5E000000          JSR     @TestEep:16
   1548                                  test_eep = FALSE ;
   \   26DA  F900              MOV.B   #0,R1L
   \   26DC  6A89033C          MOV.B   R1L,@test_eep:16
   \   26E0            ?0376:
   1549                          }
   1550          /*              CheckConvert();                   */                            /* check new point */
   1551                  }                                                                                                       /* end while.. */
   1552          
   1553                  return 0 ;
   \   26E0  40CE              BRA     ?0369
   \   26E2  1911              SUB.W   R1,R1
   1554          }
   \   26E4  5470              RTS
   1555          
   1556          /* end program ******************************************************/
   1557          
   \   0000                    RSEG    CONST
   \   0000            crc:
   \   0000  0000              DC.W    0
   \   0002  005E              DC.W    94
   \   0004  00BC              DC.W    188
   \   0006  00E2              DC.W    226
   \   0008  0061              DC.W    97
   \   000A  003F              DC.W    63
   \   000C  00DD              DC.W    221
   \   000E  0083              DC.W    131
   \   0010  00C2              DC.W    194
   \   0012  009C              DC.W    156
   \   0014  007E              DC.W    126
   \   0016  0020              DC.W    32
   \   0018  00A3              DC.W    163
   \   001A  00FD              DC.W    253
   \   001C  001F              DC.W    31
   \   001E  0041              DC.W    65
   \   0020  009D              DC.W    157
   \   0022  00C3              DC.W    195
   \   0024  0021              DC.W    33
   \   0026  007F              DC.W    127
   \   0028  00FC              DC.W    252
   \   002A  00A2              DC.W    162
   \   002C  0040              DC.W    64
   \   002E  001E              DC.W    30
   \   0030  005F              DC.W    95
   \   0032  0001              DC.W    1
   \   0034  00E3              DC.W    227
   \   0036  00BD              DC.W    189
   \   0038  003E              DC.W    62
   \   003A  0060              DC.W    96
   \   003C  0082              DC.W    130
   \   003E  00DC              DC.W    220
   \   0040  0023              DC.W    35
   \   0042  007D              DC.W    125
   \   0044  009F              DC.W    159
   \   0046  00C1              DC.W    193
   \   0048  0042              DC.W    66
   \   004A  001C              DC.W    28
   \   004C  00FE              DC.W    254
   \   004E  00A0              DC.W    160
   \   0050  00E1              DC.W    225
   \   0052  00BF              DC.W    191
   \   0054  005D              DC.W    93
   \   0056  0003              DC.W    3
   \   0058  0080              DC.W    128
   \   005A  00DE              DC.W    222
   \   005C  003C              DC.W    60
   \   005E  0062              DC.W    98
   \   0060  00BE              DC.W    190
   \   0062  00E0              DC.W    224
   \   0064  0002              DC.W    2
   \   0066  005C              DC.W    92
   \   0068  00DF              DC.W    223
   \   006A  0081              DC.W    129
   \   006C  0063              DC.W    99
   \   006E  003D              DC.W    61
   \   0070  007C              DC.W    124
   \   0072  0022              DC.W    34
   \   0074  00C0              DC.W    192
   \   0076  009E              DC.W    158
   \   0078  001D              DC.W    29
   \   007A  0043              DC.W    67
   \   007C  00A1              DC.W    161
   \   007E  00FF              DC.W    255
   \   0080  0046              DC.W    70
   \   0082  0018              DC.W    24
   \   0084  00FA              DC.W    250
   \   0086  00A4              DC.W    164
   \   0088  0027              DC.W    39
   \   008A  0079              DC.W    121
   \   008C  009B              DC.W    155
   \   008E  00C5              DC.W    197
   \   0090  0084              DC.W    132
   \   0092  00DA              DC.W    218
   \   0094  0038              DC.W    56
   \   0096  0066              DC.W    102
   \   0098  00E5              DC.W    229
   \   009A  00BB              DC.W    187
   \   009C  0059              DC.W    89
   \   009E  0007              DC.W    7
   \   00A0  00DB              DC.W    219
   \   00A2  0085              DC.W    133
   \   00A4  0067              DC.W    103
   \   00A6  0039              DC.W    57
   \   00A8  00BA              DC.W    186
   \   00AA  00E4              DC.W    228
   \   00AC  0006              DC.W    6
   \   00AE  0058              DC.W    88
   \   00B0  0019              DC.W    25
   \   00B2  0047              DC.W    71
   \   00B4  00A5              DC.W    165
   \   00B6  00FB              DC.W    251
   \   00B8  0078              DC.W    120
   \   00BA  0026              DC.W    38
   \   00BC  00C4              DC.W    196
   \   00BE  009A              DC.W    154
   \   00C0  0065              DC.W    101
   \   00C2  003B              DC.W    59
   \   00C4  00D9              DC.W    217
   \   00C6  0087              DC.W    135
   \   00C8  0004              DC.W    4
   \   00CA  005A              DC.W    90
   \   00CC  00B8              DC.W    184
   \   00CE  00E6              DC.W    230
   \   00D0  00A7              DC.W    167
   \   00D2  00F9              DC.W    249
   \   00D4  001B              DC.W    27
   \   00D6  0045              DC.W    69
   \   00D8  00C6              DC.W    198
   \   00DA  0098              DC.W    152
   \   00DC  007A              DC.W    122
   \   00DE  0024              DC.W    36
   \   00E0  00F8              DC.W    248
   \   00E2  00A6              DC.W    166
   \   00E4  0044              DC.W    68
   \   00E6  001A              DC.W    26
   \   00E8  0099              DC.W    153
   \   00EA  00C7              DC.W    199
   \   00EC  0025              DC.W    37
   \   00EE  007B              DC.W    123
   \   00F0  003A              DC.W    58
   \   00F2  0064              DC.W    100
   \   00F4  0086              DC.W    134
   \   00F6  00D8              DC.W    216
   \   00F8  005B              DC.W    91
   \   00FA  0005              DC.W    5
   \   00FC  00E7              DC.W    231
   \   00FE  00B9              DC.W    185
   \   0100  008C              DC.W    140
   \   0102  00D2              DC.W    210
   \   0104  0030              DC.W    48
   \   0106  006E              DC.W    110
   \   0108  00ED              DC.W    237
   \   010A  00B3              DC.W    179
   \   010C  0051              DC.W    81
   \   010E  000F              DC.W    15
   \   0110  004E              DC.W    78
   \   0112  0010              DC.W    16
   \   0114  00F2              DC.W    242
   \   0116  00AC              DC.W    172
   \   0118  002F              DC.W    47
   \   011A  0071              DC.W    113
   \   011C  0093              DC.W    147
   \   011E  00CD              DC.W    205
   \   0120  0011              DC.W    17
   \   0122  004F              DC.W    79
   \   0124  00AD              DC.W    173
   \   0126  00F3              DC.W    243
   \   0128  0070              DC.W    112
   \   012A  002E              DC.W    46
   \   012C  00CC              DC.W    204
   \   012E  0092              DC.W    146
   \   0130  00D3              DC.W    211
   \   0132  008D              DC.W    141
   \   0134  006F              DC.W    111
   \   0136  0031              DC.W    49
   \   0138  00B2              DC.W    178
   \   013A  00EC              DC.W    236
   \   013C  000E              DC.W    14
   \   013E  0050              DC.W    80
   \   0140  00AF              DC.W    175
   \   0142  00F1              DC.W    241
   \   0144  0013              DC.W    19
   \   0146  004D              DC.W    77
   \   0148  00CE              DC.W    206
   \   014A  0090              DC.W    144
   \   014C  0072              DC.W    114
   \   014E  002C              DC.W    44
   \   0150  006D              DC.W    109
   \   0152  0033              DC.W    51
   \   0154  00D1              DC.W    209
   \   0156  008F              DC.W    143
   \   0158  000C              DC.W    12
   \   015A  0052              DC.W    82
   \   015C  00B0              DC.W    176
   \   015E  00EE              DC.W    238
   \   0160  0032              DC.W    50
   \   0162  006C              DC.W    108
   \   0164  008E              DC.W    142
   \   0166  00D0              DC.W    208
   \   0168  0053              DC.W    83
   \   016A  000D              DC.W    13
   \   016C  00EF              DC.W    239
   \   016E  00B1              DC.W    177
   \   0170  00F0              DC.W    240
   \   0172  00AE              DC.W    174
   \   0174  004C              DC.W    76
   \   0176  0012              DC.W    18
   \   0178  0091              DC.W    145
   \   017A  00CF              DC.W    207
   \   017C  002D              DC.W    45
   \   017E  0073              DC.W    115
   \   0180  00CA              DC.W    202
   \   0182  0094              DC.W    148
   \   0184  0076              DC.W    118
   \   0186  0028              DC.W    40
   \   0188  00AB              DC.W    171
   \   018A  00F5              DC.W    245
   \   018C  0017              DC.W    23
   \   018E  0049              DC.W    73
   \   0190  0008              DC.W    8
   \   0192  0056              DC.W    86
   \   0194  00B4              DC.W    180
   \   0196  00EA              DC.W    234
   \   0198  0069              DC.W    105
   \   019A  0037              DC.W    55
   \   019C  00D5              DC.W    213
   \   019E  008B              DC.W    139
   \   01A0  0057              DC.W    87
   \   01A2  0009              DC.W    9
   \   01A4  00EB              DC.W    235
   \   01A6  00B5              DC.W    181
   \   01A8  0036              DC.W    54
   \   01AA  0068              DC.W    104
   \   01AC  008A              DC.W    138
   \   01AE  00D4              DC.W    212
   \   01B0  0095              DC.W    149
   \   01B2  00CB              DC.W    203
   \   01B4  0029              DC.W    41
   \   01B6  0077              DC.W    119
   \   01B8  00F4              DC.W    244
   \   01BA  00AA              DC.W    170
   \   01BC  0048              DC.W    72
   \   01BE  0016              DC.W    22
   \   01C0  00E9              DC.W    233
   \   01C2  00B7              DC.W    183
   \   01C4  0055              DC.W    85
   \   01C6  000B              DC.W    11
   \   01C8  0088              DC.W    136
   \   01CA  00D6              DC.W    214
   \   01CC  0034              DC.W    52
   \   01CE  006A              DC.W    106
   \   01D0  002B              DC.W    43
   \   01D2  0075              DC.W    117
   \   01D4  0097              DC.W    151
   \   01D6  00C9              DC.W    201
   \   01D8  004A              DC.W    74
   \   01DA  0014              DC.W    20
   \   01DC  00F6              DC.W    246
   \   01DE  00A8              DC.W    168
   \   01E0  0074              DC.W    116
   \   01E2  002A              DC.W    42
   \   01E4  00C8              DC.W    200
   \   01E6  0096              DC.W    150
   \   01E8  0015              DC.W    21
   \   01EA  004B              DC.W    75
   \   01EC  00A9              DC.W    169
   \   01EE  00F7              DC.W    247
   \   01F0  00B6              DC.W    182
   \   01F2  00E8              DC.W    232
   \   01F4  000A              DC.W    10
   \   01F6  0054              DC.W    84
   \   01F8  00D7              DC.W    215
   \   01FA  0089              DC.W    137
   \   01FC  006B              DC.W    107
   \   01FE  0035              DC.W    53
   \   0000                    COMMON  INTVEC
   \   0008                    DS.B    8
   \   0008  2422              DC.W    Irq0Int
   \   000A  2424              DC.W    Irq1Int
   \   000C  245E              DC.W    Irq2Int
   \   0010                    DS.B    2
   \   0010  246A              DC.W    FrtcInt
   \   0016                    DS.B    4
   \   0016  2478              DC.W    FrtoInt
   \   001E                    DS.B    6
   \   001E  247E              DC.W    TimInt
   \   0024                    DS.B    4
   \   0024  25FC              DC.W    Err0Int
   \   0026  260E              DC.W    Rx0Int
   \   0028  25BA              DC.W    Tx0Int
   \   002A  2672              DC.W    Err1Int
   \   002C  2684              DC.W    Rx1Int
   \   002E  2658              DC.W    Tx1Int
   \   0000                    RSEG    UDATA
   \   0000            tx_buff:
   \   0078                    DS.B    120
   \   0078            rx_buff:
   \   00E6                    DS.B    110
   \   00E6            tx_indx:
   \   00E7                    DS.B    1
   \   00E7            tx_bytes:
   \   00E8                    DS.B    1
   \   00E8            tx_tail:
   \   00E9                    DS.B    1
   \   00E9            wait_for_pc:
   \   00EA                    DS.B    1
   \   00EA            rx_indx:
   \   00EB                    DS.B    1
   \   00EB            rx_hndx:
   \   00EC                    DS.B    1
   \   00EC            rx_start:
   \   00ED                    DS.B    1
   \   00ED            rx_counter:
   \   00EE                    DS.B    1
   \   00EE            rx_packlen:
   \   00EF                    DS.B    1
   \   00EF            rx_timeout:
   \   00F0                    DS.B    1
   \   00F0            sens_data:
   \   00F8                    DS.B    8
   \   00F8            sens_nl1:
   \   00F9                    DS.B    1
   \   00F9            sens_nl2:
   \   00FA                    DS.B    1
   \   00FA            packed_data:
   \   023A                    DS.B    320
   \   023A            eep_status:
   \   023B                    DS.B    1
   \   023B            time_b_temp:
   \   023C                    DS.B    1
   \   023C            time_b_cnt:
   \   023D                    DS.B    1
   \   023D            time_e_cnt:
   \   023E                    DS.B    1
   \   023E            time_c_cnt:
   \   0240                    DS.B    2
   \   0240            ad_timeout_cnt:
   \   0242                    DS.B    2
   \   0242            sec_cnt:
   \   0244                    DS.B    2
   \   0244            curr_sens_data:
   \   0246                    DS.B    2
   \   0246            cal_data:
   \   0262                    DS.B    28
   \   0262            raw_data:
   \   027E                    DS.B    28
   \   027E            mes_data:
   \   02B6                    DS.B    56
   \   02B6            gain:
   \   02EE                    DS.B    56
   \   02EE            offset:
   \   030A                    DS.B    28
   \   030A            cal_gain:
   \   030E                    DS.B    4
   \   030E            not_mes_data:
   \   030F                    DS.B    1
   \   030F            not_raw_data:
   \   0310                    DS.B    1
   \   0310            not_cal_data:
   \   0311                    DS.B    1
   \   0311            curr_ad_ch:
   \   0312                    DS.B    1
   \   0312            ad_state:
   \   0313                    DS.B    1
   \   0313            ad_mode:
   \   0314                    DS.B    1
   \   0314            ms_delay_cnt:
   \   0318                    DS.B    4
   \   0318            ad_settling:
   \   031A                    DS.B    2
   \   031A            ad_gain:
   \   031B                    DS.B    1
   \   031B            ch_stat:
   \   0329                    DS.B    14
   \   0329            eep_type:
   \   0331                    DS.B    8
   \   0331            p_filter:
   \   0332                    DS.B    1
   \   0332            t_filter:
   \   0333                    DS.B    1
   \   0333            o_filter:
   \   0334                    DS.B    1
   \   0334            my_address:
   \   0335                    DS.B    1
   \   0335            rx_state:
   \   0336                    DS.B    1
   \   0336            tx_complete:
   \   0337                    DS.B    1
   \   0337            sendtail:
   \   0338                    DS.B    1
   \   0338            display:
   \   033C                    DS.B    4
   \   033C            test_eep:
   \   033D                    DS.B    1
   \   033D                    END

Errors: none
Warnings: none
Code size: 9958
Constant size: 560
Static variable size: Data(829) Iram(0)

