##############################################################################
#                                                                            #
# IAR ARM ANSI C/C++ Compiler V4.42A/W32               14/Sep/2022  15:19:59 #
# Copyright 1999-2005 IAR Systems. All rights reserved.                      #
#                                                                            #
#    Cpu mode        =  interwork                                            #
#    Endian          =  little                                               #
#    Stack alignment =  4                                                    #
#    Source file     =  D:\S2Prog\Shared\Src\TankWashingCalcParameters.cpp   #
#    Command line    =  D:\S2Prog\Shared\Src\TankWashingCalcParameters.cpp   #
#                       --fpu None -D OS_LIBMODE_SP -D CPU_S3C2410 -D        #
#                       OS_RAMVECT=0 -D OS_UART=-1 -D S2TXU -D USE_LZO=1 -D  #
#                       __ARM_LIBRARY__ -D WATCHDOG=1 -D NETWORK=1 -lCN      #
#                       D:\S2Prog\TXU\Debug\List\ -o                         #
#                       D:\S2Prog\TXU\Debug\Obj\ -z9 --debug --cpu_mode arm  #
#                       --endian little --cpu ARM920T --stack_align 4        #
#                       --interwork -e --enable_multibytes --eec++           #
#                       --dlib_config "C:\Program Files (x86)\IAR            #
#                       Systems\Embedded Workbench                           #
#                       4.0\arm\LIB\dl4tpainl8n.h" -I                        #
#                       D:\S2Prog\TXU\GUI\CORE\ -I D:\S2Prog\TXU\GUI\WM\ -I  #
#                       D:\S2Prog\TXU\GUI\WIDGET\ -I D:\S2Prog\TXU\CONFIG\   #
#                       -I D:\S2Prog\TXU\INC\ -I D:\S2Prog\TXU\..\SHARED\INC #
#                       \ -I D:\S2Prog\TXU\..\SHARED\SRC\ -I                 #
#                       D:\S2Prog\TXU\..\SHARED\LZO\minilzo.210\ -I          #
#                       D:\S2Prog\TXU\lwip-1.4.1\src\include\ -I             #
#                       D:\S2Prog\TXU\lwip-1.4.1\src\include\ipv4\ -I        #
#                       D:\S2Prog\TXU\lwip-1.4.1\src\ -I                     #
#                       D:\S2Prog\TXU\..\SHARED\Database\ -I                 #
#                       D:\S2Prog\TXU\src\ -I "C:\Program Files (x86)\IAR    #
#                       Systems\Embedded Workbench 4.0\arm\INC\"             #
#                       --inline_threshold=2                                 #
#    List file       =  D:\S2Prog\TXU\Debug\List\TankWashingCalcParameters.l #
#                       st                                                   #
#    Object file     =  D:\S2Prog\TXU\Debug\Obj\TankWashingCalcParameters.r7 #
#                       9                                                    #
#                                                                            #
#                                                                            #
##############################################################################

D:\S2Prog\Shared\Src\TankWashingCalcParameters.cpp
      1          //---------------------------------------------------------------------------
      2          
      3          #pragma hdrstop
      4          
      5          #include "TankWashingCalcParameters.h"
      6          #include <cstdlib>
      7          //---------------------------------------------------------------------------
      8          #ifdef ANWIN
      9          #pragma package(smart_init)
     10          #endif
     11          

   \                                 In segment DATA_I, align 4, align-sorted
     12          TankWashingMachineWaterUseParams TankWashingCalcResources::TankWashingMachineParameterArray[] =
   \                     ??TankWashingMachineParameterArray:
   \   00000000                      DS8 336
   \   00000150                      REQUIRE `?<Initializer for TankWashingMachineParameterA`
     13          {
     14          	{100, 6, 0.5, 0.25},
     15          	{100, 7, 1.8, 0.28},
     16          	{100, 8, 2.9, 0.31},
     17          	{100, 9, 4.0, 0.36},
     18          	{100, 10, 5.0, 0.40},
     19          	{100, 11, 6.3, 0.55},
     20          	{100, 12, 7.4, 0.68},
     21          
     22          	{100, 18, 22.33, 1.75},
     23          	{100, 20, 22.67, 2.75},
     24          	{100, 22, 25.67, 3.25},
     25          	{100, 24, 30.67, 3.50},
     26          	{100, 26, 34.33, 4.00},
     27          	{100, 28, 38.00, 4.50},
     28          	{100, 30, 41.33, 5.00},
     29          
     30          };

   \                                 In segment DATA_C, align 4, align-sorted
     31          const int TankWashingCalcResources::TankWashingMachineParameterArray_Length = 13;
   \                     ??TankWashingMachineParameterArray_Length:
   \   00000000   0D000000           DC32 13
     32          
     33          
     34          
     35          /// Find struct in array of tank washing machine parameters.
     36          /// Does a binary search of the parameters array, which is fast, ~O(log N)
     37          /// If no match is found then NULL is returned.
     38          ///

   \                                 In segment CODE, align 4, keep-with-next
     39          TankWashingMachineWaterUseParams*
     40          TankWashingCalcResources::FindParameters(int machineTypeId, int nozzleMM)
     41          {
   \                     ??FindParameters:
   \   00000000   10002DE9           PUSH     {R4}
     42          	TankWashingMachineWaterUseParams *returnValue = NULL;
   \   00000004   0000A0E3           MOV      R0,#+0
     43          
     44          	int minIndex = 0;											// range min index inclusive
     45          	int maxIndex = TankWashingMachineParameterArray_Length;		// range max index exclusive
     46          	for (int i = 0; !returnValue && i <maxIndex; i++){
   \   00000008   0030A0E3           MOV      R3,#+0
     47          		TankWashingMachineWaterUseParams *cursor = &TankWashingMachineParameterArray[i];
   \                     ??FindParameters_1:
   \   0000000C   34C09FE5           LDR      R12,??FindParameters_2  ;; ??TankWashingMachineParameterArray
   \   00000010   1840A0E3           MOV      R4,#+24
   \   00000014   94C32CE0           MLA      R12,R4,R3,R12
     48          		if (cursor->machineTypeId == machineTypeId && cursor->nozzleMM == nozzleMM){
   \   00000018   00409CE5           LDR      R4,[R12, #+0]
     49          			returnValue = cursor;
     50          		}
     51          
     52          	}
   \   0000001C   013083E2           ADD      R3,R3,#+1
   \   00000020   010054E1           CMP      R4,R1
   \   00000024   04409C05           LDREQ    R4,[R12, #+4]
   \   00000028   02005401           CMPEQ    R4,R2
   \   0000002C   0C00A001           MOVEQ    R0,R12
   \   00000030   000050E3           CMP      R0,#+0
   \   00000034   0100001A           BNE      ??FindParameters_3
   \   00000038   0D0053E3           CMP      R3,#+13
   \   0000003C   F2FFFFBA           BLT      ??FindParameters_1
     53          	return returnValue;
   \                     ??FindParameters_3:
   \   00000040   1000BDE8           POP      {R4}
   \   00000044   1EFF2FE1           BX       LR               ;; return
   \                     ??FindParameters_2:
   \   00000048   ........           DC32     ??TankWashingMachineParameterArray
     54          }

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for TankWashingMachineParameterA`:
   \   00000000   640000000600       DC32 100, 6, 0H, 3FE00000H, 0H, 3FD00000H, 100, 7, 0CCCCCCCDH
   \              000000000000
   \              0000E03F0000
   \              00000000D03F
   \              640000000700
   \              0000CDCCCCCC
   \   00000024   CCCCFC3FEC51       DC32 3FFCCCCCH, 1EB851ECH, 3FD1EB85H, 100, 8, 33333333H, 40073333H
   \              B81E85EBD13F
   \              640000000800
   \              000033333333
   \              33330740    
   \   00000040   D7A3703D0AD7       DC32 3D70A3D7H, 3FD3D70AH, 100, 9, 0H, 40100000H, 70A3D70AH, 3FD70A3DH
   \              D33F64000000
   \              090000000000
   \              000000001040
   \              0AD7A3703D0A
   \              D73F        
   \   00000060   640000000A00       DC32 100, 10, 0H, 40140000H, 9999999AH, 3FD99999H, 100, 11, 33333333H
   \              000000000000
   \              000014409A99
   \              99999999D93F
   \              640000000B00
   \              000033333333
   \   00000084   333319409A99       DC32 40193333H, 9999999AH, 3FE19999H, 100, 12, 9999999AH, 401D9999H
   \              99999999E13F
   \              640000000C00
   \              00009A999999
   \              99991D40    
   \   000000A0   C3F5285C8FC2       DC32 5C28F5C3H, 3FE5C28FH, 100, 18, 0E147AE14H, 4036547AH, 0H
   \              E53F64000000
   \              1200000014AE
   \              47E17A543640
   \              00000000    
   \   000000BC   0000FC3F6400       DC32 3FFC0000H, 100, 20, 1EB851ECH, 4036AB85H, 0H, 40060000H, 100, 22
   \              000014000000
   \              EC51B81E85AB
   \              364000000000
   \              000006406400
   \              000016000000
   \   000000E0   EC51B81E85AB       DC32 1EB851ECH, 4039AB85H, 0H, 400A0000H, 100, 24, 1EB851ECH, 403EAB85H
   \              394000000000
   \              00000A406400
   \              000018000000
   \              EC51B81E85AB
   \              3E40        
   \   00000100   000000000000       DC32 0H, 400C0000H, 100, 26, 70A3D70AH, 40412A3DH, 0H, 40100000H, 100
   \              0C4064000000
   \              1A0000000AD7
   \              A3703D2A4140
   \              000000000000
   \              104064000000
   \   00000124   1C0000000000       DC32 28, 0H, 40430000H, 0H, 40120000H, 100, 30, 70A3D70AH, 4044AA3DH
   \              000000004340
   \              000000000000
   \              124064000000
   \              1E0000000AD7
   \              A3703DAA4440
   \   00000148   000000000000       DC32 0H, 40140000H
   \              1440        
     55          

   Maximum stack usage in bytes:

     Function                       CSTACK
     --------                       ------
     TankWashingCalcResources::FindParameters(int, int)
                                        4


   Segment part sizes:

     Function/Label                 Bytes
     --------------                 -----
     TankWashingCalcResources::TankWashingMachineParameterArray
                                     336
     TankWashingCalcResources::TankWashingMachineParameterArray_Length
                                       4
     TankWashingCalcResources::FindParameters(int, int)
                                      76
     ?<Initializer for TankWashingMachineParameterA
                                     336
      Others                          16

 
  80 bytes in segment CODE
   4 bytes in segment DATA_C
 336 bytes in segment DATA_I
 336 bytes in segment DATA_ID
  12 bytes in segment INITTAB
 
  76 bytes of CODE  memory (+ 16 bytes shared)
 340 bytes of CONST memory
 336 bytes of DATA  memory

Errors: none
Warnings: 1
